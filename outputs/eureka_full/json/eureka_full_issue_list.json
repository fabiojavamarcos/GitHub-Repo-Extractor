[["1", "Provide better documentation for (Non-AWS) datacenter configuration", "David Trott", "dtrott", "12/06/12, 06:23:59 PM", "I am trying to configure two Eureka servers on a pair of machines on a LAN to verify inter-server communication is configured correctly.\n\nIt would be extremely helpful to have a sample configuration for this configuration so that I can verify everything is setup/working correctly.", "The documentation may not discuss too much about non-AWS environments, but it is pretty similar to AWS environment, except the EIP part. I will revisit this again\ntomorrow to see if I can provide some more details.\n\n---\n\nFrom: David Trott [notifications@github.com]\nSent: Monday, October 15, 2012 6:09 PM\nTo: Netflix/eureka\nSubject: [eureka] Provide better documentation for (Non-AWS) datacenter configuration (#1)\n\nI am trying to configure two Eureka servers on a pair of machines on a LAN to verify inter-server communication is configured correctly.\n\nIt would be extremely helpful to have a sample configuration for this configuration so that I can verify everything is setup/working correctly.\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/Netflix/eureka/issues/1.\n =||= Thanks, David. I think I found the problem. There was a bug related to bootstrapping non-AWS data centers the first time due to a recent priming feature we introduced which was preventing the application from deploying correctly. I fixed it and release a new revision. Please retain the property configurations you have already and get the new archive(1.1.16) and then give it a try. Your problem should be fixed. I also updated the documentation to make the server configurations little more clear - https://github.com/Netflix/eureka/wiki/Getting-started-with-Eureka\n\nUnfortunately, I cannot change the default port number now since I may break a few.\n\nThe following error was the key :\n\n2012-10-16 13:06:26,683 ERROR com.netflix.eureka.PeerAwareInstanceRegistry:399 [localhost-startStop-1] [openForTraffic] Could not contact null\njava.lang.NullPointerException\n    at com.netflix.eureka.PeerAwareInstanceRegistry.openForTraffic(PeerAwareInstanceRegistry.java:373)\n    at com.netflix.eureka.EurekaBootStrap.contextInitialized(EurekaBootStrap.java:105)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)\n    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1105)\n    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1664)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\n    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:138)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:662)\n =||= "], ["2", "\"Gold bars adventure\" Eureka logo", "Joe Sondow", "joesondow", "12/25/12, 09:55:06 PM", "For use in documentation, perhaps in Eureka GUI", "NaN"], ["3", "Amazon Route53 requires quotes around the values of DNS TXT records.", "Eric Dowd", "ericdowd", "12/24/12, 01:17:33 AM", " Will now strip leading and traling quote from TXT record when reading it.", "Hi,\n\nI'm wondering if something is different about how you are storing these records in Route53. We also store the information in Route53 but store the value as for e.g.. \"a\" \"b\" \"c\".\n\nWhen we retrieve it, the DnsContextFactory retrieves the values without quotes and a split with a space works perfectly.\n =||= Ah. That explains quite a bit. I put it in as \"a b c\". Fortunately easy\nchange on my end to fix the DNS records. I guess it shows if there are two\nways of doing something and one way is wrong, someone will inevitably do it\nthe wrong way :)\n\nOn Thursday, December 20, 2012, karthik-vn wrote:\n\n> Hi,\n> \n> I'm wondering if something is different about how you are storing these\n> records in Route53. We also store the information in Route53 but store the\n> value as for e.g.. \"a\" \"b\" \"c\".\n> \n> When we retrieve it, the DnsContextFactory retrieves the values without\n> quotes and a split with a space works perfectly.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/Netflix/eureka/pull/3#issuecomment-11577122.\n =||= Closing this as this works for you.\n =||= "], ["4", "eureka.port appears to be pulling double duty:", "Eric Dowd", "ericdowd", "12/25/12, 09:48:33 PM", "both telling what port to register as and what port the eureka server is listening on. Changed the properties that deal with DNS discovery of eureka servers to be eureka.eurekaServer.<property>", "It does seem like including the \"eurekaServer\" will make it clear that it is not the client's information but the server's information. So, I will try to merge this information in.\n =||= "], ["5", "Use IAM role as fallback when AWS credentials are not provided", "Eric Dowd", "ericdowd", "03/11/13, 09:15:15 PM", "NaN", "What's the state of this pull request? I'd really like to have Eureka lookup its credentials via its iam-role.\n =||= Yes, it is in my to-do list. We had an internal conflict with aws-jdk version earlier. Will try again this week.\n\nSent from my iPhone\n\nOn Mar 10, 2013, at 5:49 PM, \"Trotter Cashion\" <notifications@github.com<mailto:notifications@github.com>> wrote:\n\nWhat's the state of this pull request? I'd really like to have Eureka lookup its credentials via its iam-role.\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/Netflix/eureka/pull/5#issuecomment-14693288.\n =||= I merged in this pull request after upgrading aws-java-sdk. I hope this worked for you.\n\n---\n\nFrom: Karthik Ranganathan\nSent: Monday, March 11, 2013 12:13 AM\nTo: Netflix/eureka\nCc: Netflix/eureka\nSubject: Re: [eureka] Use IAM role as fallback when AWS credentials are not provided (#5)\n\nYes, it is in my to-do list. We had an internal conflict with aws-jdk version earlier. Will try again this week.\n\nSent from my iPhone\n\nOn Mar 10, 2013, at 5:49 PM, \"Trotter Cashion\" <notifications@github.com<mailto:notifications@github.com>> wrote:\n\nWhat's the state of this pull request? I'd really like to have Eureka lookup its credentials via its iam-role.\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/Netflix/eureka/pull/5#issuecomment-14693288.\n =||= Thank you, @karthik-vn. I'll test it out later this week.\n =||= @karthik-vn I was able to get it working.  Thx!\n =||= Cool. Thanks for getting back to me.\n\nOn Wed, Apr 17, 2013 at 3:31 PM, Aaron Feng notifications@github.comwrote:\n\n> @karthik-vn https://github.com/karthik-vn I was able to get it working.\n> Thx!\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/Netflix/eureka/pull/5#issuecomment-16539884\n> .\n =||= "], ["6", "Isolate replication events (primarily renewals) from one peer node from affecting the other peer nodes", null, "karthik-vn", "12/25/12, 09:48:02 PM", "Currently, the replication pool is shared across all peer nodes and hence if one of the peers go down it severely affects the ability to replicate to other nodes.\n\nMove the renewals to a separate pool for its peer node so that a peer going down does not affect other peers in an adverse way.", "New and improved replication pipeline\n\n1) One per peer per action\n2) Taking down peers do not affect replication to other peers.\n3) Indefinite retries during network timeouts because of the above isolation.\n4) Replication Events hanging around for more than 30 s automatically removed.\n5) On AWS, it immediately represents a 5X increase in replication scalability.\n6) The new model lends itself pretty easily to future batching of events which further increases scalability depending on the batch size \n\nhttps://github.com/Netflix/eureka/commit/7af3a79a7f4e5969096b030b628f9ead1bd06c66\n =||= "], ["7", "Upgrading to the latest gradle-template", "Justin Ryan", "quidryan", "12/29/12, 09:00:33 PM", "This includes the javadoc and sources changes, and brings eureka up to gradle-template style-wise. I fixed some tabs in build.gradle. \n\nI'm a little concerned with the delete and copy directly in eureka-server section. These are running outside of an actually task and not part a tasks lifecycle. Meaning it'll run when the script is being parsed, no work should done at this stage. It probably only works after a build, e.g. right after a clean, it wouldn't do anything. Likewise the directory structure of eureka-server is pretty out of line with gradle convention, we should sit down sometime to clean it up.", "NaN"], ["8", "Docfix: remove extra spaces, fix bullets", "Blake Gentry", "bgentry", "12/31/12, 09:58:10 PM", "NaN", "NaN"], ["9", "Cannot bootstrap eureka server", "Eric Dowd", "ericdowd", "01/09/13, 08:28:22 AM", "Getting the following issue when trying to start up eureka server: \n\nDec 31, 2012 4:02:51 AM org.apache.catalina.core.StandardContext listenerStart\nSEVERE: Exception sending context initialized event to listener instance of class com.netflix.eureka.EurekaBootStrap\njava.lang.RuntimeException: Cannot bootstrap eureka server :\n        at com.netflix.eureka.EurekaBootStrap.contextInitialized(EurekaBootStrap.java:120)\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:968)\n        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1646)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\n        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:166)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n        at java.lang.Thread.run(Thread.java:679)\nCaused by: java.lang.ExceptionInInitializerError\n        at com.netflix.eureka.EurekaBootStrap.contextInitialized(EurekaBootStrap.java:100)\n        ... 14 more\nCaused by: java.lang.IllegalStateException: java.lang.NullPointerException\n        at com.netflix.eureka.PeerAwareInstanceRegistry.setupPeerEurekaNodes(PeerAwareInstanceRegistry.java:197)\n        at com.netflix.eureka.PeerAwareInstanceRegistry.init(PeerAwareInstanceRegistry.java:150)\n        at com.netflix.eureka.PeerAwareInstanceRegistry.<init>(PeerAwareInstanceRegistry.java:138)\n        at com.netflix.eureka.PeerAwareInstanceRegistry.<clinit>(PeerAwareInstanceRegistry.java:124)\n        ... 15 more\nCaused by: java.lang.NullPointerException\n        at com.netflix.logging.messaging.MessageBatcher.<init>(MessageBatcher.java:136)\n        at com.netflix.logging.messaging.BatcherFactory.createBatcher(BatcherFactory.java:70)\n        at com.netflix.eureka.cluster.PeerEurekaNode.getBatcher(PeerEurekaNode.java:577)\n        at com.netflix.eureka.cluster.PeerEurekaNode.<init>(PeerEurekaNode.java:88)\n        at com.netflix.eureka.PeerAwareInstanceRegistry.updatePeerEurekaNodes(PeerAwareInstanceRegistry.java:213)\n        at com.netflix.eureka.PeerAwareInstanceRegistry.setupPeerEurekaNodes(PeerAwareInstanceRegistry.java:181)\n        ... 18 more\n\nFull catalina.out: https://gist.github.com/4417295", "I'm looking into the problem...\n =||= I'm still not able to reproduce the problem.. But it does look like there is a problem. I will update you by EOD tomorrow.\n =||= If it will help, created an AMI that reproduces the problem, ami-eb8a0482 in us-east-1. Based off Amazon Linux 2012.09, so log in with ec2-user. AWS credentials need to be set in eureka-server.properties.\n\nhttps://gist.github.com/4423040 has the description of how I set it up.\n =||= Thanks. I'm able to reproduce the issue and will check in a fix soon. We had some custom netflix configurations hiding the bug for us.\n\nI'm waiting for the latest blitz4j library to show up in the maven library and once that shows up I will check in the fix.\n =||= BTW, I will have to rollback this change https://github.com/Netflix/eureka/commit/68acc47b82191ff0be2f2c418b209e8fe21e5c87 before the release as I realized the name has been used quite a bit and this might break a few things. May be we will have make this backward compatible too with the old property.\n =||= It is a bit of a relief, I was afraid I misconfigured something again. As for the change rollback, makes sense. Though I am curious, if the eureka server is listening on port 8080 and I want to register a service on port 80, how would I do that? Looking at the documentation and what I've gotten from looking at the code, it seems like in eureka-client.properties they both would have eureka.port = 8080 (for the server) and eureka.port = 80 (for registering the service)\n =||= Is this service you are registering running on the same host as the eureka server? \n\nAs far as eureka server is concerned, the register port and listen port would always be the same and it is identified by the property eureka.port in eureka-client.properties.\n\nI can't think of a scenario where you would listen in a different port than the one advertised (registered).\n =||= BTW, I have already fixed this issue. With the latest change your problem should go away. The binary will take sometime to show up. Please let me know if this fixes your issue.\n =||= It would be a client service on a different server. For example with the demo service, in eureka-server/conf/sampleservice/sample-eureka-service.properties, if I wanted to have it listen on port 8001 for the service and have the eureka server listen on port 8080 on a separate server\n =||= You can do that by specifying eureka.port in eureka-client.properties both the server and the service. There will be 2 eureka-client.properties one for the eureka server and one for the service. For example,\n\nthe server configuration might be something like. This will register the client part of the server (and advertises it to other peers)\n\neureka.name=eureka-server\neureka.port=8080\n\nThe service configuration will be something like\n\neureka.name=myservice\neureka.port=8001\n\nHence, there will be 2 different sets of eureka-client.properties in this situation. Please let me know if this clarifies the confusion.\n =||= BTW, You can see the example set up here https://github.com/Netflix/eureka/wiki/Running-the-Demo-Application. And in the run configurations, I have specified an example where in I change the name of the eureka-client.properties by specifying\n\n-Deureka.client.props\n\nhttps://github.com/Netflix/eureka/blob/master/eureka-server/runservice.sh\nhttps://github.com/Netflix/eureka/blob/master/eureka-server/runclient.sh\n\nThe above system property -Deureka.client.props is not needed, if you have your configurations in eureka-client.properties.\n =||= Okay, I'm following you, I think. I will give it a shot. Thanks\n =||= OK, I see the confusion now. For the \"service\", you need different sets of ports eureka.port represents both the advertising port and the port where eureka server runs. Internally, here in netflix we map the namespaces to be different and hence there is no problem.\n\nThis can be overcome by specifying the namespace of your choice to https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/appinfo/CloudInstanceConfig.java\n\nand \n\nhttps://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/appinfo/EurekaInstanceConfig.java\n\nMeanwhile, I will try to incorporate your earlier change so as to reduce the confusion.\n =||= Ah yes! I get it now. Thanks :)\n =||= Can bootstrap now. So closing the issue\n =||= BTW, if you have not already noticed - I merged your change https://github.com/Netflix/eureka/commit/68acc47b82191ff0be2f2c418b209e8fe21e5c87 by providing backward compatibility now.\n =||= "], ["10", "Support other AWS region as fallback", null, "karthik-vn", "01/31/13, 11:04:26 PM", "Latency and cost may sometimes force applications to be run on one AWS region and then fallback to applications for other region. \n\nThere should be support for region fallback if an application does not exist in one region if the fallback region is configured.", "This is now supported with https://github.com/Netflix/eureka/commit/26816f32873bb2f6cd4c75b464d2ad831c9b74d4\n =||= "], ["11", "Content-Type with charset=utf-8 fails", "Tyson Stewart", "tysonstewart", "01/18/13, 01:54:09 AM", "When I attempt to POST to /v2/apps/APPID, if the Content-Type request header is \"application/json; charset=utf-8\", the application throws an exception. If the header is simply \"application/json\", it works as expected. This is on [1.1.72](https://github.com/Netflix/eureka/tree/eureka-1.1.72).\n\nHere is the stack trace for the failing scenario:\n\n```\njava.lang.NullPointerException\n    com.netflix.eureka.PeerAwareInstanceRegistry.register(PeerAwareInstanceRegistry.java:444)\n    com.netflix.eureka.resources.ApplicationResource.addInstance(ApplicationResource.java:124)\n    sun.reflect.GeneratedMethodAccessor39.invoke(Unknown Source)\n    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    java.lang.reflect.Method.invoke(Unknown Source)\n    com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)\n    com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$VoidOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:167)\n    com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)\n    com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)\n    com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)\n    com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\n    com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)\n    com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\n    com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)\n    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)\n    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)\n    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)\n    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)\n    com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)\n    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)\n    com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:895)\n    com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:843)\n    com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:804)\n    com.netflix.eureka.StatusFilter.doFilter(StatusFilter.java:68)\n```", "HI,\n\nDo you have any more stack trace? Or is that all?\n =||= That's the trace from the response message. Here's the stack trace from the Tomcat logs. Doesn't look much more useful.\n\n```\nJan 16, 2013 4:55:33 AM com.sun.jersey.spi.container.ContainerResponse mapMappableContainerException\nSEVERE: The RuntimeException could not be mapped to a response, re-throwing to the HTTP container\njava.lang.NullPointerException\n    at com.netflix.eureka.PeerAwareInstanceRegistry.register(PeerAwareInstanceRegistry.java:444)\n    at com.netflix.eureka.resources.ApplicationResource.addInstance(ApplicationResource.java:124)\n    at sun.reflect.GeneratedMethodAccessor39.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)\n    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$VoidOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:167)\n    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)\n    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)\n    at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)\n    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\n    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)\n    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\n    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)\n    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)\n    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)\n    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)\n    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)\n    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)\n    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)\n    at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:895)\n    at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:843)\n    at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:804)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at com.netflix.eureka.StatusFilter.doFilter(StatusFilter.java:68)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\n    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)\n    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\n```\n =||= We will try to reproduce this and get back to you.\n =||= Was able to reproduce it. And it has been fixed by this change list https://github.com/Netflix/eureka/commit/3e8cfd3bde5879a5a70442f844838d408db25903\n\nPlease let me know if it works for you and then we can close the issue.\n =||= Confirmed. Fixed! Thanks!\n =||= "], ["12", "Request: REST interface for updating metadata", "Tyson Stewart", "tysonstewart", "01/18/13, 02:01:40 AM", "As far as I can tell, the only way to update metadata for a service is to re-register the service. It would be super handy for me if there existed a PUT endpoint similar to the {...}/status?value= endpoint that could be used to update the metadata, in part or in whole.", "Makes sense. I will try to get to it today.\n\nOn Jan 17, 2013, at 9:04 AM, \"Tyson Stewart\" <notifications@github.com<mailto:notifications@github.com>> wrote:\n\nAs far as I can tell, the only way to update metadata for a service is to re-register the service. It would be super handy for me if there existed a PUT endpoint similar to the {...}/status?value= endpoint that could be used to update the metadata, in part or in whole.\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/Netflix/eureka/issues/12.\n =||= Awesome! Thanks!\n =||= I fixed this with this change list :https://github.com/Netflix/eureka/commit/6feaa10f315e456170905fc6bbc1f01c2ffb4e42\n\nGive it a try: Example below\n\ncurl -X PUT http://localhost/discovery/v2/apps/APIPROXY/i-8a59f494/metadata?key1=value1&key2=value2\n =||= Works perfectly. Thanks!\n =||= "], ["13", "Failed to read artifact descriptor for com.netflix.servo:servo-core:jar:0.4.13", "Chris Fregly", "cfregly", "01/30/13, 04:52:55 PM", "karthik-\n\ni'm working on an end-to-end reference app that uses a lot of the Netflix OSS components and i'm having trouble integrating the latest build of eureka.\n\nyou can find the reference app here, btw:  https://github.com/cfregly/refapp\n\nis there any known issue around depending on an older, unreleased version (0.4.13) of servo-core?\n\nto reproduce, just uncomment out the eureka-core dependency in refapp-core/pom.xml and do a maven build.\n\nanother piece of info:  eureka-client by itself seems to be fine.  it's only when either eureka-server, eureka-core, or eureka-resources are introduced.\n\ni tried the latest SNAPSHOT from source and it's giving the same error.\n\ni also tried the usual rm -rf .m2/repository directory, etc.\n\ni wanted to check with you before i spend more time digging into the dependencies.\n\nany guidance would be helpful.\n\nthanks!\n\n-chris", "Chris,\n\nThere are no known issues with the servo 0.4.13. If you can tell me how exactly I can reproduce the issue (i.e.) the exact steps for doing the maven build, I will try to see why the problem happens.\n\nI just verified that the gradle build for eureka works fine.\nThanks.\n =||= i've added build instructions to Refapp's README.md:  https://github.com/cfregly/refapp#how-to-build\n\nyou'll want to uncomment out eureka-core from the refapp-core/pom.xml before building to reproduce the error.\n\nbut i just realized that i only need the eureka-client dependency in my eureka clients (refapp-middletier, in this case).  in other words, i don't need the eureka-server, eureka-core, eureka-resources dependencies in my eureka clients - just the eureka-client dependency which works fine.\n\nso unless you want to investigate this non-standard dependency configuration further, we can close this out.\n\nthanks, karthik!\n\n-chris\n =||= reopening based on https://github.com/Netflix/ribbon/issues/3\n =||= Chris,\n\nI update eureka to use servo 0.4.15. Can you do a build and see if that solves the problem. I will release the latest version to maven central soon.\n =||= looks good, karthik.  i pulled the latest from source, installed eureka-core-1.1.74-SNAPSHOT.jar to my local maven repo, and re-ran my build and it's successful.\n\nnote:  in my pom configuration, i'm explicitly declaring servo-core-0.4.32.jar because i need StatsTimer (not available in 0.4.15, apparently).  \n\nmaven is doing the proper thing and pulling in this later 0.4.32 version versus the older, transitive 0.4.15 version declared in your latest eureka-core-1.1.74-SNAPSHOT.jar.\n\n here's my pom snippet:\n\n```\n    <dependency>      \n        <groupId>com.netflix.servo</groupId>\n        <artifactId>servo-core</artifactId>\n        <version>0.4.32</version>\n    </dependency>\n    <dependency>      \n        <groupId>com.netflix.eureka</groupId>\n        <artifactId>eureka-core</artifactId>\n        <version>1.1.74-SNAPSHOT</version>\n    </dependency>\n```\n\njust an fyi.  things look good and i'm unblocked.\n =||= Cool- I also release the latest version of eureka.\n\nhttp://search.maven.org/remotecontent?filepath=com/netflix/eureka/eureka-core/1.1.73/eureka-core-1.1.73.pom\n\nI'm going to close the issue. Please reopen as needed.\n =||= "], ["14", "eureka-client should declare dependency on Jettison", "Craig Forster", "craigforster", "01/28/13, 08:26:49 PM", "The eureka-client package requires Jettison to be on the classpath, but doesn't declare the dependency.  Without Jettison on the classpath, `com.netflix.discovery.converters.JsonXStream` can't load resulting in this error from the heartbeat thread:\n\n```\n| Error 2013-01-28 13:21:32,659 [DiscoveryClient_Heartbeat] ERROR discovery.DiscoveryClient  - DiscoveryClient_AIQ/172.16.16.137 - registration failedjava.io.IOException: Cannot write the object for :class com.netflix.appinfo.InstanceInfo\nMessage: java.io.IOException: Cannot write the object for :class com.netflix.appinfo.InstanceInfo\n    Line | Method\n->>  184 | handle         in com.sun.jersey.client.apache4.ApacheHttpClient4Handler\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n|    120 | handle         in com.sun.jersey.api.client.filter.GZIPContentEncodingFilter\n|    648 | handle . . . . in com.sun.jersey.api.client.Client\n|    670 | handle         in com.sun.jersey.api.client.WebResource\n|     74 | access$200 . . in     ''\n|    563 | post           in com.sun.jersey.api.client.WebResource$Builder\n|    810 | makeRemoteCall in com.netflix.discovery.DiscoveryClient\n|    753 | makeRemoteCall in     ''\n|    427 | register . . . in     ''\n|   1224 | run            in com.netflix.discovery.DiscoveryClient$HeartbeatThread\n|    512 | mainLoop . . . in java.util.TimerThread\n^    462 | run            in     ''\n\nCaused by IOException: Cannot write the object for :class com.netflix.appinfo.InstanceInfo\n->>  144 | writeTo        in com.netflix.discovery.provider.DiscoveryJerseyProvider\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n|    231 | writeRequestEntity in com.sun.jersey.api.client.RequestWriter$RequestEntityWriterImpl\n|    262 | writeTo . . .  in com.sun.jersey.client.apache4.ApacheHttpClient4Handler$2\n|    115 | writeTo        in org.apache.http.entity.BufferedHttpEntity\n|     98 | writeTo . . .  in org.apache.http.entity.HttpEntityWrapper\n|    108 | writeTo        in org.apache.http.impl.client.EntityEnclosingRequestWrapper$EntityWrapper\n|    122 | serialize . .  in org.apache.http.impl.entity.EntitySerializer\n|    271 | sendRequestEntity in org.apache.http.impl.AbstractHttpClientConnection\n|    227 | sendRequestEntity in org.apache.http.impl.conn.AbstractClientConnAdapter\n|    257 | doSendRequest  in org.apache.http.protocol.HttpRequestExecutor\n|    125 | execute . . .  in     ''\n|    712 | tryExecute     in org.apache.http.impl.client.DefaultRequestDirector\n|    517 | execute . . .  in     ''\n|    906 | execute        in org.apache.http.impl.client.AbstractHttpClient\n|    827 | execute . . .  in     ''\n|    170 | handle         in com.sun.jersey.client.apache4.ApacheHttpClient4Handler\n|    120 | handle . . . . in com.sun.jersey.api.client.filter.GZIPContentEncodingFilter\n|    648 | handle         in com.sun.jersey.api.client.Client\n|    670 | handle . . . . in com.sun.jersey.api.client.WebResource\n|     74 | access$200     in     ''\n|    563 | post . . . . . in com.sun.jersey.api.client.WebResource$Builder\n|    810 | makeRemoteCall in com.netflix.discovery.DiscoveryClient\n|    753 | makeRemoteCall in     ''\n|    427 | register       in     ''\n|   1224 | run . . . . .  in com.netflix.discovery.DiscoveryClient$HeartbeatThread\n|    512 | mainLoop       in java.util.TimerThread\n^    462 | run . . . . .  in     ''\n\nCaused by NoClassDefFoundError: Could not initialize class com.netflix.discovery.converters.JsonXStream\n->>   78 | write          in com.netflix.discovery.converters.EntityBodyConverter\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n|    142 | writeTo        in com.netflix.discovery.provider.DiscoveryJerseyProvider\n|    231 | writeRequestEntity in com.sun.jersey.api.client.RequestWriter$RequestEntityWriterImpl\n|    262 | writeTo        in com.sun.jersey.client.apache4.ApacheHttpClient4Handler$2\n|    115 | writeTo . . .  in org.apache.http.entity.BufferedHttpEntity\n|     98 | writeTo        in org.apache.http.entity.HttpEntityWrapper\n|    108 | writeTo . . .  in org.apache.http.impl.client.EntityEnclosingRequestWrapper$EntityWrapper\n|    122 | serialize      in org.apache.http.impl.entity.EntitySerializer\n|    271 | sendRequestEntity in org.apache.http.impl.AbstractHttpClientConnection\n|    227 | sendRequestEntity in org.apache.http.impl.conn.AbstractClientConnAdapter\n|    257 | doSendRequest  in org.apache.http.protocol.HttpRequestExecutor\n|    125 | execute        in     ''\n|    712 | tryExecute . . in org.apache.http.impl.client.DefaultRequestDirector\n|    517 | execute        in     ''\n|    906 | execute . . .  in org.apache.http.impl.client.AbstractHttpClient\n|    827 | execute        in     ''\n|    170 | handle . . . . in com.sun.jersey.client.apache4.ApacheHttpClient4Handler\n|    120 | handle         in com.sun.jersey.api.client.filter.GZIPContentEncodingFilter\n|    648 | handle . . . . in com.sun.jersey.api.client.Client\n|    670 | handle         in com.sun.jersey.api.client.WebResource\n|     74 | access$200 . . in     ''\n|    563 | post           in com.sun.jersey.api.client.WebResource$Builder\n|    810 | makeRemoteCall in com.netflix.discovery.DiscoveryClient\n|    753 | makeRemoteCall in     ''\n|    427 | register . . . in     ''\n|   1224 | run            in com.netflix.discovery.DiscoveryClient$HeartbeatThread\n|    512 | mainLoop . . . in java.util.TimerThread\n^    462 | run            in     ''\n```", "NaN"], ["15", "New REST endpoints for (S)VIP", "Nitesh Kant", "NiteshKant", "07/17/13, 02:51:02 AM", "Added two new endpoints to retrieve instances registered with eureka for a Virtual IP or secure Virtual IP.\n\nUpdate to the WIKI for details about the REST operations is added to my for of eureka. I will add them to the main WIKI after the pull request merge.", "[eureka-pull-requests #1](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/1/) FAILURE\nLooks like there's a problem with this pull request\n =||= Canceling this pull request, will include few more changes and submit a new pull request.\n =||= "], ["16", "use embedded jetty or tomcat for standalone startup?", "Chris Fregly", "cfregly", "02/13/13, 12:59:30 AM", "karthik-\n\nany thought to using jetty (similar to exhibitor) or embedded tomcat (similar to asgard) for an easier standalone startup?  this would simplify the deploy instructions a bit as it would remove the dependency on a separate tomcat install.\n\nadditionally, this would allow additional CLI params like --port to allow eureka to startup on a custom port.\n\ni really like how jordan built - and documented - his exhibitor CLI:  https://github.com/Netflix/exhibitor/wiki/Running-Exhibitor \n\njust a thought - this would address one of the items that we discussed at the recent Netflix OSS meetup.  specifically, the fact that my instructions to deploy eureka on a custom port are very involved:  https://github.com/cfregly/fluxcapacitor#build-and-deploy-eureka-server  \n\nlemme know what you think.\n\nthanks!\n\n-chris", "Chris,\n\nMay be I'm not understanding clearly when you say, configuring the port is pretty involved.\n\nAre you saying specifying the following URL is complicated?\n\neureka.serviceUrl.defaultZone=http://localhost:8080/eureka/v2/\n =||= right, so the use case is changing the default port that eureka runs on.\n\nunless i'm missing something, i need to modify tomcat's server.xml as well as one of the following:\n\n1) modify the tomcat startup scripts to pass -D's to override the defaultZone property that you highlighted (not that bad)\n\nor\n\n2) manually change the property files in the source, rebuild the war, and redeploy the war (bad).\n\nthe ideal state is to pass --port 8080 or equivalent and everything would just work - without having to modify tomcat or eureka configs.\n\ni'm likely missing something, however.\n\n-chris\n =||= Chris,\n\nYou have it all correct. \n\nEureka has not been built to support embedded servers. But these would be used only for dev purposes - correct. In production you may have to change server.xml etc based on your traffic needs. Isn't it?\n\nAnd the option you are looking for - to change a port setting and everything should just work - will be available only with an embedded tomcat/jetty kind of setup.\n =||= understood.  yeah, this is primarily a development versus production request.\n\nfrom a dev perspective, it may be useful to have an EmbeddedEureka server used for end-to-end integration testing.\n\ni did something similar when building end-to-end tests for an implementation of Curator's Service Discovery feature.  Jordan exposes an embedded ZooKeeper TestingServer that proved very helpful in this situation.  it actually helped us identify a regression bug in Curator that was introduced when we picked up a newer version (https://github.com/Netflix/curator/issues/227)\n\nhere's the TestingServer code:  https://github.com/Netflix/curator/blob/master/curator-test/src/main/java/com/netflix/curator/test/TestingServer.java\n\nagain, not something that would be used in production, but definitely helpful for development/testing.\n\nthanks, karthik!\n\n-chris\n =||= The client surely does not assume that you are running inside a web\napplication. It just requires you to call discoverManager.initcomponents()\nwhich initializes the client. The client provided in the eureka project\ndemonstrates this behavior.\nEureka server requires an HTTP endpoint, the easiest way of doing that is\nto package it in a war & have your embedded servlet container.\n\nOn Thursday, February 6, 2014, viveklon notifications@github.com wrote:\n\n> Can Eureka be used for a distributed (non web) JAVA application(s) to\n> achieve same results? I am assuming yes, any example client/server known to\n> anyone?\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/Netflix/eureka/issues/16#issuecomment-34373742\n> .\n =||= "], ["17", "bridging eureka and archaius configs", "Chris Fregly", "cfregly", "03/30/15, 09:41:50 PM", "is there a way to avoid the following code snippet used to bridge the archaius and eureka configs:\n\nhttps://github.com/cfregly/fluxcapacitor/blob/master/flux-edge/src/main/java/com/fluxcapacitor/edge/server/EdgeServer.java\n\ni understand the desire to let eureka run standalone without requiring an archaius configuration, but is there a best-of-both-worlds approach where archaius will be used if these properties don't exist, maybe?\n\nlemme know.\n\n-chris", "I think it is reasonable to fall back on archaius configs in case the specified eureka properties do not exist. I will make that change.\n =||= Closing old issue. Please re-open if the issue is still not resolved.\n =||= "], ["18", "Feature request: REST method to reset renews threshold", "Tyson Stewart", "tysonstewart", "07/23/13, 06:52:44 PM", "If the renewals falls below the threshold for a legitimate reason, it would be very helpful to have a method to reset the threshold to clear the alert state. As it is now, the only way to reset it is to restart Eureka.", "Not needed anymore - since the deletions are now honored properly.\n =||= "], ["19", "Feature request: DELETEing a service lowers the renews threshold", "Tyson Stewart", "tysonstewart", "03/21/13, 10:48:40 PM", "When a service is deleted via the REST API, it's an active removal instead of passive like in the case of an automatic expiration. For that reason, Eureka should lower the renews threshold value so that an alert state will be resolved.", "Fixed by the commit : https://github.com/Netflix/eureka/commit/3478052ddef01a6de5fca9a601959c90e4bb3d6a\n =||= "], ["20", "Version 1.1.92 isn't tagged", "Mat Schaffer", "matschaffer", "08/21/13, 05:41:14 PM", "Not sure if we push jars to maven central or not, but artifacts.netflix.com (internal) has a 1.1.92 version that isn't tagged here. Thought I'd file incase this indicates a build process bug.", "There were a few times there was a mismatch between what is available internally & what is available in maven.\nSince, then we have fixed the problem (manual release process) and now the artifacts should be available in both repos.\n =||= "], ["21", "Merge gradle template as of May 2013", "Justin Ryan", "quidryan", "06/06/13, 06:53:11 PM", "Eureka's fallen behind in the gradle-template, this get it up to date. This adds a more stable release process, support for automatically publishing javadocs into gh-pages, upgrades to Gradle 1.5, and less strict header checking. Please merge at your convenience.\n\nThere's one problem with the current publishing which is putting signatures into the ivy files, but it's not uploading them. I also don't see any tags for 1.1.98. How is it being released? It's causing problems for other consumers of this library as of today.", "NaN"], ["22", "Problems with multiple eips and TXT?", null, "OskarKjellin", "07/23/13, 06:56:10 PM", "I ran into some issues when I tried to setup multiple zones with eureka. According to the wiki, the txt records should be separated with ','. However, it seems like the code is using the whitespace character?\nWiki page I am referring to:\nhttps://github.com/Netflix/eureka/wiki/Configuring-Eureka-in-AWS-Cloud\n\nBut on this line it splits using whitespace:\nhttps://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/DiscoveryClient.java#L1366\n\nThis would be fine if it was as simple as a code->wiki mismatch. But when there is a whitespace within a txt record it returns it as \"eu-west1a eu-west1b\", instead of with comma as eu-west1a,eu-west1b (hard to illustrate but in the first case it returns a string containing actual quotation marks). So when it splits it winds up with:\n- \"eu-west1a\n- eu-west1b\" \n\nWhich of course causes problems. \n\nAm I the only one who ran into this issue? Like the way that the TXT-records and automatic assigning of EIPs but it's very fragile to have only one eureka server.", "Curious whether you tried with the actual TXT record having a comma between\nentries as suggested by the wiki? If yes, does that work?\n\nOn Fri, Jun 14, 2013 at 4:34 AM, OskarKjellin notifications@github.comwrote:\n\n> I ran into some issues when I tried to setup multiple zones with eureka.\n> According to the wiki, the txt records should be separated with ','.\n> However, it seems like the code is using the whitespace character?\n> Wiki page I am referring to:\n> https://github.com/Netflix/eureka/wiki/Configuring-Eureka-in-AWS-Cloud\n> \n> But on this line it splits using whitespace:\n> \n> https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/DiscoveryClient.java#L1366\n> \n> This would be fine if it was as simple as a code->wiki mismatch. But when\n> there is a whitespace within a txt record it returns it as \"eu-west1a\n> eu-west1b\", instead of with comma as eu-west1a,eu-west1b (hard to\n> illustrate but in the first case it returns a string containing actual\n> quotation marks). So when it splits it winds up with:\n> - \"eu-west1a\n> - eu-west1b\"\n> \n> Which of course causes problems.\n> \n> Am I the only one who ran into this issue? Like the way that the\n> TXT-records and automatic assigning of EIPs but it's very fragile to have\n> only one eureka server.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/Netflix/eureka/issues/22\n> .\n =||= @NiteshKant Well yeah, that was the first thing I tried. That ended up just like trying to connect to \n\"ec2-54-216-23-251.eu-west-1.compute.amazonaws.com,ec2-54-216-23-251.eu-west-1.compute.amazonaws.com:8080\"\n\nwhich of course didn't work which was when I started stepping through the code and found that it was actually splitting on a whitespace:\n\nString[] cnames = txtRecord.split(\" \");\n =||= Hi,\n\nYes - the wiki has to be fixed. I think you are probably getting the format of the TXT record wrong. I think the TXT records should be similar to this\n\n\"eu-west-1a\" \"eu-west-1b\".\n\nCan you try this and let me know?\n =||= @karthik-vn It ends up the same. Tries to query like \ntxt.\"eu-west1.mydomain.com\n\nWhich doesn't work. According to the route53 documentation, multiple values should be one per line. But that doesn't work either. I had a fix before that just did value.replace(\"\\\"\", \"\") which worked. But I should be able to use your jars and not need to modify my code.\n =||= Not sure what is going wrong in your case. Our route53 configuration works perfectly.\n\nFor eg. here is the TXT record for our test environment.\n\nhttp://www.dnswatch.info/dns/dnslookup?la=en&host=txt.us-east-1.discoverytest.netflix.net&type=TXT&submit=Resolve\n =||= @karthik-vn thanks. The issue was the setup in route53 that I had made. The test link helped me narrow down the issue with my configuration. It's working now.\n\nThe wiki should be updated to match our discussion here\n =||= "], ["23", "Register VPC Eureka node in Route53 instead of EIP", null, "pommerien", "07/23/13, 06:56:20 PM", "Hi there,\nWe are trying to run Eureka in a solely VPC environment and don't have the need for EIP registration.  Instead we are considering adding functionality to have Eureka register itself directly in Route53 as discovery.us-west-2c.xyz.com, or similar.  That way we can make Eureka part of an ASG, avoid middle-tier ELBs, and use round-robin DNS once we need more than one Eureka node per AZ.\n\nBefore we go through the effort, what is your guys' thinking around VPC deployments of Eureka and would you be interested in us committing this back?\n\nCheers\nNils", "Hi, (Answering on behalf of Karthik)\n   The eureka clients (for instances deployed in AWS) have a default logic\nof registering and subsequently obtaining the list of registered instances\nby communicating specifically to the eureka instance in its own zone (and\nwill failover to another eureka instance in its own zone etc.)\n\nAlthough using Route53 might work technically, the clients will then route\nto different instances resolved by Route53 (i.e they will not be pinned)\nthus bypassing some of the optimizations built around this pinning.\n\nWill get back to you once we pour some more thought on it.\n\nThanks\n/Sudhir\n\nOn Fri, Jun 14, 2013 at 2:33 PM, pommerien notifications@github.com wrote:\n\n> Hi there,\n> We are trying to run Eureka in a solely VPC environment and don't have the\n> need for EIP registration. Instead we are considering adding functionality\n> to have Eureka register itself directly in Route53 as\n> discovery.us-west-2c.xyz.com, or similar. That way we can make Eureka\n> part of an ASG, avoid middle-tier ELBs, and use round-robin DNS once we\n> need more than one Eureka node per AZ.\n> \n> Before we go through the effort, what is your guys' thinking around VPC\n> deployments of Eureka and would you be interested in us committing this\n> back?\n> \n> Cheers\n> Nils\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/Netflix/eureka/issues/23\n> .\n\n## \n\n/Sudhir\n =||= @Nils.\n\nWhat is the motivation behind your design? Is it to autoscale the eureka nodes or load balance the requests to multiple eureka servers for a particular AZ?\n\nAutoscaling has to be dealt with carefully because of  the horizontal replication in eureka.If it is to load balance across multiple servers in an AZ, we have thought of a way do this by retaining all the optimizations that Sudhir was talking about earlier.\n =||= Hi Karthik,\nThe main motivation is self-healing, and secondly autoscale, even though I understand we won't have to scale out Eureka until we hit thousands of nodes.  That said, I was envisioning putting Eureka into ASGs (one per AZ), with a size of maximum size of 1.  Whenever a node dies, it spins up a new one, and (correct me if I am wrong), in the non-VPC world, it would go out and grab an EIP.  So how would we do it in VPC?  I thought about it more this weekend and the other alternative is to do it via \"Network Interfaces\" which you bind to a \"static IP\", configure route 53 accordingly, e.g. discover.us-west2c.company.com, and through metadata lookup the newly born Eureka instance will know what interface to grab and bind to itself as secondary interface.\n\nDoes our motivation make sense?  And if so, what are your thoruhgts?\n\nTHank you!\n--Nils\n =||= Your motivation does make sense with regards to distributing one eureka server per AZ with a max size of 1. Autoscaling may not be necessary. I will have to refresh my knowledge of how VPC and EIP works. Can you now bind an EIP in a VPC environment?\n =||= "], ["24", "Hostname reused as InstanceId disallows multiple service instances on 1 host", null, "danielkwinsor", "03/30/15, 09:45:42 PM", "Original thread is at https://groups.google.com/forum/#!topic/eureka_netflix/Rntihgo1i50\n\nMy usecase is that I'd like to have 1 service with multiple instances running on the same host.  Since they are the same service, they should have the same app name.  And since they are on the same host, they have the same hostname.  The problem is that in a non-AWS datacenter, the instanceID is populated by the hostname.  Same app name and same instanceId leads to overwriting in the service registry.  I would appreciate it if the EurekaInstanceConfig interface had a getId() method that I can implement.\n\nThank you.", "This is possible by implementing a DataCenterInfo that also implement UniqueIdentifier.\n =||= "], ["25", "Creating ability to have a custom (non-hostname) instanceId in non-AWS instances", null, "danielkwinsor", "07/02/13, 10:20:14 PM", "https://groups.google.com/forum/#!topic/eureka_netflix/Rntihgo1i50\nhttps://github.com/Netflix/eureka/issues/24", "[eureka-pull-requests #2](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/2/) FAILURE\nLooks like there's a problem with this pull request\n =||= I will provide another pull request soon.  I found some new code in ApplicationInfoManager.refreshDataCenterInfoIfRequired where if the hostname changes it should update... I should do the same thing for instance ID.\n =||= "], ["26", "Creating ability to have a custom (non-hostname) instanceId in non-AWS instances", null, "danielkwinsor", "07/12/13, 09:15:43 PM", "NaN", "[eureka-pull-requests #3](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/3/) FAILURE\nLooks like there's a problem with this pull request\n =||= https://groups.google.com/forum/#!topic/eureka_netflix/Rntihgo1i50\n\nhttps://github.com/Netflix/eureka/issues/24\n\nThere's no problem with the CI build, it just complains there is no junit test case.\n =||= [eureka-pull-requests #4](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/4/) FAILURE\nLooks like there's a problem with this pull request\n =||= Not sure how my latest commit got into the pull request, I didn't request that, will remove it.\n =||= "], ["27", "How to integrate CloudWatch?", "Panos Partheniadis", "pparth", "08/07/13, 07:35:57 AM", "Hello,\n\nI can see the metrics exposed through Servo and JMX successfully. How do i integrate CloudWatch though? Where should i provide AWS credentials? Are these a standard accessKey and secretKey combination? For the server configuration, i can see the accessKey and secretKey configuration parameters. Are these used for CloudWatch integration? If this is the case, i do not see these parameters for the client configuration. Is CloudWatch available only to server?", "Panos-\n\nmy https://github.com/cfregly/fluxcapacitor project has Eureka-Client/CloudWatch integration.\n\nI'm currently passing in the accessKey and secretKey as -D system properties at tomcat startup.\n\nthese get used by the DefaultAwsCredentialsChain class.\n\nhere is the code you'll want to review: https://github.com/cfregly/fluxcapacitor/blob/master/flux-core/src/main/java/com/fluxcapacitor/core/metrics/FluxMetrics.java\n\nthis code also demonstrates how to configure Graphite integration.\n\nalso, it's worth noting that if you use something like Karyon that contains an Admin tool to inspect your System properties at runtime, your AWS credentials will now be exposed.\n\nI'm about to issue a karyon pull request that will allow masking - and immutability - of certain properties such as these.\n\nlemme know if you have other issues.\n\nthanks!\n\n-Chris\n\nOn Jul 5, 2013, at 3:32 AM, Panos Partheniadis notifications@github.com wrote:\n\n> Hello,\n> \n> I can see the metrics exposed through Servo and JMX successfully. How do i integrate CloudWatch though? Where should i provide AWS credentials? Are these a standard accessKey and secretKey combination? For the server configuration, i can see the accessKey and secretKey configuration parameters. Are these used for CloudWatch integration? If this is the case, i do not see these parameters for the client configuration. Is CloudWatch available only to server?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n =||= "], ["28", "Creating ability to have a custom (non-hostname) instanceId in non-AWS instances", null, "danielkwinsor", "04/23/14, 07:16:53 PM", "https://groups.google.com/forum/#!topic/eureka_netflix/Rntihgo1i50\n\nhttps://github.com/Netflix/eureka/issues/24\n\nThere's no problem with the CI build, it just complains there is no junit test case.", "[eureka-pull-requests #5](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/5/) FAILURE\nLooks like there's a problem with this pull request\n =||= I also would like this pull request to be merged. Is there any other change needed to get it done?\n =||= I merged this pull request: https://github.com/Netflix/eureka/pull/85 recently. Does that suffice? @danielkwinsor unfortunately we have not been able to merge this request before. In the light of the other code change (https://github.com/Netflix/eureka/pull/85), if you think this is required, can you sync this pull request to the master?\n =||= I've looked ino that pull request. If I get it right, it only works for Amazon Data Center, not MyOwn Data Center. Unfortunately, we are using the latter one. So it would be better to have this instance level of configuration.\n =||= @CH3CHO if your DatacenterInfo Object implements UniqueIdentifier interface, the id for the instance will be assigned the id returned via getId()\n =||= Closing this pull request as it is not required anymore. @CH3CHO let me know if you think otherwise.\n =||= "], ["29", "Add ability to retrieve instances from any remote region", "Nitesh Kant", "NiteshKant", "08/01/13, 08:34:51 PM", "Currently eureka provides a way to get registry information from a remote aws region.\nHowever, the behavior of this is not controllable by the user.\nThe instances from the remote region is added to the local registry only if the application, the instance belongs to, is not already available locally. \n\nThis change should allow users to retrieve instances for a specific region (via the eureka client).\n\nThe following setup would be required to achieve this:\n# Eureka Server\n\n1) The eureka server which will get data from a remote region must create a property: eureka.remoteRegionUrlsWithName with the content as key value pairs separated by a comma. The key is the name of the region and value is the http(s) url to the eureka server in the remote region. This will deprecate the existing property: eureka.remoteRegionUrls which does not have any insight into which region the URL belongs to.\n2) Optionally provide a whitelist of applications, per region (or global) which will restrict only a certain set of applications to be retrieved from a remote region. The retrieval here is referred to as the API view of the remote registry. The server internally will fetch the entire remote registry. The whitelist follows the property name: eureka.remoteRegion.[region_name].appWhiteList, where [region_name] can either be the string \"global\" or the name of the region (must match with what is provided in 1 above). The value is a comma separated list of app names. The global list is only consulted  when there is no whitelist for the specific region. In absence of any whitelist all instances from the remote region will be retrieved.\n# Client\n\n1) Define a property: eureka.fetchRemoteRegionsRegistry with the value as comma separated list of regions from which this client should fetch the registry information. This obviously requires that the server actually is pulling data from those regions.\n2) For each remote region that the client need to fetch, define a property: \"eureka.[region_name].availabilityZones\" containing a comma separated list of all availability zones in the region. This is to reverse map, the availability zones (available as instance metadata) in eureka server registry response. Since, this mapping is static, it adds little value to add the extra parameter region in all the instance information. We can possibly infer this from availability zone, i.e. us-west-1c is in region us-west-1 but this is more or less to externalize this logic rather than bake in the code.\n2) Use the methods in DiscoveryClient to get instances for a specific region. In absence of a region, the client will fetch instances from the local region only.\n# Caveat\n\nIf the client choose this mode of fetching instances, it can not go back to the previous way of getting remote region instances i.e. only applications that are not available locally will be fetched from remote region without the client knowing about it.", "NaN"], ["30", "Ability to retrieve instances from any remote region", "Nitesh Kant", "NiteshKant", "07/29/13, 09:28:30 PM", "Fix for issue # 29\nAlso adds two new Jersey endpoints to retrieve instances by (S)VIPAddress", "[eureka-pull-requests #6](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/6/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #7](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/7/) SUCCESS\nThis pull request looks good\n =||= "], ["31", "Add service UP time tracking", "Scott E", "scotte", "08/06/13, 08:38:19 PM", "Track timestamp when a service is first marked UP in Eureka, and report this through REST payloads.", "[eureka-pull-requests #8](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/8/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #10](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/10/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #12](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/12/) SUCCESS\nThis pull request looks good\n =||= "], ["32", "EIPManager should choose unbounded EIP as the first candidate", "Nitesh Kant", "NiteshKant", "08/01/13, 08:34:39 PM", "Currently, EIPManager.getCandidateEIP() will prefer EIPs attached to unreachable instances first if they appear in the available EIP list first.\nThis can be optimized more by first choosing the EIP which is not attached to any instance (as per other peer nodes registry info) at all. ", "NaN"], ["33", "Fixes issue #32", "Nitesh Kant", "NiteshKant", "07/30/13, 07:57:10 PM", "NaN", "[eureka-pull-requests #9](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/9/) SUCCESS\nThis pull request looks good\n =||= Made changes based on your comments.\n =||= [eureka-pull-requests #11](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/11/) SUCCESS\nThis pull request looks good\n =||= "], ["34", "Adding some debug statements in the tests", "Nitesh Kant", "NiteshKant", "07/31/13, 08:27:17 PM", "This helps in better asserting the reason of the test failures", "[eureka-pull-requests #13](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/13/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #14](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/14/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #15](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/15/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #16](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/16/) SUCCESS\nThis pull request looks good\n =||= "], ["35", "Fixing test flakiness", "Nitesh Kant", "NiteshKant", "07/31/13, 09:26:20 PM", "The global application whitelist was getting set in a test but not cleaned up.\nThis was the reason tests were failing in some environments depending in which order the tests were run.", "[eureka-pull-requests #17](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/17/) SUCCESS\nThis pull request looks good\n =||= "], ["36", "Bug fix & default az->region mapping", "Nitesh Kant", "NiteshKant", "08/01/13, 07:13:00 AM", "1) Provided a default availability zone -> region mapping for ec2 so that every client does not have to provide the same. This can be overridden by a property per region.\n2) Fixed a bug in DiscoveryClient.getInstancesByVipAddress() for a region. For invalid VIPs, the null check was wrong.", "[eureka-pull-requests #18](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/18/) SUCCESS\nThis pull request looks good\n =||= "], ["37", "Ability to fetch instances from remote region should be changeable dynamically", "Nitesh Kant", "NiteshKant", "08/02/13, 07:25:35 AM", "The changes in issue #29 enabled eureka client to fetch instances from a remote region (if available with the server) if configured via a property. This behavior is determined at client initialization. This will cause applications to restart whenever a change in behavior is required.\nWe should make this decision dynamically everytime we refresh the client's cache. This will lead to clearing up the local cache and fetching entire registry whenever the property changes.", "NaN"], ["38", "Availability Zone -> region mapping can be fetched from DNS", "Nitesh Kant", "NiteshKant", "08/02/13, 07:25:35 AM", "The fix for issue #29 derives the region for an availability zone based on a property.\nThis same information is available for netflix environment in DNS entry. \nHence, if available (i.e. eureka client is configured to fetch service urls from DNS) we should use the DNS for this mapping. Also, the mapping must be refreshed everytime we fetch data from the eureka server.", "NaN"], ["39", "Fix for issue #37 & #38", "Nitesh Kant", "NiteshKant", "08/02/13, 07:17:35 AM", "NaN", "[eureka-pull-requests #19](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/19/) SUCCESS\nThis pull request looks good\n =||= "], ["40", "Failure in initializing remote registry must be fatal", "Nitesh Kant", "NiteshKant", "08/21/13, 05:39:10 PM", "Currently, if the eureka server is configured to fetch data from a remote region registry but fails to initialize the same, the error is ignored.\nThis results in unexpected behavior of the server without any indication of what is wrong. We should fail fast in such a scenario.", "NaN"], ["41", "Fixes for issue #40", "Nitesh Kant", "NiteshKant", "08/09/13, 06:19:20 PM", "Also added some debug logs to provide more info about the remote calls and the instance registry contents (app hashcodes) after refresh from server.", "[eureka-pull-requests #20](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/20/) SUCCESS\nThis pull request looks good\n =||= "], ["42", "Startup of Eureka in local environment takes 3-5 minutes", "Jon Fenner", "jfenner", "02/26/15, 12:16:48 AM", "When starting Eureka in a dev environment with no other Eureka servers available, the startup times takes between 3 and 5 minutes.  I was that setting the following parameters would bypass this:\n\neureka.enableSelfPreservation=false\neureka.registration.enabled=false\n\nHowever, it still is taking 3-5 minutes.  Is there something else that needs to be set for this to work?", "When eureka first starts up without peers it takes about 5 mins for it to start serving requests because it waits for all clients to register completely before it can give out the list. You can disable this by setting this\n\n#Set this only for this sample service without which starting the instance will by default wait for the default of 5 mins\neureka.waitTimeInMsWhenSyncEmpty=0\n\nIn a production environment, it is recommended that you don't set this property. You might want to revert the other property changes above as they are unrelated.\n =||= Hi Karthik-vn,\n\nThanks for the reply.  I'm actually already setting that parameter, but it doesn't seem to make a difference.  Here's what I have for a config:\n\nTomcat setenv.sh:\n\n```\nexport JAVA_OPTS=\"$JAVA_OPTS \\\n                   -Deureka.enableSelfPreservation=false \\\n                   -Deureka.registration.enabled=false \\\n                   -Deureka.environment=dev \\\n                   -Deureka.datacenter=ndc\"\necho $JAVA_OPTS\n```\n\nAnd my eureka-server.properties (masked):\n\n```\n#Set this only for this sample service without which starting the instance will by default wait for the default of 5 mins\neureka.waitTimeInMsWhenSyncEmpty=0\n\n#AWS access key which has access to EIP binding and looking up autoscaling information\neureka.awsAccessId=*****\neureka.awsSecretKey=******\n@next=eureka-${environment}-${region}.properties\n```\n\nAnd finally eureka-server-dev.properties (masked):\n\n```\n#AWS access key which has access to EIP binding and looking up autoscaling information\neureka.awsAccessId=******\neureka.awsSecretKey=*******\n```\n =||= @jfenner -  this might sound silly, but are you rebuilding the eureka-server webapp with the new properties being set?  \n\nalso, you might want to try setting those -D's in the actually eureka-server.properties file itself.\n\nhere's a link to my FluxCapacitor Netflix OSS FAQ that describes this issue:  https://github.com/cfregly/fluxcapacitor/wiki/NetflixOSS-FAQ#eureka-service-discovery-load-balancer\n\nThe eureka.registration.enabled=false should have taken care of the problem (it has for others), so i wonder if those -D's aren't being picked up for some reason.\n\ni just added karthik's recent suggestion of setting eureka.waitTimeInMsWhenSyncEmpty=0 to the FAQ as i hadn't heard of that before.\n\nlemme know if that helps.\n\n-chris\n =||= I'm also seeing this, even with `eureka.waitTimeInMsWhenSyncEmpty` set to `0`.  While this is hard to see with Tomcat, attempting to run under Jetty shows a tremendous number of stack traces as Eureka server tries and fails to connect to itself with the Eureka client, presumably because it's still attempting to come up.\n =||= @NiteshKant @cfregly @karthik-vn This is actually happening in `EurekaBootStrap.contextInitialized`, when it calls `registry.syncUp()` (roughly line 102, depending on which PRs are merged when you look this up).  `syncUp()` will sleep up to, by default, five times, for 30 seconds, until it can find a peer to register with.  There's your 3-5 minute start-up time with the default `.properties` files.\n\nThere are two possible fixes to this:\n1. Modify the wiki to also note that you have to set `eureka.numberRegistrySyncRetries` to `0` for debugging\n2. Introduce a new setting, called something like `eurekaServer.testingMode`, that bypasses the initial `syncUp` call entirely.\n\nThe first is obviously less work, but second's also pretty simple.  Thoughts?\n =||= @bpollack I personally like the option 2. so that there is less configuration to set.\nIn fact we should be able to support starting the servers with no eureka peers configured. This would automatically remove all these issues. Thoughts?\n =||= @NiteshKant Hmm, I like your idea.  Will quickly whip up a PR in that style for feedback.\n =||= To eliminate syncUp just set `eureka.numberRegistrySyncRetries=0`. Once it is set, the server starts up instantly.\nI propose to close this issue, as there was no follow up on it for some time, and there is alternative approach to achieve this goal.\n =||= "], ["43", "Restarting eureka server with EIP binding causes the next bind to take a long time", "Melvin Cardozo", "mampcs", "08/30/13, 08:19:36 PM", "On Amazon, when eureka is brought down, it releases the EIP address. Amazon does not reassign a new public ip address to the instance for atleast a couple of minutes once the EIP is released. Restarting the eureka server during this time causes the EIP binding to fail the first time because the public IP is null. Here's the stack trace:\n\n2013-08-20 15:05:55,365 ERROR com.netflix.eureka.EurekaBootStrap:266 [localhost-startStop-1] [bindEIP] Cannot bind to EIP\njava.lang.NullPointerException\n        at com.netflix.eureka.util.EIPManager.getCandidateEIP(EIPManager.java:196)\n        at com.netflix.eureka.util.EIPManager.bindToEIP(EIPManager.java:114)\n        at com.netflix.eureka.EurekaBootStrap.bindEIP(EurekaBootStrap.java:263)\n        at com.netflix.eureka.EurekaBootStrap.handleEIPbinding(EurekaBootStrap.java:222)\n\nIt would be nice to allow the binding to go ahead if the current ip is null.", "Created a pull request for the change.\n =||= "], ["44", "Add capability to invoke a registered callback when instance is evicted", "Melvin Cardozo", "mampcs", "07/01/16, 10:28:23 PM", "We have been extending the eureka server to add additional capabilities to it. But we would like to be able to do this without actually making any changes to the eureka code itself.\nOne nice feature that would help us if to have the ability to register a callback function that should be invoked whenever an instance is evicted by eureka (once it's become non responsive). That would allow us to keep our code base independent of the eureka code base.", "Sounds like a good feature request, do you wish to contribute?\n =||= Sure. I'll work on getting the changes done.\n =||= Awesome, thanks!\n\nnitesh\n\nOn Aug 22, 2013, at 3:19 PM, Melvin Cardozo notifications@github.com wrote:\n\n> Sure. I'll work on getting the changes done.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n =||= Closing due to inactivity. \n =||= "], ["45", "NPE when remote discovery is not available/reachable", "Nitesh Kant", "NiteshKant", "08/22/13, 04:48:51 PM", "RemoteRegionRegistry: https://github.com/Netflix/eureka/blob/4897114c759524bdebef9f9daa8baf372263d430/eureka-core/src/main/java/com/netflix/eureka/RemoteRegionRegistry.java#L193\n\ntries to access response object which will be null if the remote discovery is not reachable.", "NaN"], ["46", "Fixes issue #45", "Nitesh Kant", "NiteshKant", "08/22/13, 04:48:17 PM", "NaN", "[eureka-pull-requests #21](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/21/) SUCCESS\nThis pull request looks good\n =||= "], ["47", "Disable transparent fallback to remote region", "Nitesh Kant", "NiteshKant", "08/27/13, 12:02:48 AM", "The first implementation of fetching instances from a remote registry was done in a way that iff there are no instances of an application in the local region, then we get instances from remote region transparently, without the caller knowing it.\nThe above worked for the usecase inside Netflix initially. However, the flaw is that there was no way to fetch instances from a remote region if there were some instances of the same app in the local region. This will be prohibitive in an active-active multiple region setup.\nIssue #29 provided a new way of fetching instances from a remote region.\n\nThis issue here is created to phase out the older behavior in a controlled way.", "NaN"], ["48", "Fixes issue #47", "Nitesh Kant", "NiteshKant", "08/27/13, 12:02:42 AM", "NaN", "[eureka-pull-requests #22](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/22/) SUCCESS\nThis pull request looks good\n =||= "], ["49", "Allow EIP binding if the current IP of the instance is null.", "Melvin Cardozo", "mampcs", "08/29/13, 05:38:00 PM", "It's possible for myPublicIP to be null when eureka is restarted\nbecause unbinding an EIP on Amazon results in a null IP for the\ninstance for a few minutes. In that case, it's ok to rebind the\nnew EIP.", "[eureka-pull-requests #23](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/23/) SUCCESS\nThis pull request looks good\n =||= Thanks @mampcs \n =||= "], ["50", "Instance region checker should fallback to parsing the availability zone", "Nitesh Kant", "NiteshKant", "09/19/13, 06:42:33 AM", "Currently discovery client determines the region of an instance by looking up the availability zone into the set of known availability zone -> region mapping. This mapping is determined via DNS or properties.\nHowever, in case, when there is no valid information in this mapping for an availability zone, it puts this instance into the local bucket. We can have one fallback which can see if the availability zone follows a format like: us-east-1c where us-east-1 is the region name and \"c\" is the zone. If so, we can see if the resulting name is a valid, known region, if so, use the same.", "NaN"], ["51", "Fixes issue #50", "Nitesh Kant", "NiteshKant", "08/30/13, 11:59:33 PM", "Also, provided some handy methods in DiscoveryClient to get all known regions and apps for a region.", "[eureka-pull-requests #24](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/24/) SUCCESS\nThis pull request looks good\n =||= "], ["52", "Handling empty AZ in AZtoRegionMapper", "Nitesh Kant", "NiteshKant", "08/31/13, 08:13:13 AM", "NaN", "[eureka-pull-requests #25](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/25/) SUCCESS\nThis pull request looks good\n =||= "], ["53", "eureka-client should not depend on jersey-bundle", "Tom Golden", "TomRK1089", "02/24/14, 06:12:51 PM", "From the description of the jersey-bundle artifact:\n\n> Such a bundle is _only intended_ for developers that do not use Maven's dependency system.\n\nConsider specifying in POM/gradle build script exactly which Jersey artifacts are required. The inclusion of the bundle artifact leads to issues with managing transitive dependency conflicts of different Jersey versions.", "NaN"], ["54", "Add support for Eucalyptus endpoints", "chris grzegorczyk", "grze", "07/22/14, 11:21:56 PM", "- Use EurekaClientConfig to obtain EC2 and AutoScaling endpoints.\n- Introduce EucalyptusEurekaClientConfig for construcing euca URLs.\n- Modify AwsAsgUtil and EIPManager accordingly.", "[eureka-pull-requests #26](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/26/) SUCCESS\nThis pull request looks good\n =||= @grze Apologies that we have not been able to merge this change till now. If this is required can you sync the code with the master for this request?\n =||= Closing this PR as it can not be merged and there doesn't seem to be any activity.\n =||= "], ["55", "RemoteRegionRegistry does not set \"ready for traffic\" to false if connection to remote region fails", "Nitesh Kant", "NiteshKant", "09/17/13, 08:43:07 PM", "The connection error is silently ignored.\nThis should not be the case because this will be cause an issue of eureka not showing up instances from the other region.", "NaN"], ["56", "Fix for issue #55", "Nitesh Kant", "NiteshKant", "09/17/13, 08:42:48 PM", "NaN", "[eureka-pull-requests #27](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/27/) SUCCESS\nThis pull request looks good\n =||= "], ["57", "DiscoveryClient should honor remote regions when querying backup", "Nitesh Kant", "NiteshKant", "12/13/13, 06:19:36 PM", "Discovery client while querying from the backup registry, in the event of all eureka servers not being available, does not honor remote regions requested. ", "NaN"], ["58", "Fix for issue #57", "Nitesh Kant", "NiteshKant", "09/19/13, 07:20:05 AM", "NaN", "[eureka-pull-requests #28](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/28/) SUCCESS\nThis pull request looks good\n =||= "], ["59", "Eureka client optimizations for failover and loadbalancing", null, "karthik-vn", "12/13/13, 06:17:44 PM", "1) Eureka client tries to talk to a server in the same zone and fails over to the next server predictably for all clients in that zone. This could put a lot of pressure on the server that all these clients are failing over. These clients should distribute the load to other servers in the case of failover. This can be achieved by choosing a different failover server depending on the client.\n\n2) Currently when there are 2 servers in the same zone, the eureka client always chooses the same server every time. The second server is not utilized until failover. This restricts the ability to loadbalance requests across multiple servers in the same zone.", "NaN"], ["60", "Disable full registry download during eureka self-preservation", null, "karthik-vn", "12/13/13, 06:19:05 PM", "During self-preservation mode, eureka clients try to download the full registry instead of deltas.  There does not seem to be any apparent benefit for this - we should continue with fetching the delta fetch and download full registry only if the clients cache and the server information gets out of sync.", "NaN"], ["61", "Fix for https://github.com/Netflix/eureka/issues/59", null, "karthik-vn", "10/16/13, 07:50:15 PM", "NaN", "[eureka-pull-requests #29](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/29/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #30](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/30/) SUCCESS\nThis pull request looks good\n =||= Looks good to me\n =||= "], ["62", "Fine tune EIP association", null, "karthik-vn", "12/13/13, 06:19:14 PM", "When eureka server startups, it tries to find the unused EIPS based on the list from it neighboring nodes.\n\nIf that communication fails for some reason, multiple eureka servers will bind to the same EIP there by snatching it from one another.\n\nAWS does not prevent reassociation in EC2-classic. A better way to handle this edge-case scenario is to find if the an instance id is associated with an elastic IP and if so skip that binding.", "NaN"], ["63", "https://github.com/Netflix/eureka/issues/62", null, "karthik-vn", "10/18/13, 09:14:51 PM", "When eureka server startups, it tries to find the unused EIPS based on the list from it neighboring nodes.\n\nIf that communication fails for some reason, multiple eureka servers will bind to the same EIP there by snatching it from one another.\n\nAWS does not prevent reassociation in EC2-classic. A better way to handle this edge-case scenario is to find if the an instance id is associated with an elastic IP and if so skip that binding.", "[eureka-pull-requests #31](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/31/) SUCCESS\nThis pull request looks good\n =||= Does this also solves the race condition when two instances try to take the same EIP concurrently? I guess not.\n =||= "], ["64", "Break after we have associated the EIP without going through the entire ...", null, "karthik-vn", "10/18/13, 10:18:05 PM", "...list.", "[eureka-pull-requests #32](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/32/) SUCCESS\nThis pull request looks good\n =||= "], ["65", "https://github.com/Netflix/eureka/issues/62: Simplify EIP assignment logic.", null, "karthik-vn", "10/21/13, 06:35:53 PM", "NaN", "[eureka-pull-requests #33](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/33/) SUCCESS\nThis pull request looks good\n =||= "], ["66", "Change jersey bundle dependency to \"provided\" so that the upstream depen...", null, "karthik-vn", "10/30/13, 05:49:16 PM", "...dencies can specify their own.", "[eureka-pull-requests #34](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/34/) SUCCESS\nThis pull request looks good\n =||= "], ["67", "Add missing dependency.", null, "karthik-vn", "11/04/13, 07:11:08 PM", "NaN", "[eureka-pull-requests #35](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/35/) SUCCESS\nThis pull request looks good\n =||= "], ["68", "Replication optimization where the network traffic between eureka nodes ...", null, "karthik-vn", "12/23/13, 11:07:06 PM", "...are considerably reduced by executing the replication events as one batch instead of individual requests.\n\nThis has both the effect of reducing the number of threads on the eureka server side and also makes the replication lightning fast (where 100s of replication request are executed at the same time as 1 request). This optimization has a great positive effect of scaling eureka servers much much more horizontally making replication and state maintenance a non-issue when the cluster expands to have more nodes.", "[eureka-pull-requests #36](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/36/) SUCCESS\nThis pull request looks good\n =||= I haven't yet seen the entire code, but have a question: How do we assert whether a peer node supports batched requests? \n =||= [eureka-pull-requests #37](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/37/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #38](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/38/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #39](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/39/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #40](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/40/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #41](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/41/) SUCCESS\nThis pull request looks good\n =||= LGTM\n =||= "], ["69", "Add Client Update Callback", "James Kojo", "jameskojo", "09/24/15, 12:01:02 AM", "Add a callback to allow for listeners to be notified when the eureka client gets an update in it's poller.\n\nI'm managing a connection pool to a set of instances in a cluster. I'd like to be able to react in a timely manner to status changes of those instances. E.G. mark-down, mark-up, instance termination and metadata changes. \n\nMy current strategy is to poll the client periodically, but that introduces even more latency on top of the latency introduced by the polling thread.", "It is supported via EventBus service, where discovery events are emitted (StatusChangeEvent and CacheRefreshedEvent).\n =||= "], ["70", "Add metrics for HTTP client connection pool", "Nitesh Kant", "NiteshKant", "01/11/14, 09:11:35 AM", "The apache HTTP client, used by eureka for making HTTP requests to eureka servers does not have any metrics for connection pool. We should atleast be adding the following:\n\n1) Available connections per host.\n2) Idle connections per host.\n3) Total connections per host.\n4) In flight requests per host.", "[Ribbon](https://github.com/Netflix/ribbon) provides a [MonitoredConnectionManager](https://github.com/Netflix/ribbon/blob/master/ribbon-httpclient/src/main/java/com/netflix/http4/MonitoredConnectionManager.java) that can be used instead of the currently used ThreadSafeClientConnManager. It provides similar metrics to what we are looking for here.\n =||= "], ["71", "Support for more than just plain/secure port", "Jay Zarfoss", "zarfide", "07/01/16, 10:28:53 PM", "Currently a server can only offer services on 2 ports when integrated with Ribbon since announced addresses are limited to port/secureport.\n\nIdeally an arbitrary number of ports could be supported.  Or at the very least 3, one each for http, https with client auth, https without client auth.", "Eureka supports a comma separated VIP list for an instance but the port/secure port can just be one. Which makes the usage of multiple VIPs limited.\nSo, one should be able to register a list of \"endpoints\" which translates to a set of properties like VIP address, port, SSL config (client auth, etc.). This would result in a substantial change in the way we register (via properties as making them hierarchical is non-intutive) with eureka & the REST payload.\n =||= Closing due to inactivity.\n =||= "], ["72", "Connection leak on OOM", "Nitesh Kant", "NiteshKant", "01/11/14, 09:11:42 AM", "Eureka uses jersey apache http client for eureka server communications. In order to cleanup connections, it relies on closing the ClientResponse object returned by jersey. In cases, when there is an unexpected error (like OOM) during reading of response, there is no ClientResponse object that is returned by jersey. In such a case, there happens to be a connection leak in the apache http client connection pool.", "Since, there isn't much handle that eureka code has in the internals of jersey & connection management for such errors, the only suitable place seems to be the [DiscoveryJerseyProvider](https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/provider/DiscoveryJerseyProvider.java) where in we can close the underlying response stream when such an error occurs.\n =||= "], ["73", "Fix for issue #53 #70 #72", "Nitesh Kant", "NiteshKant", "01/04/14, 12:27:22 AM", "Issue #70 Using ribbon's MonitoredConnectionManager instead of apache's ThreadSafeClientConnManager\nIssue #72 Improved exception handling in DiscoveryJerseyProvider & closing inputstream on Error during read.", "[eureka-pull-requests #42](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/42/) SUCCESS\nThis pull request looks good\n =||= "], ["74", "Bumping snapshot version", "Nitesh Kant", "NiteshKant", "01/07/14, 12:43:25 AM", "For some odd reason the snapshot versions are messed up in Netflix artifactory. So bumping the revision manually.", "[eureka-pull-requests #43](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/43/) SUCCESS\nThis pull request looks good\n =||= "], ["75", "Using a more qualified name for HTTP client stats.", "Nitesh Kant", "NiteshKant", "01/07/14, 09:01:04 PM", "NaN", "[eureka-pull-requests #44](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/44/) SUCCESS\nThis pull request looks good\n =||= "], ["76", "Discovery client should have a way to skip registry fetch", "Nitesh Kant", "NiteshKant", "02/24/14, 06:12:23 PM", "For applications that do not make any outbound calls, do not need to fetch the discovery registry information which can have significant memory overhead depending on how many instances are in the registry.", "NaN"], ["77", "Fix dependencies in gradle build.", "Veniamin Viflyantsev", "knok16", "01/13/14, 07:11:04 AM", "com.sun.jersey:jersey-servlet:1.11 dependency was missed in one of previously commits (5d9fbd77f681b3a13d7689ce87ccab83be874ea8 Fix for issue #53 #70 #72)", "[eureka-pull-requests #45](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/45/) SUCCESS\nThis pull request looks good\n =||= Thanks!\n =||= "], ["78", "Fix for issue #76", "Nitesh Kant", "NiteshKant", "01/14/14, 06:10:32 PM", "Added a property eureka.shouldFetchRegistry which when set to false will disable registry fetch.", "[eureka-pull-requests #46](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/46/) SUCCESS\nThis pull request looks good\n =||= "], ["79", "General code cleanup", "Scott E", "scotte", "04/25/14, 10:07:01 PM", "This pull request contains two commits:\n\n1) Remove trailing whitespace in files, including one file converted from dos EOLs\n2) General code cleanup\n\nThe changes in 2) are best viewed as a diff against 1).\n\nI will add a few line comments for clarity and spots where things might have been correct but someone more familiar with the code would have a better idea; and I will happily revert any bits that shouldn't be changed.", "[eureka-pull-requests #47](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/47/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #50](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/50/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #51](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/51/) SUCCESS\nThis pull request looks good\n =||= I'd suggest we go ahead and close this; I hit a lot of this in #110, and I've grabbed a lot of the rest in stuff waiting on that to clear or get modified.\n =||= @bpollack agreed, closed.\n =||= "], ["80", "Disabling batch replication by default", "Nitesh Kant", "NiteshKant", "02/06/14, 08:39:44 PM", "NaN", "[eureka-pull-requests #48](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/48/) FAILURE\nLooks like there's a problem with this pull request\n =||= "], ["81", "Optimize amazon metadata service calls", "Nitesh Kant", "NiteshKant", "09/23/15, 11:57:14 PM", "This code:\n\nhttps://github.com/Netflix/eureka/blob/42d73d3e36be60e8ddad3ef2014da286c823c8a5/eureka-client/src/main/java/com/netflix/appinfo/AmazonInfo.java#L118\n\ndoes 7 network calls for every AmazonInfo.autoBuild() call which gets triggered by default every 30 seconds by InstanceInfoReplicator thread in DiscoveryClient.\n\nWe can optimize this to only fetch the public hostname & IP which can only change after an instance has started. We can cache everything else.", "Partial fix is available in release [1.1.128](https://github.com/Netflix/eureka/releases/tag/1.1.128) as part of fix for issue #97 \n =||= This was greatly optimized in release 1.1.158\n =||= "], ["82", "Fix service UP timestamp from getting reset", "Scott E", "scotte", "02/07/14, 09:09:53 PM", "There was an issue with service UP timestamp tracking where the\ntimestamp would get reset in cases where a lease was re-registered.\n\nAlso modified the sample service to start in STARTING mode and only\ntransition to UP status after simulating application initialization\ntime by sleeping for 60 seconds.", "[eureka-pull-requests #49](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/49/) SUCCESS\nThis pull request looks good\n =||= "], ["83", "Upgrade apache httpclient and add copy constructor for InstanceInfo", "Jay Zarfoss", "zarfide", "02/13/14, 06:16:05 AM", "copy constructor needed for InstanceInfo to manipulate InstanceInfo information in LoadBalancers", "[eureka-pull-requests #52](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/52/) SUCCESS\nThis pull request looks good\n =||= "], ["84", "Addition of UniqueIdentifier interface for use by InstanceInfo", "Ryan Thomas", "rthomas", "02/17/14, 02:35:19 AM", "Added the UniqueIdentifier interface and modified InstanceInfo to call this getId method if this interface is implemented, rather than checking if name is Name.AMAZON. Updated AmazonInfo to use this.\n\nThis change is to allow non-amazon instances to be identified by a mechanism other than their hostname - e.g. multiple docker containers on the same host, registering with Eureka with the docker-host address.", "[eureka-pull-requests #53](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/53/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #54](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/54/) SUCCESS\nThis pull request looks good\n =||= Closed as it had additional commits from master that I didn't want in here.\n =||= "], ["85", "Added the UniqueIdentifier interface", "Ryan Thomas", "rthomas", "02/19/14, 08:53:04 PM", "Added the UniqueIdentifier interface and modified InstanceInfo to call this getId method if this interface is implemented, rather than checking if name is Name.AMAZON. Updated AmazonInfo to use this.\n\nThis change is to allow non-amazon instances to be identified by a mechanism other than their hostname - e.g. multiple docker containers on the same host, registering with Eureka with the docker-host address.", "Clone of PR #84, which was closed due to additional commits.\n =||= [eureka-pull-requests #55](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/55/) SUCCESS\nThis pull request looks good\n =||= Thanks Ryan for the contribution!\n\nSince, you are only using UniqueIdentifier for DataCenterInfo & there isn't any general purpose use of the interface, do you think it is simple to just add the method getInstanceId() in DataCenterInfo interface itself?\n =||= The reason I chose to have a new interface was to not introduce a breaking change for existing implementations of DataCenterInfo.\n\nIf that is acceptable however, I am happy to move it across.\n\nCheers,\n\nryan\n =||= That makes sense, I will merge the pull request.\n\nOn Monday, February 17, 2014, Ryan Thomas notifications@github.com wrote:\n\n> The reason I chose to have a new interface was to not introduce a breaking\n> change for existing implementations of DataCenterInfo.\n> \n> If that is acceptable however, I am happy to move it across.\n> \n> Cheers,\n> \n> ryan\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/Netflix/eureka/pull/85#issuecomment-35321350\n> .\n =||= "], ["86", "Fix the bug that unable to read metadata from the property file.", "Kent Dong", "CH3CHO", "02/20/14, 08:56:43 AM", "Remove the trailing \".\" when calling config.subset.", "[eureka-pull-requests #56](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/56/) FAILURE\nLooks like there's a problem with this pull request\n =||= I don't think the test error is related to my change. Could you re-run the build? Thanks.\n =||= Yes the failure is not related to your code, it is a flaky test.\n =||= I just added the trailing \".\" check in the new commit.\n =||= [eureka-pull-requests #57](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/57/) SUCCESS\nThis pull request looks good\n =||= Thanks @CH3CHO for the contribution\n =||= "], ["87", "StatsTimer usage causes large amount of heap usage.", "Nitesh Kant", "NiteshKant", "02/24/14, 06:19:23 PM", "As discussed in this thread: https://groups.google.com/forum/?fromgroups#!topic/eureka_netflix/ddBO6ostCp0 usage of StatsTimer in this class: https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/shared/EurekaJerseyClient.java#L270 causes memory leak because of misconfiguration of StatsTimer.\n\nIn this particular case, we do not need the percentile times provided by StatsTimer over BasicTimer. So, changing to BasicTimer should resolve this issue.", "NaN"], ["88", "Fix for issue #87", "Nitesh Kant", "NiteshKant", "02/24/14, 06:19:00 PM", "Changing StatsTimer usage to BasicTimer.", "[eureka-pull-requests #58](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/58/) SUCCESS\nThis pull request looks good\n =||= "], ["89", "Provide an API to remove all overridden status", "Nitesh Kant", "NiteshKant", "02/10/15, 06:55:40 PM", "Eureka has two instance states, one as overridden status and other as actual instance status published by the instance.\n\nThe override is generally used to manage instance state from an administration tool like asgard. It will be handy to have an API TO remove all overridden state which will start honoring instance status as published by the instance itself. ", "Fixed by PR #412\n =||= "], ["90", "Eureka console should show the count of instances by instance status.", "Nitesh Kant", "NiteshKant", "07/01/16, 10:29:12 PM", "The console currently shows the number per application, but does not have the total numbers for the entire registry.", "The console just being the main status page, or is there something else?  I'm happy to add this; I need/want to go clean up that page a bit today or tomorrow, anyway.\n =||= @bpollack its just a read-only status page. Sure, I can assign this issue to to you then?\n =||= @NiteshKant Sure, go for it.\n =||= Closing due to inactivity.\n =||= "], ["91", "Add option for field validation", "Jay Zarfoss", "zarfide", "07/01/16, 10:34:42 PM", "Feature request:\n\nAdd option for variable validation in Eureka Client, for example validation options for what \"application\" field can look like.  An example of an optional validation could look like something provided by Frigga already: \n\nhttps://github.com/Netflix/frigga/blob/master/src/main/java/com/netflix/frigga/NameValidation.java", "Closing due to inactivity.\n =||= "], ["92", "Feature Request: Client support for multiple applications registering from 1 process", "Elad Regev", "elad-regev", "07/14/16, 05:14:31 PM", "I would like Eureka to support multiple services hosted within the same JVM,\nwhich would allow the eureka-client to register all of them instead of the current 1 app per process model (The singleton design prevents me from creating multiple DiscoveryClients in the same JVM).\n\nI would like to know if others may require such feature, in order to decide how to proceed with bridging this gap.\n\nThanks,\nElad.", "This may now be possible thanks to the DI-refactoring work introduced in recent versions. You may still be stuck by the issue https://github.com/Netflix/eureka/issues/554 though.\n =||= Is there an example how code looks like to do that multi register?\n =||= Issue #554 have been addressed, so it is now possible to create multiple instances of DiscoveryClient (with their own configs) and achieve multiple registration from the same process. Note that to do this the server would have to not use Guice to create the clients.\n =||= Could you please give it a sample, thanks =||= "], ["93", "Dependency version for jersey-apache-client4 should be 1.11 instead of 1.8", "Srinath", "Srinathc", "04/22/14, 09:41:31 PM", "Since eureka-client directly depends on ribbon-httpclient version 0.3.10, it should use jersey-apache-client4 version 1.11 which is compatible with it instead of version 1.8.\n\nHere is the output of maven enforcer plugin which points to the discrepancy:\nDependency convergence error for com.sun.jersey.contribs:jersey-apache-client4:1.11 paths to dependency are:\n\n<pre>\n  +-com.netflix.eureka:eureka-client:1.1.127\n    +-com.netflix.ribbon:ribbon-httpclient:0.3.10\n      +-com.sun.jersey.contribs:jersey-apache-client4:1.11\nand\n  +-com.netflix.eureka:eureka-client:1.1.127\n    +-com.sun.jersey.contribs:jersey-apache-client4:1.8\n</pre>", "Fixed in eureka-1.1.128\n =||= "], ["94", "Current instance status notification", null, "elandau", "04/16/14, 08:03:29 PM", "- Add RefreshCallback so that custom instance status check logic can be implemented after getting an update from discovery.\n- Add Cancel/Register support to MockRemoteEureakServer\n- Add eureka-lifecycle project with a guide module for eureka bindings.\n- Includes binding for an Rx Observable<Boolean> with running instance up status notification\n\nHere is a usage example.  Note that the Observable is backed by a BehaviorSubject and as such emits the last known up status immediately after subscribe is called.  \n\n```\n    public static class Service {\n        @Inject\n        public Service(@UpStatus   Observable<Boolean> upStatusObservable) {\n            upStatusObservable.subscribe(new Action1<Boolean>() {\n                @Override\n                public void call(Boolean status) {\n                    System.out.println(\"***** Status changed to : \" + status);\n                }\n            });\n        }\n    }\n```", "[eureka-pull-requests #59](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/59/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #61](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/61/) FAILURE\nLooks like there's a problem with this pull request\n =||= > > > Looks like there's a problem with this pull request\n\nSince, the same test failed twice, which does not happen in other pull requests. I suspect that there is a change in this PR that is causing the failure. @elandau can you verify?\n =||= There was something wrong with the original pull request but I've since\nfixed it.  Yet the test still fails.  From looking at the code this seems\nto be a problem that always existed with the MockRemoteEurekaServer so I'm\nnot sure how this ever passed.  Although the fact that it ran before means\nthat I probably missed something.\n\nOn Tue, Apr 1, 2014 at 11:26 AM, Nitesh Kant notifications@github.comwrote:\n\n>  Looks like there's a problem with this pull request\n> \n>  Since, the same test failed twice, which does not happen in other pull\n> requests. I suspect that there is a change in this PR that is causing the\n> failure. @elandau https://github.com/elandau can you verify?\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/Netflix/eureka/pull/94#issuecomment-39240617\n> .\n =||= [eureka-pull-requests #65](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/65/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #66](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/66/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #67](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/67/) ABORTED\n =||= [eureka-pull-requests #68](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/68/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #73](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/73/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #74](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/74/) SUCCESS\nThis pull request looks good\n =||= "], ["95", "Fix typo in Eureka client", "Benjamin Pollack", "bpollack", "04/01/14, 05:45:03 PM", "Just fixes a minor typo I came across while testing", "[eureka-pull-requests #60](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/60/) SUCCESS\nThis pull request looks good\n =||= Thanks @bpollack !\n =||= "], ["96", "Do not instantly fail tests when MockEureka port is in use", "Benjamin Pollack", "bpollack", "04/15/14, 02:02:09 PM", "When the tests run quickly, the MockRemoteEurekaServer port is frequently still\nin use, throwing a BindError.  Rather than dying instantly, repeatedly try to\ngrab the port, backing off slightly each time.", "[eureka-pull-requests #62](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/62/) SUCCESS\nThis pull request looks good\n =||= The other way to fix this, by the way, would be to both expand DiscoveryClientRegistryTest:51 to multiply by 20, rather than 10, pulling the general creation of `mockLocalEurekaServer` in front of the `ConfigurationManager` calls, and then changing the port each time through the loop.  That's just a more invasive change, IMHO, but it might be the better one.  I'm happy to submit either.\n =||= [eureka-pull-requests #63](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/63/) SUCCESS\nThis pull request looks good\n =||= @bpollack I agree that the other option would be cleaner. Although, you will have to make that change in all the tests using the mock server.\nInstead, how about creating a factory method in mock eureka server like: MockRemoteEurekaServer.createWithRandomPortIfAlreadyBound(int port ... ) which retries on random ports (derived from the passed port) for X times before giving up. The chosen port can then be retrieved from the returned instance.\nWe can then replace all new MockRemoteEurekaServer() with this factory calls in all tests.\n\nThanks again for the contribution!\n =||= You got it @NiteshKant.  I'll modify this PR later today or early tomorrow with the second approach.\n =||= @bpollack Sounds awesome!\n =||= And incidentally, Java's not exactly my main language, so I apologize in advance if the code formatting is off.  I wanted to just tell IntelliJ to do its thing, but that reformatted a lot more than just my methods, so I wasn't really sure if that was actually a good way to proceed.\n =||= [eureka-pull-requests #64](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/64/) SUCCESS\nThis pull request looks good\n =||= Please take a look at #94.  I ran into the same problem for a different feature and I've reworked the tests to use ephemeral ports instead of random ports.  Using ephemeral ports guarantees that there will be no port collisions whereas random ports requires unnecessary logic around port collisions. \n =||= Thanks @elandau for the ephemeral port tip. I had to fix a critical bug in the client and did not have time to completely review your request. So, I just plucked the ephemeral port changes from your commit. Can you resubmit your PR after I merge #100 \nApologies for the inconvenience & thanks again for the tip!\n\n@bpollack Can I close this PR as the ephemeral port fix is better?\n =||= @NiteshKant Yeah, go ahead; I completely agree with @elandau that ephemeral ports are better, and feel silly for not thinking of that first.\n =||= "], ["97", "too many queries to metadata url?", "Andrew Spyker", "aspyker", "04/16/14, 06:11:53 PM", "https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/appinfo/AmazonInfo.java#L118\n\nautoBuild seems to have an algorithm that retries awsMetaDataRetries in case of error.  I expected to see a break from the while (numOfRetries-- > 0) upon success (where it does result.metadata.put(key.getName(), value);).  Instead in a version of this we copied and changed, we see it just try every query awsMetaDataRetries times.\n\nWe could submit a patch for this when we submit our similar class.  However, I wanted to double check that I understood the code right and there is really a issue here.", "@aspyker it indeed is a bug. There should be a break after line 136. I will fix this.\n =||= Available in release [1.1.128](https://github.com/Netflix/eureka/releases/tag/1.1.128)\n =||= "], ["98", "Client's clean shutdown", "Nitesh Kant", "NiteshKant", "04/16/14, 06:11:43 PM", "Eureka client on shutdown does not cancel all the scheduled tasks it has scheduled.\nThis may create a race-condition under which, the client may re-register with the server even after shutdown.\n\nThe race-condition lies in the [Instance Info replication scheduled task](https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/DiscoveryClient.java#L1416) which if there is a healthcheck handler registered with eureka, will re-register with the eureka server.\n\nThe fix is to cancel all the scheduled tasks at shutdown.", "Available in release [1.1.128](https://github.com/Netflix/eureka/releases/tag/1.1.128)\n =||= "], ["99", "Add application group to instance info", "Nitesh Kant", "NiteshKant", "04/16/14, 06:11:09 PM", "Inside netflix we wish to add a grouping criteria for different application under an umbrella. For this purpose eureka needs to publish the application group which then can be used by other clients to do any logic based on the application group.\n\nThe application group can be specified via a property \"namespace\" + \"appGroup\" where namespace by default is \"eureka.\" and hence the property eureka.appGroup can be used to specify the application group. Alternatively, in absence of this property, eureka will also look at a java environment property \"NETFLIX_APP_GROUP\" to infer the application group. The requirement of this environment property is purely due to internal requirements.", "Available in release [1.1.128](https://github.com/Netflix/eureka/releases/tag/1.1.128)\n =||= is the application group just a label to tell apart application ? or the different application group can not find other if they has not permission ?\r\nMy requirement is apps in different group and regist in a eureka ,for example ,group A and B\uff0cif A has permission to B,then apps in group A  can get  address in app Group B,so A can invoke B' api,if not ,A has no B's app's address,and can not invoke. =||= @zhangdc007 \u4f60\u89e3\u51b3\u4e86\u5417 =||= "], ["100", "Fixes issue #93 #97 #98 #99", "Nitesh Kant", "NiteshKant", "04/15/14, 07:11:32 PM", "1) Implementing clean shutdown of client. Moved away from Timer to ScheduledExecutorService as it gives better control of shutdown by interrupting the running thread, which is what we want.\n2) Implemented addition of \"application group\" to instance info.", "[eureka-pull-requests #69](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/69/) FAILURE\nLooks like there's a problem with this pull request\n =||= ScheduledExecutorService part looks fine.\n =||= [eureka-pull-requests #70](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/70/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #71](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/71/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #72](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/72/) SUCCESS\nThis pull request looks good\n =||= "], ["101", "Fixing the scheduling delay for InstanceInfoReplicator.", "Nitesh Kant", "NiteshKant", "04/16/14, 01:00:44 AM", "The timeunit got changed to Seconds but the value was still MS", "[eureka-pull-requests #75](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/75/) SUCCESS\nThis pull request looks good\n =||= "], ["102", "remove import of com.netflix.logging.* from status.jsp, as it does not a...", "Joe Hohertz", "jhohertz", "04/16/14, 04:41:36 PM", "Remove import of com.netflix.logging.\\* from status.jsp, as it does not appear to be actually used. (Should be hidden to app layer really)\n\nAnd it makes jetty9 angry due to there being no classes at that node of the package namespace, only below it. \n\nAlternate possibility, if classes _are_ needed, is to import deeper into the package space where needed. But if its not referenced, removal is probably better.", "[eureka-pull-requests #76](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/76/) SUCCESS\nThis pull request looks good\n =||= Thanks @jhohertz !\n =||= "], ["103", "Full DiscoveryClient Governation", null, "elandau", "04/16/14, 08:03:29 PM", "Alternative implementation to #93 with full DI support for DiscoveryClient without the need for a Guice module.  This implementation is also fully backwards compatible with DiscoveryManager.getInstance()", "[eureka-pull-requests #77](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/77/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #78](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/78/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #79](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/79/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #80](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/80/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #81](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/81/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #82](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/82/) ABORTED\n =||= "], ["104", "Fixing the indefinite wait in testcase.", "Nitesh Kant", "NiteshKant", "04/21/14, 08:02:35 PM", "NaN", "[eureka-pull-requests #84](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/84/) SUCCESS\nThis pull request looks good\n =||= "], ["105", "Fix some bad JavaDoc (bad params, incorrect @link)", "Benjamin Pollack", "bpollack", "04/21/14, 08:03:17 PM", "NaN", "[eureka-pull-requests #85](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/85/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #86](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/86/) SUCCESS\nThis pull request looks good\n =||= Thanks @bpollack !\n =||= "], ["106", "Remove a lot of dead code and unused imports", "Benjamin Pollack", "bpollack", "04/23/14, 06:46:52 PM", "NaN", "[eureka-pull-requests #87](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/87/) ABORTED\n =||= [eureka-pull-requests #88](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/88/) FAILURE\nLooks like there's a problem with this pull request\n =||= Hey, I'm a bit nonplussed about this.  Running locally on 3e6e16ba0bb92159d6335da1d1cde13366aee72e, `./gradlew build test` works just fine.  The first run of Cloudbees aborted due to timeout, and the second failed after much longer than usual due to an assert failure that I can't replicate.  Is there any way to get more insight into Cloudbees?\n =||= [eureka-pull-requests #89](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/89/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #90](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/90/) SUCCESS\nThis pull request looks good\n =||= @bpollack time sensitive tests sometime fail in cloudbees builds and we are working towards fixing flaky tests like these. There isn't any issue with this PR, I will merge it soon.\n =||= Thanks @bpollack!\n =||= "], ["107", "Fix DefaultEurekaClientConfig units", "Peter Kelley", "pgkelley4", "04/25/14, 09:52:16 PM", "EurekaServiceUrlPollInterval is named\ngetEurekaServiceUrlPollIntervalSeconds in EurekaClientConfig interface\nbut serviceUrlPollIntervalMs in config files. Its default looks\nsuspiciously like it shouldn't be multiplied by 1000. This config is\nactually used as seconds. Changed to be seconds\nserviceUrlPollIntervalSeconds and fixed the default.\n\nEurekaServerReadTimeoutSeconds and EurekaServerConnectTimeoutSeconds\nwere both being contributed as millseconds and used as milliseconds.\nChanged to seconds in config files and use of the config changed to use\nseconds.", "[eureka-pull-requests #91](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/91/) SUCCESS\nThis pull request looks good\n =||= This change will break existing config files that specify serviceUrlPollIntervalMs, or that specify either eurekaServer.readTimeout or eurekaServer.connectTimeout as milliseconds, not seconds.\n\nTo fix the inconsistencies either the config files must be changed or the interface must be changed. I have changed the config files here, but I can submit the other if that is preferred. \n =||= [eureka-pull-requests #94](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/94/) FAILURE\nLooks like there's a problem with this pull request\n =||= This is passing tests locally.\n\nNote that this will still break with config files that specify either eurekaServer.readTimeout or eurekaServer.connectTimeout as milliseconds, not seconds.\n =||= [eureka-pull-requests #95](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/95/) SUCCESS\nThis pull request looks good\n =||= @pgkelley4 \n\n> > > Note that this will still break with config files that specify either eurekaServer.readTimeout or eurekaServer.connectTimeout as milliseconds, not seconds.\n\nYes that is reasonable as we are atleast being truthful to what the property name is :)\n =||= "], ["108", "Do not get into a 500 state when a bad app registers", "Benjamin Pollack", "bpollack", "04/23/14, 09:51:05 PM", "Previously, the DataCenterInfo was not effectively \"validated\" until read\ntime, which meant that a malicious (or simply badly coded) app could take the\nEureka cluster offline by specifying a dataCenterName that wasn't one of\nAmazon, MyOwn, or Netflix.  Move the validation code to write time by doing\nthe conversion to DataCenterInfo.Name as part of the deserialization process.", "[eureka-pull-requests #92](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/92/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #93](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/93/) SUCCESS\nThis pull request looks good\n =||= "], ["109", "Do we want to upgrade to Java 7?", "Benjamin Pollack", "bpollack", "01/04/15, 04:53:56 AM", "I'm going through the code to just crush as many generic CheckStyles issues as I can, and noticed that a lot of lines longer than 120 characters would be fine if we went to Java 7 for the diamond operator.  We'd also pick up a bunch of other Java 7 enhancements.  How do you feel about requiring Java 7?", "If we produce compiled code that can run on java 6 its fine.\nInside Netflix we have not yet moved completely to java 7 & hence if we require java 7 for eureka (specifically the client), it will not be possible to use it inside netflix.\n =||= We completed migration to Java 7.\n =||= "], ["110", "Fixes for various CheckStyles issues", "Benjamin Pollack", "bpollack", "04/28/14, 01:15:32 AM", "This series of patches each fix one very simple CheckStyle issue.  These are all focused on cosmetic issues, and each cosmetic issue is dealt with in its own patch; I haven't yet attempted to address bigger issues, like missing JavaDoc comments or imports that are only imported to make `@link`s shorter.  Nevertheless, this gets us from 1600 to 580 CheckStyles violations, which dramatically improves the signal-to-noise ratio.", "[eureka-pull-requests #96](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/96/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #97](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/97/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #98](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/98/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #99](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/99/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #100](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/100/) FAILURE\nLooks like there's a problem with this pull request\n =||= Cloudbees is flagging these due to the timing errors that I'm trying to fix, but I'm trying to clean up the code a bit and get a handle on how to approach fixing the timing issues first.  Sorry about the chicken/egg issue, but these should pass `./gradlew test` locally.\n =||= @bpollack I have reviewed these changes and they seem fine to me. If you can sync this with the master, i will merge it.\n =||= Rebased onto master.  I ran tests at about half the commits (and all the ones that I had to tweak to rebase) to verify that I didn't accidentally break or regress anything, and the branch head obviously passes.\n =||= [eureka-pull-requests #105](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/105/) FAILURE\nLooks like there's a problem with this pull request\n =||= "], ["111", "AmazonInfo doesn't delimit namespace when querying properties", "Tim McCormack", "timmc", "07/01/16, 10:34:25 PM", "The [current version of AmazonInfo](https://github.com/Netflix/eureka/blob/ce1929b/eureka-client/src/main/java/com/netflix/appinfo/AmazonInfo.java#L162) prepends the  namespace parameter to property suffixes such as `mt.read_timeout`. Since other Netflix projects [such as Zuul](https://github.com/Netflix/zuul/blob/8ca9636a/zuul-netflix/src/main/java/com/netflix/zuul/stats/AmazonInfoHolder.java#L27) use the namespace `eureka`, the resulting properties look like `eurekamt.read_timeout` instead of `eureka.mt.read_timeout`.\n\nI'm filing this against Eureka instead of Zuul because I think Eureka should be adding a `.` when there is a namespace -- I'm happy to submit a PR that does this and also falls back on the old behavior -- but I can understand if the response is instead that Zuul's usage should be changed.", "Yeah thats just the way things have been. Eureka Client defaults the namespace to \"eureka.\" and hence properties are more legible. \nFeel free to submit a patch if the changes are backward compatible.\n =||= Closing due to inactivity.\n =||= "], ["112", "Remove dead code in ApplicationResource", "Benjamin Pollack", "bpollack", "04/25/14, 10:02:05 PM", "NaN", "[eureka-pull-requests #101](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/101/) FAILURE\nLooks like there's a problem with this pull request\n =||= "], ["113", "Fix wrong interface being provided", null, "elandau", "04/25/14, 10:02:35 PM", "NaN", "[eureka-pull-requests #102](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/102/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #103](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/103/) FAILURE\nLooks like there's a problem with this pull request\n =||= "], ["114", "Add additional JavaDoc", "Benjamin Pollack", "bpollack", "04/28/14, 11:53:55 PM", "I did my best job to get all these correct, but I'd appreciate a second set of eyes to make sure that my comments are all correct.", "[eureka-pull-requests #106](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/106/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #107](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/107/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #108](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/108/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #109](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/109/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #110](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/110/) FAILURE\nLooks like there's a problem with this pull request\n =||= Thanks @bpollack !\n =||= "], ["115", "Pin to latest release of Netflix components", null, "elandau", "04/28/14, 09:35:28 PM", "Eureka is currently pulling in old versions of netflix components and for some reason gradle is randomly picking up these transitive dependencies in other projects.  This will ensure that eureka is always built against the latest and greatest Netflix OSS components.  ", "[eureka-pull-requests #111](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/111/) FAILURE\nLooks like there's a problem with this pull request\n =||= #116 achieves the same goal but with an upper bound on the current major version.\n =||= "], ["116", "Changing external dependencies to follow a range version scheme.", "Nitesh Kant", "NiteshKant", "04/29/14, 12:01:00 AM", "The fixed version numbers for dependencies requires too many changes for every upgrade of any library.\nThis new scheme will pin to the same major version instead.", "[eureka-pull-requests #113](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/113/) SUCCESS\nThis pull request looks good\n =||= "], ["117", "CheckStyles/code cleanup and JavaDoc", "Benjamin Pollack", "bpollack", "04/30/14, 08:49:51 PM", "Last of the nearly-purely-cleanup PRs for a bit, I promise.  I hit all of this while wrapping my head around how to approach the test suite issue.  This does get us down to 479 CheckStyles violations, though, basically all of which are just CheckStyles whinging about the lack of JavaDoc on protected members, and eliminates a lot of stuff that was picked up by IntelliJ and findbugs on general code cleanliness.", "[eureka-pull-requests #114](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/114/) SUCCESS\nThis pull request looks good\n =||= Thanks @bpollack !\n =||= "], ["118", "Missing cache invalidation for remote region requests", "Nitesh Kant", "NiteshKant", "05/08/14, 05:52:41 AM", "In situations where a discovery client is configured to fetch registry information also from remote region(s), [the cache within the REST endpoint](https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/resources/ResponseCache.java) is not invalidated for any change in the local registry information. Instead it expires after the configured cache expiry time (defaults to 3 mins)\n\nThe reason for this behavior is that [on invalidate() callback](https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/resources/ResponseCache.java#L203) the keys it invalidates does not include the region names. Since, for the API calls that include the region parameter, the cache key is created with the region string, the invalidate call does not match that key. Hence, the cache does not get invalidated which results in no changes to the registry being visible to the client.", "Available in [1.1.131](https://github.com/Netflix/eureka/releases/tag/1.1.131)\n =||= This issue is close . But how to change this default behavior **(defaults to 3 mins)**.\r\nI am facing issue with invalidating when it runs locally with one eureka server.\r\nhttps://github.com/spring-cloud/spring-cloud-netflix/issues/3652\r\n =||= "], ["119", "Instantly start up if there are no peers to sync with", "Benjamin Pollack", "bpollack", "04/29/15, 06:31:59 PM", "Please feel free to reject this; it's as much an RFC on how to address #42 as anything else.  Instead of introducing new settings for instant startup in development environments, I'm instead simply bypassing the wait part of the cycle if there are no peers to sync with.  This _might_ have negative implications in a production environment, but I'm struggling to come up with one; it only shows up if you launch Eurekas a second before you populate DNS or the like.  I believe it ought to be safe.", "[eureka-pull-requests #115](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/115/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #116](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/116/) SUCCESS\nThis pull request looks good\n =||= @bpollack I am not merging this PR assuming you are working on the comment I provided. Let me know if you think otherwise.\n =||= @NiteshKant Yeah; Peter and I have been fixing up some Eureka production issues the last few days, so I haven't had a chance to do another version of this, but there is one coming.  Please don't close it, but don't merge it yet, either.\n =||= any news regarding this topic?\n =||= @looztra I unfortunately got transferred off the deployment team right after committing to do this, so I don't have the time to do this anymore.  @pgkelley4 may know if that's still on the roadmap, though.\n =||= @looztra We should be getting back to this within the next few weeks.\n =||= I looked at finishing this per your recommendations @NiteshKant, and I think that adding another property somewhat defeats the purpose. This can already be accomplished by changing a property. Internally we are now setting numberRegistrySyncRetries=0 to get essentially the same effect. Is there any reason this doesn't work in all cases?\n\nEither way, I think in another thread (https://github.com/Netflix/eureka/issues/42) you said that having a mode that starts without peers would be beneficial outside of this use case, if you are still thinking this makes sense I can fix up this PR.\n\nThoughts?\n =||= > > >  having a mode that starts without peers would be beneficial outside of this use case, if you are still thinking this makes sense I can fix up this PR.\n\nYes, certainly. I think it makes sense. \n =||= @NiteshKant I hit a few snags on this one...\n\n1) The proposal was to check if peerEurekaNodes was empty before syncUp. However, on my box when run locally, peerEurekaNodes is not empty becuase my local computer makes it into the list. This is because the PeerAwareInstanceRegistry.isThisMe method doesn't work in this circumstance.\n\nMy computers hostname is username.local, and the default files shipped with Eureka specify localhost as the default serviceUrl for testing locally. So the hostname comparison is never equal. (It works in AWS because the hostname is actually retrieved from ec2 metadata)\n\nPotential solutions for this: \n- When testing locally, have serviceUrls be \"localmode\" or some other non-URL flag that you special case.\n- Require people put their actual hostname in the config. (Not a big fan of this option, one more step to get everything up and running to test out Eureka)\n\nOther solutions to the original problem:\n- Leave the local computer in the peerEureka Nodes list. Now before syncUp see if that is the only peer in the list with a special case and skip the syncUp if it is.\n- The testing mode proposed could instead skip looking for other servers.\n- Just add to the wiki that people should set numberRegistrySyncRetries=0 for testing (worth considering again).\n\n2) I also looked at adding a new property to make it fail fast if the client doesn't discover any servers. But where would that go? There isn't a central place where the servers are resolved on startup (nor should there probably be). Am I missing some obvious place where this check could go?\n\nObviously 2 only applies if we stick with the approach we previously discussed. Tagging @bpollack so he sees this.\n =||= Thanks @pgkelley4 for working on this.\n\n> > > 1) The proposal was to check if peerEurekaNodes was empty before syncUp. However, on my box when run locally, peerEurekaNodes is not empty becuase my local computer makes it into the list. This is because the PeerAwareInstanceRegistry.isThisMe method doesn't work in this circumstance.\n> > > My computers hostname is username.local, and the default files shipped with Eureka specify localhost as the default serviceUrl for testing locally. So the hostname comparison is never equal. (It works in AWS because the hostname is actually retrieved from ec2 metadata)\n\nIs it possible to fix `PeerAwareInstanceRegistry.isThisMe()` then? One possible solution could be to change the default service URL in the eureka properties to have 127.0.0.1 instead of localhost and then use `InetAddress.getLocalHost().getHostAddress()` and see if the URL host is same as the localhost. This of course will be on top of the existing pure host string based matching.\n =||= I thought about that and I think it is really no different from putting in a special flag in the service URL. In that case you would only be able to check if the service URL is equal to `InetAddress.getLocalHost().getHostAddress()` if the service URL is 127.0.0.1 (Because those are always equal). So instead it would make sense to just return true from isThisME() if the service URL is 127.0.0.1.\n\nI am fine with doing that and I can't think of any valid cases this would mess up. You could potentially deploy to ec2 with 127.0.0.1 as the service URL... but I don't think we really need to worry about that.\n\nIf we do go ahead with that, can you respond to point 2) in my post from 14 days ago.\n =||= @pgkelley4 the associated issue for this pull (#42) has been closed and it seems the settled upon way to remove the initial start up wait is just to set property `eureka.numberRegistrySyncRetries=0`. If you still want to continue working on this PR that would be more than welcome. Otherwise, we can just close this one out.\n =||= I am fine with this being closed @qiangdavidliu. I do still think that it should be documented in the wiki if the code isn't changed though.\n =||= Thanks. Have added a paragraph for this in https://github.com/Netflix/eureka/wiki/Configuring-Eureka#configuration-1, under **Configuring for local development**.\n =||= "], ["120", "Eureka-JerseyClient-Conn-Cleaner thread should be a daemon", "Nitesh Kant", "NiteshKant", "05/08/14, 05:52:25 AM", "This prevents application shutdowns.", "Available in [1.1.131](https://github.com/Netflix/eureka/releases/tag/1.1.131)\n =||= why i have two thread is same name \u201c Daemon Thread [Eureka-JerseyClient-Conn-Cleaner2] (Running)\u201d\t\r\n =||= "], ["121", "Fix log level for serviceUrls", "Peter Kelley", "pgkelley4", "05/06/14, 08:26:36 PM", "Currently Eureka will log.info serviceUrls everytime it reads them.\nIt should only log.info serviceUrls if they have changed. Logging\neverytime it reads should be at the debug level.", "[eureka-pull-requests #117](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/117/) SUCCESS\nThis pull request looks good\n =||= Thanks @pgkelley4 !\n =||= "], ["122", "Fixes issues #118 #120", "Nitesh Kant", "NiteshKant", "05/07/14, 11:44:28 PM", "Issue #118 Removed the read-only cache in ResponseCache, it was not useful. Created a mapping for which keys without any regions map to keys with regions. This is looked up whenever there is an invalidation to also get keys which has remote regions.\n\nIssue #120 Making connection cleaner thread a daemon.", "[eureka-pull-requests #118](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/118/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #119](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/119/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #120](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/120/) FAILURE\nLooks like there's a problem with this pull request\n =||= The failure is a flaky test, merging this now.\n =||= [eureka-pull-requests #121](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/121/) FAILURE\nLooks like there's a problem with this pull request\n =||= "], ["123", "Fixing dependency versions suitable for netflix artifactory.", "Nitesh Kant", "NiteshKant", "05/08/14, 05:34:47 AM", "NaN", "[eureka-pull-requests #122](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/122/) SUCCESS\nThis pull request looks good\n =||= "], ["124", "Fix Guice Providers to cache provided entity", null, "elandau", "05/08/14, 05:07:21 PM", "NaN", "[eureka-pull-requests #123](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/123/) SUCCESS\nThis pull request looks good\n =||= Pull request looks ugly.  Created a new one #125 \n =||= "], ["125", "Fix Providers to cache and return the same instance", null, "elandau", "05/08/14, 07:07:44 PM", "NaN", "[eureka-pull-requests #124](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/124/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #125](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/125/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #126](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/126/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #127](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/127/) SUCCESS\nThis pull request looks good\n =||= "], ["126", "Fix injecting of EventBus into DiscoveryClient", null, "elandau", "05/08/14, 09:01:31 PM", "Discovery client currently does a bunch of stuff in the constructor.\nThese operations previous saw a null eventBus because it is optional.\nThe fix ensures that the optional EventBus is properly resolved before\nthe constructor is called\nDisable the DiscoveryStatusCheckTest until we can write a more robust\nmock server.", "[eureka-pull-requests #128](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/128/) FAILURE\nLooks like there's a problem with this pull request\n =||= "], ["127", "Fixing build failures", "Nitesh Kant", "NiteshKant", "05/08/14, 09:27:05 PM", "Also removing dependency version ranges as they do not play well with internal netflix infrastructure.", "[eureka-pull-requests #129](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/129/) SUCCESS\nThis pull request looks good\n =||= "], ["128", "Scheduled executor should be a daemon", null, "elandau", "05/19/14, 04:27:54 PM", "NaN", "[eureka-pull-requests #130](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/130/) SUCCESS\nThis pull request looks good\n =||= Thanks @elandau!\n =||= "], ["129", "Update CloudInstanceConfig.java", "Tom Mack", "tommack", "05/19/14, 04:28:22 PM", "Adding missing whitespace to log line.", "[eureka-pull-requests #131](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/131/) SUCCESS\nThis pull request looks good\n =||= Thanks @tommack!\n =||= "], ["130", "Fix Eureka instance count and status logging", "Peter Kelley", "pgkelley4", "05/30/14, 10:09:40 PM", "Eureka client would only log the number of UP instances but with the\ndeceiving message:\n\nlogger.debug(\"The total number of instances in the client now is {}\",\n                totInstances);", "The log message is deceiving as-is. Another fix would be to change the log message to be:\n\nlogger.debug(\"The total number of UP instances in the client now is {}\", totInstances);\n\nLet me know which you would prefer.\n =||= [eureka-pull-requests #132](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/132/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #133](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/133/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #134](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/134/) FAILURE\nLooks like there's a problem with this pull request\n =||= A few points to make about the \"Fix appsHashCode not getting updated\" commit.\n- There could be other code paths I have missed where AppsHashCode isn't getting set correctly. It is currently inconsistent where it is set. In InstanceRegistry it is set in `getApplicationsFromMultipleRegions` but there isn't an analogous place in `DiscoveryClient`. This should probably be rethought, I think it made it easy to miss this bug.\n- Why is `AbstractDiscoveryClientTester.CLIENT_REFRESH_RATE = 10`? Can we lower it to speed up the tests?\n- This code `reconcileHashCode.equals(delta.getAppsHashCode())` In `fetchRegistry` will not return false and log differences if one app goes from UP to DOWN and another from DOWN to UP. Is this not a concern?\n =||= [eureka-pull-requests #135](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/135/) SUCCESS\nThis pull request looks good\n =||= @pgkelley4 apologies for the late reply.\n\n> > > There could be other code paths I have missed where AppsHashCode isn't getting set correctly. It is currently inconsistent where it is set. In InstanceRegistry it is set in getApplicationsFromMultipleRegions but there isn't an analogous place in DiscoveryClient. This should probably be rethought, I think it made it easy to miss this bug.\n\nIn the DiscoveryClient, the app hash code used to always come from the server (in the response) but looks like after the remote region change, this hash code was not getting updated to reflect the  remote instances.\nThe app hashcode is used only when applying delta, where it seems to be checking correctly. Which bug are you referring to?\n\n> > > Why is AbstractDiscoveryClientTester.CLIENT_REFRESH_RATE = 10? Can we lower it to speed up the tests?\n\nSure it can be.\n\n> > > This code reconcileHashCode.equals(delta.getAppsHashCode()) In fetchRegistry will not return false and log differences if one app goes from UP to DOWN and another from DOWN to UP. Is this not a concern?\n\nYes thats a valid point and we have thought about it before. You are correct that this scenario can occur and will incorrectly indicate that the registry contents are identical.\nHowever, the point to note is that the hashcode comes into picture only when it does not match (after applying the delta on the client). So, if the delta calculation at the server is correct, then the client would get the same registry information after applying the delta even though the hashcode did not change between the two calls (before and after this delta).\nIn other words, since the delta application is not conditional (based on the hashcode) the fact that the hashcode is not completely indicative of the registry content is not really an issue.\n =||= The changes look good to me. Should I merge it or you have some more changes to make?\n =||= My first point was more about when/where AppsHashCode should be set. I followed the pattern already in the code, but I really think it would be cleaner if it was managed by the Applications class, where it is stored. Then anytime the apps changed the AppsHashCode would be updated. This is a bit tricker because if someone changes instances through Application and not Applications, then AppHashCode would still have to be updated.\n\nEither way at this point that is something long term to consider. Please merge this immediate fix.\n =||= @pgkelley4 sure if you have thoughts on how to fix it, feel free to issue a PR or open an issue to discuss.\n =||= "], ["131", "Recent changes breaks eureka.shouldUseDns=true", "Joe Hohertz", "jhohertz", "05/21/14, 08:37:29 PM", "The DNS based lookup appears to have broken in 1.1.132 (or near there).\n\nNodes come up and never acquire the elastic IP as they should.", "Just an added data point, 1.1.131 is confirmed to work fine, so this regression comes from a later commit.\n =||= Thanks @jhohertz for reporting this. I am also deploying this build inside Netflix and will look into this.\nIn the meanwhile, can you provide the logs from your server which is showing this behavior?\n =||= I've captured some logs, but they'e fairly long, happy to email them to you?\n\nFrom the client side of it, it looks to be trying the right thing, trying to reach an existing Eureka server via the DNS records, cycles through all of them (getting not found as nothing has bound the IPs yet), which is normal in my experience as it's initializing, once it's cycled through them all, I see this:\n\n```\n2014-05-21 19:02:44,295 WARN  com.netflix.discovery.DiscoveryClient:1611 [main] [fetchRegistryFromBackup] No backup registry instance defined & unable to find any discovery servers.\n2014-05-21 19:02:44,298 INFO  com.netflix.discovery.DiscoveryClient:1048 [main] [initScheduledTasks] Starting heartbeat executor: renew interval is: 30\n2014-05-21 19:02:45,170 INFO  com.netflix.eureka.PeerAwareInstanceRegistry:218 [main] [updatePeerEurekaNodes] Adding replica node: http://ec2-54-243-35-38.compute-1.amazonaws.com:80/eureka/v2/\n2014-05-21 19:02:45,776 INFO  com.netflix.eureka.PeerAwareInstanceRegistry:218 [main] [updatePeerEurekaNodes] Adding replica node: http://ec2-54-243-35-32.compute-1.amazonaws.com:80/eureka/v2/\n2014-05-21 19:02:46,735 INFO  com.netflix.eureka.PeerAwareInstanceRegistry:218 [main] [updatePeerEurekaNodes] Adding replica node: http://ec2-54-243-35-42.compute-1.amazonaws.com:80/eureka/v2/\n2014-05-21 19:02:47,281 INFO  com.netflix.eureka.PeerAwareInstanceRegistry:236 [main] [updatePeerEurekaNodes] Updating the replica nodes as they seem to have changed from [] to [http://ec2-54-243-35-38.compute-1.amazonaws.com:80/eureka/v2/, http://ec2-54-243-35-32.compute-1.amazonaws.com:80/eureka/v2/, http://ec2-54-243-35-42.compute-1.amazonaws.com:80/eureka/v2/] \n2014-05-21 19:03:14,297 INFO  com.netflix.discovery.DiscoveryClient:638 [pool-4-thread-1] [fetchRegistry] Disable delta property : false\n2014-05-21 19:03:14,299 INFO  com.netflix.discovery.DiscoveryClient:639 [pool-4-thread-1] [fetchRegistry] Force full registry fetch : false\n2014-05-21 19:03:14,299 INFO  com.netflix.discovery.DiscoveryClient:640 [pool-4-thread-1] [fetchRegistry] Application is null : false\n2014-05-21 19:03:14,303 INFO  com.netflix.discovery.DiscoveryClient:641 [pool-4-thread-1] [fetchRegistry] Registered Applications size is zero : true\n2014-05-21 19:03:14,304 INFO  com.netflix.discovery.DiscoveryClient:643 [pool-4-thread-1] [fetchRegistry] Application version is -1: true\n```\n\nAt which we cycle into the routine seeing as when we have a single node up and it's looking for it's peers endlessly.\n\nFrom the status page, it had all the replicas listed as available and registered....\n\n... and as I went to grab a screenshot of that, I now see it's gotten past this somehow, I have a valid 3-node cluster of nodes... perhaps I was too impatient with it earlier... I'll try shutting it down and up again a couple time to see if I just got lucky here...\n =||= I've so far been unable to reproduce the issue I reported, perhaps it was something transient. (No longer have the log from the original failure... so can't check)\n\n@NiteshKant,  my apologies for any harm to your signal-to-noise ratio, I'll close this off for now, can always re-open if I run into it again.\n =||= No problems at all @jhohertz. Sure reopen this if you see this again.\n =||= "], ["132", "Add ability for eureka-client to only fetch registry of a single application on periodic refresh", "David Liu", "qiangdavidliu", "06/03/14, 07:55:38 PM", "Eureka-server already support application specific registry fetch. It would be useful for eureka-client's periodic refresh to be able to support application specific refresh as well as the more general full/delta refresh.", "Property <namespace>.registryRefreshSingleVipAddress can be used to specify a **single** VIP address that will be fetched by the client instead of the complete registry.\n =||= "], ["133", "Adding config override in eureka-client to force registry refresh to only pick up data for a single app", "David Liu", "qiangdavidliu", "06/03/14, 07:52:13 PM", "#132", "[eureka-pull-requests #136](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/136/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #138](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/138/) SUCCESS\nThis pull request looks good\n =||= "], ["134", "Automatically re-register all DC instance by default", "Jerome Boulon", "jboulon", "07/22/14, 11:01:10 PM", "NaN", "[eureka-pull-requests #137](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/137/) SUCCESS\nThis pull request looks good\n =||= Pull request #150 achieves this without a property knob, which seems unnecessary, as discussed in previous comments.\n\nI am closing this PR, the other PR will be released as part of milestone [1.1.137](https://github.com/Netflix/eureka/issues?milestone=4&state=open)\n =||= "], ["135", "DC services are not registered by default after an Eureka re-start", "Jerome Boulon", "jboulon", "07/22/14, 11:23:09 PM", "When Eureka is running in a Data center and in case of Eureka re-start (even rolling upgrade). Eureka will not re-register existing services on the new Eureka node e after re-start. \nFor AWS instance there's some specific code in place to re-register instances from the same region but that function return false in all other cases.", "See https://github.com/Netflix/eureka/pull/134 for the fix\n =||= Thanks @jboulon! I have provided my comments on #134 \n =||= The fix is done in #150 instead.\n =||= "], ["136", "Removing range dependencies.", "Nitesh Kant", "NiteshKant", "06/03/14, 11:28:21 PM", "NaN", "[eureka-pull-requests #139](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/139/) FAILURE\nLooks like there's a problem with this pull request\n =||= "], ["137", "Introduce rate limiting for eureka server", "Nitesh Kant", "NiteshKant", "01/04/15, 04:49:30 AM", "Eureka servers assumes well behaving clients, i.e.:\n- Clients do not aggressively query the servers for data.\n- Clients do not do full registry calls but do delta updates.\n\nAlthough most of the clients use the provided eureka client but there may be some offending clients which do not behave well. These clients can potentially bring down the server by throwing a high amount of load on the server and hence penalizing the other well behaved clients.\n\nEureka servers should apply quotas for clients based on different criterions:\n- Same client.\n- Same application.", "Guava has some low level APIs that may be useful here.\n\nhttp://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/RateLimiter.html\n =||= Rate limiter functionality was implemented for Eureka 1.0. The rate limiting is performed only for full/delta/application fetches. There are two quotas. One for all query types, and a dedicated one for the full registry fetch.\n =||= "], ["138", "Eureka Client not resilient to socket read timeouts not getting triggered", "Nitesh Kant", "NiteshKant", "07/06/14, 06:19:25 AM", "Eureka client uses thread pool schedulers to schedule tasks:\n- Fetch registry\n- Heartbeats\n\nThis assumes that every scheduled task finishes either with success or error. If this assumption is broken, no new tasks (for the same type) gets scheduled.\nIn some scenarios we have seen inside AWS that the socket read timeouts do not get triggered which makes the thread reading HTTP response stuck and hence break the above assumption.\n\nThe client should be able to identify this scenario and be resilient.", "NaN"], ["139", "Eureka client should identify itself when connecting to the server", "David Liu", "qiangdavidliu", "07/08/14, 05:50:47 PM", "Eureka client requests should include some identifiable header data when connecting to eureka server for tracking and metric purposes. Fields of interest would be:\n- client-identifier\n- client-ip\n- client-version", "#142 \n =||= merged\n =||= "], ["140", "add eureka.appinfo.initial.replicate.time property to allow faster initi...", "Andrew Spyker", "aspyker", "06/18/14, 07:57:10 AM", "...al registration", "[eureka-pull-requests #140](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/140/) SUCCESS\nThis pull request looks good\n =||= Thanks @aspyker \n =||= "], ["141", "Adding timeout and backup on DiscoveryClient's heartbeat and cacheRefresh", "David Liu", "qiangdavidliu", "06/23/14, 05:40:40 AM", "NaN", "[eureka-pull-requests #141](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/141/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #142](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/142/) SUCCESS\nThis pull request looks good\n =||= #138 \n =||= "], ["142", "Adding auth headers", "David Liu", "qiangdavidliu", "07/07/14, 11:26:47 PM", "Adding auth headers to eureka client and server outbound requests.\nAdding filter to optionally log auth headers in eureka server.", "[eureka-pull-requests #143](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/143/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #154](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/154/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #155](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/155/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #156](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/156/) SUCCESS\nThis pull request looks good\n =||= "], ["143", "Improved locking for periodic registry refreshes", "David Liu", "qiangdavidliu", "07/04/14, 11:18:34 PM", "In the very unlikely case where applying registry updates take > than the update periodicity, a subsequent update thread can trample the previous (still updating) thread.", "[eureka-pull-requests #144](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/144/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #145](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/145/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #146](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/146/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #147](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/147/) SUCCESS\nThis pull request looks good\n =||= "], ["144", "Make HealthCheckCallback injectable", null, "elandau", "07/04/14, 11:47:35 PM", "Making HealthCheckCallback injectable instead of calling registerHealthCheckCallback removes the need to create custom providers that want to ensure registerHealthCheckCallback is called as part of DiscoveryClient instantiation. \n\nAlso change a few @Singleton's to @FineGrainedLazySingleton", "[eureka-pull-requests #148](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/148/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #149](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/149/) SUCCESS\nThis pull request looks good\n =||= @elandau LGTM, merge?\n =||= "], ["145", "Healthcheck handler should support returning any InstanceInfo Status", "Nitesh Kant", "NiteshKant", "07/06/14, 06:18:37 AM", "Current `HealthCheckCallback` only supports a binary status which translates to UP and DOWN status for `InstanceInfo`. \nIn order to have healthcheck status not used in STARTING state, eureka client does not invoke the healthcheck callback when the status is STARTING.\nThis forces applications to spread the instance status update in two places:\n- `HealthCheckCallback` giving UP/DOWN status.\n- Application code transitioning status from STARTING to UP\n\nThis change will provide a new interface (deprecating the old `HealthCheckCallback` interface), that will provide the `InstanceInfo.InstanceStatus` as its return value. This will enable applications to have the instance status update logic in one place i.e. the `HealthCheckHandler`", "NaN"], ["146", "Fixes issue #145", "Nitesh Kant", "NiteshKant", "07/06/14, 03:42:17 AM", "Provided a new interface `HealthcheckHandler` and deprecated `HealthcheckCallback`\n\nThis change is backward compatible i.e. the use of `HealthcheckCallback` stays as today.", "[eureka-pull-requests #150](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/150/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #151](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/151/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #152](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/152/) SUCCESS\nThis pull request looks good\n =||= "], ["147", "Re-introduce read-only cache in ResponseCache", "Nitesh Kant", "NiteshKant", "07/06/14, 06:18:29 AM", "In eureka release 1.1.131 the read-only cache in `ResponseCache` was removed.\nIn our production we have seen high rate of cache misses causing higher latencies for get full registry requests.", "NaN"], ["148", "Fixes issue #147", "Nitesh Kant", "NiteshKant", "07/06/14, 06:18:17 AM", "Re-introducing read only response cache.", "[eureka-pull-requests #153](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/153/) SUCCESS\nThis pull request looks good\n =||= "], ["149", "Minor fixes", "David Liu", "qiangdavidliu", "07/22/14, 11:50:45 PM", "Removing identity header id logging to reduce metric size\nQuieten down periodic log messages in discoveryClient", "[eureka-pull-requests #157](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/157/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #158](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/158/) SUCCESS\nThis pull request looks good\n =||= Not merged\n =||= "], ["150", "Enabling registration for non-amazon datacenters on server startup.", "Nitesh Kant", "NiteshKant", "07/22/14, 11:19:50 PM", "`PeerAwareInstanceRegistry` disregards any non-amazon instances got from a peer on initial startup. This change enabled the registration.\n\nChanges were discussed as part of pull request: https://github.com/Netflix/eureka/pull/134", "[eureka-pull-requests #159](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/159/) SUCCESS\nThis pull request looks good\n =||= "], ["151", "Minor fixes", "David Liu", "qiangdavidliu", "07/23/14, 12:09:11 AM", "- change periodic info logs to debug logs in DiscoveryClient\n- remove clientId logging in discovery server", "[eureka-pull-requests #160](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/160/) SUCCESS\nThis pull request looks good\n =||= "], ["152", "Cannot Bind Elastic IP in VPC", "Eric Dowd", "ericdowd", "08/01/14, 06:44:17 AM", "I was trying to run eureka in a VPC; I allocated VPC elastic IPs and started the instance in a VPC. I received an error message when trying to bind to an elastic IP because VPC EIPs require allocation id (which can be found in DescribeAddresses) instead of public IP (which EC2-Classic EIPs require). Though it didn't make it that far, unbinding would also run into a problem because it requires association id instead of the public IP.", "Fixed with pull request #153 \n =||= "], ["153", "Fix for Issue #152", "Eric Dowd", "ericdowd", "07/28/14, 06:57:31 PM", "Check if the elastic ip is for VPC and behave appropriately", "[eureka-pull-requests #161](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/161/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #164](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/164/) SUCCESS\nThis pull request looks good\n =||= Thanks @ericdowd !\n =||= "], ["154", "Skeletal changes for 2.x", "Nitesh Kant", "NiteshKant", "07/26/14, 12:50:31 AM", "All the source code is removed. This only contains the modules required for eureka 2.X\nWe will add the files required from 1.X as we need them.", "[eureka-pull-requests #162](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/162/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #163](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/163/) SUCCESS\nThis pull request looks good\n =||= "], ["155", "Eureka 2.0 transport prototype.", null, "tbak", "07/29/14, 06:59:38 AM", "Contains the code we walked through today.", "[eureka-pull-requests #165](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/165/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #166](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/166/) SUCCESS\nThis pull request looks good\n =||= "], ["156", "Initial example interface/implementation of model and registry", "David Liu", "qiangdavidliu", "07/29/14, 05:10:06 PM", "NaN", "[eureka-pull-requests #167](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/167/) SUCCESS\nThis pull request looks good\n =||= @qiangdavidliu please rebase + submit, will merge.\n =||= [eureka-pull-requests #168](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/168/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #169](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/169/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #170](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/170/) SUCCESS\nThis pull request looks good\n =||= "], ["157", "Remote region registry lookup failure should not disable registry fetch", "Nitesh Kant", "NiteshKant", "08/01/14, 05:09:04 PM", "Eureka server does not allow fetch registry if there is a remote region registry fetch configured and the remote region server is unavailable. Relevant code is [here](https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/PeerAwareInstanceRegistry.java#L398)\n\nThis creates a circular dependency between two regions configured to fetch registry data from each other (which is typically the case) and hence makes it impossible to bootstrap two dependent regions.\n\nThis behavior should be altered such that remote region registry fetch is a 'best-effort' and any failure to retrieve this registry does not hamper clients fetching registry information.\n#### Open question\n\nShould we only disallow fetch registry calls that requires remote region data in this scenario?", "PR #158 fixes this issue. \n\n> > > Should we only disallow fetch registry calls that requires remote region data in this scenario?\n\nThis change disallows remote registry fetch calls when remote region registry is not available. The local region registry fetch is allowed.\n =||= "], ["158", "Fixes #157", "Nitesh Kant", "NiteshKant", "08/01/14, 05:09:03 PM", "Making remote region registry fetch a soft dependency.\n\nThis means that clients that are making calls to fetch registry and delta for local region only, will continue to get registry data even if the configured remote region registry is unavailable.\nThis removes a circular dependency between cross-region eureka instances and hence it is possible to bootstrap both regions from scratch.", "[eureka-pull-requests #172](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/172/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #173](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/173/) SUCCESS\nThis pull request looks good\n =||= "], ["159", "Eureka transport update.", null, "tbak", "08/04/14, 08:57:35 PM", "NaN", "[eureka-pull-requests #174](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/174/) SUCCESS\nThis pull request looks good\n =||= "], ["160", "Initial attempt to interests implementation", "Nitesh Kant", "NiteshKant", "08/05/14, 02:23:10 AM", "-- Provided a new EurekaRegistry API as I did not want a lot of conflicts for David. This can merge into existing registry implementation later.\n-- Provided an Index and interest abstraction.\n-- Had to comment a test case for EurekaTransport because avro was not able to handle an abstract class (why?)\n-- Created a new module eureka-test-utils that will be used to provide test utilities for eureka for internal (eureka project) and external (people using eureka) use.", "[eureka-pull-requests #175](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/175/) SUCCESS\nThis pull request looks good\n =||= "], ["161", "Adding initial implementations to partially implemented model classes", "David Liu", "qiangdavidliu", "08/05/14, 04:17:59 PM", "Changes to common classes:\n- added an unique UUID to instanceInfo id in SampleInstanceInfo\n- added a parallel SampleChangeNotification in the same style as SampleInstanceInfo that can also take a seed instanceInfo to creating notifications (so that the id can stay constant)", "[eureka-pull-requests #176](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/176/) SUCCESS\nThis pull request looks good\n =||= "], ["162", "Implementing init state & real time state consistency.", "Nitesh Kant", "NiteshKant", "08/05/14, 02:28:35 PM", "Created a special \"pausable\" Subject that can be used for any data set that needs a consistency between iterator creation and change notification stream.", "[eureka-pull-requests #177](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/177/) SUCCESS\nThis pull request looks good\n =||= "], ["163", "Merge EurekaRegistryImpl with InstanceRegistry", "David Liu", "qiangdavidliu", "08/06/14, 04:47:50 PM", "Caveats apply, see TODO comments in LeasedInstanceRegistry", "[eureka-pull-requests #178](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/178/) SUCCESS\nThis pull request looks good\n =||= "], ["164", "transport update", null, "tbak", "08/06/14, 07:49:27 PM", "NaN", "[eureka-pull-requests #179](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/179/) SUCCESS\nThis pull request looks good\n =||= "], ["165", "Transport update.", null, "tbak", "08/07/14, 06:34:40 PM", "NaN", "[eureka-pull-requests #180](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/180/) ABORTED\n =||= [eureka-pull-requests #181](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/181/) SUCCESS\nThis pull request looks good\n =||= "], ["166", "Removing the unused Index enum.", "Nitesh Kant", "NiteshKant", "08/12/14, 07:24:31 AM", "-- Also modified the InitStateHolder to take an iterator which works well with filtering by interest.\n-- Provided a shutdown() on registry so that we can simulate end of an index.", "[eureka-pull-requests #182](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/182/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #183](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/183/) SUCCESS\nThis pull request looks good\n =||= "], ["167", "Initial naive implementation of InstanceLocation", "David Liu", "qiangdavidliu", "08/12/14, 04:40:06 PM", "- eventual consistent view of snapshotForInterest from the registry", "[eureka-pull-requests #184](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/184/) SUCCESS\nThis pull request looks good\n =||= "], ["168", "(WIP) Introducing the concept of EurekaService and ServiceChannel.", "Nitesh Kant", "NiteshKant", "08/13/14, 06:33:36 AM", "-- A service is the access point for registry access (both read/write)\n-- A channel abstracts a protocol/command so that it provides a higher level abstraction of what is to be done for a command.\n\nWe can bikeshed on names but lets discuss the abstraction.", "[eureka-pull-requests #185](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/185/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #186](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/186/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #188](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/188/) SUCCESS\nThis pull request looks good\n =||= "], ["169", "Initial proposal for DeltaInstanceInfo", "David Liu", "qiangdavidliu", "08/25/14, 03:06:30 PM", "NaN", "[eureka-pull-requests #187](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/187/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #189](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/189/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #190](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/190/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #191](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/191/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #192](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/192/) ABORTED\n =||= [eureka-pull-requests #193](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/193/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #196](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/196/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #199](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/199/) SUCCESS\nThis pull request looks good\n =||= "], ["170", "Eureka 2.x multiple commits", null, "tbak", "08/15/14, 05:08:13 PM", "NaN", "[eureka-pull-requests #194](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/194/) SUCCESS\nThis pull request looks good\n =||= "], ["171", "Integration of registration protocol with EurekaServerService API ", null, "tbak", "08/25/14, 03:17:36 PM", "NaN", "[eureka-pull-requests #195](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/195/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #200](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/200/) SUCCESS\nThis pull request looks good\n =||= "], ["172", "Fix logging string", "Jeff Williams", "jeffw-wherethebitsroam", "08/21/14, 07:51:04 AM", "Just getting it to log the availability zones correctly. Previously:\n\n2014-08-20 06:28:02,249 DEBUG com.netflix.discovery.DiscoveryClient:522 [DiscoveryClient_ServiceURLUpdater] [getEurekaServiceUrlsFromConfig] The availability zone for the given region us-east-1 are %s", "[eureka-pull-requests #197](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/197/) SUCCESS\nThis pull request looks good\n =||= Thanks @jeffw-wherethebitsroam \n =||= "], ["173", "Adding a new gradle task (testJar) to allow test dependencies on eureka-client", null, "christorpelund", "08/26/14, 01:52:23 AM", "NaN", "[eureka-pull-requests #198](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/198/) SUCCESS\nThis pull request looks good\n =||= @christorpelund can you explain the usecase you are solving with this change?\n =||= @NiteshKant we're trying to expose the mock eureka server as a test dependency so we can do TDD against our own opinionated client library.\n =||= @christorpelund that makes sense.\n =||= "], ["174", "Enable injection of BackupRegistry in DiscoveryClient", "Nitesh Kant", "NiteshKant", "08/26/14, 07:12:24 PM", "Currently DiscoveryClient uses reflection to instantiate `BackupRegistry`. \nThis makes it impossible for `BackupRegistry` to use injection.", "NaN"], ["175", "Update eureka-client to use new domain model with Delta class.", null, "tbak", "08/26/14, 12:58:01 AM", "Update avro/json codecs to deal with modified data model.", "[eureka-pull-requests #201](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/201/) ABORTED\n =||= [eureka-pull-requests #202](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/202/) SUCCESS\nThis pull request looks good\n =||= "], ["176", "Fixes #174", "Nitesh Kant", "NiteshKant", "08/26/14, 07:12:24 PM", "-- Making BackupRegistry injectable.\n-- Fixed an annoying issue in EIPManager:  When no EIPs are free, it was throwing an NPE.", "[eureka-pull-requests #203](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/203/) SUCCESS\nThis pull request looks good\n =||= "], ["177", "Diff to generate deltas from instanceInfo", "David Liu", "qiangdavidliu", "08/26/14, 04:57:48 PM", "NaN", "[eureka-pull-requests #204](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/204/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #205](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/205/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #206](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/206/) SUCCESS\nThis pull request looks good\n =||= "], ["178", "Integrate discovery server transport layer with InterestChannel.", null, "tbak", "08/27/14, 04:10:11 PM", "NaN", "[eureka-pull-requests #207](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/207/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #210](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/210/) SUCCESS\nThis pull request looks good\n =||= "], ["179", "Adding back the modified public constructor to DiscoveryClient", "Nitesh Kant", "NiteshKant", "08/27/14, 05:28:24 AM", "Fix for issue #174 added another argument to the constructor used by guice.\nThis was considering the fact that code should not be using the @Inject constructor directly. However, some code inside Netflix was dependent on it.\n\n Adding the old constructor back and making the @Inject constructor package private.", "[eureka-pull-requests #208](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/208/) SUCCESS\nThis pull request looks good\n =||= "], ["180", "Reworked InstanceInfoField so reflection is not used to set InstanceInfo", "David Liu", "qiangdavidliu", "08/27/14, 06:11:54 PM", "Also removed unused classes", "[eureka-pull-requests #209](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/209/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #211](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/211/) SUCCESS\nThis pull request looks good\n =||= "], ["181", "Guaranteed instance id uniqueness ", null, "tbak", "06/02/16, 10:26:03 PM", "Current Eureka design assumes that clients choose their instance id, and submit it to the Eureka server during registration process. It has some pros/cons versus reversed process, where the server assigns an id to a client and sends it back in a reply to a registration request.\n\n**Client side instance id assignment**\nPros:\n- client can choose their own naming schema (use instance id in AWS, or IP address or a descriptive name like backend-server-X)\n\nCons:\n- client is responsible for instance id uniqueness, across multiple applications\n- Eureka server must be able to detect situations where the same id is used by multiple different clients (when the id uniqueness contract is violated by clients)\n\n**Server side instance id assignment**\nPros:\n- clients are relieved from assigning globally unique ids\n- no problem with misbehaving clients\n\nCons:\n- it is difficult to generate compact, descriptive and unique ids in a distributed system. For example ip address itself is not enough (can be reassigned).\n- using UUIDs would solve the uniqueness problem, but would leave us with long and cryptic ids", "Why not both ids?\n\n```\nclass GloballyUniqueIDs {\n  String clientID;\n  String serverID;\n   ...\n}\n```\n =||= Thanks for the suggestion @futurely . That's an interesting idea and we will look into it.\n =||= archiving as eureka2 work is going through some larger internal changes.\n =||= "], ["182", "Upgrade to Java7 and remove redundancy from gradle scripts.", null, "tbak", "08/27/14, 11:27:24 PM", "NaN", "[eureka-pull-requests #212](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/212/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #214](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/214/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #215](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/215/) SUCCESS\nThis pull request looks good\n =||= "], ["183", "Add missing pieces to run Eureka client/server for the current code base", null, "tbak", "08/28/14, 09:58:23 PM", "Add missing pieces to run Eureka client/server for the current code base\n\nTo run server execute:\ncd eureka-server\n../gradlew runWriteServer\n\nTo run client:\ncd eureka-test-utils\n../gradlew build\n./build/cli.sh\n\nRun help, to get a list of available commands.", "[eureka-pull-requests #216](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/216/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #220](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/220/) SUCCESS\nThis pull request looks good\n =||= "], ["184", "Client usage parity between 1.x and 2.x", "Nitesh Kant", "NiteshKant", "06/02/16, 10:25:59 PM", "#### Problem\n\nHow do we want people using eureka, primarily from the point of view of using eureka client, move from 1.x to 2.x stack?\n#### Scope\n- This obviously does not cover things that we are improving i.e. new APIs.\n- This applies to things like InstanceInfo, DatacenterInfo, InstanceStatus, Healthcheck, etc which are plugin points for users and cause pain when changed.", "\\cc @tbak @qiangdavidliu \n =||= From the data model point of view (InstanceInfo, DataCenterInfo, etc) we shall not be very far away in 2.0 from what is in 1.0. The reactive interface will be obviously totally different. To easy the migration we could provide on top of Rx API, something closer to 1.0 synchronous API.\n =||= Sync API over async implementation may not be beneficial.\n[Should I expose synchronous wrappers for asynchronous methods?](http://blogs.msdn.com/b/pfxteam/archive/2012/04/13/10293638.aspx)\n[Good practice - Use the sync-over-async invocation pattern with caution](https://www.ibm.com/developerworks/community/wikis/home?lang=en#!/wiki/W7b59e5e25210_4b56_9b7e_69dab379734a/page/Good%20practice%20-%20%20Use%20the%20sync-over-async%20invocation%20pattern%20with%20caution)\n =||= archiving as eureka2 work is going through some larger internal changes.\n =||= "], ["185", "Unifying the channel and transport layers to use different data types", "David Liu", "qiangdavidliu", "09/02/14, 07:40:45 PM", "For Add, Modify and Delete operations, we have different data types of InstanceInfo, Delta and InstanceIdentifier (wrapper around the String id). Unifying these so that the transport layer can handle them.", "[eureka-pull-requests #221](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/221/) SUCCESS\nThis pull request looks good\n =||= Moving to a different design.\n =||= "], ["186", "Add DataCenterInfo and a few other abstraction", null, "tbak", "09/02/14, 07:39:48 PM", "NaN", "[eureka-pull-requests #222](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/222/) FAILURE\nLooks like there's a problem with this pull request\n =||= "], ["187", "A take on re-implementing channels (WIP- don't merge)", "Nitesh Kant", "NiteshKant", "09/07/14, 08:41:08 PM", "This is WIP and not yet finished.", "[eureka-pull-requests #223](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/223/) ABORTED\n =||= [eureka-pull-requests #224](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/224/) ABORTED\n =||= [eureka-pull-requests #225](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/225/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #226](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/226/) FAILURE\nLooks like there's a problem with this pull request\n =||= @tbak This change is included in the other PR #188, so I can close this one?\n =||= yes\n\nOn Thu, Sep 4, 2014 at 10:15 PM, Nitesh Kant notifications@github.com\nwrote:\n\n> @tbak https://github.com/tbak This change is included in the other PR\n> #188 https://github.com/Netflix/eureka/pull/188, so I can close this\n> one?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/pull/187#issuecomment-54585898.\n =||= "], ["188", "2.x reworked channels", null, "tbak", "09/04/14, 04:59:40 PM", "NaN", "[eureka-pull-requests #227](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/227/) SUCCESS\nThis pull request looks good\n =||= "], ["189", "Add rate limiter, to cut-off custom clients if traffic goes above configured level.", null, "tbak", "09/08/14, 04:54:48 PM", "NaN", "[eureka-pull-requests #228](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/228/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #229](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/229/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #235](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/235/) SUCCESS\nThis pull request looks good\n =||= "], ["190", "JAX-RS resources assume EurekaBootStrap driven before class loads", "David Currie", "davidcurrie", "10/10/14, 10:36:09 PM", "Many of the Eureka JAX-RS resources assume that the web container is going to drive EurekaBootStrap before loading the classes for those resources. For example, ApplicationsResource has a static field for EurekaServerConfigurationManager. If the container loads the classes first (as is the case for WebSphere Liberty), the instance obtained and stored in the field ends up being null and everything falls over with a NullPointerException the first time the field is accessed.\n\nPotential solutions include:\n- Lazily instantiating the static fields on first access\n- Changing the static fields to be instance fields\n- Remove the fields entirely and access the configuration objects only when needed\n\nWould you accept a PR to resolve this issue and, if so, which of the above would be your preferred approach?", "Hi, the environment initialization is handled by contextInitialized and contextDestroyed methods inside EurekaBootStrap. Are you able to explicitly force these calls at bootstrap initialization time to see if that works for you?\n =||= Hi, nothing has happened at this point other than that the classes have been loaded. So, other than trying to hook a call to contextInitialized in to the static initialization (which seems completely wrong) I'm not sure where I could call this from. The initialization does happen, it's just after the statics have already tried to grab the uninitialized instances so deferring the latter through one of the three options above seems to make more sense.\n =||= Hi, I did a bit of reading on WebSphere class loaders and it looks like by default, it loads the web modules with a child loader of the application class loader.\n\nCan you try to set your WAR class-loader policy control to \"Application\" instead of \"Module\" and see if that helps?\n =||= Hi @qiangdavidliu - This is the WebSphere Liberty Profile, not Full Profile, so that classloader hierarchy does not apply. I should probably declare that I work for the IBM WebSphere development team so I know exactly where the JAX-RS classes are being initialised and I still think the right thing is for Eureka not to rely on the bootstrapping having occurred before then.\n =||= Hi @davidcurrie, thanks for the clarifications. I only did a quick reading about WebSphere so it's good to know the differences between the two profiles.\n\nBack to the problem at hand, are you only seeing this issue with EurekaServerConfigurationManager? If so, the second fix you proposed (instance fields instead of statics) seems the best way forward for this.\n =||= Hi @qiangdavidliu - the problem also applies (indirectly) to PeerAwareInstanceRegistry. Change would look as follows: https://github.com/davidcurrie/eureka/commit/7a3fd8bde67de4bcfdc623415924210279a3c822\n =||= Hi @davidcurrie , sorry I somehow missed your message. Your changes looks good.\n =||= hi @davidcurrie , I have merged in your changes to master. We have a couple of minor fixes that should be checked in this week after which a release should be ready.\n =||= Great - look forward to picking that up.\n =||= Released in version 1.1.142\n =||= "], ["191", "Channel/transport update - WIP.", null, "tbak", "09/06/14, 12:13:29 AM", "NaN", "[eureka-pull-requests #230](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/230/) SUCCESS\nThis pull request looks good\n =||= "], ["192", "Standardize InstanceInfoField names", "David Liu", "qiangdavidliu", "09/07/14, 10:18:43 PM", "NaN", "[eureka-pull-requests #231](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/231/) SUCCESS\nThis pull request looks good\n =||= "], ["193", "Test framework updates", "David Liu", "qiangdavidliu", "09/08/14, 03:06:35 AM", "- added interest command to CLI tool\n- added testEurekaServer with pre-registered apps\n- minor package refactoring", "[eureka-pull-requests #232](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/232/) SUCCESS\nThis pull request looks good\n =||= "], ["194", "2.x Interest channel upgrade", null, "tbak", "09/08/14, 06:50:25 PM", "- a few EurekaCLI improvements.", "[eureka-pull-requests #233](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/233/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #234](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/234/) SUCCESS\nThis pull request looks good\n =||= "], ["195", "2.x Implement AwsDataCenterInfo provider.", null, "tbak", "09/09/14, 08:41:56 PM", "NaN", "[eureka-pull-requests #236](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/236/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #238](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/238/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #239](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/239/) SUCCESS\nThis pull request looks good\n =||= "], ["196", "Initial client-side interest impl", "David Liu", "qiangdavidliu", "09/10/14, 05:12:43 PM", "NaN", "[eureka-pull-requests #237](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/237/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #242](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/242/) SUCCESS\nThis pull request looks good\n =||= "], ["197", "2.x composite interest index + ribbon in eureka-client", null, "tbak", "09/11/14, 10:42:26 PM", "I still keep InterestNotificationMultiplexer, as it allows us to dynamically adjust notification stream. During interest upgrade, we do not want to resend data of atomic interests that are still part of the upgraded interest set. Swapping composite interest subscriptions would sent everything again.", "[eureka-pull-requests #240](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/240/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #243](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/243/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #244](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/244/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #245](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/245/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #247](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/247/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #248](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/248/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #249](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/249/) SUCCESS\nThis pull request looks good\n =||= "], ["198", "Making the constructor that takes backupRegistryProvider as param Public", "Naoman Abbas", "naoman", "09/12/14, 12:55:37 AM", "NaN", "[eureka-pull-requests #241](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/241/) FAILURE\nLooks like there's a problem with this pull request\n =||= "], ["199", "Remove MessageBrokerServer and MessageBrokerBuilder abstractions", null, "tbak", "09/12/14, 04:49:34 AM", "Remove MessageBrokerServer and MessageBrokerBuilder abstractions, which are no longer needed.", "[eureka-pull-requests #250](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/250/) SUCCESS\nThis pull request looks good\n =||= "], ["200", "moving EurekaRegistry instantiation outside of EurekaService on the client", "David Liu", "qiangdavidliu", "09/12/14, 08:27:38 PM", "NaN", "[eureka-pull-requests #251](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/251/) SUCCESS\nThis pull request looks good\n =||= "], ["201", "Reworked client impl of interest", "David Liu", "qiangdavidliu", "09/14/14, 07:27:02 PM", "NaN", "[eureka-pull-requests #252](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/252/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #253](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/253/) SUCCESS\nThis pull request looks good\n =||= "], ["202", "2.x Eureka Read server + embedded cluster", null, "tbak", "09/15/14, 04:51:14 AM", "NaN", "[eureka-pull-requests #254](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/254/) SUCCESS\nThis pull request looks good\n =||= "], ["203", "Audit log", "David Liu", "qiangdavidliu", "11/24/14, 06:35:06 AM", "Eureka 2.0 server should produce an audit log for \"write\" type operations. These would log metadata for InstanceInfo registrations, updates, unregistrations and expiries.\n\nMetadata should include the five Ws:\n- who (system, operator, ui)\n- what (operation)\n- when (timestamp)\n- where (source write server)\n- why (default categories, operator reasons)", "NaN"], ["204", "Fix bug in client side interestChannelImpl not propagating delta", "David Liu", "qiangdavidliu", "09/17/14, 01:20:10 AM", "NaN", "[eureka-pull-requests #255](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/255/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #256](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/256/) SUCCESS\nThis pull request looks good\n =||= "], ["205", "Add runCluster task to gradle.", null, "tbak", "09/17/14, 03:35:12 PM", "NaN", "[eureka-pull-requests #257](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/257/) FAILURE\nLooks like there's a problem with this pull request\n =||= "], ["206", "Client side refactoring", "Nitesh Kant", "NiteshKant", "09/18/14, 07:06:33 PM", "-- Introducing a EurekaClientRegistry which feeds to all users of the client.\n-- Separated eureka-server, eureka-read-server and eureka-write-server", "[eureka-pull-requests #258](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/258/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #259](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/259/) SUCCESS\nThis pull request looks good\n =||= "], ["207", "2.x audit service + further work on eureka-client API + example app", null, "tbak", "09/22/14, 04:27:29 AM", "NaN", "[eureka-pull-requests #260](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/260/) SUCCESS\nThis pull request looks good\n =||= "], ["208", "The modifications in this commit should be part of the previous one", null, "tbak", "09/22/14, 04:16:42 PM", "(42ea54c2d03b81a4c2631bf8bb142aeb428f01dd), but due to my mistake were not\nadded to the change set.", "[eureka-pull-requests #261](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/261/) SUCCESS\nThis pull request looks good\n =||= "], ["209", "Upgrade to latest ribbon/rxnetty/karyon version", null, "tbak", "09/22/14, 05:08:29 PM", "(2.0-RC9, 0.3.14, 2.1.00-RC5 respectively).", "[eureka-pull-requests #262](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/262/) SUCCESS\nThis pull request looks good\n =||= "], ["210", "Replication related API update - WIP", null, "tbak", "09/22/14, 10:23:28 PM", "NaN", "[eureka-pull-requests #263](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/263/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #265](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/265/) SUCCESS\nThis pull request looks good\n =||= "], ["211", "Refactor of InterestChannel to consolidate apis", "David Liu", "qiangdavidliu", "09/22/14, 10:15:12 PM", "NaN", "[eureka-pull-requests #264](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/264/) SUCCESS\nThis pull request looks good\n =||= "], ["212", "Duplicate interest handling", "David Liu", "qiangdavidliu", "09/25/14, 10:15:20 PM", "Added server-side versioning and clientInterestChannel checks to deal with duplicates.\nRemoved lease times from data model as it will be handled by the channel.", "[eureka-pull-requests #266](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/266/) SUCCESS\nThis pull request looks good\n =||= "], ["213", "Eureka read/write server self registration + eureka client update.", null, "tbak", "09/25/14, 10:32:37 PM", "Eureka client can now resolve eureka read cluster using discovery endpoint\non the write cluster.\nThis commit adds also a startup configuration mechanism for\nread/write server runners.", "[eureka-pull-requests #267](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/267/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #268](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/268/) SUCCESS\nThis pull request looks good\n =||= "], ["214", "Remove statics requiring bootstrapping from JAX-RS resources", "David Currie", "davidcurrie", "10/03/14, 06:43:36 PM", "As per issue #190, Eureka JAX-RS resources currently assume that bootstrapping via the servlet context listener will have occured before their static initialization is driven.", "[eureka-pull-requests #269](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/269/) SUCCESS\nThis pull request looks good\n =||= "], ["215", "Implement replication mechanism.", null, "tbak", "10/01/14, 04:53:24 PM", "NaN", "[eureka-pull-requests #270](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/270/) SUCCESS\nThis pull request looks good\n =||= "], ["216", "2.x Make configuration archaius friendly.", null, "tbak", "10/03/14, 05:51:47 AM", "NaN", "[eureka-pull-requests #271](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/271/) SUCCESS\nThis pull request looks good\n =||= "], ["217", "Add configuration properties for proxy user name / password.", null, "tbak", "10/09/14, 08:35:40 PM", "NaN", "[eureka-pull-requests #272](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/272/) SUCCESS\nThis pull request looks good\n =||= Did you test this?  I'm pretty sure this alone won't get around the bug in the jersey apache client.  If proxyhost is set, username and password are required.\n =||= You are right. I have checked that, and if user name/password is not set, that does not work.\nI will set defaults to guest/guest, so it is more self explanatory.\n =||= [eureka-pull-requests #273](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/273/) SUCCESS\nThis pull request looks good\n =||= "], ["218", "Eureka server keep Applications data with double underscores", "Sergey Krutsko", "krutsko", "12/03/14, 07:32:52 PM", "E.g. /eureka/v2/apps endpoint return a wrong data.\n\n```\n<applications>\n<versions__delta>1</versions__delta>\n<apps__hashcode>STARTING_16_UP_142_</apps__hashcode>\n```\n\nEureka uses \nhttps://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/converters/JsonXStream.java#L44\nwhich rely on http://grepcode.com/file/repo1.maven.org/maven2/com.thoughtworks.xstream/xstream/1.4.2/com/thoughtworks/xstream/io/xml/XmlFriendlyNameCoder.java#108\n\nXmlFriendlyNameCoder by default convert _ to __\n\nEspecially affected applications Metadata which can hold a various custom data.\nWill be nice to have it flexible. ", "Anything new on that guys?\n =||= Would you like to work on this change? By default we should use current encoding mechanism with an option to turn off `_` to `__` conversion.\n\nIn Eureka 2.0 we will not be using this format anymore.\n =||= Sure! @krutsko and i, will give it a try.\n =||= i created a PR https://github.com/Netflix/eureka/pull/272 with initial approach, please take a look.\n =||= "], ["219", "Add search to Eureka website table with DataTables", "Peter Kelley", "pgkelley4", "10/13/14, 07:18:29 PM", "Are you guys open to accepting website modifications/enhancements? We are using these changes internally and wanted to at least give you the option of pulling it. DataTables is MIT license.\n\nChange website table to use jQuery DataTables. Add a search feature.\n\nUpgrades jQuery to 1.11.1.", "[eureka-pull-requests #274](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/274/) SUCCESS\nThis pull request looks good\n =||= Thanks for the contribution @pgkelley4 , we will take a look at the pull request.\n =||= @pgkelley4 we certainly are open to accepting any enhancement to eureka which adds value :)\n\nThe changes look good and will be useful for us internally too. Thanks!\n =||= "], ["220", "More consistent health check behavior", null, "elandau", "05/09/16, 10:45:43 PM", "HealthCheck status is currently tracked via a mutable master InstanceInfo which can be set manually via ApplicationInfoManager or automatically through HealthCheckHandler.  This design gives rise to several race conditions since there is a circular dependency in setting the status.\n\nThis PR changes the behavior of InstanceInfo so that its status is only set via the InstanceInfoReplicator.  The status for ApplicationInfoManager is tracked internally instead of through the master InstanceInfo.  Using this new method the health check is only consulted if ApplicationInfoManager.getInstanceStatus() is UP.  Otherwise the status in ApplicationInfoManager is used. \n\nThere still exists the possibility for instance status info to be 'inconsistent' if client code sets the master InstanceInfo.setStatus() manually.  This is unavoidable given the current design without a more significant refactoring.", "[eureka-pull-requests #275](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/275/) SUCCESS\nThis pull request looks good\n =||= > > > Using this new method the health check is only consulted if ApplicationInfoManager.getInstanceStatus() is UP.\n\nThis means a `HealthCheckHandler` can not transition health status from STARTING -> UP?\n =||= [eureka-pull-requests #359](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/359/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #360](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/360/) SUCCESS\nThis pull request looks good\n =||= closing this for now.\n =||= "], ["221", "Move classes from com.netflix.eureka to com.netflix.rx.eureka package.", null, "tbak", "10/11/14, 03:37:53 AM", "Move classes from com.netflix.eureka to com.netflix.rx.eureka package.\nAdd \"rx-\" prefix to gradle module names.", "[eureka-pull-requests #276](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/276/) SUCCESS\nThis pull request looks good\n =||= "], ["222", "2.x Move eureka ports to a different range to avoid overlapping with other services.", null, "tbak", "10/14/14, 05:04:22 PM", "NaN", "[eureka-pull-requests #277](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/277/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #279](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/279/) SUCCESS\nThis pull request looks good\n =||= "], ["223", "Adding eureka-compatibility module with BridgeServer that bridges data from v1 to rx/v2.", "David Liu", "qiangdavidliu", "10/14/14, 02:04:19 AM", "NaN", "[eureka-pull-requests #278](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/278/) SUCCESS\nThis pull request looks good\n =||= "], ["224", "Adding bridge server to embedded eureka cluster in test-utils", "David Liu", "qiangdavidliu", "10/14/14, 10:09:45 PM", "NaN", "[eureka-pull-requests #280](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/280/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #281](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/281/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #282](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/282/) SUCCESS\nThis pull request looks good\n =||= "], ["225", "Changing default port numbers yet again", "David Liu", "qiangdavidliu", "10/15/14, 10:54:57 PM", "Also giving Bridge Server its own SelfRegistrationService", "[eureka-pull-requests #283](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/283/) SUCCESS\nThis pull request looks good\n =||= "], ["226", "2.x Add server side servo metrics.", null, "tbak", "10/17/14, 04:11:22 PM", "Add server side servo metrics.", "[eureka-pull-requests #284](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/284/) SUCCESS\nThis pull request looks good\n =||= "], ["227", "2.x Adjust metric names to be more readable in the monitoring system.", null, "tbak", "10/17/14, 11:43:18 PM", "NaN", "NaN"], ["228", "Binding metrics to BridgeServerModule", "David Liu", "qiangdavidliu", "10/18/14, 01:22:00 AM", "NaN", "[eureka-pull-requests #285](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/285/) SUCCESS\nThis pull request looks good\n =||= "], ["229", "2.x Eureka metrics update.", null, "tbak", "10/22/14, 05:51:15 AM", "NaN", "[eureka-pull-requests #286](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/286/) SUCCESS\nThis pull request looks good\n =||= "], ["230", "TimedSupervisorTask should be registered with servo.", null, "tbak", "10/31/14, 07:33:10 PM", "NaN", "[eureka-pull-requests #287](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/287/) SUCCESS\nThis pull request looks good\n =||= "], ["231", "2.x Add client metrics.", null, "tbak", "10/23/14, 10:05:33 PM", "NaN", "[eureka-pull-requests #288](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/288/) SUCCESS\nThis pull request looks good\n =||= "], ["232", "2.x audit service and interest model updates", null, "tbak", "10/24/14, 08:33:02 PM", "NaN", "[eureka-pull-requests #289](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/289/) SUCCESS\nThis pull request looks good\n =||= "], ["233", "2.x Configure metrics for Eureka bridge.", null, "tbak", "10/28/14, 04:46:00 AM", "NaN", "[eureka-pull-requests #290](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/290/) SUCCESS\nThis pull request looks good\n =||= "], ["234", "Provide support for SystemSocketFactory for https client connections", "Keith Branton", "keithbranton", "10/31/14, 07:32:52 PM", "Use SystemSocketFactory for https client connections if system property com.netflix.eureka.shouldSSLConnectionsUseSystemSocketFactory is set to\ntrue", "[eureka-pull-requests #291](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/291/) FAILURE\nLooks like there's a problem with this pull request\n =||= I'm not sure why/how this caused the cloudbees failure report. It's hard to tell if I introduced a regression - I can do a ./gradlew clean build on my fork without any tests breaking. If I did cause this, can you please give me a pointer and I'll fix it.\n =||= After looking at your change, I wonder why is it needed? By default eureka client is using Java system SSL socket factory, which I have just tested and it works. That includes reading the standard SSL system properties (javax.net.ssl.trustStore, javax.net.ssl.trustStorePassword, etc).\n\nCan you tell me what extra functionality apache client SSLSocketFactory.getSystemSocketFactory provides?\n =||= It causes keystore and truststore to be configured for the socket via\nsystem properties like:\n\n-Djavax.net.ssl.keyStoreType=pkcs12\n-Djavax.net.ssl.keyStore=src/test/resources/testServer.p12\n-Djavax.net.ssl.keyStorePassword=password\n-Djavax.net.ssl.trustStoreType=jks\n-Djavax.net.ssl.trustStore=src/test/resources/server.jks\n-Djavax.net.ssl.trustStorePassword=password\n\nWe use certificates to ensure a rogue service cannot impersonate a service,\nand in the case of eureka, register itself as a service that it is not.\n =||= I was playing with this a little bit. I can get things working with the default `SSLSocketFactory.getSocketFactory`, but only for my truststore file (no client side authentication). Keystore is properly loaded only when `SSLSocketFactory.getSystemSocketFactory` is used. Lets move on with this change. Can you however refactor this code a little bit, in a way `EurekaJerseyClient.createSSLJerseyClient` factory method is implemented, by adding `EurekaJerseyClient.createSystemSSLJerseyClient` method, which would be conditionally called in `DiscoveryClient` durign jersey client creation. Now we have overlapping SSL setup for remote region connections.\n =||= The Eureka server seems to create three clients; the RemoteRegionRegistry\none at 78-98 which is easy, and one in DiscoveryClient line 295 which is a\nbit of a mess because of the proxy support, and it not using a factory\nmethod, and another in PeerEurekaNode line 114 which would be easy. Our\nminimalist patch deals with all three in one place and just a few lines of\ncode.\n\nDIscoveryClient is harder because it creates the connection manager, then\nsets up the proxy, then calls the JerseyClient constructor directly. Maybe\nthis should be refactored into another static factory method first -\nEurekaJerseyClient.createProxyJerseyClient? Either that or I could\nconditionally generate a different ClientConfig in DiscoveryClient around\nline 272, and then let all the proxy stuff go through as normal. I'm not\nsure that supporting https and proxy at the same time makes much sense\nthough - we certainly don't need it, and from the look of this line:\n\n cc.getProperties().put(DefaultApacheHttpClient4Config.PROPERTY_PROXY_URI,\n\"http://\" + proxyHost + \":\" + proxyPort);\n\nit wouldn't work without a little more work anyway.\n\nThis is your project, and I'm happy to spend more time getting this to a\npoint where you are happy with the pull request. I just wanted to check if\nyou really want this change made in so many places, and your preferred\napproach to DiscoveryClient.\n\nThanks.\n =||= [eureka-pull-requests #292](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/292/) FAILURE\nLooks like there's a problem with this pull request\n =||= RemoteRegionRegistry registry has separate SSL configuration, as typically traffic must be encrypted during cross region communication, but can be sent without encryption within a datacenter. We need to keep backwards compatibility here. If we enforce SSL configuration globally, this will obviously change. I will send more comments once I go through the pull requests.\nThanks \n =||= @keithbranton  \nIs this supposed to be working w/ the discovery client or no (per the previous comments)?\n =||= @bitsofinfo It's been a long time and I haven't used this since I contributed it, but looking at the patch I think it should be working with the DiscoveryClient.\n =||= @keithbranton k thanks, yeah it seems to be broken: https://github.com/Netflix/eureka/issues/812\n =||= "], ["235", "SystemSocket support - alternative approach", "Keith Branton", "keithbranton", "10/31/14, 07:32:52 PM", "Alternative pull request including refactor to DiscoveryClient so that it uses a factory method.", "[eureka-pull-requests #293](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/293/) SUCCESS\nThis pull request looks good\n =||= The implementation looks good, and covers all the important cases that I can think of.\n@NiteshKant Can you have a look at this pull request?\n =||= [eureka-pull-requests #294](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/294/) FAILURE\nLooks like there's a problem with this pull request\n =||= The change looks good to me.\n =||= @keithbranton Thank you for your contribution.\n =||= "], ["236", "2.x EurekaClients should return EurekaClient instance, not an observable of it", null, "tbak", "10/30/14, 08:43:10 PM", "NaN", "[eureka-pull-requests #295](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/295/) SUCCESS\nThis pull request looks good\n =||= "], ["237", "2.x InstanceInfo model update.", null, "tbak", "10/31/14, 03:39:22 PM", "NaN", "[eureka-pull-requests #296](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/296/) SUCCESS\nThis pull request looks good\n =||= "], ["238", "2.x ServerResolver lazy startup", null, "tbak", "10/31/14, 06:04:38 PM", "NaN", "[eureka-pull-requests #297](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/297/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #298](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/298/) SUCCESS\nThis pull request looks good\n =||= "], ["239", "2.x Update jackson serialization configuration rules.", null, "tbak", "10/31/14, 07:03:31 PM", "NaN", "NaN"], ["240", "Fix bug where shuffleVirtualHostNameMap isn't updated", "Peter Kelley", "pgkelley4", "11/06/14, 12:16:08 AM", "shuffleVirtualHostNameMap and shuffledSecureVirtualHostNameMap were\nnot being updated when the last instance was removed from an application.\n\nAdded unit test to illustrate the issue and fixed it by clearing the map\non every update, just as virtualHostNameAppMap gets cleared.", "[eureka-pull-requests #299](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/299/) SUCCESS\nThis pull request looks good\n =||= Thank you for spotting this.\n =||= "], ["241", "Improve rate limiter to throttle only full and delta registry fetches.", null, "tbak", "11/07/14, 12:23:32 AM", "NaN", "[eureka-pull-requests #300](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/300/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #301](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/301/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #302](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/302/) SUCCESS\nThis pull request looks good\n =||= "], ["242", "Add exponential backoff to heartbeat/cache refresh tasks.", null, "tbak", "11/07/14, 01:12:28 AM", "NaN", "[eureka-pull-requests #303](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/303/) SUCCESS\nThis pull request looks good\n =||= "], ["243", "Update gradle configuration.", null, "tbak", "11/07/14, 06:50:05 AM", "NaN", "[eureka-pull-requests #304](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/304/) SUCCESS\nThis pull request looks good\n =||= "], ["244", "Fix rate limiter bug.", null, "tbak", "11/07/14, 10:45:30 PM", "NaN", "[eureka-pull-requests #305](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/305/) SUCCESS\nThis pull request looks good\n =||= "], ["245", "New data type for Eureka registry", "David Liu", "qiangdavidliu", "11/10/14, 09:28:24 PM", "Adding new data type for Eureka registry that stores multiple copies of instanceInfo data w.r.t. to different input sources", "[eureka-pull-requests #306](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/306/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #307](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/307/) SUCCESS\nThis pull request looks good\n =||= "], ["246", "2.x Remove duplication in transport", null, "tbak", "11/10/14, 09:59:33 PM", "NaN", "[eureka-pull-requests #308](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/308/) SUCCESS\nThis pull request looks good\n =||= "], ["247", "Simplified resolver.", "Nitesh Kant", "NiteshKant", "11/12/14, 06:48:12 PM", "The current resolver interface has multiple concepts of protocol and ports and provides a stream of changes.\nThis change, cleans it up by providing a simplistic interface which only provides\nhost and port and instead of providing a stream of servers, provides a finites list of servers available at that time.\n\nAlso cleaned up EurekaClients factory and renamed it to Eureka", "[eureka-pull-requests #309](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/309/) SUCCESS\nThis pull request looks good\n =||= "], ["248", "2.x Eviction queue + EurekaRegistry refactoring", null, "tbak", "11/12/14, 10:12:45 PM", "WIP (unit tests and eviction/self preservation related metrics still missing).", "[eureka-pull-requests #310](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/310/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #311](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/311/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #312](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/312/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #313](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/313/) SUCCESS\nThis pull request looks good\n =||= "], ["249", "Renaming artifact and package names", "Nitesh Kant", "NiteshKant", "11/13/14, 12:11:52 AM", "removed rx from package and artifact names.", "[eureka-pull-requests #314](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/314/) SUCCESS\nThis pull request looks good\n =||= "], ["250", "2.x Fix issue with update notifications in the interest channel.", null, "tbak", "11/13/14, 01:24:01 AM", "Diff.size == 0 causes NullPointerException.", "[eureka-pull-requests #315](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/315/) SUCCESS\nThis pull request looks good\n =||= "], ["251", "ReplicationService should use port from the resolver", "David Liu", "qiangdavidliu", "11/13/14, 08:52:57 AM", "NaN", "[eureka-pull-requests #316](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/316/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #317](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/317/) SUCCESS\nThis pull request looks good\n =||= "], ["252", "Upgrade to latest rxnetty version", "Nitesh Kant", "NiteshKant", "11/13/14, 10:46:53 PM", "Also removed dependency on ribbon from the client.", "[eureka-pull-requests #318](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/318/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #319](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/319/) SUCCESS\nThis pull request looks good\n =||= "], ["253", "Add blocking in unit tests for more determinism", "David Liu", "qiangdavidliu", "11/13/14, 10:55:42 PM", "NaN", "[eureka-pull-requests #320](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/320/) SUCCESS\nThis pull request looks good\n =||= "], ["254", "Rename eureka-compatibility to eureka-bridge", "David Liu", "qiangdavidliu", "11/13/14, 11:41:29 PM", "NaN", "[eureka-pull-requests #321](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/321/) SUCCESS\nThis pull request looks good\n =||= "], ["255", "Reading heartbeat and eviction thresholds from system props", "David Liu", "qiangdavidliu", "11/14/14, 12:28:44 AM", "NaN", "[eureka-pull-requests #322](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/322/) SUCCESS\nThis pull request looks good\n =||= "], ["256", "new version commit: '2.0.0-DP2-SNAPSHOT'", "David Liu", "qiangdavidliu", "11/14/14, 04:26:01 AM", "NaN", "[eureka-pull-requests #323](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/323/) SUCCESS\nThis pull request looks good\n =||= "], ["257", "Simple system property settings for both registration and discovery heartbeats, for client and server.", "David Liu", "qiangdavidliu", "11/14/14, 05:59:21 AM", "settings:\neureka2.eviction.timeoutMillis=\"xxxx\"\neureka2.eviction.allowedPercentage=\"<0-100>\" \neureka2.registration.heartbeat.intervalMillis=\"xxxx\"\neureka2.discovery.heartbeat.intervalMillis=\"xxxx\"", "[eureka-pull-requests #324](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/324/) SUCCESS\nThis pull request looks good\n =||= "], ["258", "2.x multiple changes", null, "tbak", "11/15/14, 07:25:15 PM", "NaN", "[eureka-pull-requests #325](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/325/) SUCCESS\nThis pull request looks good\n =||= "], ["259", "Adding metrics for bridge server", "David Liu", "qiangdavidliu", "11/18/14, 12:47:25 AM", "NaN", "[eureka-pull-requests #326](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/326/) SUCCESS\nThis pull request looks good\n =||= "], ["260", "Removing race condition in shuffleInstances due to premature .clear() of", "David Liu", "qiangdavidliu", "11/18/14, 06:31:52 PM", "virtualHostnameMap (needed by getter APIs).", "[eureka-pull-requests #327](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/327/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #328](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/328/) SUCCESS\nThis pull request looks good\n =||= "], ["261", "2.x Upgrade to the latest governator/karyon version.", null, "tbak", "11/20/14, 08:39:42 PM", "NaN", "[eureka-pull-requests #329](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/329/) SUCCESS\nThis pull request looks good\n =||= "], ["262", "2.x Servo Dependency - Separate as Plugin", "Ben Christensen", "benjchristensen", "01/29/15, 04:57:26 PM", "The Servo dependency should be removed from Eureka 2 and replaced instead with an optional Metrics Publisher plugin since many companies don't use Servo and it should not be a requirement or compile time dependency.\n\nInstead a plugin should be usable to use alternatives such as Yammer/Codahale Metrics or Servo via a plugin implementation.\n\nExample plugins:\n- https://github.com/Netflix/Hystrix/tree/master/hystrix-contrib/hystrix-servo-metrics-publisher\n- https://github.com/Netflix/Hystrix/tree/master/hystrix-contrib/hystrix-yammer-metrics-publisher\n- https://github.com/Netflix/Hystrix/tree/master/hystrix-contrib/hystrix-codahale-metrics-publisher", "Here is what I'm referencing in 2.x: https://github.com/Netflix/eureka/blob/2.x/eureka-core/build.gradle#L30\n =||= I fully agree, and that is our ultimate goal. In the first iteration, to avoid additional work required to provide proper abstraction for this separation, we decided to use servo directly. The direct usage of servo is limited to a few metrics classes, and should be easy to make pluggable, without affecting the rest of the code base.\n =||= Eureka 2.0 comes now with set of interfaces for metrics integration. \nThere are two implementations provided:\n- NoOp - void implementation, set by default for eureka-client\n- spectator plugin\n =||= +1\n =||= "], ["263", "Skipping doclint if building with Java 8. It breaks the build due to err...", "Tomasz Kowalczewski", "tkowalcz", "11/21/14, 11:47:08 PM", "...ors in eureka javadoc (this strict doclint checking affects whole world really).\n\nI'm a casual gradle user so the solution might not be the best one for this particular project. I just copied (and tested) solution posted on Stephen Colebourne's blog: http://blog.joda.org/2014/02/turning-off-doclint-in-jdk-8-javadoc.html", "[eureka-pull-requests #330](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/330/) SUCCESS\nThis pull request looks good\n =||= Thanks for the contribution @tkowalcz. The change looks good, though would you be able to move the change from convention.gradle to build.gradle? Thanks.\n =||= Sure I can. Somewhere on line 47?\n =||= Sure, there looks good\n =||= [eureka-pull-requests #331](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/331/) SUCCESS\nThis pull request looks good\n =||= "], ["264", "2.x client updates", null, "tbak", "11/25/14, 07:15:45 PM", "NaN", "[eureka-pull-requests #332](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/332/) SUCCESS\nThis pull request looks good\n =||= "], ["265", "current master does not build eureka-core", "Deleted user", "ghost", "01/29/15, 04:53:46 PM", "testGetAppsDeltaFromAllRemoteRegions() fails With:\n\njava.lang.AssertionError: Apps size from remote regions do not match expected: [2] but was:[1]\n    at org.junit.Assert.fail(Assert.java:93)", "Hi @george-smith , I just tried a build with a fresh clone and the test passes fine. Can you please try again and or post the complete stack trace? Thanks.\n =||= Yup. Here is the test output as well as the standard out. The standard error follows:\n\njava.lang.AssertionError: Apps size from remote regions do not match expected:<2> but was:<1>\n    at org.junit.Assert.fail(Assert.java:93)\n    at org.junit.Assert.failNotEquals(Assert.java:647)\n    at org.junit.Assert.assertEquals(Assert.java:128)\n    at org.junit.Assert.assertEquals(Assert.java:472)\n    at com.netflix.eureka.InstanceRegistryTest.testGetAppsDeltaFromAllRemoteRegions(InstanceRegistryTest.java:41)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\n    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:86)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:49)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:69)\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:48)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)\n    at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)\n    at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:105)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:355)\n    at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:64)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n\nStandard out:\n\nCreated eureka server mock with applications map { name : MYAPP , instance count: 1 } and applications delta map { name : MYAPP , instance count: 1 }\nEureka resource mock, received request on path: /eureka/v2/apps/. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/ with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860360861</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860360861</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nEureka resource mock, received request on path: /eureka/v2/apps/. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/ with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860360861</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860360861</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nCreated eureka server mock with applications map { name : MYAPP , instance count: 1 } and applications delta map { name : MYAPP , instance count: 1 }\nEureka resource mock, received request on path: /eureka/v2/apps/. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/ with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860362703</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860362703</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nEureka resource mock, received request on path: /eureka/v2/apps/. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/ with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860362703</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860362703</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nCreated eureka server mock with applications map { name : MYAPP , instance count: 1 } and applications delta map { name : MYAPP , instance count: 1 }\nEureka resource mock, received request on path: /eureka/v2/apps/. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/ with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860363052</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860363052</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nEureka resource mock, received request on path: /eureka/v2/apps/. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/ with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860363052</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860363052</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nCanceling application: MYLOCAPP from local registry.\nCanceling application: MYLOCAPP from local registry.\nCreated eureka server mock with applications map { name : MYAPP , instance count: 1 } and applications delta map { name : MYAPP , instance count: 1 }\nEureka resource mock, received request on path: /eureka/v2/apps/. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/ with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860363425</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860363425</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nEureka resource mock, received request on path: /eureka/v2/apps/. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/ with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860363425</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860363425</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nSleeping for 10 seconds to let the remote registry fetch delta. Attempt: 0\nEureka resource mock, received request on path: /eureka/v2/apps/delta. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/delta with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860363425</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860363425</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nEureka resource mock, received request on path: /eureka/v2/apps/delta. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/delta with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860363425</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860363425</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nEureka resource mock, received request on path: /eureka/v2/apps/delta. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/delta with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860363425</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860363425</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nEureka resource mock, received request on path: /eureka/v2/apps/delta. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/delta with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860363425</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860363425</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nEureka resource mock, received request on path: /eureka/v2/apps/delta. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/delta with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860363425</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860363425</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nEureka resource mock, received request on path: /eureka/v2/apps/delta. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/delta with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860363425</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860363425</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nEureka resource mock, received request on path: /eureka/v2/apps/delta. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/delta with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860363425</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860363425</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nDone sleeping for 10 seconds to let the remote registry fetch delta\nCanceling application: MYLOCAPP from local registry.\nCreated eureka server mock with applications map { name : MYAPP , instance count: 1 } and applications delta map { name : MYAPP , instance count: 1 }\nEureka resource mock, received request on path: /eureka/v2/apps/. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/ with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860373803</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860373803</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nEureka resource mock, received request on path: /eureka/v2/apps/. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/ with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860373803</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860373803</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nCanceling application: MYLOCAPP from local registry.\nCreated eureka server mock with applications map { name : MYAPP , instance count: 1 } and applications delta map { name : MYAPP , instance count: 1 }\nEureka resource mock, received request on path: /eureka/v2/apps/delta. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/delta with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860374169</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860374169</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nEureka resource mock, received request on path: /eureka/v2/apps/. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/ with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860374169</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860374169</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nEureka resource mock, received request on path: /eureka/v2/apps/. HTTP method: |GET|\nEureka resource mock, sent response for request path: /eureka/v2/apps/ with content<applications>\n  <versions__delta>-1</versions__delta>\n  <apps__hashcode>UP_1_</apps__hashcode>\n  <application>\n    <name>MYAPP</name>\n    <instance>\n      <hostName>blah</hostName>\n      <app>MYAPP</app>\n      <ipAddr>10.10.101.1</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">7001</port>\n      <securePort enabled=\"false\">7002</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <public-ipv4>XXX</public-ipv4>\n          <public-hostname>blah</public-hostname>\n          <instance-id>blah</instance-id>\n          <local-ipv4>XXX</local-ipv4>\n          <instance-type>XXX</instance-type>\n          <ami-id>XXX</ami-id>\n          <availability-zone>us-east-1c</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>0</registrationTimestamp>\n        <lastRenewalTimestamp>0</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>0</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1416860374169</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1416860374169</lastDirtyTimestamp>\n    </instance>\n  </application>\n</applications>\nCanceling application: MYLOCAPP from local registry.\n\nStandard Error:\n\n148 [Test worker] WARN com.netflix.config.sources.URLConfigurationSource - No URLs will be polled as dynamic configuration sources.\n163 [Test worker] INFO com.netflix.config.sources.URLConfigurationSource - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.\n188 [Test worker] INFO com.netflix.config.DynamicPropertyFactory - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@48ba29f\n300 [Test worker] INFO org.mortbay.log - Logging to org.slf4j.impl.SimpleLogger(org.mortbay.log) via org.mortbay.log.Slf4jLog\n315 [Test worker] INFO org.mortbay.log - jetty-6.1H.22\n348 [Test worker] INFO org.mortbay.log - Started SocketConnector@0.0.0.0:7777\n387 [Test worker] WARN com.netflix.eureka.DefaultEurekaServerConfig - Cannot find the properties specified : eureka-server. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\n495 [Test worker] WARN com.netflix.discovery.DefaultEurekaClientConfig - Cannot find the properties specified : eureka-client. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\n1110 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Disable delta property : false\n1110 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null\n1110 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Force full registry fetch : false\n1110 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Application is null : false\n1110 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true\n1110 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Application version is -1: true\n1549 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server\n1610 [Test worker] INFO com.netflix.discovery.DiscoveryClient - The response status is 200\n1613 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30\n1629 [Test worker] WARN com.netflix.appinfo.PropertiesInstanceConfig - Cannot find the properties specified : eureka-client. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\n1630 [Test worker] INFO com.netflix.appinfo.providers.EurekaConfigBasedInstanceInfoProvider - Setting initial instance status as: STARTING\n1681 [Test worker] INFO com.netflix.eureka.PeerAwareInstanceRegistry - Adding replica node: http://localhost:7777/eureka/v2/\n1823 [Test worker] INFO com.netflix.eureka.PeerAwareInstanceRegistry - Updating the replica nodes as they seem to have changed from [] to [http://localhost:7777/eureka/v2/] \n1826 [Test worker] WARN com.netflix.eureka.PeerAwareInstanceRegistry - Cannot register the JMX monitor for the InstanceRegistry :\njava.lang.IllegalArgumentException: value cannot be empty\n    at com.google.common.base.Preconditions.checkArgument(Preconditions.java:119)\n    at com.netflix.servo.tag.BasicTag.checkNotEmpty(BasicTag.java:40)\n    at com.netflix.servo.tag.BasicTag.<init>(BasicTag.java:34)\n    at com.netflix.servo.tag.Tags.newTag(Tags.java:53)\n    at com.netflix.servo.monitor.MonitorConfig$Builder.withTag(MonitorConfig.java:57)\n    at com.netflix.servo.monitor.Monitors.newObjectConfig(Monitors.java:371)\n    at com.netflix.servo.monitor.Monitors.newObjectMonitor(Monitors.java:150)\n    at com.netflix.servo.monitor.Monitors.registerObject(Monitors.java:207)\n    at com.netflix.servo.monitor.Monitors.registerObject(Monitors.java:181)\n    at com.netflix.eureka.PeerAwareInstanceRegistry.<init>(PeerAwareInstanceRegistry.java:138)\n    at com.netflix.eureka.AbstractTester$2.<init>(AbstractTester.java:86)\n    at com.netflix.eureka.AbstractTester.setUp(AbstractTester.java:86)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)\n    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:86)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:49)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:69)\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:48)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)\n    at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)\n    at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:105)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:355)\n    at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:64)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n1830 [Test worker] INFO com.netflix.eureka.PeerAwareInstanceRegistry - Adding replica node: http://localhost:7777/eureka/v2/\n1903 [Test worker] INFO com.netflix.eureka.PeerAwareInstanceRegistry - Updating the replica nodes as they seem to have changed from [] to [http://localhost:7777/eureka/v2/] \n1990 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Disable delta property : false\n1990 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Application is null : false\n1990 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Registered Applications size is zero : true\n1990 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Getting instance registry info from the eureka server : http://localhost:7777//eureka/v2/ , delta : false\n1998 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - The response status is 200\n1999 [Test worker] INFO com.netflix.eureka.InstanceRegistry - Finished initializing remote region registries. All known remote regions: [us-east-1]\n1999 [Test worker] INFO com.netflix.eureka.InstanceRegistry - Fetching applications registry with remote regions: true, Regions argument [us-east-1]\n2105 [Test worker] INFO org.mortbay.log - jetty-6.1H.22\n2107 [Test worker] INFO org.mortbay.log - Started SocketConnector@0.0.0.0:7777\n2108 [Test worker] WARN com.netflix.eureka.DefaultEurekaServerConfig - Cannot find the properties specified : eureka-server. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\n2108 [Test worker] WARN com.netflix.discovery.DefaultEurekaClientConfig - Cannot find the properties specified : eureka-client. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\n2171 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Disable delta property : false\n2171 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null\n2171 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Force full registry fetch : false\n2171 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Application is null : false\n2171 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true\n2171 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Application version is -1: true\n2177 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server\n2181 [Test worker] INFO com.netflix.discovery.DiscoveryClient - The response status is 200\n2182 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30\n2187 [Test worker] WARN com.netflix.appinfo.PropertiesInstanceConfig - Cannot find the properties specified : eureka-client. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\n2187 [Test worker] INFO com.netflix.appinfo.providers.EurekaConfigBasedInstanceInfoProvider - Setting initial instance status as: STARTING\n2192 [Test worker] WARN com.netflix.eureka.PeerAwareInstanceRegistry - Cannot register the JMX monitor for the InstanceRegistry :\njava.lang.IllegalArgumentException: value cannot be empty\n    at com.google.common.base.Preconditions.checkArgument(Preconditions.java:119)\n    at com.netflix.servo.tag.BasicTag.checkNotEmpty(BasicTag.java:40)\n    at com.netflix.servo.tag.BasicTag.<init>(BasicTag.java:34)\n    at com.netflix.servo.tag.Tags.newTag(Tags.java:53)\n    at com.netflix.servo.monitor.MonitorConfig$Builder.withTag(MonitorConfig.java:57)\n    at com.netflix.servo.monitor.Monitors.newObjectConfig(Monitors.java:371)\n    at com.netflix.servo.monitor.Monitors.newObjectMonitor(Monitors.java:150)\n    at com.netflix.servo.monitor.Monitors.registerObject(Monitors.java:207)\n    at com.netflix.servo.monitor.Monitors.registerObject(Monitors.java:181)\n    at com.netflix.eureka.PeerAwareInstanceRegistry.<init>(PeerAwareInstanceRegistry.java:138)\n    at com.netflix.eureka.AbstractTester$2.<init>(AbstractTester.java:86)\n    at com.netflix.eureka.AbstractTester.setUp(AbstractTester.java:86)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)\n    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:86)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:49)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:69)\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:48)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)\n    at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)\n    at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:105)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:355)\n    at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:64)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n2196 [Test worker] INFO com.netflix.eureka.PeerAwareInstanceRegistry - Adding replica node: http://localhost:7777/eureka/v2/\n2263 [Test worker] INFO com.netflix.eureka.PeerAwareInstanceRegistry - Updating the replica nodes as they seem to have changed from [] to [http://localhost:7777/eureka/v2/] \n2343 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Disable delta property : false\n2343 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Application is null : false\n2343 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Registered Applications size is zero : true\n2343 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Getting instance registry info from the eureka server : http://localhost:7777//eureka/v2/ , delta : false\n2353 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - The response status is 200\n2353 [Test worker] INFO com.netflix.eureka.InstanceRegistry - Finished initializing remote region registries. All known remote regions: [us-east-1]\n2454 [Test worker] INFO org.mortbay.log - jetty-6.1H.22\n2456 [Test worker] INFO org.mortbay.log - Started SocketConnector@0.0.0.0:7777\n2456 [Test worker] WARN com.netflix.eureka.DefaultEurekaServerConfig - Cannot find the properties specified : eureka-server. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\n2457 [Test worker] WARN com.netflix.discovery.DefaultEurekaClientConfig - Cannot find the properties specified : eureka-client. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\n2533 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Disable delta property : false\n2533 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null\n2533 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Force full registry fetch : false\n2533 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Application is null : false\n2533 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true\n2533 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Application version is -1: true\n2538 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server\n2542 [Test worker] INFO com.netflix.discovery.DiscoveryClient - The response status is 200\n2543 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30\n2549 [Test worker] WARN com.netflix.appinfo.PropertiesInstanceConfig - Cannot find the properties specified : eureka-client. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\n2549 [Test worker] INFO com.netflix.appinfo.providers.EurekaConfigBasedInstanceInfoProvider - Setting initial instance status as: STARTING\n2553 [Test worker] WARN com.netflix.eureka.PeerAwareInstanceRegistry - Cannot register the JMX monitor for the InstanceRegistry :\njava.lang.IllegalArgumentException: value cannot be empty\n    at com.google.common.base.Preconditions.checkArgument(Preconditions.java:119)\n    at com.netflix.servo.tag.BasicTag.checkNotEmpty(BasicTag.java:40)\n    at com.netflix.servo.tag.BasicTag.<init>(BasicTag.java:34)\n    at com.netflix.servo.tag.Tags.newTag(Tags.java:53)\n    at com.netflix.servo.monitor.MonitorConfig$Builder.withTag(MonitorConfig.java:57)\n    at com.netflix.servo.monitor.Monitors.newObjectConfig(Monitors.java:371)\n    at com.netflix.servo.monitor.Monitors.newObjectMonitor(Monitors.java:150)\n    at com.netflix.servo.monitor.Monitors.registerObject(Monitors.java:207)\n    at com.netflix.servo.monitor.Monitors.registerObject(Monitors.java:181)\n    at com.netflix.eureka.PeerAwareInstanceRegistry.<init>(PeerAwareInstanceRegistry.java:138)\n    at com.netflix.eureka.AbstractTester$2.<init>(AbstractTester.java:86)\n    at com.netflix.eureka.AbstractTester.setUp(AbstractTester.java:86)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)\n    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:86)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:49)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:69)\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:48)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)\n    at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)\n    at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:105)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:355)\n    at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:64)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n2555 [Test worker] INFO com.netflix.eureka.PeerAwareInstanceRegistry - Adding replica node: http://localhost:7777/eureka/v2/\n2631 [Test worker] INFO com.netflix.eureka.PeerAwareInstanceRegistry - Updating the replica nodes as they seem to have changed from [] to [http://localhost:7777/eureka/v2/] \n2695 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Disable delta property : false\n2695 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Application is null : false\n2695 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Registered Applications size is zero : true\n2695 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Getting instance registry info from the eureka server : http://localhost:7777//eureka/v2/ , delta : false\n2704 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - The response status is 200\n2704 [Test worker] INFO com.netflix.eureka.InstanceRegistry - Finished initializing remote region registries. All known remote regions: [us-east-1]\n2723 [Test worker] INFO com.netflix.eureka.InstanceRegistry - Registered instance id blahloc with status UP\n2724 [Test worker] INFO com.netflix.eureka.InstanceRegistry - Registered instance id blahloc with status UP\n2724 [Test worker] INFO com.netflix.eureka.InstanceRegistry - Fetching applications registry with remote regions: true, Regions argument [us-east-1]\n2825 [Test worker] WARN com.netflix.eureka.InstanceRegistry - DS: Registry: cancel failed because Lease is not registered for: MYLOCAPP:MYLOCAPP\n2825 [Test worker] WARN com.netflix.eureka.InstanceRegistry - DS: Registry: cancel failed because Lease is not registered for: MYLOCAPP:MYLOCAPP\n2906 [Test worker] INFO org.mortbay.log - jetty-6.1H.22\n2908 [Test worker] INFO org.mortbay.log - Started SocketConnector@0.0.0.0:7777\n2909 [Test worker] WARN com.netflix.eureka.DefaultEurekaServerConfig - Cannot find the properties specified : eureka-server. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\n2909 [Test worker] WARN com.netflix.discovery.DefaultEurekaClientConfig - Cannot find the properties specified : eureka-client. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\n2966 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Disable delta property : false\n2966 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null\n2966 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Force full registry fetch : false\n2966 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Application is null : false\n2966 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true\n2966 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Application version is -1: true\n2970 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server\n2972 [Test worker] INFO com.netflix.discovery.DiscoveryClient - The response status is 200\n2973 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30\n2977 [Test worker] WARN com.netflix.appinfo.PropertiesInstanceConfig - Cannot find the properties specified : eureka-client. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\n2977 [Test worker] INFO com.netflix.appinfo.providers.EurekaConfigBasedInstanceInfoProvider - Setting initial instance status as: STARTING\n2978 [Test worker] WARN com.netflix.eureka.PeerAwareInstanceRegistry - Cannot register the JMX monitor for the InstanceRegistry :\njava.lang.IllegalArgumentException: value cannot be empty\n    at com.google.common.base.Preconditions.checkArgument(Preconditions.java:119)\n    at com.netflix.servo.tag.BasicTag.checkNotEmpty(BasicTag.java:40)\n    at com.netflix.servo.tag.BasicTag.<init>(BasicTag.java:34)\n    at com.netflix.servo.tag.Tags.newTag(Tags.java:53)\n    at com.netflix.servo.monitor.MonitorConfig$Builder.withTag(MonitorConfig.java:57)\n    at com.netflix.servo.monitor.Monitors.newObjectConfig(Monitors.java:371)\n    at com.netflix.servo.monitor.Monitors.newObjectMonitor(Monitors.java:150)\n    at com.netflix.servo.monitor.Monitors.registerObject(Monitors.java:207)\n    at com.netflix.servo.monitor.Monitors.registerObject(Monitors.java:181)\n    at com.netflix.eureka.PeerAwareInstanceRegistry.<init>(PeerAwareInstanceRegistry.java:138)\n    at com.netflix.eureka.AbstractTester$2.<init>(AbstractTester.java:86)\n    at com.netflix.eureka.AbstractTester.setUp(AbstractTester.java:86)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)\n    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:86)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:49)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:69)\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:48)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)\n    at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)\n    at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:105)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:355)\n    at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:64)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n2980 [Test worker] INFO com.netflix.eureka.PeerAwareInstanceRegistry - Adding replica node: http://localhost:7777/eureka/v2/\n3035 [Test worker] INFO com.netflix.eureka.PeerAwareInstanceRegistry - Updating the replica nodes as they seem to have changed from [] to [http://localhost:7777/eureka/v2/] \n3094 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Disable delta property : false\n3094 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Application is null : false\n3094 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Registered Applications size is zero : true\n3094 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Getting instance registry info from the eureka server : http://localhost:7777//eureka/v2/ , delta : false\n3102 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - The response status is 200\n3102 [Test worker] INFO com.netflix.eureka.InstanceRegistry - Finished initializing remote region registries. All known remote regions: [us-east-1]\n3102 [Test worker] INFO com.netflix.eureka.InstanceRegistry - Fetching applications registry with remote regions: true, Regions argument [us-east-1]\n3103 [Test worker] INFO com.netflix.eureka.InstanceRegistry - Registered instance id blahloc2 with status UP\n6999 [Eureka-RemoteRegionCacheRefresher] INFO com.netflix.eureka.RemoteRegionRegistry - Getting instance registry info from the eureka server : http://localhost:7777//eureka/v2/ , delta : true\n7353 [Eureka-RemoteRegionCacheRefresher] INFO com.netflix.eureka.RemoteRegionRegistry - Getting instance registry info from the eureka server : http://localhost:7777//eureka/v2/ , delta : true\n7704 [Eureka-RemoteRegionCacheRefresher] INFO com.netflix.eureka.RemoteRegionRegistry - Getting instance registry info from the eureka server : http://localhost:7777//eureka/v2/ , delta : true\n8102 [Eureka-RemoteRegionCacheRefresher] INFO com.netflix.eureka.RemoteRegionRegistry - Getting instance registry info from the eureka server : http://localhost:7777//eureka/v2/ , delta : true\n11999 [Eureka-RemoteRegionCacheRefresher] INFO com.netflix.eureka.RemoteRegionRegistry - Getting instance registry info from the eureka server : http://localhost:7777//eureka/v2/ , delta : true\n12353 [Eureka-RemoteRegionCacheRefresher] INFO com.netflix.eureka.RemoteRegionRegistry - Getting instance registry info from the eureka server : http://localhost:7777//eureka/v2/ , delta : true\n12704 [Eureka-RemoteRegionCacheRefresher] INFO com.netflix.eureka.RemoteRegionRegistry - Getting instance registry info from the eureka server : http://localhost:7777//eureka/v2/ , delta : true\n13102 [Eureka-RemoteRegionCacheRefresher] INFO com.netflix.eureka.RemoteRegionRegistry - Getting instance registry info from the eureka server : http://localhost:7777//eureka/v2/ , delta : true\n13103 [Test worker] INFO com.netflix.eureka.InstanceRegistry - Fetching applications registry with remote regions: true, Regions argument [us-east-1]\n13204 [Test worker] WARN com.netflix.eureka.InstanceRegistry - DS: Registry: cancel failed because Lease is not registered for: MYLOCAPP:MYLOCAPP\n13205 [Test worker] INFO org.mortbay.log - jetty-6.1H.22\n13207 [Test worker] INFO org.mortbay.log - Started SocketConnector@0.0.0.0:7777\n13209 [Test worker] WARN com.netflix.eureka.DefaultEurekaServerConfig - Cannot find the properties specified : eureka-server. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\n13209 [Test worker] WARN com.netflix.discovery.DefaultEurekaClientConfig - Cannot find the properties specified : eureka-client. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\n13288 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Disable delta property : false\n13288 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null\n13288 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Force full registry fetch : false\n13288 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Application is null : false\n13289 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true\n13289 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Application version is -1: true\n13295 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server\n13299 [Test worker] INFO com.netflix.discovery.DiscoveryClient - The response status is 200\n13300 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30\n13306 [Test worker] WARN com.netflix.appinfo.PropertiesInstanceConfig - Cannot find the properties specified : eureka-client. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\n13307 [Test worker] INFO com.netflix.appinfo.providers.EurekaConfigBasedInstanceInfoProvider - Setting initial instance status as: STARTING\n13310 [Test worker] WARN com.netflix.eureka.PeerAwareInstanceRegistry - Cannot register the JMX monitor for the InstanceRegistry :\njava.lang.IllegalArgumentException: value cannot be empty\n    at com.google.common.base.Preconditions.checkArgument(Preconditions.java:119)\n    at com.netflix.servo.tag.BasicTag.checkNotEmpty(BasicTag.java:40)\n    at com.netflix.servo.tag.BasicTag.<init>(BasicTag.java:34)\n    at com.netflix.servo.tag.Tags.newTag(Tags.java:53)\n    at com.netflix.servo.monitor.MonitorConfig$Builder.withTag(MonitorConfig.java:57)\n    at com.netflix.servo.monitor.Monitors.newObjectConfig(Monitors.java:371)\n    at com.netflix.servo.monitor.Monitors.newObjectMonitor(Monitors.java:150)\n    at com.netflix.servo.monitor.Monitors.registerObject(Monitors.java:207)\n    at com.netflix.servo.monitor.Monitors.registerObject(Monitors.java:181)\n    at com.netflix.eureka.PeerAwareInstanceRegistry.<init>(PeerAwareInstanceRegistry.java:138)\n    at com.netflix.eureka.AbstractTester$2.<init>(AbstractTester.java:86)\n    at com.netflix.eureka.AbstractTester.setUp(AbstractTester.java:86)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)\n    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:86)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:49)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:69)\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:48)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)\n    at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)\n    at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:105)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:355)\n    at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:64)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n13312 [Test worker] INFO com.netflix.eureka.PeerAwareInstanceRegistry - Adding replica node: http://localhost:7777/eureka/v2/\n13402 [Test worker] INFO com.netflix.eureka.PeerAwareInstanceRegistry - Updating the replica nodes as they seem to have changed from [] to [http://localhost:7777/eureka/v2/] \n13463 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Disable delta property : false\n13463 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Application is null : false\n13463 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Registered Applications size is zero : true\n13463 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Getting instance registry info from the eureka server : http://localhost:7777//eureka/v2/ , delta : false\n13469 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - The response status is 200\n13469 [Test worker] INFO com.netflix.eureka.InstanceRegistry - Finished initializing remote region registries. All known remote regions: [us-east-1]\n13469 [Test worker] INFO com.netflix.eureka.InstanceRegistry - Registered instance id blahloc with status UP\n13469 [Test worker] INFO com.netflix.eureka.InstanceRegistry - Fetching applications registry with remote regions: false, Regions argument []\n13570 [Test worker] WARN com.netflix.eureka.InstanceRegistry - DS: Registry: cancel failed because Lease is not registered for: MYLOCAPP:MYLOCAPP\n13570 [Test worker] INFO org.mortbay.log - jetty-6.1H.22\n13572 [Test worker] INFO org.mortbay.log - Started SocketConnector@0.0.0.0:7777\n13573 [Test worker] WARN com.netflix.eureka.DefaultEurekaServerConfig - Cannot find the properties specified : eureka-server. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\n13573 [Test worker] WARN com.netflix.discovery.DefaultEurekaClientConfig - Cannot find the properties specified : eureka-client. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\n13630 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Disable delta property : false\n13630 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null\n13630 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Force full registry fetch : false\n13630 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Application is null : false\n13630 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true\n13630 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Application version is -1: true\n13635 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server\n13637 [Test worker] INFO com.netflix.discovery.DiscoveryClient - The response status is 200\n13637 [Test worker] INFO com.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30\n13640 [Test worker] WARN com.netflix.appinfo.PropertiesInstanceConfig - Cannot find the properties specified : eureka-client. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\n13640 [Test worker] INFO com.netflix.appinfo.providers.EurekaConfigBasedInstanceInfoProvider - Setting initial instance status as: STARTING\n13642 [Test worker] WARN com.netflix.eureka.PeerAwareInstanceRegistry - Cannot register the JMX monitor for the InstanceRegistry :\njava.lang.IllegalArgumentException: value cannot be empty\n    at com.google.common.base.Preconditions.checkArgument(Preconditions.java:119)\n    at com.netflix.servo.tag.BasicTag.checkNotEmpty(BasicTag.java:40)\n    at com.netflix.servo.tag.BasicTag.<init>(BasicTag.java:34)\n    at com.netflix.servo.tag.Tags.newTag(Tags.java:53)\n    at com.netflix.servo.monitor.MonitorConfig$Builder.withTag(MonitorConfig.java:57)\n    at com.netflix.servo.monitor.Monitors.newObjectConfig(Monitors.java:371)\n    at com.netflix.servo.monitor.Monitors.newObjectMonitor(Monitors.java:150)\n    at com.netflix.servo.monitor.Monitors.registerObject(Monitors.java:207)\n    at com.netflix.servo.monitor.Monitors.registerObject(Monitors.java:181)\n    at com.netflix.eureka.PeerAwareInstanceRegistry.<init>(PeerAwareInstanceRegistry.java:138)\n    at com.netflix.eureka.AbstractTester$2.<init>(AbstractTester.java:86)\n    at com.netflix.eureka.AbstractTester.setUp(AbstractTester.java:86)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)\n    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:86)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:49)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:69)\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:48)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)\n    at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)\n    at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:105)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\n    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:355)\n    at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:64)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n13643 [Test worker] INFO com.netflix.eureka.PeerAwareInstanceRegistry - Adding replica node: http://localhost:7777/eureka/v2/\n13693 [Test worker] INFO com.netflix.eureka.PeerAwareInstanceRegistry - Updating the replica nodes as they seem to have changed from [] to [http://localhost:7777/eureka/v2/] \n13755 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Disable delta property : false\n13756 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Application is null : false\n13756 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Registered Applications size is zero : true\n13756 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - Getting instance registry info from the eureka server : http://localhost:7777//eureka/v2/ , delta : false\n13761 [Test worker] INFO com.netflix.eureka.RemoteRegionRegistry - The response status is 200\n13761 [Test worker] INFO com.netflix.eureka.InstanceRegistry - Finished initializing remote region registries. All known remote regions: [us-east-1]\n13761 [Test worker] INFO com.netflix.eureka.InstanceRegistry - Fetching applications registry with remote regions: true, Regions argument [us-east-1]\n13762 [Test worker] INFO com.netflix.eureka.InstanceRegistry - Registered instance id blahloc2 with status UP\n13762 [Test worker] INFO com.netflix.eureka.InstanceRegistry - Fetching applications registry with remote regions: true, Regions argument [us-east-1]\n13863 [Test worker] WARN com.netflix.eureka.InstanceRegistry - DS: Registry: cancel failed because Lease is not registered for: MYLOCAPP:MYLOCAPP\n =||= Hi, it looks like from the logs you are running the tests in a worker thread? Can you share your test setup (IDE, cmdline etc)? Additionally, can you try to \"./gradlew clean test\" to see if a cmdline test of eureka works for your environment? You can also use \"./gradlew -Dtest.single=InstanceRegistryTest :eureka-core:test\" to execute only the unit test in question on your cmdline. Thanks.\n =||= I'll do that. But, I am familiar with gradle.  I ran /gradlew clean build.\nI'll let you know what I come up with.\nOn Nov 25, 2014 1:46 AM, \"qiangdavidliu\" notifications@github.com wrote:\n\n> Hi, it looks like from the logs you are running the tests in a worker\n> thread? Can you share your test setup (IDE, cmdline etc)? Additionally, can\n> you try to \"./gradlew clean test\" to see if a cmdline test of eureka works\n> for your environment? You can also use \"./gradlew\n> -Dtest.single=InstanceRegistryTest :eureka-core:test\" to execute only the\n> unit test in question on your cmdline. Thanks.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/issues/265#issuecomment-64321319.\n =||= Im also running in Windoze. I know. I know. :-)\nOn Nov 25, 2014 1:46 AM, \"qiangdavidliu\" notifications@github.com wrote:\n\n> Hi, it looks like from the logs you are running the tests in a worker\n> thread? Can you share your test setup (IDE, cmdline etc)? Additionally, can\n> you try to \"./gradlew clean test\" to see if a cmdline test of eureka works\n> for your environment? You can also use \"./gradlew\n> -Dtest.single=InstanceRegistryTest :eureka-core:test\" to execute only the\n> unit test in question on your cmdline. Thanks.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/issues/265#issuecomment-64321319.\n =||= As there was no further followup on this issue, I am closing it.\n =||= "], ["266", "Upgrading to rxjava 1.0.0", "David Liu", "qiangdavidliu", "11/25/14, 07:15:58 PM", "NaN", "[eureka-pull-requests #333](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/333/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #334](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/334/) SUCCESS\nThis pull request looks good\n =||= "], ["267", "2.x", null, "amit-git", "11/25/14, 08:30:36 PM", "Eureka 2.0 Dashboard first cut - registry visualization w/ quick instance search", "[eureka-pull-requests #335](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/335/) SUCCESS\nThis pull request looks good\n =||= "], ["268", "2.x multiple updates", null, "tbak", "11/25/14, 10:49:25 PM", "NaN", "[eureka-pull-requests #336](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/336/) SUCCESS\nThis pull request looks good\n =||= "], ["269", "Bootstrap config refactor", "David Liu", "qiangdavidliu", "11/26/14, 06:38:47 AM", "NaN", "[eureka-pull-requests #337](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/337/) SUCCESS\nThis pull request looks good\n =||= "], ["270", "2.x Patch static content handler", null, "tbak", "11/26/14, 03:24:47 PM", "NaN", "[eureka-pull-requests #338](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/338/) SUCCESS\nThis pull request looks good\n =||= "], ["271", "ClassPathFileRequestHandler does not read resources from jar files", null, "tbak", "02/23/15, 07:41:58 PM", "The problem is twofold. First issue is related to resolving resource URI:\n- reading class path resource for file stored directly on the file system requires that is has './' prefix (not sure why)\n- for a resource from jar file to be found it cannot have any leading characters like '/' or './'\n\nSecond issue is with loading the resource. If an URI is a hierarchical path, like in case of resource in jar (for example jar:file:/my.jar!/may_resource), it cannot be handled by the FileRequestHandler, and we need to have proper loaded in ClassPathFileRequestHandler.", "This is RxNetty issue, not Eureka's. I am closing it.\n =||= "], ["272", "ISSUE-218 Makes converter replacement char configurable thru config.", "Sergey Krutsko", "krutsko", "12/02/14, 06:31:18 PM", "This PR is for issue https://github.com/Netflix/eureka/issues/218\nThe main idea to make char replacement configarable thru EurekaClientConfig. The default stay as is.", "[eureka-pull-requests #339](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/339/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #340](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/340/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #341](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/341/) ABORTED\n =||= [eureka-pull-requests #345](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/345/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #351](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/351/) SUCCESS\nThis pull request looks good\n =||= Thanks for the contribution @krutsko \n =||= @qiangdavidliu you're welcome. nice to be a little helpful :)\n =||= "], ["273", "Does Eureka care about multi-tenancy? ", "Xianheng Ma", "xianhengma", "11/28/14, 09:48:41 PM", "Hi,\n\nWhen Eureka Registry returns app instance to a client, does it care about multi-tenancy?  E.g. which app instances can serve which tenants. Just wondering how does the Netflix OSS handle this?\n\nThanks!", "Eureka does not support multi-tenancy concept. It is possible to add arbitrary key/value pairs to the registry entries, so if security is not a concern for you, you can handle the filtering on the client side.\n =||= I see. Thanks for clarifying this!\n =||= "], ["274", "live stream updates pane", null, "amit-git", "11/26/14, 09:09:25 PM", "1. live stream update pane to show change notification summary list\n2. websocket port endpoint is created to build ws-url from client that removes any hardcoding", "[eureka-pull-requests #342](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/342/) SUCCESS\nThis pull request looks good\n =||= "], ["275", "layout bug fix", null, "amit-git", "11/27/14, 12:13:34 AM", "NaN", "[eureka-pull-requests #343](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/343/) SUCCESS\nThis pull request looks good\n =||= "], ["276", "re-subscribe logic", null, "amit-git", "11/28/14, 07:34:52 PM", "1. Re-subscribe logic in registry handler that loops subscription logic for 3 times\n2. Addresses gson serialization issue by providing a simple typeadapter for handling fields of type 'class' as seen in 'Modify' -type change notification.", "[eureka-pull-requests #344](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/344/) SUCCESS\nThis pull request looks good\n =||= I am going to create a separate PR for re-connect logic, but merging this PR in order to get GSON serialization fix in.\n =||= If the EurekaClient is not obeying correct rx contact w.r.t. retry() we should look into that also.\n =||= "], ["277", "2.x Support for configuration file includes in Eureka CLI + configuration reload.", null, "tbak", "11/30/14, 08:22:27 PM", "NaN", "[eureka-pull-requests #346](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/346/) SUCCESS\nThis pull request looks good\n =||= "], ["278", "eureka client stream error sent back. Retry in websocket client.", null, "amit-git", "12/01/14, 05:51:01 PM", "1. Eureka client error propagated to websocket client\n2. websocket client handles \n   a. eureka stream errors\n   b. connection drops are handled with new connection retries (max - 3 times) ", "[eureka-pull-requests #347](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/347/) SUCCESS\nThis pull request looks good\n =||= chatted with David about this review, no major concern - merging\n =||= "], ["279", "Refactored server-side config loading + code cleanup", "David Liu", "qiangdavidliu", "11/30/14, 08:29:01 PM", "NaN", "[eureka-pull-requests #348](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/348/) SUCCESS\nThis pull request looks good\n =||= "], ["280", "Config refactor fixes", "David Liu", "qiangdavidliu", "12/01/14, 09:50:33 PM", "NaN", "[eureka-pull-requests #349](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/349/) SUCCESS\nThis pull request looks good\n =||= "], ["281", "Bridge channel fix to reduce statefullness of currentSnapshot", "David Liu", "qiangdavidliu", "12/02/14, 03:41:47 AM", "NaN", "[eureka-pull-requests #350](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/350/) SUCCESS\nThis pull request looks good\n =||= "], ["282", "One implementation of removing the multisource data holder on removal of last copy", "David Liu", "qiangdavidliu", "12/03/14, 07:15:54 PM", "NaN", "[eureka-pull-requests #352](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/352/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #353](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/353/) SUCCESS\nThis pull request looks good\n =||= "], ["283", "2.x Move archaius initialization to overridable method", null, "tbak", "12/03/14, 04:58:48 PM", "NaN", "[eureka-pull-requests #354](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/354/) SUCCESS\nThis pull request looks good\n =||= "], ["284", "fix: Binding base class to config instance in DashboardModule", "David Liu", "qiangdavidliu", "12/03/14, 10:30:48 PM", "NaN", "[eureka-pull-requests #355](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/355/) SUCCESS\nThis pull request looks good\n =||= "], ["285", "registry cache for dashboard stream", null, "amit-git", "12/04/14, 05:15:01 PM", "1. Registry cache that streams a light version of instanceInfo to dashboard client\n2. Uses retry() on eureka client stream to handle disconnection / onError callbacks\n\nThe result is after initial cache warm up, behaviorSubject streams cached objects as the cache gets refreshed every minute improving initial load time for the bubble chart drastically.", "[eureka-pull-requests #356](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/356/) SUCCESS\nThis pull request looks good\n =||= "], ["286", "2.x Use governator include, not install to make bindings visible across modules", null, "tbak", "12/05/14, 12:51:31 AM", "NaN", "[eureka-pull-requests #357](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/357/) SUCCESS\nThis pull request looks good\n =||= "], ["287", "Adding metrics to TaskInvoker in serverRegistry", "David Liu", "qiangdavidliu", "12/05/14, 02:17:16 AM", "NaN", "[eureka-pull-requests #358](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/358/) SUCCESS\nThis pull request looks good\n =||= "], ["288", "1.x Change ribbon version to 2.0-RC9.", null, "tbak", "12/05/14, 07:01:16 PM", "NaN", "[eureka-pull-requests #361](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/361/) SUCCESS\nThis pull request looks good\n =||= "], ["289", "2.x Fix resource leak in client registration path.", null, "tbak", "12/05/14, 11:50:06 PM", "NaN", "[eureka-pull-requests #362](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/362/) SUCCESS\nThis pull request looks good\n =||= "], ["290", "Recording accountId and vpcId from Amazon metadata (if available) for registration", "David Liu", "qiangdavidliu", "12/08/14, 08:22:33 PM", "NaN", "[eureka-pull-requests #363](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/363/) SUCCESS\nThis pull request looks good\n =||= "], ["291", "2.x Reorganize classes in packages/projects.", null, "tbak", "12/08/14, 06:04:44 AM", "NaN", "[eureka-pull-requests #364](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/364/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #365](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/365/) SUCCESS\nThis pull request looks good\n =||= "], ["292", "eureka clusters view", null, "amit-git", "12/08/14, 07:53:31 PM", "read and write cluster visualization in the form of a donut chart with an interactive details view", "[eureka-pull-requests #366](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/366/) SUCCESS\nThis pull request looks good\n =||= "], ["293", "2.x Allow for null values in delta updates.", null, "tbak", "12/08/14, 06:15:26 PM", "NaN", "[eureka-pull-requests #367](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/367/) SUCCESS\nThis pull request looks good\n =||= "], ["294", "2.x Upgrade to governator 1.3.3.", null, "tbak", "12/09/14, 05:22:36 AM", "NaN", "[eureka-pull-requests #368](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/368/) SUCCESS\nThis pull request looks good\n =||= "], ["295", "Server side registry changeNotifications require a Source identification", "David Liu", "qiangdavidliu", "12/10/14, 11:05:29 PM", "NaN", "[eureka-pull-requests #369](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/369/) SUCCESS\nThis pull request looks good\n =||= "], ["296", "Fix up server configs", "David Liu", "qiangdavidliu", "12/11/14, 12:00:18 AM", "NaN", "[eureka-pull-requests #370](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/370/) SUCCESS\nThis pull request looks good\n =||= "], ["297", "Documentation out of date regarding privacy of ELBs", "Beth Skurrie", "bethesque", "12/18/14, 07:34:35 PM", "https://github.com/Netflix/eureka/wiki/Eureka-at-a-glance#how-different-is-eureka-from-aws-elb\n\n> While you can theoretically put your mid-tier services behind the AWS ELB, **you expose them to the outside world** and there by losing all the usefulness of the AWS security groups.\n\nELBs may be created in private VPCs and use security groups (since 2012).\n\nhttp://aws.amazon.com/about-aws/whats-new/2012/06/10/announcing-internal-load-balancing-in-amazon-virtual-private-cloud/\nhttp://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/using-elb-security-groups.html", "Thanks @bethesque. Have updated the relevant line in the documentation to reflect this is for EC2 classic.\n =||= "], ["298", "dashboard update, remove state bug fixes", null, "amit-git", "12/11/14, 06:27:45 AM", "Bug fixes\n1. Remove instanceInfo log line fixed\n2. Auto complete entry removed if no instances found for an app\n3. Status update picked up for Modify log line", "[eureka-pull-requests #371](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/371/) SUCCESS\nThis pull request looks good\n =||= "], ["299", "2.x replication refactoring", null, "tbak", "12/11/14, 06:27:54 AM", "NaN", "[eureka-pull-requests #372](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/372/) SUCCESS\nThis pull request looks good\n =||= "], ["300", "Adding integration (test) module", "David Liu", "qiangdavidliu", "12/11/14, 07:33:20 AM", "- Adding integration (test) module.\n- Re-enabling tests in RegistryIndexTest\n- fix NPE in ReplicationPeerAddressesProvider", "[eureka-pull-requests #373](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/373/) SUCCESS\nThis pull request looks good\n =||= "], ["301", "2.x Move eureka-integration sources to src/main folder.", null, "tbak", "12/11/14, 05:24:04 PM", "NaN", "[eureka-pull-requests #374](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/374/) SUCCESS\nThis pull request looks good\n =||= "], ["302", "2.x update", null, "tbak", "12/13/14, 12:16:52 AM", "NaN", "[eureka-pull-requests #375](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/375/) SUCCESS\nThis pull request looks good\n =||= "], ["303", "2.x Extract eureka-testkit module out of eureka-test-utils.", null, "tbak", "12/13/14, 01:33:28 AM", "NaN", "[eureka-pull-requests #376](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/376/) SUCCESS\nThis pull request looks good\n =||= "], ["304", "Simpifying EurekaClient creation", "David Liu", "qiangdavidliu", "12/14/14, 01:43:57 AM", "- client automatically detects read server configuration from the read server vip.\n- upgrade to ocelli-0.0.6", "[eureka-pull-requests #377](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/377/) SUCCESS\nThis pull request looks good\n =||= "], ["305", "ReplicationSender retry fix", "David Liu", "qiangdavidliu", "12/14/14, 10:25:48 AM", "- replication reconnect delay to config\n- @Singleton for SelfRegistrationServices\n- Adding auditServer id to audit logs.", "[eureka-pull-requests #378](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/378/) SUCCESS\nThis pull request looks good\n =||= "], ["306", "Adding connection self termination for all BaseMessageConnections", "David Liu", "qiangdavidliu", "12/16/14, 12:28:08 AM", "NaN", "[eureka-pull-requests #379](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/379/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #380](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/380/) SUCCESS\nThis pull request looks good\n =||= "], ["307", "2.x Refactor embedded cluster.", null, "tbak", "12/16/14, 07:46:20 AM", "NaN", "[eureka-pull-requests #381](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/381/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #382](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/382/) SUCCESS\nThis pull request looks good\n =||= "], ["308", "Channel refactor", "David Liu", "qiangdavidliu", "12/18/14, 06:46:26 PM", "NaN", "[eureka-pull-requests #383](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/383/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #385](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/385/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #388](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/388/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #389](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/389/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #390](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/390/) SUCCESS\nThis pull request looks good\n =||= "], ["309", "2.x Embedded cluster/integration tests update.", null, "tbak", "12/17/14, 01:02:53 AM", "NaN", "[eureka-pull-requests #384](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/384/) SUCCESS\nThis pull request looks good\n =||= "], ["310", "2.x Remove eureka-ocelli module (will stay in ocelli project).", null, "tbak", "12/17/14, 06:25:37 PM", "NaN", "[eureka-pull-requests #386](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/386/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #387](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/387/) SUCCESS\nThis pull request looks good\n =||= "], ["311", "eureka2 tab in admin console", null, "amit-git", "12/19/14, 06:02:45 PM", "1. eureka-karyon-admin module added under eureka-contrib which provides eureka2 admin console page\n2. DataTable backed by server side pagination, sort and filtering for better page load performance (compared to fully client-side implementation)\n3. It builds Eureka client provider implementation based on dynamic configuration for use with any karyon apps (which include karyon-admin module)", "[eureka-pull-requests #391](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/391/) SUCCESS\nThis pull request looks good\n =||= "], ["312", "2.x Integrate eureka 2 UI tab into embedded cluster.", null, "tbak", "12/19/14, 10:51:23 PM", "NaN", "[eureka-pull-requests #392](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/392/) SUCCESS\nThis pull request looks good\n =||= "], ["313", "Registry refactor", "David Liu", "qiangdavidliu", "12/31/14, 05:29:10 PM", "```\n- Moving InstanceInfo related classes to a new package (to help with moving registries into core)\n- Moving Sourced Registry and Preservable Registry to eureka-core\n- Using a persistent preservable registry in eureka-client. During interest channel\n  failover, the registry content is sent to the eviction queue.\n- Fixed a bug with the EvictionSubscriber that drops one item when going into self preservation\n- Cleaned up close() and shutdown() behaviours for a bunch of classes\n- Test updates and fixes\n- Fix integTest shutdown\n```", "[eureka-pull-requests #393](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/393/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #394](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/394/) SUCCESS\nThis pull request looks good\n =||= This is a pretty big change, and we should think it through carefully. The first two commits (Moving InstanceInfo related classes to a new package + Fix integTest shutdown), after minor correction could be merged immediately.\n\nRegarding \"Refactoring Sourced EurekaRegistry into eureka-core\" commit, I would do a step back, and think about reusing eviction concept on the client side without changing existing class hierarchy. Reusing the same registry implementation on both ends makes its implementation even more complex, and in the future, the complexity will only increase. We can/should still reuse the building blocks.\n =||= I actually have the opposite opinion here, and would say that reuse of existing classes simplifies out code and design instead of adding more complexity, if the usecase is valid and we are not trying to shoehorn an implementation into a different purpose. Let's take a step back and look at the channel-registry problem for both replication and interest.\n\nFor replication, we have a channel writing data into a registry. The registry is persistent regardless of the channel lifecycle, and during channel changeover, we evict the data authored by the old channel until a new, replacement channel is recreated and reconnected up to some level of the old state (our 80% rule). While this rule is not met, self preservation is in effect.\n\nFor interest, we also have a channel writing data into a registry. The registry is persistent regardless of the channel lifecycle, and during channel changeover, we evict the data authored by the old channel until a new, replacement channel is recreated and reconnected up to some level of the old state. While this rule is not met, self preservation is in effect.\n\nThe two cases are identical, and the reuse of our current SourcedRegistry + PreservableRegistry implementations, if it fits one, it would also fit the other perfectly.\n =||= My point was that we can reuse most of the code, while keeping separation between client/server abstractions. Data source concept belongs to write server only. Client side registry is very thin, and we do not need the complexity coming with it.\n\n> Let's take a step back and look at the channel-registry problem for both replication and interest.\n\nWe cannot reuse interest channel for replication, as we have additional handshake mechanism. But we can reuse the building blocks, which are eviction queue, PreservableRegistry  decorator, etc.\nOne problem with our channel abstraction is that we have a lot of code duplicated. If we would push it down to some common abstraction, it would be great.\n =||= [eureka-pull-requests #396](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/396/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #397](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/397/) ABORTED\n =||= [eureka-pull-requests #398](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/398/) SUCCESS\nThis pull request looks good\n =||= "], ["314", "2.x refactoring", "David Liu", "qiangdavidliu", "12/30/14, 07:52:47 PM", "NaN", "[eureka-pull-requests #395](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/395/) SUCCESS\nThis pull request looks good\n =||= "], ["315", "2.x multiple updates", null, "tbak", "12/31/14, 05:55:44 PM", "NaN", "[eureka-pull-requests #399](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/399/) SUCCESS\nThis pull request looks good\n =||= "], ["316", "2.x Add Eureka 2 images for Wiki documentation.", null, "tbak", "12/31/14, 06:14:00 PM", "NaN", "[eureka-pull-requests #400](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/400/) SUCCESS\nThis pull request looks good\n =||= "], ["317", "Code clean up", "David Liu", "qiangdavidliu", "12/31/14, 06:59:32 PM", "NaN", "[eureka-pull-requests #401](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/401/) SUCCESS\nThis pull request looks good\n =||= "], ["318", "2.x Put back shutdown module.", null, "tbak", "12/31/14, 10:11:34 PM", "NaN", "[eureka-pull-requests #402](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/402/) SUCCESS\nThis pull request looks good\n =||= "], ["319", "2.x Fix Eureka shutdown process.", null, "tbak", "01/02/15, 07:19:37 PM", "NaN", "[eureka-pull-requests #403](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/403/) SUCCESS\nThis pull request looks good\n =||= "], ["320", "2.x Replacing SelfRegistrationService impls with new HealthService", "David Liu", "qiangdavidliu", "01/06/15, 08:44:17 PM", "NaN", "[eureka-pull-requests #404](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/404/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #406](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/406/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #407](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/407/) SUCCESS\nThis pull request looks good\n =||= The healthCheck is now a component resolver\n =||= "], ["321", "java.lang.String cannot be cast to org.gradle.api.artifacts.Configuration", "peter zhang", "ddatsh", "02/10/15, 02:35:37 AM", "---\n## Gradle 2.2.1\n\nBuild time:   2014-11-24 09:45:35 UTC\nBuild number: none\nRevision:     6fcb59c06f43a4e6b1bcb401f7686a8601a1fb4a\n\nGroovy:       2.3.6\nAnt:          Apache Ant(TM) version 1.9.3 compiled on December 23 2013\nJVM:          1.8.0_25 (Oracle Corporation 25.25-b02)\nOS:           Windows 7 6.1 amd64\n# \n\nwhen run gradle,then \n\nFAILURE: Build failed with an exception.\n- Where:\n  Script 'E:\\git\\eureka\\gradle\\convention.gradle' line: 24\n- What went wrong:\n  A problem occurred evaluating script.\n  \n  > java.lang.String cannot be cast to org.gradle.api.artifacts.Configuration\n- Try:\n  Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED", "Eureka was built previously with gradle 1.x. It has just been upgraded to gradle 2.x with a new nebula plugin. All scripts in gradle folder have been removed.\nPlease, try it again. Do not run your system installed gradle, but call ./gradlew which will execute configured gradle wrapper for Eureka.\n =||= @ddatsh Have you tried to build Eureka using the provided wrapper? If there were no other problems with that I would like to close this issue.\n =||= "], ["322", "2.x Add support for DataCenterInfo delta serialization.", null, "tbak", "01/04/15, 06:21:16 AM", "NaN", "[eureka-pull-requests #405](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/405/) SUCCESS\nThis pull request looks good\n =||= "], ["323", "2.x Extend interest subscription protocol to support snapshot subscriptions.", null, "tbak", "01/07/15, 07:59:44 PM", "NaN", "[eureka-pull-requests #408](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/408/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #410](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/410/) SUCCESS\nThis pull request looks good\n =||= "], ["324", "Merging Register and Update operations into one", "David Liu", "qiangdavidliu", "01/07/15, 09:05:48 PM", "Merging Register and Update operations into one for registry, registrationChannel and replicationChannel. Calling this new operation Register for now.\n\nAlso removed 3 unused test-utils classes.", "[eureka-pull-requests #409](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/409/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #411](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/411/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #412](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/412/) SUCCESS\nThis pull request looks good\n =||= "], ["325", "Build changes to new nebula.netflixoss", "Rob Spieldenner", "rspieldenner", "01/09/15, 12:31:12 AM", "Changes for the master branch. 2.x coming shortly.", "[eureka-pull-requests #413](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/413/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #416](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/416/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #417](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/417/) SUCCESS\nThis pull request looks good\n =||= "], ["326", "Build changes to gradle 2.2.1 and new netflixoss plugin", "Rob Spieldenner", "rspieldenner", "01/08/15, 09:20:22 PM", "NaN", "This will create jdk7 bytecode. We can add a sourceCompatibility line if you prefer jdk6.\n\nI removed the ide lines because the nebula.netflixoss plugin auto applies those.\n =||= [eureka-pull-requests #414](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/414/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #415](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/415/) SUCCESS\nThis pull request looks good\n =||= "], ["327", "Needs a CHANGELOG.md for ease of bintray project creation", "Rob Spieldenner", "rspieldenner", "01/08/15, 11:35:24 PM", "NaN", "[eureka-pull-requests #418](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/418/) SUCCESS\nThis pull request looks good\n =||= "], ["328", "2.x multiple updates", null, "tbak", "01/09/15, 04:54:42 PM", "NaN", "NaN"], ["329", "1.x Enforce patch scope by default.", null, "tbak", "01/09/15, 04:54:21 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #1](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/1/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #419](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/419/) SUCCESS\nThis pull request looks good\n =||= "], ["330", "2.x merge register update", "David Liu", "qiangdavidliu", "01/12/15, 06:18:56 PM", "Mainly fixes in AbstractClientHandler and BaseMessageConnection to ensure proper ordering of events.\nRefactered server side registrationChannel with more clear state handling.\nBasic new version of versioning for registration that can handle async inbound requests and registry updates. This should go away once we implement the proper multi-local-source version.", "[eureka-pull-requests #420](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/420/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #2](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/2/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #421](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/421/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #3](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/3/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #422](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/422/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #4](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/4/) SUCCESS\nThis pull request looks good\n =||= "], ["331", "2.x index compaction, and fix concurrency issues", null, "tbak", "01/12/15, 07:45:12 PM", "NaN", "[eureka-pull-requests #423](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/423/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #5](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/5/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #6](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/6/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #424](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/424/) SUCCESS\nThis pull request looks good\n =||= "], ["332", "nested cluster ring ", null, "amit-git", "01/13/15, 05:49:25 PM", "1. write and read clusters nested rings visualization\n2. interactively display eureka server instance info (vip, hostname, ip, status, ports)", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #7](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/7/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #425](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/425/) SUCCESS\nThis pull request looks good\n =||= "], ["333", "2.x No more versioning", "David Liu", "qiangdavidliu", "01/13/15, 05:48:44 PM", "NaN", "[eureka-pull-requests #426](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/426/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #8](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/8/) SUCCESS\nThis pull request looks good\n =||= I propose to merge these changes in, and do the remaining updates in a separate pull request.\n =||= "], ["334", "2.x test tools update + add junit category support in gradle build", null, "tbak", "01/13/15, 06:47:37 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #9](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/9/) SUCCESS\nThis pull request looks good\n =||= [eureka-pull-requests #427](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/427/) SUCCESS\nThis pull request looks good\n =||= "], ["335", "2.x Remove eureka-ocelli module reference from settings.gradle ", null, "tbak", "01/14/15, 06:43:59 AM", "the module itself was removed some time ago", "[eureka-pull-requests #428](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/428/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #10](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/10/) FAILURE\nLooks like there's a problem with this pull request\n =||= [eureka-pull-requests #429](https://netflixoss.ci.cloudbees.com/job/eureka-pull-requests/429/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #11](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/11/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #12](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/12/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #18](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/18/) SUCCESS\nThis pull request looks good\n =||= "], ["336", "Removing EurekaRegistry interface", "David Liu", "qiangdavidliu", "01/14/15, 08:45:23 AM", "Also refactored Source and SourceMatcher to be more explicit in usage.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #13](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/13/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #14](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/14/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #15](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/15/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #19](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/19/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #22](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/22/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #23](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/23/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #24](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/24/) SUCCESS\nThis pull request looks good\n =||= What was the motivation of removing this interface?\n =||= "], ["337", "Move to nebula.netflixoss 2.2.4 for bintray snapshot fix", "Rob Spieldenner", "rspieldenner", "01/14/15, 12:08:13 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #16](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/16/) SUCCESS\nThis pull request looks good\n =||= "], ["338", "Move to nebula.netflixoss 2.2.4 for bintray snapshot fix", "Rob Spieldenner", "rspieldenner", "01/14/15, 12:08:21 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #17](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/17/) SUCCESS\nThis pull request looks good\n =||= "], ["339", "2.x One more fix in flaky WriteClusterIntegrationTest.", null, "tbak", "01/14/15, 05:03:27 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #25](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/25/) SUCCESS\nThis pull request looks good\n =||= "], ["340", "2.x Refactor DnsServerResolver", null, "tbak", "01/15/15, 04:30:21 PM", "- Add ExternalConnectionTest junit category to isolate tests making external calls (now only DNS).", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #26](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/26/) SUCCESS\nThis pull request looks good\n =||= "], ["341", "Adding more bridge tests", "David Liu", "qiangdavidliu", "01/15/15, 08:08:33 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #27](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/27/) SUCCESS\nThis pull request looks good\n =||= "], ["342", "2.x Align package name between Eureka 1.x and 2.x", null, "tbak", "01/15/15, 06:12:51 PM", "Align package name between Eureka 1.x and 2.x for sake of the release process.\nRename module names from eureka-xxx to eureka2-xxx.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #28](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/28/) SUCCESS\nThis pull request looks good\n =||= "], ["343", "2.x One more update for module renaming.", null, "tbak", "01/15/15, 06:39:34 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #29](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/29/) SUCCESS\nThis pull request looks good\n =||= "], ["344", "Refactoring channel factory and client builder", "David Liu", "qiangdavidliu", "01/16/15, 06:41:45 AM", "- bringing together client and server side channel factory interface into a common base\n- individual channels now have individual factories for modularity\n- redid EurekaClientBuilder", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #30](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/30/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #31](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/31/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #32](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/32/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #33](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/33/) SUCCESS\nThis pull request looks good\n =||= "], ["345", "Adding random lifecycle test suite", "David Liu", "qiangdavidliu", "01/16/15, 08:49:43 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #34](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/34/) SUCCESS\nThis pull request looks good\n =||= "], ["346", "Fixes for clean connection close in AmazonInfo when reading from the AWS", "David Liu", "qiangdavidliu", "01/16/15, 05:57:22 PM", "metadata url.", "Looks good, thanks for fixing that! :boat:\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #35](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/35/) SUCCESS\nThis pull request looks good\n =||= "], ["347", "2.x various fixes", "David Liu", "qiangdavidliu", "01/16/15, 07:21:37 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #36](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/36/) SUCCESS\nThis pull request looks good\n =||= "], ["348", "2.x Fix bug in DnsResolverBuilder, where the default scheduler is not created.", null, "tbak", "01/16/15, 08:22:20 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #37](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/37/) SUCCESS\nThis pull request looks good\n =||= "], ["349", "2.x Eager cache within Retryable Interest and Registration channels", "David Liu", "qiangdavidliu", "01/21/15, 01:34:44 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #38](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/38/) SUCCESS\nThis pull request looks good\n =||= More changes TBD. Close for now.\n =||= "], ["350", "2.x Self-unregister of Eureka server during shutdown process.", null, "tbak", "01/21/15, 04:22:20 PM", "Self-unregister of Eureka server during shutdown process.\nAdditional unit/integration tests.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #39](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/39/) SUCCESS\nThis pull request looks good\n =||= Looks good!\n =||= "], ["351", "2.x Extract API for metrics. Move from servo to spectator. WIP", null, "tbak", "01/22/15, 11:53:21 PM", "API is extracted and a project reorganized accordingly. A new no-op implementation is provided as a default.\nSpectator binding is not complete yet and not verified.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #40](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/40/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #41](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/41/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #42](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/42/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #44](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/44/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #45](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/45/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #46](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/46/) SUCCESS\nThis pull request looks good\n =||= "], ["352", "BreakerSwitchOperator now properly onComplete and unsubscribe + tests", "David Liu", "qiangdavidliu", "01/22/15, 11:12:30 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #43](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/43/) SUCCESS\nThis pull request looks good\n =||= Looks good.\n =||= "], ["353", "2.x integ test cleanup", "David Liu", "qiangdavidliu", "01/23/15, 01:30:03 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #47](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/47/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #48](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/48/) SUCCESS\nThis pull request looks good\n =||= "], ["354", "2.x startup/shutdown integ test fix", "David Liu", "qiangdavidliu", "01/25/15, 06:42:16 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #49](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/49/) ABORTED\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #50](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/50/) SUCCESS\nThis pull request looks good\n =||= "], ["355", "2.x Metrics update + metrics unit tests", null, "tbak", "01/26/15, 07:04:51 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #51](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/51/) SUCCESS\nThis pull request looks good\n =||= Much kudos on all the metrics tests!\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #53](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/53/) SUCCESS\nThis pull request looks good\n =||= "], ["356", "2.x Eureka API update (Eureka class cleanup).", null, "tbak", "01/26/15, 06:24:15 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #52](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/52/) SUCCESS\nThis pull request looks good\n =||= Ship it. \n\nOn an unrelated note, we use the terms interest and discovery for the same meaning interchangeably in our code. We should do a sweep through at the end and stick to one or the other.\n =||= I agree, we should stick to one term.\n\nOn Sun, Jan 25, 2015 at 11:06 AM, qiangdavidliu notifications@github.com\nwrote:\n\n> Ship it.\n> \n> On an unrelated note, we use the terms interest and discovery for the same\n> meaning interchangeably in our code. We should do a sweep through at the\n> end and stick to one or the other.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/pull/356#issuecomment-71386495.\n =||= "], ["373", "2.x Depend on karyon snapshot releases.", null, "tbak", "01/28/15, 12:17:12 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #54](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/54/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #55](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/55/) SUCCESS\nThis pull request looks good\n =||= "], ["374", "2.x Use interface base names as metrics class tag value.", null, "tbak", "01/28/15, 06:12:31 PM", "- use bintray snapshot repo by default, till we do first eureka2 RC release.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #57](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/57/) ABORTED\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #58](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/58/) ABORTED\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #59](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/59/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #60](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/60/) SUCCESS\nThis pull request looks good\n =||= "], ["375", "2.x Fix connection metrics + update dependencies", null, "tbak", "01/28/15, 11:39:47 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #61](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/61/) ABORTED\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #62](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/62/) SUCCESS\nThis pull request looks good\n =||= "], ["376", "Bump the level of Jersey for Eureka server to at least 1.13 due to loading static resources issue.", "Stephen Low", "stephenlow", "07/31/15, 08:09:39 AM", "Cannot load non-REST static resources such as CSS, images and JS on WebSphere Application Servers. \n\nAttempting to load these static resources (i.e. a redirect to http://localhost/eureka/jsp/status.jsp or http://localhost/eureka/css/main.css for example) gives back a 404. The issue is described in JIRA at the following:\n\nhttps://java.net/jira/si/jira.issueviews:issue-html/JERSEY-880/JERSEY-880.html\n\nThis issue was identified in Jersey v1.11, which is what the Eureka server is currently being built on. The issues item identifies that this is fixed in Jersey v1.13. I've rebuilt and tested Eureka with Jersey v1.18 and it is able to successfully load these static resources. \n\nRequesting for the level of Jersey be bumped up to at least v1.13.", "Jersey Version needs to be updated in build.gradle\n =||= Thanks for pointing this out. We have to make a few other changes to bump to higher version, as eureka-client is a direct or transitive dependency in other projects. We are working right now on this.\nFor the meantime, you have to overwrite the version in your gradle config.\n =||= Latest release (1.2.0) has bumped jersey version to 1.19. Apologies for how long this took!\n =||= "], ["377", "2.x Bug fixes", null, "tbak", "01/30/15, 06:25:10 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #63](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/63/) SUCCESS\nThis pull request looks good\n =||= "], ["378", "2.x Further metrics cleanup.", null, "tbak", "01/30/15, 07:03:33 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #64](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/64/) SUCCESS\nThis pull request looks good\n =||= "], ["379", "2.x Use TestScheduler in InterestChannelImplTest for better control over the testing process.", null, "tbak", "01/30/15, 08:45:50 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #65](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/65/) SUCCESS\nThis pull request looks good\n =||= Is this the fix for the intermittent interestChannel test failures?\n =||= I cannot replicate this error in my dev environment. With this change I want to narrow down the possible culprits.\n =||= "], ["380", "Eureka2 BasicDataCenterInfo typo", null, "futurely", "02/04/15, 05:52:00 PM", "https://github.com/Netflix/eureka/blob/2.x/eureka2-core/src/main/java/com/netflix/eureka2/registry/datacenter/BasicDataCenterInfo.java\n\n```\npublic NetworkAddress getDefaultAddress() {\n        if (defaultAddress != null) {\n            return defaultAddress;\n        }\n        if (addresses == null | addresses.isEmpty()) {\n```\n\nThe last line should be `if (addresses == null || addresses.isEmpty()) {`.", "Thanks for the catch.\n =||= fixed\n =||= "], ["381", "Eureka2 RetryStrategyFunc is not exponential backoff", null, "futurely", "02/04/15, 05:51:55 PM", "https://github.com/Netflix/eureka/blob/2.x/eureka2-core/src/main/java/com/netflix/eureka2/utils/rx/RetryStrategyFunc.java\n\n```\n/**\n     * @param retryIntervalMillis the initial wait between retries in milliseconds\n     * @param totalRetries max number of retries to attempt\n     * @param exponentialBackoff boolean to denote whether to use exponential backoff\n     */\n    public RetryStrategyFunc(long retryIntervalMillis, int totalRetries, boolean exponentialBackoff) {\n        this.retryIntervalMillis = retryIntervalMillis;\n        this.numRetries = totalRetries;\n        this.backoffRetry = exponentialBackoff;\n    }\n\n    @Override\n    public Observable<Long> call(Observable<? extends Throwable> observable) {\n        return observable.zipWith(Observable.range(1, numRetries), new Func2<Throwable, Integer, Long>() {\n            @Override\n            public Long call(Throwable n, Integer i) {\n                if (backoffRetry) {\n                    return i * retryIntervalMillis;\n                } else {\n                    return retryIntervalMillis;\n                }\n            }\n```\n\nThe exponential backoff should be `Math.pow(2, i) * retryIntervalMillis`.", "Thanks for the catch.\n =||= fixed\n =||= "], ["382", "2.x Client channel major refactor", "David Liu", "qiangdavidliu", "02/02/15, 09:35:36 PM", "- more consistent channel lifecycles and onComplete/onError\n- old Retryable channels are not RetryableConnections that can be .retry()-ed on the lifecycle.\n  for each retry, new channels are created and the old channel shutdown\n- registrationHandler now takes a stream of InstanceInfos\n- registrationTracker that bridges between the old register/unregister API and the new\n  stream based API. EurekaClient API change to the new form is not done as part of this pull\n  to minimize the change list. It will change in a subsequent pull.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #66](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/66/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #67](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/67/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #68](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/68/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #69](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/69/) SUCCESS\nThis pull request looks good\n =||= "], ["383", "Reusing TestChannel and TestChannelFactory in RetryableConnectionFactoryTest", "David Liu", "qiangdavidliu", "02/02/15, 11:29:11 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #70](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/70/) SUCCESS\nThis pull request looks good\n =||= "], ["384", "2.x State information propagation in the interest channel to the client", null, "tbak", "02/13/15, 09:48:20 PM", "This is a proposal for state information propagation in the interest channel to the client.\n# Problem to solve\n\nAs interest stream subscription is reactive, there is no way for client to know how much relevant data is available when the subscription starts. If the client is a load balancer, it is critical to wait until available pool of servers is loaded before application requests are allowed, to avoid overloading single server that happens to be first in the list. It may be also advantages to know about bigger changes in the system topology (scale up), and do system reconfiguration when all/majority of the new servers are received via the change notification stream.\n# Proposed solution\n\nGenerate buffering sentinels after each last know item in the change notification stream:\n\n![Figure 1. Buffer sentinels in change notification stream](../wiki/images/buffering_sentinels_in_change_notification_stream.png)\n\nAs buffer sentinels are not optimal from the transport perspective, internal implementation is using batching markers, that are transmitted over the wire together with regular change notification data.This concept is depicted by the figure below:\n\n![Figure 2. Batching markers in change notification stream](../wiki/images/batching_markers_in_change_notification_stream.png)\n\nThere are two possible sources of batching hints:\n- Eureka client registry - it works as a cache of data, and when a client subscribes, the whole subscribed registry content should be delivered as a single batch\n- Eureka server - whenever server knows about a batch of items to be delivered (that starts with current registry content), the items shall be delineated with the batching markers\n\nThe concept is depicted in this figure:\n\n![Figure 3. Batching markers implementation](../wiki/images/batching_markers_implementation.png)\n\nOne more level of complexity is added by the way interests are handled in the transport channel, and the index registry. For efficiency purposes, to avoid sending/processing the same data if different subscribes ask for same or overlapping data, the interests are handled at an atomic level. For example:\n- subscriber A asks for interest {vip=vipA}, and subscriber B asks for interest {vip=vipA or vip=vipB}\n- internally all subscriptions are merged into list of atomic interests {vip=vipA, vip=vipB}\n- the batching markers are generated per atomic interest, so must be merged before delivering to the client (just like data are merged)\n- if subscriber B unsubscribes, all the state related to {vip=vipB} can be safely discarded\n# Data model\n\nBatch hints are implemented as a new kinds of ChangeNotification:\n\n``` java\npublic class ChangeNotification<T> {\n    public enum Kind {Add, Delete, Modify, Buffer, BufferingSentinel}\n    ...\n}\n```\n\nInternally a derived class `StreamStateNotification` is used to carry additional information. It is not however visible to the client.", "For the proposed hint markers, it seems the Buffer hint is always sent for all cases described. From a behaviour point, what does the Buffer hint offer? It seems that consuming clients and/or operators only need to listen for the finishBuffer hint for an optimised buffering experience regardless of whether there are prior Buffer hints. E.g. the consumer should be able to apply a collection operator to the stream that emits a new List each time it sees a finishBuffer hint, and possibly timeout otherwise.\n\nOn the client side, it seem to make more sense that the source of the hints is only the registry, as it should be the source of truth for all data. On the server side, this is naturally the case, and on the client side the hints should be a merge of local registry hints plus server side hints if any are available. If we make sure the hints are only generated by the registry, we should then be able to merge the multiple hints emitted by atomic interests for composite forInterests so that clients only receive a single finishBatching marker (the logic would then be that a finishBuffer is emitted once all atomic FinishBuffers are received at the merge point).\n =||= I think it will be useful to provide code samples on how a client will consume this API. There are a lot of complex constructs as conditional batching and non-batching modes. I would like to see how this manifests on the consumer end. \n\nA few implementation related questions:\n- How are these batching hints stored? It looks to me from your description of the various scenarios of multiple subscribers to the same interest, that the hints are generated at subscription time. I would have thought that the hints will be stored along with the data & hence will be delivered to multiple subscribers as is.\n- Is there an attempt to be precise about the hints? I get a feeling of this when you talk about hint merging i.e. an intent not to send multiple hints and de-dup them. If it is so, then what value will it add being precise?\n- What is the behavior in case of server failure between sending a \"Batch\" hint and \"Finished batching\" hint? What if there is no server available and we have already sent a \"Batch\" hint.\n\nI am not really convinced about the need of \"Batch\" hint, however, I can see what you are trying to achieve i.e. the ability for the same client to switch between batching & non-batching mode. This is something will be cleared to see in a code example whether the complexity is worth. \n\n@qiangdavidliu \n\n> the consumer should be able to apply a collection operator to the stream that emits a new List each time it sees a finishBuffer hint, and possibly timeout otherwise.\n\nI think there is value in having an API where batch or non-batch is not a choice that the client is to make. In this model, the client will always batch & non-batch interaction will be timeout based. \n =||= Implemented by PR #403\n =||= "], ["385", "2.x Interest channel with channel state propagation.", null, "tbak", "02/06/15, 04:37:49 PM", "This is prototype implementation for feature #384.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #71](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/71/) FAILURE\nLooks like there's a problem with this pull request\n =||= "], ["386", "2.x Fix dashboard server, and startup integration tests.", null, "tbak", "02/04/15, 12:57:41 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #72](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/72/) SUCCESS\nThis pull request looks good\n =||= "], ["387", "2.x Minor cleanup.", null, "tbak", "02/04/15, 05:57:57 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #73](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/73/) SUCCESS\nThis pull request looks good\n =||= "], ["388", "2.x RetryableConnection for SenderReplication", "David Liu", "qiangdavidliu", "02/05/15, 11:19:33 PM", "Using RetryableConnection for sender replication.\nConnecting connection lifecycle to channel lifecycle in AbstractClientChannel.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #74](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/74/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #75](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/75/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #76](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/76/) SUCCESS\nThis pull request looks good\n =||= "], ["389", "Eureka 1.x - there is no mechanism provided to remove overridden status", null, "tbak", "02/10/15, 06:55:15 PM", "Eureka 1 allows one to override an instance status via issuing the following REST call:\n`PUT /eureka/v2/apps/appID/instanceID/status?value=OUT_OF_SERVICE`\nThis is useful if we want to take otherwise healthy instance out of service. The instance info data contain afterwards two status related fields:\n\n```\n<status>OUT_OF_SERVICE</status>\n<overriddenstatus>OUT_OF_SERVICE</overriddenstatus>\n```\n\nTo mark instance as up we can modify again the overriddenstatus field by calling:\n`PUT /eureka/v2/apps/appID/instanceID/status?value=UP`\nIf however the instance real state change(s), that is hidden by the enforced value.\n\nWe can address this issue in two ways:\n- support DELETE HTTP method to remove the overridden status\n- merge the two states (see table below)\n\n| Status | Overridden status | Merge |\n| --- | --- | --- |\n| DOWN | DOWN | DOWN |\n| DOWN | * | DOWN |\n| UP | OUT_OF_SERVICE | OUT_OF_SERVICE |\n| UP | UP | UP |", "I would prefer the support for DELETE overridden status for the following reason:\n\nThe merge algorithm addresses the \"most common\" usecase for today (for Netflix). I can think of corner cases when someone wants to override DOWN status from the instance with UP, may be in the case the healthcheck has an issue or it is flapping. \n\nThere is value in being consistent with the definition of \"overridden status\" that it **always** overrides the status with no special cases. If the override does not apply anymore, then it should be deleted.\n =||= This issue is a duplicate of #89.\n =||= Fixed by #412.\nOverridden status can be removed via DELETE REST call.\n =||= "], ["390", "2.x test cleanup", "David Liu", "qiangdavidliu", "02/06/15, 12:36:07 AM", "Removing EurekaClientTest (as the client now just delegates to the Handlers) and adding the interest tests to the InterestHandlerTest class", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #77](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/77/) SUCCESS\nThis pull request looks good\n =||= "], ["402", "Eureka 1.x - add additional guard in InstanceInfo.getHealthCheckUrls", null, "tbak", "02/10/15, 06:53:49 PM", "Currently this method will return Set object with null values in it, if enabled port(s) has no health check URL provided.", "Fixed by PR #412\n =||= "], ["403", "2.x Implementation of interest channel state propagation (enhancement #384)", null, "tbak", "02/13/15, 09:47:32 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #78](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/78/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #90](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/90/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #92](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/92/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #98](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/98/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #100](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/100/) SUCCESS\nThis pull request looks good\n =||= "], ["404", "2.x Adding ability to configure some transport properties", "David Liu", "qiangdavidliu", "02/09/15, 09:41:35 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #79](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/79/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #85](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/85/) SUCCESS\nThis pull request looks good\n =||= "], ["405", "Fix InstanceInfo.Builder.setLeaseInstance", "Shai Erera", "shaie", "02/09/15, 12:24:35 AM", "InstanceInfo.Builder.setLeaseInstance broke the builder pattern by declaring to return void. This simple commit fixes it to return Builder.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #80](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/80/) SUCCESS\nThis pull request looks good\n =||= Thanks for the fix.\n =||= "], ["406", "Don't use String.toUpperCase()", "Shai Erera", "shaie", "02/09/15, 12:40:42 AM", "InstanceInfo uses String.toUpperCase() without passing a Locale. This\nis very dangerous as it relies on the default locale which might not\nmatch the server's Locale. It is one of the APIs that are discouraged\nfor use, and it is better if it always passes a Locale.ROOT.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #81](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/81/) SUCCESS\nThis pull request looks good\n =||= Make sense, thanks for the pull.\n =||= "], ["407", "Check for right logging level", "Shai Erera", "shaie", "02/09/15, 12:44:16 AM", "The code checked if isInfoEnabled() but then called logger.debug().", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #82](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/82/) SUCCESS\nThis pull request looks good\n =||= thanks for the fix.\n =||= "], ["408", "More toUpperCase() fixes", "Shai Erera", "shaie", "02/09/15, 12:44:53 AM", "More String.toUpperCase() fixes.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #83](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/83/) SUCCESS\nThis pull request looks good\n =||= Thanks for the fix.\n =||= "], ["409", "2.x Client API Re-organisation", "David Liu", "qiangdavidliu", "03/09/15, 08:52:36 PM", "# Problem to Address\n\nThe current eurekaClient public API exposes registrations and interest discovery in the following way:\n- registration and updates are handled by sequential calls to register(info), and unregistration by a separate unregister(info) method. Both of these methods return an Observable<Void> that denotes the success/failure of the given operation. The problem with this API is that callers are more interested in the lifecycle of the instance's overall registration as opposed to the success/failure of individual calls.\n- forInterest today returns a stream of ChangeNotifications that contain instance level data. In practical use, it is common for consumers to want to wait and buffer this data into lists of suitable size before consumption. As of today, we are missing both a mechanism to detect suitable buffer windows, as well as an API and/or suitable default operators to do the buffering.\n# Proposal\n## Registration API\n\n``` java\n    /**\n     * Given an Observable of InstanceInfo that represent the register and subsequent updates of the instance to be\n     * registered, registers and updates this instance.\n     * \n     * @param instanceToRegister an Observable that emits an InstanceInfo whenever relevant information for this\n     *                           instance has changed and need to be updated server side.\n     * @return an Observable RegistrationResponse that starts the registration when subscribed to, and unregisters\n     *         when unsubscribed to. The RegistrationResponse is an Observable<Void> that represent the registration\n     *         lifecycle of the instance, and will onError if the instance registration is disconnected from the\n     *         server due to client errors.\n     *         The RegistrationResponse optionally contains an Observable<Void> that can be subscribed to for\n     *         onCompleted (success) or onError (failure) of the initial registration.\n     */\n    public RegistrationResponse register(Observable<InstanceInfo> instanceToRegister) {\n\n    }\n```\n## Interest API\n\nThe current API should remain unchanged, however hint markers should be emitted by the stream for batching hints (issue #384). Additionally, standard operators should be provided for the stream to achieve buffering (see below for operators to be provided.).\n## Registration Helpers\n- The [SelfRegistrationService and SelfInfoResolver](https://github.com/Netflix/eureka/tree/2.x/eureka2-server/src/main/java/com/netflix/eureka2/server/service) currently used by the servers should be generalised for client use, so that we can componentize the creation of different parts of an InstanceInfo (e.g. user provided fields, network auto-discovery, health monitoring) and then merge these together for registration.\n## ForInterest Operators\n\n(Some of these operators may be straightforward enough that we should just provide a best practice example using standard operators).\n- A buffer(long time, TimeUnit unit) operator that return a stream of ChangeNotifications, such that nothing is emitted until a buffer marker is received, then all notifications buffered up to the marker is emitted. A timeout is provided for the length of time to wait between each marker.\n- A CollectToSnapshot() operator that transforms the stream of ChangeNotifications into a stream of Lists, where the lists returned contain snapshots of interest data. When any member of the interest set changes, a new snapshot list emitted.\n- A GroupBy(Key) operator should be provided that groups the single ChangeNotification stream to a set of streams based on the groupBy key (e.g. groupBy VipAddress).", "@qiangdavidliu the changes look good to me. I do have a few questions:\n\n> The SelfRegistrationService and SelfInfoResolver currently used by the servers should be generalised for client use, so that we can componentize the creation of different parts of an InstanceInfo\n\nDoes this mean that a client will have a to use a helper class for registration?\nI am not convinced that we should go that route. If `InstanceInfo` is complex to create, we should provide ways in `InstanceInfo` to make it easier to use, as opposed to having a separate class that does so. The reason being intuitiveness of the API if a user has to look at a bunch of classes to do registration.\n\nSince, we are on the topic of Client API changes, do you intend to create another issue for creating complex Interest sets. eg: How does one create a cumulative interest for a VIP + an app + secure VIP (of course this is hypothetical)?\n\nI remember us briefly discussing the need of a DSL for that, somewhat like:\n\n``` java\nclient.forInterest(Interests.forVip(\"vip1\"))\n        .andApplication(\"app1\").orInstance(\"I1\")\n```\n\nThe above DSL is capturing a modifiable interest set which can be subscribed at any branching point.\n =||= This issue is still pending a part 2 clean up of the client builder.\n =||= Issue resolve per pull requests #426 and #444 \n =||= "], ["410", "2.x Client InterestChannel Should Implement InstanceInfo Cleanup", "David Liu", "qiangdavidliu", "06/02/16, 10:25:56 PM", "When the client InterestChannel receive a change(Interest) command, it should have the option to explicitly unregister from the registry instanceInfos that are no longer wanted by any consumer. This is useful for users with tighter memory requirements.", "archiving as eureka2 work is going through some larger internal changes.\n =||= "], ["411", "2.x Use Eureka 1.x mock server in bridge integration tests.", null, "tbak", "02/09/15, 04:29:50 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #84](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/84/) SUCCESS\nThis pull request looks good\n =||= "], ["412", "Fixes for #389, #402", null, "tbak", "02/10/15, 06:42:00 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #86](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/86/) SUCCESS\nThis pull request looks good\n =||= The code looks good, but a more consistent behaviour could be to fix the update code so that the (non-) overridden status is not updated when an override is specified, and hence at deletion time we'll only need to remove the overridden status. Then on the InstanceInfo getter side, we can return either the base status or the override status based on whether the override is present.\n =||= As currently setting status override modifies the status fields itself, this change would require bigger code refactoring. Instead, the status override DELETE will accept optional query parameter to set the desired status. If not set it will default to UNKNOWN.\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #91](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/91/) SUCCESS\nThis pull request looks good\n =||= "], ["413", "2.x client fixes", "David Liu", "qiangdavidliu", "02/10/15, 06:17:22 PM", "- client interestChannel now evict older entries once new channel is available\n- AbstractClientChannel properly handle connection lifecycle", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #87](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/87/) SUCCESS\nThis pull request looks good\n =||= "], ["414", "getDispatcherType() is undefined for the type HttpServletRequest", "peter zhang", "ddatsh", "02/10/15, 06:52:22 PM", "eureka-server-1.1.148-SNAPSHOT\ntomcat 8\n\norg.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() for servlet [jsp] in context with path [/eureka] threw exception [Unable to compile class for JSP: \n\nAn error occurred at line: [53] in the generated java file: [D:\\dev\\java\\server\\tomcat\\8\\work\\Catalina\\localhost\\eureka\\org\\apache\\jsp\\jsp\\status_jsp.java]\nThe method getDispatcherType() is undefined for the type HttpServletRequest\n\nStacktrace:] with root cause\n org.apache.jasper.JasperException: Unable to compile class for JSP: \n\nAn error occurred at line: [53] in the generated java file: [D:\\dev\\java\\server\\tomcat\\8\\work\\Catalina\\localhost\\eureka\\org\\apache\\jsp\\jsp\\status_jsp.java]\nThe method getDispatcherType() is undefined for the type HttpServletRequest", "@ddatsh are you running this in an IDE or on the command line?\n =||= run it in tomcat 8 & jdk 1.8\n =||= We have transitive dependency that includes servlet-api 2.5 jar into eureka.war. The one eureka depends on directly (version 2.4) is marked as provided. I have just fixed that, and now I am able to run Eureka UI on tomcat 8.\n =||= I have just pushed a PR for this bug (#416).\n =||= "], ["415", "2.x multiple updates", null, "tbak", "02/10/15, 04:24:53 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #88](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/88/) SUCCESS\nThis pull request looks good\n =||= ship it!\n =||= "], ["416", "1.x Exclude servlet-api jar from eureka.war", null, "tbak", "02/10/15, 06:17:29 PM", "Because of the transitive dependencies we had two servlet-api jar\nversions in the dependency tree. Eureka depended directly on\nversion 2.4 that was properly marked as provided. This version was\nhowever shadowed by the one from the transitive dependency (2.5),\nand as it was not marked as provided nor excluded, it was added to\nwar file. That caused compatibility issue when running on tomcat 8.0.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #89](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/89/) SUCCESS\nThis pull request looks good\n =||= "], ["417", "2.x SelfInfoResolver changes", "David Liu", "qiangdavidliu", "02/11/15, 09:03:13 AM", "- Updated selfInfoResolver implementation\n- Added resolver that periodically refresh datacenter info\n- Added caching resolver that caches in a BehaviorSubject for multiple subscribers", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #93](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/93/) SUCCESS\nThis pull request looks good\n =||= "], ["418", "Objects of different types compared with equals method.", null, "C0rWin", "02/15/15, 07:28:56 PM", "Compare data center name object with its name rather than instance of data center object itself.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #94](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/94/) SUCCESS\nThis pull request looks good\n =||= Hi @C0rWin , thanks for the pull and the fix. We took another look at the logic around the fix, and it looks like the fixes will actually enable some code paths that have been dormant all this time (and eureka has been working in production for a long time). A better fix would be to remove both checks and any associated code paths that were never exercised instead, i.e. remove both conditional statements and their inner executions. Feel free to resubmit your pull with the change if you'd like, otherwise we can make the fix also. Thanks.\n =||= Ok, I'll take another look and will remove code as you suggested.\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #103](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/103/) SUCCESS\nThis pull request looks good\n =||= Thanks for the contrib @C0rWin \n =||= "], ["419", "Simple handling of dns as txt records (assuming it's a list of hostnames)", "David Liu", "qiangdavidliu", "02/11/15, 09:13:15 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #95](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/95/) SUCCESS\nThis pull request looks good\n =||= "], ["420", "2.x BaseMessageConnection fix", "David Liu", "qiangdavidliu", "02/12/15, 02:21:41 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #96](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/96/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #97](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/97/) SUCCESS\nThis pull request looks good\n =||= "], ["421", "2.x various fixes to eviction and dns", "David Liu", "qiangdavidliu", "02/12/15, 11:32:39 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #99](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/99/) SUCCESS\nThis pull request looks good\n =||= "], ["422", "1.x error reporting for unsuccessful status update should be more meaningfull", null, "tbak", "02/23/15, 07:59:22 PM", "Right now status update resulting in an error returns something like this:\n\n```\n< HTTP/1.1 406 Not Acceptable\n< Date: Fri, 13 Feb 2015 18:52:32 GMT\n* Server Apache-Coyote/1.1 is not blacklisted\n< Server: Apache-Coyote/1.1\n< Content-Type: text/html;charset=utf-8\n< Content-Length: 1095\n<\n* Connection #0 to host <host> left intact\n<html><head><title>Apache Tomcat/6.0.37 - Error report</title><style><!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--></style> </head><body><h1>HTTP Status 406 - Not Acceptable</h1><HR size=\"1\" noshade=\"noshade\"><p><b>type</b> Status report</p><p><b>message</b> <u>Not Acceptable</u></p><p><b>description</b> <u>The resource identified by this request is only capable of generating responses with characteristics not acceptable according to the request \"accept\" headers.</u></p><HR size=\"1\" noshade=\"noshade\"><h3>Apache Tomcat/6.0.37</h3></body></html>l\n```", "Fixed by PR #433\n =||= "], ["423", "2.x multiple updates related to new interest stream implementation with buffer hints", null, "tbak", "02/16/15, 06:58:04 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #101](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/101/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #104](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/104/) SUCCESS\nThis pull request looks good\n =||= "], ["424", "2.x server address fixes", "David Liu", "qiangdavidliu", "02/16/15, 07:40:13 AM", "- Moving Server to core/utils for more generic use.\n- Removing usage of InetSocketAddress.\n- Replication peer resolve to dns name only (except for A records)", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #102](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/102/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #105](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/105/) SUCCESS\nThis pull request looks good\n =||= "], ["425", "Gradle build fails for ZIP file", "Teerat Pitakrat", "teeratpitakrat", "09/23/15, 11:35:28 PM", "The build fails when building the downloaded zip file:\n\n```\n$ unzip eureka-master.zip\n$ cd eureka-master\n$ ./gradlew clean build\n\nFAILURE: Build failed with an exception.\n\n* Where:\nBuild file '/tmp/eureka-master/build.gradle' line: 2\n\n* What went wrong:\nAn exception occurred applying plugin request [id: 'nebula.netflixoss', version: '2.2.4']\n> repository not found: /tmp/eureka-master\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n```\n\nThe problem seems to be the missing .git folder. Building the clone with .git removed results in the same problem.\nTested on Ubuntu 12.04.5 LTS and Archlinux.", "Hi @teeratpitakrat unfortunately our new build process requires git pull if you are building from source. Is this a blocking issue for you w.r.t. using eureka?\n =||= Hi @qiangdavidliu, I was trying to add eureka as a submodule inside another git project. Then, git modified .git folder of eureka and caused this problem.\n\nMy temporary solution is to clone eureka and put it inside that git project without committing (which is a little inconvenient).\nIt would be great if eureka can be built without the dependency to git.\n =||= @teeratpitakrat do you need to edit source code? If not, why not just depend on the published eureka artifacts?\n =||= @qiangdavidliu Unfortunately, I need to edit the source code.\n =||= @teeratpitakrat unfortunately it looks our new build process does not allow eureka to be used as a git submodule inside another project. If your changes to eureka are not domain specific for your case, feel free to send us pull requests. If you would like to make changes to the build files to enable submoduling, that would be appreciated also.\n =||= As there was no follow up on this issue for long time, I am closing it.\n =||= "], ["426", "Eureka Client Refactor", "David Liu", "qiangdavidliu", "02/19/15, 01:12:24 AM", "- changes to the client API per github issue #409\n- changes to server side selfRegistrationServices due to client API changes\n- fix for RetryableChannelFactory channels to be able to handle Observable.just() ops.\n- changes to tests due to client API changes", "Note new Client organisation:\n\n| Interface | DefaultImpl |\n| --- | --- |\n| EurekaInterestClient | EurekaInterestClientImpl |\n| EurekaRegistrationClient | EurekaRegistrationClientImpl |\n| EurekaClient | EurekaClientImpl (this just wraps around an interestClientImpl and a  registrationClientImpl) |\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #106](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/106/) SUCCESS\nThis pull request looks good\n =||= How to better structure construction of clients (and the proper separation of the registration and interest clients) will be in a subsequent pull.\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #107](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/107/) SUCCESS\nThis pull request looks good\n =||= "], ["427", "2.x Get rid of blocking subscription in AuditServiceController.", null, "tbak", "02/19/15, 06:56:35 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #108](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/108/) SUCCESS\nThis pull request looks good\n =||= "], ["428", "2.x Fix Eureka2 UI tab.", null, "tbak", "02/19/15, 11:52:03 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #109](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/109/) SUCCESS\nThis pull request looks good\n =||= "], ["429", "2.x Rename Eureka2 UI resources, so they do not overlap with 1.x classes.", null, "tbak", "02/20/15, 06:48:51 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #110](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/110/) SUCCESS\nThis pull request looks good\n =||= "], ["430", "Require re-registration when instance status is UNKNOWN, after override removal.", null, "tbak", "02/20/15, 09:16:45 PM", "This is bug fix for PR #412.\nRequire re-registration when instance status is UNKNOWN, after override removal.\nThis does not change the current behavior when new status is set as part of the DELETE request.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #111](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/111/) SUCCESS\nThis pull request looks good\n =||= "], ["431", "CloudBees embedded build status showing 'unknown'", "Charles Chan", "charleswhchan", "02/22/15, 03:44:30 AM", "The embedded build status defined in README.md is currently showing 'unknown'.\n\nPerforms a configuration issue? According to the Embeddable Build Status Icon page:\nhttps://netflixoss.ci.cloudbees.com/job/eureka-master/badge/\n\n> If you want the status icons to be public readable/accessible, just grant the ViewStatus permission globally to anonymous.", "Thank you for spotting this. We created recently a new Jenkins build job for Eureka at different location. I have pushed fix for this (#432).\n =||= Thanks!\n =||= "], ["432", "1.x Fix Jenkins build status link in README.md.", null, "tbak", "02/22/15, 03:41:11 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #112](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/112/) SUCCESS\nThis pull request looks good\n =||= "], ["433", "1.x Fix error reporting for status update/delete REST resource (#422).", null, "tbak", "02/23/15, 07:58:51 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #113](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/113/) SUCCESS\nThis pull request looks good\n =||= "], ["434", "1.x Cache string values to reduce memory footprint.", null, "tbak", "02/25/15, 07:45:31 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #114](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/114/) SUCCESS\nThis pull request looks good\n =||= Rather than implementing a StringCache independent of xstream, can't we just register a StringConverter with high priority when we register the specific converters for the JsonXStream and XmlXStream?\n\nWe may also want to look at implementing an alternative to the default StringConverter similar to http://javadoc.jenkins-ci.org/hudson/util/HeapSpaceStringConverter.html.\n =||= I tried to setup StringConverter, and my custom converter implementation, but it never got triggered. Our custom serializers do not delegate processing further once they got basic types. If you know how to enforce delegation to StringConverter it would be much nicer implementation.\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #122](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/122/) SUCCESS\nThis pull request looks good\n =||= "], ["435", "2.x Implement custom EurekaInterestClient for Eureka Read server.", null, "tbak", "02/25/15, 05:30:18 PM", "The custom client uses single subscription (fullRegistryFetch), and propagates properly channel level buffer markers to interest subscribers.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #115](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/115/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #116](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/116/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #119](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/119/) SUCCESS\nThis pull request looks good\n =||= "], ["436", "2.x Changes to MultiSourcedDataHolder implementation", "David Liu", "qiangdavidliu", "02/25/15, 06:54:49 PM", "- updates for the same origin:name Sources replace each other regardless of source.id\n- deletes only execute when origin:name:id equals for the sources", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #118](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/118/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #120](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/120/) SUCCESS\nThis pull request looks good\n =||= "], ["437", "2.x upgrading rxnetty and spectator versions", "David Liu", "qiangdavidliu", "02/25/15, 07:28:23 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #121](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/121/) SUCCESS\nThis pull request looks good\n =||= "], ["438", "2.x PeriodicDataCenterInfoResolver ignores errors per resolve.", "David Liu", "qiangdavidliu", "02/26/15, 12:09:22 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #123](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/123/) SUCCESS\nThis pull request looks good\n =||= "], ["439", "2.x Eureka server health monitoring", null, "tbak", "03/20/15, 07:54:35 PM", "Eureka 2.0 health monitoring\n# Concept\n\nEach Eureka component manages its own health information, which is aggregated in one place where overall system health status is derived.\n\nA component that wishes to provide its health status must implement:\n\n``` java\npublic interface HealthStatusProvider<SUBSYSTEM> {\n\n   Observable<HealthStatusUpdate<SUBSYSTEM>> healthStatus();\n}\n```\n\n`healthStatus` method returns an observable of health status changes. The returned observable shall never emit an error, and should complete when the subsystem is shut down. Status value represents internal state of the component.  The health status information is captured in `HealthStatusUpdate` object:\n\n``` java\npublic class HealthStatusUpdate<SUBSYSTEM> {\n\n    public HealthStatusUpdate(Status status,\n                              SubsystemDescriptor<SUBSYSTEM> description) {\n      ...\n    }\n\n    public STATUS getStatus() { }\n\n    public SubsystemDescriptor<SUBSYSTEM> getDescriptor() { }\n}\n```\n\n`SubsystemDescriptor` JavaBean provides static, supplementary information primary for UIs.\n\nThe aggregation logic is captured in `HealthStatusAggregator` class, which itself extends `HealthStatusProvider`. Apart for returning the aggregated state, it provides access to its underlying components:\n\n``` java\npublic interface HealthStatusAggregator<SUBSYSTEM extends HealthStatusAggregator<SUBSYSTEM>>\n        extends HealthStatusProvider<SUBSYSTEM> {\n    List<HealthStatusProvider<?>> components();\n}\n```\n# Eureka server self registration\n\nEureka self registration service subscribes to `HealthStatusAggregator`, and updates its own `InstanceInfo.status` accordingly, which gets immediately propagated to Eureka registry.\n# External Health check API\n## REST API\n\nCurrent Eureka health status can be accessed via REST GET method call:\n\n```\ncurl -X GET http://eureka.host/eureka/health\n\nHTTP/1.1 200 OK\nHEALTHY\n```\n## WebSockets API\n\nClients wishing to receive live updates about Eureka health status, can connect to WebSocket endpoint:\n\n```\nopen ws://eureka.host/eureka/ws/health\n\ntext-message: {\n    \"descriptor\":{\n        \"title\":\"Client interest channel\",\n        \"description\":\"...\",\n        \"type\":\"InterestChannel\"\n    },\n    \"status\":\"DOWN\"\n}\ntext-message: {\n    \"descriptor\":{\n        \"title\":\"Aggregated health check status\",\n        \"description\":\"...\",\n        \"type\":\"EurekaHealthStatusAggregator\"\n    },\n    \"status\":\"DOWN\",\n}\n...\ntext-message: {\n    \"descriptor\": {\n        \"title\":\"Client interest channel\",\n        \"description\":\"...\"\n    },\n    \"status\":\"UP\",\n}\ntext-message: {\n    \"descriptor\":{\n        \"title\":\"Aggregated health check status\",\n        \"description\":\"...\",\n        \"type\":\"EurekaHealthStatusAggregator\"\n    },\n    \"status\":\"UP\",\n}\n\n```\n# Karyon Admin UI\n\nAggregated and component level health check status values are exposed via a new Karyon admin UI tab. The associated `SubsystemDescriptor` objects provide descriptive information about each component, and possible states.", "> > For example channel might be in { Idle, Connected, Closed } states. These states must be mapped to Eureka InstanceInfo.State.\n\nIs there a value in having these as two different Status? IOW, why not have the components return `InstanceInfo.State`?\n\n> > SubsystemDescriptor JavaBean provides static, supplementary information primary for UIs\n\nI think we are conflating the health status with this granular information. \n\nBigger question: \"Can the subsystem status better be exposed via metrics and have the system health as _a_ status, potentially aggregated over multiple sources?\"\n\n> > Clients wishing to receive live updates about Eureka health status can connect to WebSocket endpoint\n\nIn absence of subsystem statuses, Is this just the `forInterest` endpoint otherwise available for any interest in eureka?\n =||= This proposal, taken from a more generic perspective, seems like something that would be an interface in Karyon and services built on top should provide specific implementations. It should then be Karyon's responsibility to feed the aggregated status back to eureka for eureka status.\n =||= > Is there a value in having these as two different Status? IOW, why not have the components return InstanceInfo.State?\n\nI would like to expose internal system health, so having original status values is beneficial.\n\n> I think we are conflating the health status with this granular information.\n\nIt is not health status in a sense we have it for external application monitoring. The point here is to have access to this granular information.\n\n> Bigger question: \"Can the subsystem status better be exposed via metrics and have the system health > as a status, potentially aggregated over multiple sources?\"\n\nMetrics are a must, and they are orthogonal to current status monitoring. Metric values could be collected from local counters (not remote monitoring system), and exposed as an additional insight information.\n\n> In absence of subsystem statuses, Is this just the forInterest endpoint otherwise available for any interest in eureka?\n\nUsing forInterest would incur additional delay, and if read node is disconnected from write server, it would  never provide up to date value. But the whole point of my proposal is to expose internal component status, as an additional insight information.\n =||= Following the discussion I am removing component specific STATE type parameter. Each component will emit InstanceInfo.Status values. This will simplify API and implementation. If we find it too restrictive (we are now limited practically to DOWN/UP status values with no way to express partial component failures), we may consider putting it back in the future.\n =||= "], ["440", "2.x Eureka server providing backwards compatible eureka 1.0 REST endpoints", "David Liu", "qiangdavidliu", "03/30/15, 09:50:46 PM", "Migration of ecosystems that currently rely on Eureka 1.0 to eureka 2.0 can be greatly eased if Eureka 2.0 is able to provide equivalent REST endpoints used by eureka 1.0 client.\n\nSpecifically, the endpoints to be supported are:\n**Read Endpoints**\n- GET /apps\n- GET /apps/delta\n- GET /apps/{appName}\n- GET /vips/{vipAddress}\n\n(optionally the read endpoints should support query parameter region={REGION})\n\n**Write Endpoints**\n- POST /apps/{appName}   (content == 1.0 InstanceInfo in JSON)\n- PUT /apps/{appName}/{instanceId}?status={STATUS}&lastDirtyTimestamp={LASTDIRTYTIMESTAMP}", "Done in #454 #473 \n =||= "], ["441", "2.x Eureka server should provide Status overrides", "David Liu", "qiangdavidliu", "06/02/16, 10:25:53 PM", "# Concept\n\nIt is possible to override Eureka InstanceInfo information but issuing REST API call to any of the Eureka write cluster nodes. The override data will be kept in separate registry, and override information will be applied on the client interest stream.\n\n``` java\npublic interface EurekaOverrideRegistry {\n    Observable<Void> registerOverride(InstanceInfoOverride override);\n    Observable<Void> removeOverride(String instanceId);\n\n    ChangeNotification<InstanceInfoOverride> forInterest(Interest interests);\n}\n\npublic class InstanceInfoOverride {\n    private Source source;\n    private final String instanceId;\n    private final Set<Delta> overrides;\n    ...\n}\n```\n\nIt is possible to override any InstanceInfo attribute, however this feature is provided primarily for status override.\n\nThe override information is replicated within the cluster in the same way regular InstanceInfo data are replicated. As a client will usually resolve DNS entry when making a REST call it is very likely that each override update (create/remove) will end up on different write cluster node. This will make a lot of room for different race conditions to happen.\n# Conflict resolution\n\nBecause there is no direct, permanent association between client and a server during override, the sourced/multi copy instance info holder approach cannot be applied here. Instead, single copy of override data is maintained in the registry with the following updates semantic:\n\nLocal EurekaOverrideRegistry.registerOverride:\n- if there is no entry, add a new one and replicate it to another nodes in the write cluster\n- if there is an entry, and it is different, swap it with the current one and replicate it\n- if there is an entry identical to the new one, ignore it\n\nLocal EurekaOverrideRegistry.removeOverride:\n- if there is no entry, replicate the delete operation to remote nodes\n- if there is an entry, remove it, and replicate the delete operation to remote nodes\n\nReplicated EurekaOverrideRegistry.registerOverride:\n- if there is no entry, add a new one\n- if there is an entry, and it is different, swap it\n- if there is an entry identical to the new one, ignore it\n\nReplicated EurekaOverrideRegistry.removeOverride:\n- if there is no entry, ignore it\n- if there is an entry, remove it, and if entry source is this server, replicate the delete operation to remote nodes\n\n_Examples 1 Override register/remove on the same server_\n- local registration is followed by data replication\n- local removal, removes local entry and forwards delete operation to other nodes in the cluster\n- remote endpoints remove their entries, and since the source is different from their own, no further replication is done\n\n_Example 2 Override register/remove on two different nodes, with full replication between the two events_\n- local registration is followed by data replication\n- local removal, removes local entry and forwards delete operation to other nodes in the cluster\n- remote endpoints remove their entries, the one that handled registration, delegates further remove operation\n- all nodes get again the same remove request, but as there is no associated entry, it is ignored\n\n_Example 3 Override register/remove on two different nodes, before replication happens between the two events_\n- local registration is followed by data replication\n- when another node receives removeOverride, there is no associated entry yet (it was not replicated yet). The remove operation is replicated further.\n- following is registerOverride replication to remote nodes\n- remote endpoints that received register before remove, will drop an entry\n- remote endpoints that received register after remove,  will have an entry in the registry\n- remote endpoint that received the original removeOverride, will remove its entry, and send another removeOverride to its peers\n- remote endpoints that sill hold the copy of the data, will remove it\n\nThis approach solves simple cases of race conditions, but not all of them. For example if multiple override requests are issued one after another with different content data, each server may be left with different view than its peers. To solve this problem, we would have to introduce operation versioning, and require a client to generate unique and monotonically increasing version values for subsequent registerOverride operations, and use proper version during removeOverride. If no version is provided by client, we would fallback to previously described behavior.\n# REST API\n\nURI encoded form:\n\n``` HTTP\nPUT /eureka2/v1/overrides/{id}?${field_name}=${field_value}\n```\n\n`field_name` is a name of any of the `InstanceInfo` field.\n\nRequest with a body:\n\n``` HTTP\nPUT /eureka2/v1/overrides/{id}\n{\n    'status': 'OUT_OF_SERVICE'\n}\n```", "> It is possible to override any InstanceInfo attribute, however this feature is provided primarily for status override.\n\nSince, we know that it is useful only for status overrides, is there any value in making it generic for any override? Do we see this applying to any other attribute in the future?\n\n> The override data will be kept in separate registry\n\nDoes this mean, we will always be merging multiple notifications from multiple `Observable` sources? Is the override an optional feature or it is always available with the server? \nIf it is always available, why would we want to put it in a different registry and incur the merge overhead?\n\n> If no version is provided by client, we would fallback to previously described behavior.\n\nIt looks like we know that the operation with no version is bound to have inconsistent data. So, should we disallow operations without versions?\n\nIt seems we are missing a case of disaster recovery, where all eureka nodes go down and all override statuses are wiped out. Contrary to the usual case, where the data is regenerated, this data will never be regenerated. Eureka 1.x handles this case by querying the AWS API to see if the owning ASG (or may be instance) is enabled or not. I think we should do that too, WDYT?\n\nHaving said the above, do you think the source of truth (AWS status) can be used for conflict resolution?\n =||= archiving as eureka2 work is going through some larger internal changes.\n =||= "], ["442", "2.x Eureka health status monitoring", null, "tbak", "02/27/15, 08:26:36 PM", "See issue #439", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #124](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/124/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #125](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/125/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #126](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/126/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #127](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/127/) SUCCESS\nThis pull request looks good\n =||= "], ["443", "2.x Configuration update to work properly in local environment.", null, "tbak", "02/27/15, 10:03:52 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #128](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/128/) SUCCESS\nThis pull request looks good\n =||= "], ["444", "2.x Client API refactor part 2 (creation of clients) for issue #409", "David Liu", "qiangdavidliu", "03/09/15, 08:50:56 PM", "Removed the combo EurekaClient and the two independent clients for registration and interest now each have their own builders.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #129](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/129/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #131](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/131/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #141](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/141/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #142](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/142/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #146](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/146/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #147](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/147/) SUCCESS\nThis pull request looks good\n =||= "], ["445", "2.x Eureka WEB server with HTTP and WebSocket endpoints.", null, "tbak", "03/02/15, 07:05:00 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #130](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/130/) SUCCESS\nThis pull request looks good\n =||= "], ["446", "2.x Replication fix", "David Liu", "qiangdavidliu", "03/02/15, 09:51:06 PM", "- handler should subscribe to lifecycle and operation with same subscriber for retries\n- retryableChannelFactory merge internal channel op with lifecycle instead of independent subscribe", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #132](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/132/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #133](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/133/) SUCCESS\nThis pull request looks good\n =||= "], ["447", "1.x Upgrade to nebula 2.2.7", null, "tbak", "03/02/15, 10:40:17 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #134](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/134/) SUCCESS\nThis pull request looks good\n =||= "], ["448", "2.x Eureka Read - Exception handling in DNS loading", "David Liu", "qiangdavidliu", "03/09/15, 08:53:46 PM", "ResourceLoaderException thrown in DnsChangeNotificationSource.java does not seem to be handled by callers, and have observed to be thrown on the read server:\n\n<pre>\nException in thread \"RxComputationThreadPool-4\" java.lang.IllegalStateException: Fatal Exception thrown on Scheduler.Worker thread.\n    at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:54)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:262)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:744)\nCaused by: com.netflix.eureka2.utils.rx.ResourceObservable$ResourceLoaderException: DNS failure on subsequent access\n    at com.netflix.eureka2.interests.host.DnsChangeNotificationSource$DnsResolverTask.reload(DnsChangeNotificationSource.java:100)\n    at com.netflix.eureka2.utils.rx.ResourceObservable$ResourceLoaderExecutor.call(ResourceObservable.java:219)\n    at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:47)\n    ... 7 more\nCaused by: javax.naming.CommunicationException: DNS error [Root exception is java.net.SocketTimeoutException: Receive timed out]; remaining name 'some.record.name'\n    at com.sun.jndi.dns.DnsClient.query(DnsClient.java:300)\n    at com.sun.jndi.dns.Resolver.query(Resolver.java:81)\n    at com.sun.jndi.dns.DnsContext.c_getAttributes(DnsContext.java:430)\n    at com.sun.jndi.toolkit.ctx.ComponentDirContext.p_getAttributes(ComponentDirContext.java:231)\n    at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.getAttributes(PartialCompositeDirContext.java:139)\n    at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.getAttributes(PartialCompositeDirContext.java:127)\n    at javax.naming.directory.InitialDirContext.getAttributes(InitialDirContext.java:142)\n    at com.netflix.eureka2.interests.host.DnsChangeNotificationSource$DnsResolverTask.resolveName(DnsChangeNotificationSource.java:135)\n    at com.netflix.eureka2.interests.host.DnsChangeNotificationSource$DnsResolverTask.resolveServerDN(DnsChangeNotificationSource.java:123)\n    at com.netflix.eureka2.interests.host.DnsChangeNotificationSource$DnsResolverTask.reload(DnsChangeNotificationSource.java:95)\n    ... 9 more\nCaused by: java.net.SocketTimeoutException: Receive timed out\n    at java.net.PlainDatagramSocketImpl.peekData(Native Method)\n    at java.net.DatagramSocket.receive(DatagramSocket.java:767)\n    at com.sun.jndi.dns.DnsClient.doUdpQuery(DnsClient.java:411)\n    at com.sun.jndi.dns.DnsClient.query(DnsClient.java:203)\n    ... 18 more\n</pre>", "fixed\n =||= "], ["449", "2.x Eureka Read - forInterest to read server composed with buffers and snapshots not batching as expected", "David Liu", "qiangdavidliu", "03/09/15, 08:53:24 PM", "When forInterest() client API is composed with .compose(buffers).compose(snapshots), the expected result are batches of full instanceInfo snapshots. However when the below single testApp is used to query the write and read servers, different behaviour is observed.\n\nFor the write server, the correct counts are observed (counts for each onNext are ~ equal with the expected delta differences).\n\nFor the read server, the initial observed counts are consecutive increasing integers from 1 to the final expected count (i.e. batch markers must be generated per notification item), after which the expected behaviour is observed.\n\n``` java\npublic class TestApp {\n    public static void main(String[] args) throws Exception {\n        ServerResolver readResolver = ServerResolvers.just(\"localhost\", 12203);\n\n        EurekaClient interestClient = EurekaClientBuilder.discoveryBuilder()\n                .withReadServerResolver(readResolver)\n                .build();\n\n        interestClient.forInterest(Interests.forFullRegistry())\n                .compose(ChangeNotificationFunctions.<InstanceInfo>buffers())\n                .compose(ChangeNotificationFunctions.<InstanceInfo>snapshots())\n                .subscribe(new Subscriber<Set<InstanceInfo>>() {\n                    @Override\n                    public void onCompleted() {\n\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n\n                    }\n\n                    @Override\n                    public void onNext(Set<InstanceInfo> instanceInfos) {\n                        System.out.println(instanceInfos.size());\n                    }\n                });\n\n        Thread.sleep(60000);\n        System.out.println(\"finished\");\n    }\n}\n```", "fixed\n =||= "], ["450", "Is it possible to use a generic data synchronization framework?", null, "futurely", "06/02/16, 10:25:49 PM", "For example, \"AeroGear data synchronization project is an implementation of Google's Differential Synchonrization by Neil Fraser\".\nhttps://github.com/aerogear/aerogear-sync-server\nhttps://aerogear.org/sync/\nhttps://aerogear.org/docs/specs/aerogear-data-sync/", "@futurely we will take a look into this. Thanks for the links.\n =||= archiving as eureka2 work is going through some larger internal changes.\n =||= "], ["451", "2.x Bug fix for issue #449 (missing/invalid batching delineation)", null, "tbak", "03/03/15, 10:06:44 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #137](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/137/) SUCCESS\nThis pull request looks good\n =||= "], ["452", "Fix bug #448", null, "tbak", "03/03/15, 11:37:24 PM", "Handle properly recoverable and non-recoverable errors.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #138](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/138/) SUCCESS\nThis pull request looks good\n =||= "], ["454", "2.x Eureka 1.x backwards compatible API (query operations)", null, "tbak", "03/06/15, 10:43:19 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #139](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/139/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #140](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/140/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #143](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/143/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #144](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/144/) SUCCESS\nThis pull request looks good\n =||= Rethinking this a little bit from a broader perspective, if we want to provide backwards compatibility with Eureka1, it might be easier to dependent on eureka 1.x server modules and reuse the same server side core components. The the work necessary will only be:\n- add the necessary rxNetty REST resources to talk to the 1.x server components\n- bridge interest from 2.x registry to 1.x registry\n- bridge registrations to 1.x registry to the 2.x registry\n =||= I thought first about the same, but:\n1. the proxy code is very simple, and more efficient than maintaining\nparallel registry\n2. we would have to replicate 1.x registry to 2.x because of registering\n1.x clients\n3. we do not want to reuse replication mechanism from 1.x\n4. cross region replication should be bridged directly to Eureka 2 cross\nregion replication mechanism (whatever it will be)\n\nI think we would get ultimately in a lot of accidental complexity by\nbringing in all Eureka 1 server.\nBut data mode, codecs are reused in this implementation.\n\nOn Fri, Mar 6, 2015 at 1:47 PM, qiangdavidliu notifications@github.com\nwrote:\n\n> Rethinking this a little bit from a broader perspective, if we want to\n> provide backwards compatibility with Eureka1, it might be easier to\n> dependent on eureka 1.x server modules and reuse the same server side core\n> components. The the work necessary will only be:\n> - add the necessary rxNetty REST resources to talk to the 1.x server\n>   components\n> - bridge interest from 2.x registry to 1.x registry\n> - bridge registrations to 1.x registry to the 2.x registry\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/pull/454#issuecomment-77642107.\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #145](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/145/) SUCCESS\nThis pull request looks good\n =||= "], ["455", "1.x discovery client treats HTTP redirects as errors", null, "tbak", "04/09/15, 09:37:27 PM", "Although discovery client properly handles HTTP request redirects, every returned status code other than 200 is regarded as an error. ", "NaN"], ["456", "update dependency versions", null, "brharrington", "03/11/15, 05:18:16 AM", "The primary one that matters to me is ribbon. The older\nversion is still pulling in 'com.netflix.rxjava:rxjava-core'\nwhich conflicts with classes in 'io.reactivex:rxjava'.\n\nThis change also changes the aws dependency to only pull\nin the parts that are actually used by eureka client.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #148](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/148/) SUCCESS\nThis pull request looks good\n =||= Thanks @brharrington . We'll look at a release for this.\n =||= "], ["457", "2.x Adding basic randomisation to SelfClosingConnection", "David Liu", "qiangdavidliu", "03/12/15, 11:16:17 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #149](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/149/) SUCCESS\nThis pull request looks good\n =||= "], ["458", "Lookup based upon service metadata?", "Bill Bauernschmidt", "wbauern", "03/19/15, 08:15:35 PM", "Is there any way in Eureka to do a service lookup based upon values in the service metadata?\n\nThanks!", "No, it is not possible. You will have to download all registry and do filtering yourself. Eureka supports application GETs, so if your application set is limited, you can try that route.\n =||= "], ["459", "1.x Wrapping RemoteRegionFetch in TimedSupervisorTask", "David Liu", "qiangdavidliu", "03/12/15, 10:13:04 PM", "Wrap around the TimedSupervisorTask for better reliability.\n\nThe remoteRegionFetchExecutor can have a max of 2 concurrent threads executing a remote region fetch.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #150](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/150/) SUCCESS\nThis pull request looks good\n =||= Looks good.\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #151](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/151/) SUCCESS\nThis pull request looks good\n =||= "], ["460", "2.x Adding SecureVipInterest to Avro Schema + additional Schema tests", "David Liu", "qiangdavidliu", "03/13/15, 12:59:05 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #152](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/152/) SUCCESS\nThis pull request looks good\n =||= "], ["461", "2.x More Avro schema fixes", "David Liu", "qiangdavidliu", "03/13/15, 03:19:52 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #153](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/153/) SUCCESS\nThis pull request looks good\n =||= "], ["462", "Eureka2 DP Release", "Ben Christensen", "benjchristensen", "04/09/15, 09:37:00 PM", "The last release DP4 was in December, are you in a position to provide another release? I'm interested in doing further testing with it in the ReactiveLab project. ", "We are pretty close to doing an RC1 release. We were hoping to do this this week but wanted to double check some server-side metrics so right now RC1 is looking to be next week. Would that be soon enough for you?\n =||= Next week is good. Thank you.\n =||= @benjchristensen rc.1 is now released and we have updated wiki documentation as well for configuration and use. Please take a look at: \n- https://github.com/Netflix/eureka/wiki/Eureka-2.0-Client-Configuration-And-Use\n- https://github.com/Netflix/eureka/wiki/Eureka-2.0-Server-Configuration-And-Use\n =||= "], ["463", "2.x Minor renaming + adding some randomisation in the Ocelli LB Resolver", "David Liu", "qiangdavidliu", "03/13/15, 11:45:22 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #154](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/154/) SUCCESS\nThis pull request looks good\n =||= "], ["464", "2.x Use concatMap instead of flatMap for sending interest and replication messages", "David Liu", "qiangdavidliu", "03/16/15, 05:22:53 PM", "- use concatMap instead of flatMap for sending interest and replication messages\n- update channel retries to default at 1s instead of 500ms", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #155](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/155/) SUCCESS\nThis pull request looks good\n =||= "], ["465", "2.x bug fix: notification source was getting lost in InitStateHolder", "David Liu", "qiangdavidliu", "03/16/15, 08:26:02 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #156](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/156/) SUCCESS\nThis pull request looks good\n =||= "], ["466", "2.x Rx-fy Index onSubscribe to be tolerant to backpressure", "David Liu", "qiangdavidliu", "03/17/15, 01:34:12 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #157](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/157/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #158](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/158/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #159](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/159/) SUCCESS\nThis pull request looks good\n =||= "], ["467", "2.x Rx backpressure support for server send of ChangingNotifications", "David Liu", "qiangdavidliu", "06/02/16, 10:25:33 PM", "Current eureka constructs for sending ChangeNotifications (NotificationsSubject/PauseableSubject etc) are implemented before rxJava backpressure support was available. The upcoming RxNetty 0.5 release will contain RxJava backpressure integration with channel read & write.\n\nOnce this release is available, server side send of ChangeNotifications should be reworked so that backpressure is supported all the way up to the interest indexes.", "archiving as eureka2 work is going through some larger internal changes.\n =||= "], ["468", "2.x minor fixes", "David Liu", "qiangdavidliu", "03/18/15, 06:18:02 AM", "Also reverting interestChannel and SenderReplicationChannel send to flatmap instead of concatMap. Added TODOs to re-address these once we rework the interest pipeline to properly address backpressure (github issue #467)", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #161](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/161/) SUCCESS\nThis pull request looks good\n =||= "], ["469", "2.x NotifyingInstanceInfoHolder eagerly promote updates from local source to snapshot if current snapshot is not from local source", "David Liu", "qiangdavidliu", "03/18/15, 06:38:31 AM", "This is done to fix the following race condition:\n1. Write Servers A and B replicate to each other\n2. Instance X registers with server A (A -> X local, B -> X replicated)\n3. Instance X registration channel close and reconnect to server B\n3a. A put X local into eviction queue\n3b. B put X replicated into eviction queue\n4. X register an unchanged instanceInfo to server B\n4a. B's holder add X as a second copy as the original replicated copy is yet to be evicted\n4b. Because the B holder's copies diff to empty delta, a CN with source local is never published\n5. B's senderReplicationChannel disconnects and reconnects to A\n5a. B's initState never sees the new X local as the CN is never published, resulting in X\nnot replicating to server A.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #162](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/162/) SUCCESS\nThis pull request looks good\n =||= Actually rethinking about this a similar issue can also occur on the removal side as well, which will lead to stale instances. This will need a deeper think.\n =||= "], ["470", "1.x Use Jackson JSON serializer instead of XStream to improve serialization performance/memory usage.", null, "tbak", "05/12/15, 08:43:21 PM", "XML serialization is still done by XStream.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #220](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/220/) SUCCESS\nThis pull request looks good\n =||= The only further enhancements I can see:\n\nOf the 543M that is allocate with the new code:\n\nInstanceInfo$Builder.setVIPAddress  10M\n- this is due to the regex matching that I think is intended for eureka registration\n- this could benefit from a deser specific implementation\n\nAll of the other allocations are either for the String cache or HashMaps used by Jackson.  My only further questions if what the memory allocation would be if we used Jackson's native de-serialization.  I might ask the developers to see if they expect more or less allocation with their deserializers.  I think it might be likely as now all of our allocation is in HashMap allocation.  I can't see how they need to long term create HashMaps if we're directly creating POJO's.\n =||= Looks good!\n =||= > InstanceInfo$Builder.setVIPAddress 10M\n\nI have added two more setters to `InstanceInfo` builder for vip/secure vip, that do not do macro expansion.\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #221](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/221/) SUCCESS\nThis pull request looks good\n =||= "], ["471", "Updating to new version of nebula.netflixoss", "Rob Spieldenner", "rspieldenner", "03/19/15, 08:52:14 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #163](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/163/) SUCCESS\nThis pull request looks good\n =||= "], ["472", "2.x InstanceInfo encoding efficiency measurement tool.", null, "tbak", "03/19/15, 11:30:40 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #164](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/164/) SUCCESS\nThis pull request looks good\n =||= "], ["473", "2.x Eureka 1.x backwards compatible API with delta fetch support.", null, "tbak", "03/25/15, 03:02:47 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #165](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/165/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #169](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/169/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #170](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/170/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #174](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/174/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #177](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/177/) SUCCESS\nThis pull request looks good\n =||= "], ["474", "2.x Updating runCluster config in testkit build.gradle", "David Liu", "qiangdavidliu", "03/20/15, 06:46:13 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #166](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/166/) SUCCESS\nThis pull request looks good\n =||= "], ["475", "2.x Use a lighter Interest Client implementation for EurekaServerResolver", "David Liu", "qiangdavidliu", "03/30/15, 09:38:37 PM", "Currently the EurekaServerResolver creates a new (full) EurekaInterestClient to get a first batch of read server data from write severs, and shuts it down immediately afterwards. This is expensive for an operation that should be relatively light.", "fixed in #487\n =||= "], ["476", "2.x Implement registry read with fallback to write server for interest client", "David Liu", "qiangdavidliu", "06/02/16, 10:25:29 PM", "Currently canonical  eureka interest clients call EurekaServerResolver (which reads the latest read server notifications each time resolve() is called) to connect to read servers. A better approach would be to supply a composite resolve when setting up the interest client that\n1. reads read server information from the registry if available.\n2. fallback to EurekaServerResolver otherwise.\n\nThis will also mean that on the first forInterest, the interest client should automatically subscribe to the readServer information.", "archiving as eureka2 work is going through some larger internal changes.\n =||= "], ["477", "2.x Write Server Initial Sync", "David Liu", "qiangdavidliu", "04/30/15, 09:20:52 PM", "When a write server boots up, it should not be marked as UP until after it has synced up with all of it's peers. A corollary of this is that the replication protocol need to support metadata exchanges to indicate to receiver servers that it has received all the information the sender has for the initial sync.", "# Proposed implementation\n\nEureka server bootstrapping may happen from different sources, depending on Eureka cluster lifecycle:\n- for initial startup, there is no prior data available, so servers should start with empty registries\n- for existing cluster, when a new write server is brought up, it should ideally take full registry content from one of its peers\n- when full cluster is restarted, or there is other reason why a new server cannot bootstrap itself from a peer, it should load last known registry content from an external source/backup storage. Multiple backup storages may be implemented here.\n\nIn the original design, we envisaged that peer bootstrapping would be implemented within replication protocol itself:\n- a new node chooses one of its peers, and initiates full registry bootstrap\n- the chosen peer sends all its registry content, including local and any other registrations\n- one bootstrapping is done, a regular replication mode is enabled\n\nThis implementation has a few drawbacks:\n- complicates replication protocol, with additional mode of operation\n- has complex failover scenario - if bootstrapping from first node fails, we have to restart it from another peer, with which we may have already established replication channel.\n- it does not cover bootstrapping from external sources, and how the two would interact\n\nIn general, we need an API and some pluggability mechanism where multiple bootstrap sources may be provided. They should be also prioritized, so for example peer bootstrap is always first choice. The proposed API consists of two interfaces:\n\n``` java\npublic class RegistryBootstrapCoordinator {\n\n    @Inject\n    public RegistryBootstrapCoordinator(RegistryBootstrapService primaryRegistryBootstrapService,\n                                        Set<RegistryBootstrapService> additionalRegistryBootstrapServices,\n                                        SourcedEurekaRegistry registry) {\n        // Setup bootstrap sources\n    }\n\n    @PostConstruct\n    public void bootstrap() {\n        // Initiate registry upload from the configured bootstrap source\n    }\n}\n\npublic interface RegistryBootstrapService {\n\n     Observable<Void> loadIntoRegistry(SourcedEurekaRegistry<InstanceInfo> registry, Source source);\n}\n```\n\nEach registry entry provided by bootstrap source is associated with `Source.BOOTSTRAP`, and is put immediately on eviction queue. If bootstrapping fails, the server is enabled anyway, as eventually the up to date state will be reconstructed from the registering clients. The bootstrap process is guarded by a timeout, which if crossed stops it and enables the normal operation mode of the server.\n\nPeer bootstrapping instead of replication protocol, uses regular interest subscription with full registry fetch, with failover mechanism switching to another available service.\n\n# Server availability status\n\nWithin Eureka write cluster we cannot depend on instance registered status, when deciding if a server is up or down. Instead this information has to be provided somehow when connecting to the server. A few options may be envisaged here:\n- Embed server availability in a framing protocol itself, discarding all requests until server is up. A remote endpoint would receive a special frame asking it to disconnect.\n- Implement application level hello message exchange, and embedded server availability status within it.\n- Implement negative acknowledgment replies (NACK), carrying over detailed error status similarly to HTTP protocol. If `NACK.SERVER_UNAVAILABLE` reply is received, a connection to the given server should be dropped.\n =||= What will be the downside of only considering option 3:\n\n> When full cluster is restarted, or there is other reason why a new server cannot bootstrap itself from a peer, it should load last known registry content from an external source/backup storage. Multiple backup storages may be implemented here.\n\nas a \"bootstrap\" scenario and any other scenario as a usual replication scenario? In other words, what is the usecase of getting the entire registry contents from a source (peer or backup) when other peers are available in the cluster?\n\nAFAIU, the entire registry would be required to assert if it is safe to serve registry contents to clients or not. That assertion will be based on the number of instances in a peer's registry. If this is the only reason for the bootstrap, I propose the following:\n- Modify replication protocol to also send; \n  - total instances in the peer registry\n  - Number of peers\n- Modify replication change notification stream to include a marker when the local registry (owned by that node) is streamed completely.\n\nFor a node starting up, it should do the following:\n1. Attempt to connect to all peers.\n2. Get the number of peers and registry information from all peers.\n3. If all other peers are reachable then connect to all of them and wait till all of them have streamed all their local registry content.\n4. If any of the peer is unreachable or not ready to serve traffic, connect to the backup store to fetch the last known registry information.\n\nA node would start serving registry information to clients, if it has received the registry contents. We may also choose to have some heuristics around how much of the registry information we should wait for in case nodes are not able to stream all their data before disconnect.\n\nThe positive of this approach is that you would not get into the hierarchy of bootstrap sources and would also eliminate the need of full registry fetch from a peer in spite of all peers being available.\n\n> > Instead this information has to be provided somehow when connecting to the server. A few options may be envisaged here\n\nI did not quiet understand the difference between the options here. All the options look like sending a message \"Not available for registry fetch\" and closing the connection. Since, the protocol is framed, so you would have to send the message as a different frame, isn't?\n =||= Some key points from our offline discussion:\n- bootstrapping from replication channel as a first step is a good thing, but slightly complex to implement. We will not do this now, but possibly some time in the future\n- doing full registry fetch from a peer or backup cluster should be fast enough, to not impact server bootstrapping time too much\n- we will have single external bootstrap source, so the hierarchy proposed above is not needed\n\nWhat we will provide now for write server bootstrap is a bootstrapping mechanism from either peer write cluster node or external backup cluster (configuration choice).\n =||= Implemented by PR #500 \n =||= "], ["478", "2.x code cleanup", "David Liu", "qiangdavidliu", "03/20/15, 09:38:39 PM", "PauseableSubject was created sometime ago as a replacement for NotificationsSubject (code equivalent), but some classes have not been migrated to use the new version. Removing NotificationsSubject and migrating all necessary classes.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #167](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/167/) SUCCESS\nThis pull request looks good\n =||= "], ["479", "2.x DnsResolver query dns on-demand per resolve()", "David Liu", "qiangdavidliu", "03/24/15, 12:23:36 AM", "DnsResolver query dns on-demand per resolve() call instead of maintaining a background task to constantly poll dns.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #168](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/168/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #171](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/171/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #172](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/172/) SUCCESS\nThis pull request looks good\n =||= "], ["481", "2.x Complementary change to pull #469 for the removal case.", "David Liu", "qiangdavidliu", "03/24/15, 01:54:02 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #173](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/173/) SUCCESS\nThis pull request looks good\n =||= "], ["482", "2.x Registry attach specific subjects on demand for each Source that has an interest registered", "David Liu", "qiangdavidliu", "06/02/16, 10:25:26 PM", "The sourced registry today uses a single subject for ChangeNotification publishes and use .filter() on this stream to generate source specific interest notifications. This leads to a case where notifications for certain sources can be lost (i.e. during a holder snapshot change over). This especially affects replication today.\n\nPull requests #469 and #481 attempts a quick fix for this problem, but going forward a more generic solution should be provided. For example, the registry may dynamically create and attach CN subjects for specific sources as interests are specified.", "archiving as eureka2 work is going through some larger internal changes.\n =||= "], ["483", "1.x Make TimedSupervisorTask thread pool configurable for remote region replication", null, "tbak", "03/24/15, 10:34:18 PM", "Add thread pool level gauge for observing current thread usage level.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #175](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/175/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #176](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/176/) SUCCESS\nThis pull request looks good\n =||= "], ["484", "2.x channel connection initial handshakes", "David Liu", "qiangdavidliu", "06/02/16, 10:25:12 PM", "Enhance current eureka channels to provide an initial handshake at connection time to establish identity, protocol, heartbeat rate etc.", "archiving as eureka2 work is going through some larger internal changes.\n =||= "], ["485", "2.x Replace replication channel with Interest channel", "David Liu", "qiangdavidliu", "06/02/16, 10:25:18 PM", "The current replication channel connections are very similar to the interest channels, with the exception that interest channels are client initiated and replication channels are server initiated. This needs not be the case. Related to issue #484, if all channels provide an initial handshake, we can remove replication channels completely and just use the interest channels for write server replication needs.", "> > The current replication channel connections are very similar to the interest channels, with the exception that interest channels are client initiated and replication channels are server initiated.\n\nAre you referring to the similarity as the data that flows on the channel or how the Channel is implemented on client and server? \nSemantics of storage, heartbeats and expiries are very different for a replication channel, isn't?\n =||= Correct, however the semantic differences can be either merge in the future (e.g. in the case of expiry with a better eviction mechanism) or are better applied at a higher level (such as in the case of storage).\n =||= May be it will be better to see the implementation to better understand your thoughts. So, let me hold on till then :)\n =||= archiving as eureka2 work is going through some larger internal changes.\n =||= "], ["486", "1.x Pin client to the redirected address.", null, "tbak", "04/08/15, 06:19:21 PM", "Initial implementation for discussion. Unit tests missing.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #178](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/178/) SUCCESS\nThis pull request looks good\n =||= This should also fix issue #455\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #186](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/186/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #191](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/191/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #192](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/192/) SUCCESS\nThis pull request looks good\n =||= "], ["487", "2.x lighter eureka client for server resolver", "David Liu", "qiangdavidliu", "03/27/15, 06:32:35 PM", "#475", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #179](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/179/) SUCCESS\nThis pull request looks good\n =||= "], ["488", "Consolidating client APIs with class Eureka as an entry point.", "David Liu", "qiangdavidliu", "03/30/15, 09:37:59 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #180](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/180/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #184](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/184/) SUCCESS\nThis pull request looks good\n =||= "], ["489", "2.x Update Karyon admin integration  in the embedded server.", null, "tbak", "03/30/15, 05:12:37 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #181](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/181/) ABORTED\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #182](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/182/) SUCCESS\nThis pull request looks good\n =||= "], ["490", "2.x bridging fixes", "David Liu", "qiangdavidliu", "03/31/15, 06:12:46 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #185](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/185/) SUCCESS\nThis pull request looks good\n =||= "], ["491", "2.x Adding additional fields to AWSDataCenterInfo", "David Liu", "qiangdavidliu", "04/03/15, 09:01:45 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #187](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/187/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #188](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/188/) SUCCESS\nThis pull request looks good\n =||= "], ["492", "2.x Upgrade rxjava and karyon versions", "David Liu", "qiangdavidliu", "04/06/15, 09:15:46 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #189](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/189/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #190](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/190/) SUCCESS\nThis pull request looks good\n =||= "], ["493", "2.x Dynamically add ChannelHandlers in ChannelPipeline", "David Liu", "qiangdavidliu", "06/02/16, 10:25:21 PM", "Current eureka2 ChannelPipelines are statically defined and the list of handlers for a given pipeline cannot be modified. ChannelPipelines are threadsafe and supports dynamically adding and removing handlers which gives a lot of flexibility.\n\nAn example of where this may be useful is in the case of initial handshakes (issue #484) that can communicate protocol versions, based on which specific handlers can be added to the pipeline, such as in the case of schema upgrades/changes.\n\nDepending on the handshake requirements, this would mean either a handler that reads the sender hello message and add the appropriate follow up handler(s), or changes to BaseMessageConnection to handle more sophisticated hello messages.", "Pull #497 provides some of the functionality for this. With http2 support in rxNetty 0.5 coming soon there may be bigger changes to the transport layer (e.g. multiplexed registration/interest over the same http2 connection) so will reevaluate when that comes.\n =||= archiving as eureka2 work is going through some larger internal changes.\n =||= "], ["494", "Add eureka2-eureka1-support module", null, "tbak", "04/09/15, 07:17:32 PM", "Add eureka2-eureka1-support module to help bridge existing\nEureka1 clients to Eureka2 without adopting Eureka2 client API yet.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #193](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/193/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #194](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/194/) SUCCESS\nThis pull request looks good\n =||= "], ["495", "2.x Shade/relocate avro to avoid conflicts when clients use a different version of it.", null, "tbak", "04/09/15, 07:50:18 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #195](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/195/) SUCCESS\nThis pull request looks good\n =||= "], ["496", "2.x update karyon version", "David Liu", "qiangdavidliu", "04/09/15, 08:50:03 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #196](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/196/) SUCCESS\nThis pull request looks good\n =||= "], ["497", "Adding transport protocol versioning", "David Liu", "qiangdavidliu", "04/10/15, 08:53:55 PM", "- protocol version encoded as an additional byte\n- server handlers encode replies dynamically based on protocol version\n  of inbound request", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #197](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/197/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #198](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/198/) SUCCESS\nThis pull request looks good\n =||= "], ["498", "Wrong enum in documentation", null, "dmelani", "04/20/15, 03:39:01 PM", "There is an error with one of the examples on the wiki page where the REST operations are listed.\n\nThe page in question is https://github.com/Netflix/eureka/wiki/Eureka-REST-operations\n\nThe erroneous example is \"Take instance out of service\". The problem here is that this example uses the enum OUT_OF_SERVICE, which is not defined in the XSD.", "XSD documentation was incomplete. I have added missing two states (OUT_OF_SERVICE and UNKNOWN).\nThank you for spotting this.\n =||= "], ["499", "2.x minor updates", null, "tbak", "04/21/15, 09:34:05 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #199](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/199/) SUCCESS\nThis pull request looks good\n =||= "], ["500", "2.x Implement feature #447 (Write Server Initial Sync).", null, "tbak", "04/30/15, 09:20:25 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #200](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/200/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #201](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/201/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #202](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/202/) SUCCESS\nThis pull request looks good\n =||= "], ["501", "2.x Subscription to SourcedEurekaRegistry in write server does not always emit execution status", null, "tbak", "04/30/15, 09:50:33 PM", "This might be caused by a composition of `PreservableEurekaRegistry` and `SourcedEurekaRegistryImpl`. I have noticed this during testing bootstrapping feature were status result was used to track number of successfully added entries.", "I was not able to reproduce this error. I think it was misunderstanding on my side. During bootstrapping we do full registry fetch over interest channel, but also replication channel is started in parallel. Some entries got loaded via replication, so when added afterwards when received from bootstrap source, there was no registry size change. This is consistent with observation, that ultimately final registry size was correct. I believe we can close this as no-issue.\n =||= "], ["502", "2.x Named Eureka Server Groups", "David Liu", "qiangdavidliu", "06/02/16, 10:25:46 PM", "## Problem To Solve\n\nEureka2 write is designed so that a full network can be partitioned into several eureka2 sub-networks, where each sub-network contains an eureka2 write cluster taking registrations from all instances from their sub-network. One example of such a setup is deployment in AWS's regional model, where an eureka2 write cluster need to exist per region to service registrations from all instances in that region.\n\nIn normal cases an eureka2 read cluster that exist in sub-network A (e.g. us-east-1) only need to connect to it's local write cluster for interest information. However there are cases where read clusters may need to (in addition to the local write cluster) also connect to one or more remote write clusters for informations, and/or to one or more remote read clusters for information (since interest subscriptions can be served from write or read servers analogously).\n\nPer the above, for interest subscription, read clusters should not really care about whether it is connecting to a write cluster or a read cluster, or whether it is connecting to a local cluster or a remote cluster. Rather it needs to have some way to specify a set of source \"clusters\" that are available to provide interest data to this read cluster.\n## Named clusters and multiplexing read servers\n\nA proposal to the above problem is to define global unique names for each cluster (write and read), which can then be shared at bootstrap time for a new read cluster as sources of data.\n\n**(Read) Server Side**\nWhen a read server boots up, it will load configuration that specifies all it's known data sources, and for each data source associate an EurekaRegistry and EurekaInterestClient. All the individual named registries will then be proxied by a registry that understands names and can route interest subscriptions to specific registries. The read server need at least one data source defined that is used as the default data source for this read server.\n\n**Configuration example**\n\n<pre>\neureka.interest.dataSource.names=[write-useast1, read-uswest2]  // first one defined in the list is the default\n\neureka.interest.dataSource.write-useast1.resolverType=dns\neureka.interest.dataSource.write-useast1.serverList=[dnsName:interestPort]\neureka.interest.dataSource.write-useast1.lazyLoad=false\n\neureka.interest.dataSource.read-uswest2.resolverType=eureka\neureka.interest.dataSource.read-uswest2.serverList=[dnsName:interestPort for west2 write cluster]\neureka.interest.dataSource.read-uswest2.lazyLoad=true\n</pre>\n\n\n**Client Side**\nWhen an eureka2 client communicates with a read server for interest subscription, it can optionally specify a dataSource as well. When the interest subscription is received by the read server, it will attempt to route the interest subscription to the correct registry for the specified dataSource. If no dataSource is specified, the default dataSource is used.\n\n**Client API Change**\nExtend Interest to be able to optionally specify a source.\n\n``` java\npublic abstract class Interest<T> {\n\n    public enum Operator {Equals, Like}\n    private final String sourceName;\n\n    protected Interest() {\n        this(null);\n    }\n\n    protected Interest(String sourceName) {\n        this.sourceName = sourceName;\n    }\n\n    public abstract boolean matches(T data);\n}\n```\n\nThe Interests DSL will need to change to accomodate optionally specifying a dataSource, for example\n\n``` java\npublic final class Interests {\n    public static class InterestsWithSource {\n        private final String sourceName;\n\n        InterestsWithSource(String sourceName) {\n            this.sourceName = sourceName;\n        }\n\n        // contain all static methods in Interests.java as instance methods, but obeys sourceName\n    }\n\n    private static final InterestsWithSource WITH_DEFAULT_SOURCE = new InterestsWithSource(null);\n\n    // change all static methods to reference WITH_DEFAULT_SOURCE's equivalent methods.\n\n    public InterestsWithSource fromDataSource(String sourceName) {\n        return new InterestsWithSource(sourceName);\n    }\n}\n```\n\nUsage would be\n\n``` java\nInterest interest = Interests.forVip(\"someVip\");  // use default source\nInterest interestFromAnotherSource = Interests.fromDataSource(\"someSource\").forVip(\"someVip\");\n```", "Could an alternate be to initialize multiple interest client instances and merge the interest stream if/when required? I do not quiet understand the need of adding this to the client & interest DSL when it can easily be solved by having a client per server group.\n =||= I think it is more about transport optimization. If we access cross region data via read cluster, we minimize inter-region traffic + improve bootstrap latency.\n =||= @tbak I am just questioning the change in the client via introduction of data sources. \n\nMultiple server groups inside the _same_ client does not sound the correct abstraction to me. I see the following usecases:\n- Read server configured to read from multiple regions: This is a server level configuration and the decision to use which client should be split at the time of query for an interest, choosing an appropriate client for the query. This does not require introducing the data source concept at the client level.\n- Users querying for cross-region data. This should be an attribute of the interest and should not need any configuration on the client. I do not think \"datasource\" is the correct terminology for this. We should be explicit that it is a cross-region query, something like `Interests.forVip(\"vip\").inRegion(\"us-east-1\")`. In this case it will be an out-of-band understanding for the user that whether the application is running in an environment which supports cross-region queries. If not, the interest should error out.\n\nI can see from where the proposal is coming i.e. to generalize the implementation in the server to be available for all clients but I think the usage is pretty different for an end user vis-a-vis a eureka server.\n =||= Per discussions, some confusion were around whether the configurations specified are for read servers only, or also for EurekaClient used by users. The configurations are only for the former and will not be for  clients exposed to end users.\n\nThere are also some discussions tbd on whether a more specific DSL should be used to specify the \"dataSource\" vs using strings.\n =||= archiving as eureka2 work is going through some larger internal changes.\n =||= "], ["503", "2.x Use a provider to lazily init ConnectionHandler for the TcpServers", "David Liu", "qiangdavidliu", "04/30/15, 11:58:45 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #203](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/203/) SUCCESS\nThis pull request looks good\n =||= "], ["504", "2x shade ocelli", "David Liu", "qiangdavidliu", "05/01/15, 09:38:46 PM", "Branch name is mis-leading, as rxnetty was not actually easily shadeable. Users of eureka2-client will need to to do the shade.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #204](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/204/) SUCCESS\nThis pull request looks good\n =||= "], ["505", "Rearrange sample programs so they can be run correctly from Gradle. ", "Toby", "qu1j0t3", "05/14/15, 04:03:10 PM", "Also change Eureka server port to 8080 to match Tomcat default.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #205](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/205/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #206](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/206/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #207](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/207/) SUCCESS\nThis pull request looks good\n =||= Thank you for your PR. To align with other Netflix OSS projects (including eureka2), could you put both client and server into single gradle module `eureka-examples`? It will probably require some extra gradle scripting as application plugin does not support multiple apps by default, but it will be more concise.\n =||= Not sure I agree. This PR intentionally reflects that client and service are distinct programs, and the Gradle script is consequently minimal, and fits an expected pattern. Are you **certain** you want to go that way? (I already tried to do this within the `eureka-server` module in early attempts to get the demo to run properly, and as you intuited, the Gradle was less natural\u2014and I could never get it to work.)\n =||= Give me some time to think about it, and try it out. I would like to\nminimize number of gradle submodules.\n\nOn Wed, May 6, 2015 at 10:35 AM, Toby notifications@github.com wrote:\n\n> Not sure I agree. This PR intentionally reflects that client and service\n> are distinct programs, and the Gradle script is consequently minimal, fits\n> the expected pattern. Are you _certain_ you want to go that way? (I\n> already tried to do this within the eureka-server module in early\n> attempts to get the demo to run properly, and as you intuited, the Gradle\n> was obviously much less natural\u2014and actually never worked.)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/pull/505#issuecomment-99546064.\n =||= @qu1j0t3 we are working on some cleanup of eureka1 to ease migration for eureka2, and part of that will include some fixing of these examples. The changes should be done pretty soon, and hopefully with that the examples should be much more clear and runnable.\n =||= @qiangdavidliu Thanks. I couldn't come up with a simpler result than this proposal, so I hope you'll consider its structure.\n =||= @qu1j0t3 please take a look at #515 which also cleans up the examples. Specifically the new examples module readme with updated instructions https://github.com/qiangdavidliu/eureka/blob/master/eureka-examples/README.md and the updated config files.\n =||= OK. Abandoning this PR. :)\n =||= @qu1j0t3 pull #515 has been merged. Let us know if you are still having trouble with the new examples.\n =||= "], ["506", "2.x Removing dependency on Ocelli from the client (for now)", "David Liu", "qiangdavidliu", "05/04/15, 07:12:32 PM", "Removing dependency on Ocelli (for now, until we are ready to integrate with it and use it's more advanced features). The renamed RoundRobinServerResolver functionally does the same thing as before with an internal round robin impl.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #208](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/208/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #209](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/209/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #210](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/210/) SUCCESS\nThis pull request looks good\n =||= "], ["507", "2.x Safer implementation of ack handling + pending ack queue size monitor.", null, "tbak", "05/04/15, 10:23:33 PM", "Bug fix in EurekaHealthStatusModule module.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #211](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/211/) SUCCESS\nThis pull request looks good\n =||= "], ["508", "2.x Provide a shaded eureka2-client(-shaded) that shades avro and rxnetty dependencies", "David Liu", "qiangdavidliu", "05/07/15, 05:09:15 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #212](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/212/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #214](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/214/) SUCCESS\nThis pull request looks good\n =||= "], ["509", "2.x Improvements in transport + performance/verification tool.", null, "tbak", "05/08/15, 07:38:58 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #213](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/213/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #215](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/215/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #216](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/216/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #218](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/218/) SUCCESS\nThis pull request looks good\n =||= "], ["510", "2.x Adding eureka2-eureka1-support to eureka2-client-shaded jar", "David Liu", "qiangdavidliu", "05/07/15, 10:32:47 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #217](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/217/) SUCCESS\nThis pull request looks good\n =||= "], ["511", "Fix typos in per-host config keys.", "Toby", "qu1j0t3", "05/12/15, 04:07:55 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #219](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/219/) SUCCESS\nThis pull request looks good\n =||= Thank you for spotting it. We cannot merge this however, as this change is not backwards compatible (all user would have to update their configuration files). It is safer to leave it as it is, even if the property name is a bit misleading.\n =||= Their configuration files are either setting the right parameter, in which case they do not need to change, or they intend to set the per host parameter but are actually setting the wrong one) in which case they are not having the desired effect with the existing code. Additionally, it seems very unlikely that any client is using the perHost parameters or they would have already noticed the bug.\n\nSo this seems safely mergeable.\n =||= You are right. I have missed that we have also `getPeerNodeTotalConnections`, and the property names overlap:\n\n``` java\n @Override\n    public int getPeerNodeTotalConnections() {\n        return configInstance.getIntProperty(\n                namespace + \"peerNodeTotalConnections\", 1000).get();\n    }\n\n    @Override\n    public int getPeerNodeTotalConnectionsPerHost() {\n        return configInstance.getIntProperty(\n                namespace + \"peerNodeTotalConnectionsPerHost\", 500).get();\n    }\n```\n\n I definitely makes sense to merge this in. Thanks.\n =||= No worries.\n =||= "], ["512", "2.x SerializedTaskInvoker is not needed for EurekaInterestClient (and derivatives)", "David Liu", "qiangdavidliu", "01/14/16, 06:09:47 PM", "The SerializedTaskInvoker is current attached to the Eureka SourcedRegistry to guarantee synchronization of registrations and unregistrations from multiple sources into the registry. Synchronization is necessary for the write server as their input sources are from multiple channels, but for the EurekaInterestClient (including the read server) the input source is always from a single interest channel, so synchronization is not needed. Removing the SerializedTaskInvoker in these cases should lead to performance improvements.", "SerializedTaskInvoker is no longer used\n =||= "], ["513", "2.x Simplify SerializedTaskInvoker implementation.", null, "tbak", "05/14/15, 03:18:46 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #222](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/222/) SUCCESS\nThis pull request looks good\n =||= LGTM\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #224](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/224/) SUCCESS\nThis pull request looks good\n =||= "], ["514", "1.x Remove dependency to ribbon.", null, "tbak", "05/14/15, 10:31:51 PM", "Dependency to ribbon existed due to two utility classes providing servo\nmetrics for apache httpclient connection.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #223](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/223/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #227](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/227/) SUCCESS\nThis pull request looks good\n =||= "], ["515", "Adding EurekaModule for DI support + Example cleanup", "David Liu", "qiangdavidliu", "05/14/15, 06:47:39 PM", "- EurekaModule for DI support\n- Added EurekaClient interface for DiscoveryClient\n- cleaned up examples and moved examples to eureka-examples", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #225](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/225/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #226](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/226/) SUCCESS\nThis pull request looks good\n =||= "], ["516", "2.x Initial interface commits of override service classes", "David Liu", "qiangdavidliu", "05/15/15, 09:41:00 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #228](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/228/) FAILURE\nLooks like there's a problem with this pull request\n =||= "], ["517", "2.x refactoring the overrides interface", "David Liu", "qiangdavidliu", "05/15/15, 09:56:00 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #229](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/229/) SUCCESS\nThis pull request looks good\n =||= "], ["518", "2.x Fix memory leak in BatchAwareIndexRegistry and better SerializedTaskInvoker metrics.", null, "tbak", "05/15/15, 10:16:04 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #230](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/230/) SUCCESS\nThis pull request looks good\n =||= "], ["519", "2.x Memory leak fix in Index.", null, "tbak", "05/18/15, 05:52:33 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #231](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/231/) SUCCESS\nThis pull request looks good\n =||= "], ["520", "singleton scoping EurekaConfigBasedInstanceInfoProvider", "David Liu", "qiangdavidliu", "05/19/15, 01:13:44 AM", "bug fix: Re-adding @LazySingleton to EurekaInstanceInfoProvider to ensure InstanceInfo singleton for injection into DiscoveryClient and ApplicationInfoManager.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #232](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/232/) SUCCESS\nThis pull request looks good\n =||= "], ["521", "Destroying jersey cleaner thread on DiscoveryClient shutdown", "Jeremy D. Young", "jeremydyoung", "05/19/15, 06:29:37 PM", "When reloading or shutting down the context in Tomcat 8 we get a warning that there was a thread created but not cleaned up:\n\n```\nWARNING: The web application [example] appears to have started a thread named [Eureka-JerseyClient-Conn-Cleaner2] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\n sun.misc.Unsafe.park(Native Method)\n java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)\n java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)\n java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)\n java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1067)\n java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)\n java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n java.lang.Thread.run(Thread.java:745)\n```\n\nEvidence for this being a problem can be found in the Spring Cloud project:\n[EurekaDiscoveryClientConfiguration.java](https://github.com/spring-cloud/spring-cloud-netflix/blob/master/spring-cloud-netflix-core/src/main/java/org/springframework/cloud/netflix/eureka/EurekaDiscoveryClientConfiguration.java)\n\nMy suggested solution is to check for a discoveryJerseyClient object, and clean it up during the DiscoveryClient shutdown method.\n\nI have provided a test that demonstrates the thread living beyond the shutdown command in it's current state.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #233](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/233/) SUCCESS\nThis pull request looks good\n =||= @jeremydyoung thanks for the fix.\n =||= "], ["522", "Example update", "David Liu", "qiangdavidliu", "05/19/15, 07:07:07 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #234](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/234/) SUCCESS\nThis pull request looks good\n =||= @qiangdavidliu thanks! this really helped clear up the distinction between client initialization and service registration :rocket: \n =||= "], ["523", "make constructor public so other DI systems can create instances", "Spencer Gibb", "spencergibb", "06/05/15, 08:42:16 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #235](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/235/) SUCCESS\nThis pull request looks good\n =||= Ping\n =||= @spencergibb apologies for the lag, there's been a flurry of activity on eureka recently. We are a bit reluctant to make this constructor public available as that can lead to potential multiple instantiations. Which DI system in particular did you have in mind for this?\n =||= No problem! Spring.  Specifically Spring Cloud Netflix.  In [this PR](https://github.com/spring-cloud/spring-cloud-netflix/pull/356) we [do](https://github.com/spring-cloud/spring-cloud-netflix/blob/eureka-di/spring-cloud-netflix-core/src/main/java/org/springframework/cloud/netflix/eureka/EurekaDiscoveryClientConfiguration.java#L194-L198)\n\n```\nConstructor<ApplicationInfoManager> constructor = ApplicationInfoManager.class\n                .getDeclaredConstructor(EurekaInstanceConfig.class, InstanceInfo.class);\nReflectionUtils.makeAccessible(constructor);\nreturn constructor.newInstance(instanceConfig, instanceInfo);\n```\n =||= @spencergibb merged. Thanks. There a few other small things and we should make a patch release soonish.\n =||= Thanks @qiangdavidliu!\n =||= "], ["524", "Add event control for initial instance info heartbeat and instanceinfo update (UP status typically)", "Andrew Spyker", "aspyker", "06/02/15, 08:24:42 PM", "This is the patch that allows an event oriented approach to starting InstanceInfo scheduled tasks (general HeartBeat and InstanceInfo (HealthCheck/Status/etc)).  It should be backwardsly compatible with no change in behavior (by default the tasks are started the same delays as before from DiscoveryClient initialization).  If however, the app sets the useExplicitEventsForInitialDiscoveryCalls, then the client is expected to call the methods startInstanceInfoHeartBeatNow and startInstanceInfoRefreshNow, likely calling them far sooner than the default initial delay.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #236](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/236/) SUCCESS\nThis pull request looks good\n =||= This is interesting! \nWould there be a reason why someone will need to register and not send heartbeats or not update instance info periodically?\nIOW, should the change more be for controlling registrations (and possibly registry fetch) explicitly instead of getting registered in the constructor but deferring heartbeats & instance info refresh?\n =||= I would be interested in this.  There are cases where all of the information to register a service isn't available when the object is constructed.  We go through some gyrations in [spring-cloud-netflix](https://github.com/spring-cloud/spring-cloud-netflix) to approximate this.\n =||= @NiteshKant and @spencergibb A change to externalize the scheduling of any of the events (registry refresh, heartbeat, and instance info dirty check/update) isn't the intent of this patch.  Also, it isn't the intent to give any more configurability than already existed than the initial timing of heartbeat and instance info direct check/update.  This change was mainly to allow for us to register the instance in discovery as fast as possible on an external event (vs. some timing that doesn't align with the app container startup).\n\nThat said, @spencergibb could use this fix to be slower and when all data was available (as using the property will cause the initial registration to wait until the startInstanceInfoHeartBeatNow call).\n =||= @aspyker thanks for the pull, this would definitely help with some of the slow eureka startup issues we have. One point of interest is whether we should separate registration/update and heartbeat scheduler initializations from each other, as there are some inherent assumptions in eureka of a client's behaviour on the registration path concerning registrations/updates/heartbeats. From the changes it looks like the use cases would be either to initialize both tasks with the existing delays, or to initialize both tasks with 0 initial delay. If this is the case, we should be able to combine the inits for both heartbeat and update, so at least that will guarantee a super use won't init one and forget to init the other.\n =||= > >  A change to externalize the scheduling of any of the events (registry refresh, heartbeat, and instance info dirty check/update) isn't the intent of this patch.\n\nMy point here is, if we do externalize registration out of the constructor, we do not need these additional knobs and that also provides a intuitive API. This is the model eureka 2.x follows i.e. registration is not baked into the constructor and is driven by the users. \n\n> > One point of interest is whether we should separate registration/update and heartbeat scheduler initializations from each other\n\nIMO, we shouldn't separate them (what I was saying in my earlier comment) as heartbeat & instance info updates are required for registration and without them, registrations do not work as expected. \n =||= Going to close due to #530 being a better solution\n =||= "], ["525", "2.x Fix dashboard/bridge health check. Add integration test to verify that.", null, "tbak", "05/25/15, 02:58:28 AM", " Dashboard/bridge do not provide yet any health check provider, so observable\n stream of server status never emitted any value. In this change, if there are no\n providers bound, a default one is registered returning always Status.UP.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #237](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/237/) SUCCESS\nThis pull request looks good\n =||= "], ["526", "1.x Reformat code.", null, "tbak", "05/26/15, 11:35:22 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #238](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/238/) SUCCESS\nThis pull request looks good\n =||= "], ["527", "Cross account describe ASGs", "Albert Many\u00e0", "amanya", "06/05/15, 09:26:55 PM", "The motivation of this patch is to make Eureka capable of knowing the state of auto scaling groups even if they are from microservices running in accounts other than the one where Eureka is running.\n\nIn that case, it will do a a cross-account assume role to get permission to describe the ASGs.\n\n[Here](http://docs.aws.amazon.com/IAM/latest/UserGuide/roles-walkthrough-crossacct.html) is a walkthrough from Amazon that explains how to setup the cross-account IAM role delegation: \n\nThe role must be called `ListAutoScalingGroups` and the policy must be like this:\n\n```\n{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Action\": [\n                \"autoscaling:DescribeAutoScalingGroups\"\n            ],\n            \"Effect\": \"Allow\",\n            \"Resource\": \"*\"\n        }\n    ]\n} \n```", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #239](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/239/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #241](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/241/) SUCCESS\nThis pull request looks good\n =||= @amanya thank you for the pull request, this would be a very useful feature for Eureka to have. I added a couple of minor comments that I hope you can take a quick look at. \n\nAdditionally, have you been able to verify this code change? We have mockito as a dependency and it should be able to write a quick unit test for this mocking out the AWS SDK with mockito.\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #260](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/260/) SUCCESS\nThis pull request looks good\n =||= @qiangdavidliu thanks for your comments :)\n\nI think I've managed to solve the first two issues, but for making the tests, I'll need to use a tool like Powermockito due to the static dependencies of the AwsAsgUtil class, right?\n =||= Thanks @amanya . We can merge this in and I'll take a look at what kind of testing we can do for this.\n =||= "], ["528", "Adding additional fields to deser for Jackson codec", "David Liu", "qiangdavidliu", "05/29/15, 06:13:59 PM", "The serializer serializes all @ Auto annotated fields, but the Jackson deser ignores a couple on the deser.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #240](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/240/) SUCCESS\nThis pull request looks good\n =||= "], ["529", "1.x batched replication refactoring", null, "tbak", "06/09/15, 10:05:31 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #242](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/242/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #246](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/246/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #248](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/248/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #249](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/249/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #258](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/258/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #259](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/259/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #268](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/268/) FAILURE\nLooks like there's a problem with this pull request\n =||= Due to merge issues I need to close this PR and make a new one.\n =||= "], ["530", "Adding the ability to execute on-demand updates to the eureka server", "David Liu", "qiangdavidliu", "06/02/15, 11:32:41 PM", "Adding the ability to execute on-demand updates to the eureka server. Current set up is triggered by changes to ApplicationInfoManager.setInstanceStatus(). This capability can be turned on/off via eureka.shouldOnDemandUpdateStatusChange.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #243](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/243/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #244](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/244/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #247](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/247/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #250](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/250/) SUCCESS\nThis pull request looks good\n =||= On shutdown of tomcat, I am consistently getting:\nSEVERE: The web application [] appears to have started a thread named [DiscoveryClient-InstanceInfoReplicator-0] but has failed to stop it. This is very likely to create a memory leak.\n =||= I tested this code and it does improve the startup time.  I am seeing ~30 seconds (instead of the previous 58).\n =||= @aspyker changed the close() on the replicator to call executors.shutdownNow() instead of shutdown().\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #251](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/251/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #252](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/252/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #253](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/253/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #254](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/254/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #255](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/255/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #256](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/256/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #257](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/257/) SUCCESS\nThis pull request looks good\n =||= "], ["531", "Lease renewal: inconsistency between Lease.renew() and Lease.isExpired()", "Bertrand Renuart", "brenuart", "06/08/15, 06:41:24 PM", "There seems to be an inconsistency between the two following methods (from `com.netflix.eureka.lease.Lease`:\n\n```\npublic void renew() {\n    lastUpdateTimestamp = System.currentTimeMillis() + duration;\n}\n\npublic boolean isExpired() {\n    return (evictionTimestamp > 0 || System.currentTimeMillis() > (lastUpdateTimestamp + duration));\n}\n```\n\nWhen the lease is renewed, the `lastUpdatedTimestamp` is set to `now()` + the expected client lease renewal period. It therefore represents _when the lease is about to expire_ and not when it was last renewed.\n\nTo check if the lease is expired, the `isExpired()` method adds again the duration to the `lastUpdateTimestamp` - hence the lease will expire only after two times the duration.\n\nFinally, javadocs on the `getLastRenewalTimestamp()` clearly defines the actual meaning of the `lastUpdateTimestamp`:\n\n```\n/**\n * Gets the milliseconds since epoch when the lease was last renewed.\n *\n * @return the milliseconds since epoch when the lease was last renewed.\n */\npublic long getLastRenewalTimestamp() {\n    return lastUpdateTimestamp;\n}\n```\n\nConclusion: the `renew()` method seems to be broken: _it shouldn't add the duration to the current time._", "@brenuart thanks for point this out, this indeed looks to be the case. We'll take a look at the impact of this and get back to you on whether we fix or update the comments (as this code is very old and been working in our production for a while, this unintended behaviour may be something that clients now expect, and is therefore potentially harmful to change). Thanks again.\n =||= The self protection mode of our Eureka got activated for some reason so lease expiration was temporarily suspended. We then had a look at the registry lease data searching for instances that expired... and discovered that some had their `lastRenewalTimestamp` in the future... This is how we discovered the issue.\n =||= Comments updated in #537\n =||= "], ["532", "2.x Refactorings/reactive registry", null, "tbak", "06/05/15, 05:33:13 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #261](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/261/) SUCCESS\nThis pull request looks good\n =||= "], ["533", "BelowRenewThreshold: isBelowRenewThreshold() & isLeaseExpirationEnabled() do not agree", "Bertrand Renuart", "brenuart", "06/08/15, 06:03:45 PM", "Eureka activate its self protection mode when last minute's renewal rate is below the threshold.\nThe following two methods of `com.netflix.eureka.PeerAwareInstanceRegistry` do not agree on the condition:\n\n```\n public int isBelowRenewThreshold() {\n    if ((getNumOfRenewsInLastMin() < numberOfRenewsPerMinThreshold)\n...\n```\n\nFor that method, self protection should be activated when `renewsRate < threshold`. However, for the following method, the mode is activated if `renewsRate <= threshold`:\n\n```\npublic boolean isLeaseExpirationEnabled() {\n    boolean leaseExpirationEnabled = (numberOfRenewsPerMinThreshold > 0)\n            && (getNumOfRenewsInLastMin() > numberOfRenewsPerMinThreshold);\n...\n```\n\nSo we get unexpected behaviour when `renewsRate == threshold`.\n\nAs far as I can tell, `isbelowRenewThreshold()` is only used by Servo to report metrics, while `isLeaseExpirationEnabled()` is used by the eviction thread to perform the actual eviction of expired leases.", "fixed in #537\n =||= "], ["534", "2.x Registry related unit tests/bug fixes.", null, "tbak", "06/05/15, 09:51:54 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #262](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/262/) SUCCESS\nThis pull request looks good\n =||= "], ["535", "2.x Refactorings/reactive registry", "David Liu", "qiangdavidliu", "06/08/15, 05:43:07 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #263](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/263/) SUCCESS\nThis pull request looks good\n =||= Looks good\n =||= "], ["536", "Improvement: optional read only ResponseCache", "Bertrand Renuart", "brenuart", "06/11/15, 05:33:17 PM", "It would be nice if the use of the read only response cache could be made optional. Although it seems be useful in some scenarios (see https://github.com/Netflix/eureka/issues/147), it also imposes an additional delay before changes are reflected in the Eureka REST API. This extra delay is very annoying in some deployments.\n\nIs this something that could be foreseen?", "@brenuart this is a feature that we needed internally to help eureka scale to our production usage. It would be useful to have this controllable via a server configuration however. Would you like to make a pull request for this?\n =||= I will submit a PR for this.\n\nTo be honest, I don't understand why this extra RO cache helps to make performance better. There is already a first cache... why isn't it sufficient? \nI understand the RO cache has the same effect of delaying the invalidations - just like if you applied them in batch of say 100. Is that the objective?\n =||= Hi @brenuart thanks for the pull request. The readonly cache exist as it's a non-expiry based cache compared to the readWriteCache. What we had observed previously was that the increased numbers of 503s (caused due to cache misses on gets as items are expiring) was causing more issues for us due to the scale of usage.\n =||= Feature in #544 \n =||= "], ["537", "Various fixes (specifics in commit log)", "David Liu", "qiangdavidliu", "06/08/15, 06:03:13 PM", "Also fixes for issues #531 and #533", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #264](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/264/) SUCCESS\nThis pull request looks good\n =||= Looks good.\n =||= "], ["538", "2.x Refactorings/reactive registry", null, "tbak", "06/08/15, 07:03:21 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #265](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/265/) SUCCESS\nThis pull request looks good\n =||= "], ["539", "InstanceInfoReplicator causes the next Heartbeat to Register the instance", "Bertrand Renuart", "brenuart", "06/08/15, 10:22:01 PM", "The following piece of code is executed when the `InstanceInfoReplicator` is triggered:\n\n```\n if (instanceInfo.isDirty()) {\n   register();\n   instanceInfo.setIsDirty(false);\n }\n```\n\n`instanceInfo.setIsDirty(false)` has the additional side-effect of setting the `lastDirtyTimestamp` to 'now', so the current value is different from the one transmitted to the Eureka server during the `register()` method.\n\nThe next time the `HeartbeatThreat` wakes up, it sends a heartbeat with a dirty timestamp different from what the server got with the last `register()`. Since the dirty timestamp doesn't match what it has in its records, the server replies with a 404 to force the client to re-register with up-to-date information. \n\nIn summary, here is the sequence of operations that occurs every time the `InstanceInfo` is dirtied:\n- InstanceInfoReplicator calls `register()`\n- HeartbeatThread sends heartbeat and receives 404 from server\n- HeartbeatThread sends `register()`\n\nThis extra communication could be avoided if `InstanceInfo.setDirty(false)` didn't update the `lastDirtyTimestamp` to current time.", "@brenuart this is already fixed.\n =||= Fine. Was working with version 1.1.147 \nSorry about this \"false\" issue :(\nCould you tell me in which version this fix has been made available?\n =||= Sorry should have been more clear. The fix was released in release 1.1.156\n =||= "], ["540", "2.x Integrate server RegistrationChannel with new registry API.", null, "tbak", "06/15/15, 09:42:38 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #266](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/266/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #288](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/288/) SUCCESS\nThis pull request looks good\n =||= "], ["541", "Disable the read only cache if 'responseCacheUpdateIntervalMs' is set to 0", "Bertrand Renuart", "brenuart", "06/11/15, 05:32:38 PM", "'responseCacheUpdateIntervalMs' controls how often the read only cache is updated with changes collected in the read-write cache. The lesser the value, the faster the cache is updated. So a value of 0 can be interpreted as an immediate update. \nThis seems a good and easy way to disable the read only cache.\n\nSee https://github.com/Netflix/eureka/issues/536", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #267](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/267/) SUCCESS\nThis pull request looks good\n =||= Thanks for this @brenuart . Rather than conflating the same property for two different use cases (setting the refresh rate as well as enabling/disabling the readonly cache), what about defining a new configuration for disabling/enabling the cache? There is a top level get method (get(final Key key)) that then calls the internal get methods with ignoreReadonly as a param, but right now it always calls with false. This seems a nice hook point for bypassing the readonly cache.\n =||= The idea was that if I want to speed-up things, I had to use a lower value for the `responseCacheUpdateIntervalMs`, say I would have set it to `100ms`. If not fast enough, I would have use `50ms`, then `1ms`... So at the end, `0` means _immediate_, and I get the desired behaviour.\nThis had the added benefit of not introducing a new configuration property in the game while still keeping an easy to understand meaning for the existing one.\n\nNow, if you prefer to add a new configuration property, I can update the PR with that. \nWhat property name would you suggest?\n =||= Thanks again for the pull @brenuart . The readonly cache and the readWrite caches are actually serving two different use cases that are not quite symmetric. The readonly cache is not a guava cache and does not actually have any expiry or clean up policy, so once it caches data the data stays in the cache without expiry (the update task helps with purging removed apps and leaves tombstones). The issue with using the readWrite cache directly, is that the auto expiry for that causes 503s for gets when a cache miss occur.\n\nFor convenience I created pull #544 for this, does this pull satisfy your needs?\n =||= This is ok for me. The new config property allows me to disable the read only cache and have changes propagated immediately. Thanks.\n =||= Thanks @brenuart . Closing. \n =||= "], ["542", "1.x batched replication refactoring", null, "tbak", "06/30/15, 06:12:36 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #269](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/269/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #271](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/271/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #274](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/274/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #296](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/296/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #310](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/310/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #325](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/325/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #327](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/327/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #333](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/333/) SUCCESS\nThis pull request looks good\n =||= "], ["543", "AwsAsgUtil fixes", "David Liu", "qiangdavidliu", "06/10/15, 06:00:47 PM", "- async load data from the asgCache for isASGEnabled queries.\n- avoid using expensive getASGAccount(asgName) if possible.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #270](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/270/) SUCCESS\nThis pull request looks good\n =||= Looks good\n =||= "], ["544", "Adding config for use (or not to use) the readonly cache in ResponseCache", "David Liu", "qiangdavidliu", "06/11/15, 05:32:01 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #272](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/272/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #273](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/273/) SUCCESS\nThis pull request looks good\n =||= This ok for me. \n =||= "], ["545", "Improvement: \"CacheRefresh\" event", "Bertrand Renuart", "brenuart", "06/15/15, 10:03:06 PM", "We are looking for a way to be notified when the Eureka client has refresh its local cache. This could help to quickly react on changes in the list of discovered instances, like adapt balancing/routing behaviour.\n\nThe `DiscoveryClient` doesn't expose any public/protected method that could be easily overridden to implement such behaviour. However, we were wondering if the `DiscoveryClient` could be enhanced to publish a `CacheRefresh` event on the `eventBus` every time it refreshes its cache?", "@brenuart this would be a useful feature. A simple hook point for this would be to publish this event after every successful execution of the CacheRefreshThread, however this may return some false positives as not every refresh will actually have updates to the local cache. To publish this event only for real changes  may involved some careful hooks to a few different methods (starting point would be the CacheRefreshThread).\n\nWould you be interested in making a pull for this feature?\n =||= Some remarks:\n\n(1) First question is what kind of event do we need ?\nA `CacheRefreshedEvent` would simply tell the world the cache is refreshed and up-to-date. It doesn't say something has changed. We could leave the change detection to a separate component that would perform the diff and eventually send another event with the change information.\n\nA `CacheUpdateEvent` on the other hand would be sent only if there is a change. But I wonder is if it is useful at all if it doesn't hold information about _what_ has actually changed:\n- new instance discovered (which one)?\n- instance gone (which one)?\n- instance status changed\n- etc\n\nIt start getting complicated. So my advice would be to go for the simplest `CacheRefreshedEvent` and possibly build a separate listener that would track changes. People interested in the actual delta could use it.\n\n(2) Event or listener?\nThe second question is whether we should plug into the `eventBus` or go for a simple listener. In the later case, interested parties would register with the `DiscoveryClient` to get the info.\nDrawback of the listener pattern: requires component to unregister\n\n(3) Starting hook\nAccording to me, it is probably better to hook into the `fetchRegistry()` method instead of the `CacheRefreshThread`. The `fetchRegistry()` method is where the actual work is done and can/could be invoked from many different places. Currently only at startup and then at regular intervals by the `CacheRefreshThread`. \n\nYour opinion?\n =||= @qiangdavidliu ping?\n =||= @brenuart sorry was busy with other work.\n\nI believe you and I essentially have the same agreement in both of our comments, that is there is two ways to go about this.\n\nThe simpler way is to emit events on the cacheRefresh, which gives false positives as not all cache refreshes actually updates data. This is pretty straight forward to add.\n\nThe more complex and better way to generate events for real refresh that actually did work is to hook into the various update methods themselves. As the update actions involves deltas and retries the instrumentation point may not be as straight forward.\n\nW.r.t. to the message publishing, using the existing eventBus is nice as a different event (StatusChangeEvent) is already published there. However I have no strong dislikes of a listener, provided that it can be added nicely to the current interface and does not add too much clutter.\n\nSince we don't have a requirement for this feature internally, I leave it to you to decide which route is best for your use case.\n =||= "], ["546", "2.x Reorganize integration tests structure.", null, "tbak", "06/12/15, 05:01:09 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #275](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/275/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #276](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/276/) SUCCESS\nThis pull request looks good\n =||= "], ["547", "2.x Refactorings/reactive registry", "David Liu", "qiangdavidliu", "06/13/15, 11:28:55 PM", "- Clean up extra use of a subject in the initStateHolder\n- Adding temporary fix for client side batching issue (too eagerly emit BufferMarker when local cache is empty but data is transmitted from server side).", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #277](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/277/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #278](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/278/) SUCCESS\nThis pull request looks good\n =||= "], ["548", "2.x Adding interest channel eviction mechanism + tests.", "David Liu", "qiangdavidliu", "06/15/15, 07:22:01 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #279](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/279/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #284](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/284/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #285](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/285/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #286](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/286/) SUCCESS\nThis pull request looks good\n =||= "], ["549", "Capture \"CacheRefreshed\" event", "Bertrand Renuart", "brenuart", "06/15/15, 09:49:10 PM", "The objective is to capture \"cache refreshed\" events. A few comments (following discussion in https://github.com/Netflix/eureka/issues/545):\n\n1/ Added protected methods invoked when remote status is changed and cache is refreshed. They  are currently responsible to fire the appropriate event to the EventBus if one is available.\nThey are intentionally made protected so subclasses of the `DiscoveryClient` can override them if they need more advanced behaviour like:\n- implement the Observer pattern and invoke registered listeners/observers\n- compute actual changes when cache is refreshed\n- etc\n\n2/ I could create a `CacheRefreshedEvent` similar to the existing `StatusChangedEvent` and fire it every time the cache is refreshed. However, I'm not sure about the implications this additional event may have on components currently listening to the only StatusChangedEvent... What is your opinion?\n\n3/ The `FETCH_REGISTRY_TIMER` includes the time taken by the following bloc of code:\n\n```\n private boolean fetchRegistry(boolean forceFullRegistryFetch) {\n     try {\n        ....\n        // Notify about cache refreshed before updating the instance remote status\n        onCacheRefreshed();\n\n        // Update remote status based on refreshed data held in the cache\n        updateInstanceRemoteStatus();\n   } catch(Throwable t) {\n   ....\n   }\u00a0finally {\n       tracer.stop();\n```\n\nThe tracer includes the time it takes to notify listening parties. Should't we stop the timer before?\n\n4/ I could have introduced the `Observer` pattern directly. But then I think it should have been done for both the `StatusChangedEvent` AND the newly introduced `CacheRefreshedEvent`...\nThey new protected methods are good starting point to build the Observer pattern if needed.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #280](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/280/) FAILURE\nLooks like there's a problem with this pull request\n =||= Don't see why the test failed - cannot reproduce the failure locally.\nJust wondering if it is not a timing issue?\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #281](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/281/) SUCCESS\nThis pull request looks good\n =||= Thanks @brenuart . I restarted the test and it looks like it was a transient failure.\n\nOn your comments:\n\n1/ Agree.\n\n2/ Messages published on the event bus can be consumed with the following recipe:\n\n``` java\n// Here I am using an anonymous inner class to reduce verbosity of the example, in reality, although this works, you may want to have a named class.\neventBus.registerSubscriber(new Object() {\n    // Any method annotated with @Subscribe will be a consumer of the event class (or any subclass thereof), which is the first (and only) argument in the method.\n    @Subscribe\n    /* Any access modifier & any method name works. You do not have to implement any interface */\n    public void consume(MyEvent event) {\n        // Consumption of the event code.\n    }\n});\n```\n\nSo the consumers can listen for specific event types without interfering with the consumers of different event types.\n\nAnother example to look at for event bus consumption is [EurekaUpStatusResolver](https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/EurekaUpStatusResolver.java)\n\n3/ You are correct on this. I guess right now since EventBus publish and consumption is async it doesn't make a big difference.\n\n4/ Agree.\n =||= Additional modifications after your comments:\n\n(point 2) \nA new `CacheRefreshedEvent` has been created and is automatically published by the `DiscoveryClient` if an `EventBus` is provided.\nI also made the `StatusChangeEvent` and `CacheRefreshEvent` inherit from the same parent `DiscoveryEvent`. Having a common parent for all events sent by the same source is quite convenient.\n\n(point 3)\nI moved the code not directly related to the refresh of the local cache outside of the scope of the timer.\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #287](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/287/) SUCCESS\nThis pull request looks good\n =||= Thanks @brenuart \n =||= "], ["550", "2.x Minor update to batching integration test.", null, "tbak", "06/15/15, 06:39:16 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #283](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/283/) SUCCESS\nThis pull request looks good\n =||= "], ["551", "Clean up of static usage of ApplicationInfoManager in DiscoveryClient", "David Liu", "qiangdavidliu", "06/16/15, 06:06:05 PM", "Also added tests for eventBus events", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #289](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/289/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #290](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/290/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #291](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/291/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #292](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/292/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #293](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/293/) SUCCESS\nThis pull request looks good\n =||= "], ["552", "2.x Adding buffer hint based eviction for replication", "David Liu", "qiangdavidliu", "06/18/15, 12:26:40 AM", "Also done:\n- renaming occurrences of \"discovery\" to \"interest\" in schema\n- removed RegisterCopy and UnregisterCopy from replication protocol. Using equiv from interest protocol instead\n- replication protocol also include StreamStateUpdate now\n- Clean up ReplicationChannel interface\n- Clean up misleading usages of \"discovery\" to be replaced with \"interest\"\n- Clean up naming confusion with ReplicationHandler (now ReplicationSender) and TcpReplicationHandler", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #294](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/294/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #298](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/298/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #299](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/299/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #300](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/300/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #301](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/301/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #303](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/303/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #307](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/307/) FAILURE\nLooks like there's a problem with this pull request\n =||= "], ["553", "2.x integration tests", null, "tbak", "06/18/15, 02:43:11 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #295](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/295/) SUCCESS\nThis pull request looks good\n =||= "], ["554", "DiscoveryClient maintains a STATIC reference to its EurekaClientConfig", "Bertrand Renuart", "brenuart", "07/01/16, 10:34:09 PM", "`DiscoveryClient` keeps reference to its `EurekaClientConfig` via a _STATIC_ variable. This may lead to unpredictable behaviour if multiple instances of the client are created.", "The `clientConfig` static field is still used by static methods that are now deprecated. Removal of the static is therefore impossible until these methods are actually removed.\n\nIn the meantime, it would be useful to add a safe guard in the constructor to check if an instance has already been created and throw an exception otherwise. This would prevent people from creating multiple instances until actually supported.\n\nWhat do you think?\n =||= Since most of the static methods are deprecated (and the remaining ones are fixable), one way out of this bind is to keep two copies of clientConfig, one static and one instance level. The static clientConfig will be used by the deprecated static methods, and the setting of this will be by each client construction (so slightly undefined as to which version you will get when referenced statically).\n =||= Don't you think it might be a better idea to simply prevent multiple instances from being created? I mean, if the the static field is already set, then throw an exception.\nThe now deprecated static methods are used by clients who assume the singleton pattern anyway - so they are not likely to create multiple instances. And if they do, they are already facing unexpected behaviour.\n =||= If the aim of this is to support multiple instances of DiscoveryClient to be created (for some specific use cases), and the only blocking item is the static client config, then adding exceptions would not be a good user experience, especially since it looks like it's not difficult to make the client config an instance variable of the client itself without compromising the singleton usage of client in the more main stream use case.\n =||= are there any plans and timelines to fix the issue, thanks\n =||= @KishorGrandhe this is on our list of items to fix. If you are interested, a pull request would be very welcome as well. Thanks.\n =||= @qiangdavidliu I could try and make a pull request for this one\n =||= This is fixed and now DiscoveryClient instances now have their own config instances. (A static reference still exist for backwards compatibility of some of the existing deprecated static methods, but the static config will be pointing a non-deterministic version of one of the client's instance level config).\n =||= "], ["555", "Refactor so other DI Systems can extend eureka.", "Spencer Gibb", "spencergibb", "07/16/15, 11:57:38 PM", "Make EurekaJacksonCodec more inline with Converters with public static classes to extend.\nMake EurekaJacksonCodec.INSTANCE mutable.\nAdd get/set to DiscoveryClientOptionalArgs.\n\nI'd rather not have a static instance in EurekaJacksonCodec, suggestions welcome.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #297](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/297/) FAILURE\nLooks like there's a problem with this pull request\n =||= Not sure of the build failure.  Didn't change any behavior.\n =||= @tbak I make the `DiscoveryClientOptionalArgs` have a constructor.  It seems to be the simplest thing to do what I'd like to accomplish.\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #304](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/304/) SUCCESS\nThis pull request looks good\n =||= @tbak ping, I've rebased against master.\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #364](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/364/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #365](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/365/) SUCCESS\nThis pull request looks good\n =||= Thanks @spencergibb . Changes looks clean.\n =||= @qiangdavidliu or @tbak any idea of when you might have a release?\n =||= @spencergibb we are looking at doing an rc release today. Since many of the dependencies has been updated, we will make the full release once the rc from today is confirmed to be stable.\n =||= @qiangdavidliu thanks for the update!  Our team really appreciates it.\n =||= "], ["556", "Fixing a flaky unit test", "David Liu", "qiangdavidliu", "06/24/15, 08:00:07 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #302](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/302/) FAILURE\nLooks like there's a problem with this pull request\n =||= looks like the build system is having hiccups\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #305](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/305/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #306](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/306/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #324](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/324/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #326](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/326/) FAILURE\nLooks like there's a problem with this pull request\n =||= "], ["557", "fixed package name of serializer", null, "kukgini", "06/25/15, 12:24:10 AM", "StatusInfo's serializer should be 'com.netflix.discovery...' instead of\n'com.netflix.eureka...'", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #308](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/308/) SUCCESS\nThis pull request looks good\n =||= thanks @kukgini \n =||= "], ["558", "2.x Merging multiple updates into reactive_registry refactoring branch", null, "tbak", "06/18/15, 07:57:53 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #309](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/309/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #311](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/311/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #312](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/312/) SUCCESS\nThis pull request looks good\n =||= "], ["559", "2.x reactive registry and service overrides", null, "tbak", "06/18/15, 08:50:28 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #313](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/313/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #314](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/314/) SUCCESS\nThis pull request looks good\n =||= "], ["560", "2.x Updating to Governator 1.7 and archaius2.", "David Liu", "qiangdavidliu", "06/23/15, 09:50:10 PM", "- dependency updates\n- server refactoring to be inline with governator 1.7", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #315](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/315/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #316](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/316/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #317](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/317/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #318](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/318/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #319](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/319/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #322](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/322/) SUCCESS\nThis pull request looks good\n =||= "], ["561", "1.x Add VPC support", null, "tbak", "09/30/15, 04:26:19 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #320](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/320/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #321](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/321/) SUCCESS\nThis pull request looks good\n =||= This was prototype work. With coming changes, we will have to visit VPC support.\n =||= "], ["562", "2.x netrouter update to better deal with asynchronous events.", null, "tbak", "06/23/15, 09:26:34 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #323](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/323/) SUCCESS\nThis pull request looks good\n =||= "], ["563", "Adding configurable awsAsg cache expiry time", "David Liu", "qiangdavidliu", "06/25/15, 06:50:44 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #328](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/328/) SUCCESS\nThis pull request looks good\n =||= "], ["564", "2.x ASG status overrides + DI refactorings", null, "tbak", "06/29/15, 09:44:39 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #329](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/329/) SUCCESS\nThis pull request looks good\n =||= "], ["565", "2.x (WIP) s3 override registry for OOS status", "David Liu", "qiangdavidliu", "07/01/15, 08:32:48 PM", "Still WIP, need to integrate with #564 before merging.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #330](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/330/) SUCCESS\nThis pull request looks good\n =||= Still todo: adding integ tests\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #331](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/331/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #335](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/335/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #336](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/336/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #337](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/337/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #338](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/338/) SUCCESS\nThis pull request looks good\n =||= "], ["566", "2.x Migrate to archaius2 configuration proxies.", null, "tbak", "06/30/15, 08:45:16 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #332](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/332/) SUCCESS\nThis pull request looks good\n =||= Much cleaner:)\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #334](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/334/) SUCCESS\nThis pull request looks good\n =||= "], ["567", "1.x New Jackson JSON/XML serializer.", null, "tbak", "09/02/15, 04:23:19 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #339](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/339/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #348](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/348/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #356](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/356/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #410](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/410/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #411](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/411/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #418](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/418/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #419](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/419/) SUCCESS\nThis pull request looks good\n =||= "], ["568", "2.x Moving selfInfoResolvers to their own package.", "David Liu", "qiangdavidliu", "07/02/15, 02:00:20 AM", "Fix duplicate write server self registration.\nFix ServerIdentity in ChangeNotifications.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #340](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/340/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #341](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/341/) SUCCESS\nThis pull request looks good\n =||= "], ["569", "2.x More deterministic integ tests", "David Liu", "qiangdavidliu", "07/02/15, 06:45:12 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #342](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/342/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #343](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/343/) SUCCESS\nThis pull request looks good\n =||= "], ["570", "2.x unit/integration test updates", null, "tbak", "07/02/15, 04:38:03 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #344](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/344/) SUCCESS\nThis pull request looks good\n =||= "], ["571", "2.x merge admin UI tabs + connect health SelfInfoResolver in write cluster", null, "tbak", "07/02/15, 06:31:21 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #345](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/345/) SUCCESS\nThis pull request looks good\n =||= "], ["572", "2.x Minor fixes", "David Liu", "qiangdavidliu", "07/02/15, 10:05:27 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #346](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/346/) SUCCESS\nThis pull request looks good\n =||= "], ["573", "2.x Removing extraneous eureka1 config file in bridge server", "David Liu", "qiangdavidliu", "07/03/15, 07:29:17 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #347](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/347/) SUCCESS\nThis pull request looks good\n =||= "], ["574", "2.x Fix connection leak in RxHttpReverseProxy", null, "tbak", "07/05/15, 05:11:29 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #349](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/349/) SUCCESS\nThis pull request looks good\n =||= "], ["575", "2.x Eureka2 home page", null, "tbak", "06/02/16, 10:25:03 PM", "Currently Eureka2 hasn't any home page, but instead provides two Karyon webadmin UI pages (registry insight and server status). These pages are strictly Eureka2 specific, as unlike in Eureka1 where there was always local full registry copy, in Eureka2 there might be multitude of different client subscriptions, dynamically changing over time. The latter may be tracked but only within a framework, which is out of scope of Eureka2 project itself (it is a good fit for Karyon).\n\nI propose to convert the two Karyon webadmin UI pages into Eureka2 WEB app, and leave to Karyon admin the standard UI tabs that are there.", "archiving as eureka2 work is going through some larger internal changes.\n =||= "], ["576", "2.x In AbstractPatternInterest the compiled pattern should not be part of equals", "David Liu", "qiangdavidliu", "07/08/15, 12:42:20 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #350](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/350/) SUCCESS\nThis pull request looks good\n =||= "], ["577", "2.x Adding additional debugging", "David Liu", "qiangdavidliu", "07/08/15, 07:16:58 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #351](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/351/) SUCCESS\nThis pull request looks good\n =||= "], ["578", "2.x Eureka CLI refactoring", null, "tbak", "07/08/15, 07:59:55 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #352](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/352/) SUCCESS\nThis pull request looks good\n =||= "], ["579", "2.x Replace Eureka2 ext loader with governator profile loader mechanism.", null, "tbak", "07/09/15, 10:38:23 PM", "Additionally:\n- further configuration cleanup\n- more flexibility in building EurekaDeployment with extension modules\n- supporting configuration override in EurekaDeployment builder", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #353](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/353/) SUCCESS\nThis pull request looks good\n =||= "], ["580", "2.x Test/TODOs cleanup", null, "tbak", "07/09/15, 11:52:50 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #354](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/354/) SUCCESS\nThis pull request looks good\n =||= "], ["581", "2.x Remove legacy eviction code.", null, "tbak", "07/10/15, 12:02:09 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #355](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/355/) SUCCESS\nThis pull request looks good\n =||= "], ["582", "2.x Server module cleanup", "David Liu", "qiangdavidliu", "07/10/15, 11:43:12 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #357](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/357/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #358](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/358/) SUCCESS\nThis pull request looks good\n =||= "], ["583", "2.x Making the module list in the runners more modifiable", "David Liu", "qiangdavidliu", "07/12/15, 09:20:52 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #359](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/359/) SUCCESS\nThis pull request looks good\n =||= "], ["584", "2.x Adding health status to bridge server self info resolver\t", "David Liu", "qiangdavidliu", "07/12/15, 09:50:42 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #360](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/360/) SUCCESS\nThis pull request looks good\n =||= "], ["585", "2.x fix typo that used write module in bridge server runner", "David Liu", "qiangdavidliu", "07/13/15, 12:05:05 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #361](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/361/) SUCCESS\nThis pull request looks good\n =||= "], ["586", "2.x Apply refactor work to dashboard server + binding some components as eagerSingletons", "David Liu", "qiangdavidliu", "07/13/15, 06:37:58 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #362](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/362/) SUCCESS\nThis pull request looks good\n =||= "], ["587", "2.x various fixes", "David Liu", "qiangdavidliu", "07/16/15, 01:40:16 AM", "- use karyon3 for consolidated config loading across modules and extModules\n- switch kafka dep to kafka-clients and other dependency clean ups\n- update eureka2-kafka to use latest archaius for config loading\n- update gradle runners\n- change admin eureka2 view to read directly from registry", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #363](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/363/) SUCCESS\nThis pull request looks good\n =||= "], ["588", "Add the ability to use additional Jersey ClientFilters in the DiscoveryClient", "Will Tran", "william-tran", "07/20/15, 08:38:39 PM", "So we can do things like add Authorization headers and authenticate those on the Eureka Server", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #366](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/366/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #367](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/367/) SUCCESS\nThis pull request looks good\n =||= Hi @willtran- can you please do a rebase? Thanks.\n =||= done\n\nOn Thu, Jul 16, 2015 at 8:03 PM, David Liu notifications@github.com wrote:\n\n> Hi @willtran- https://github.com/willtran- can you please do a rebase?\n> Thanks.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/pull/588#issuecomment-122133875.\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #369](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/369/) SUCCESS\nThis pull request looks good\n =||= Hey @qiangdavidliu what do you think of this PR?\n =||= @willtran- looks good, thanks for the contribution.\n =||= "], ["589", "2.x AbstractServer should not expose method to access sourced registry", "David Liu", "qiangdavidliu", "07/16/15, 11:44:55 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #368](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/368/) SUCCESS\nThis pull request looks good\n =||= "], ["590", "Doc: AWS credentials obtained through InstanceProfileCredentials", "Jeff Myers", "jeffreymyers", "07/22/15, 05:39:27 PM", "Minor issue with the wiki documentation here: https://github.com/Netflix/eureka/wiki/Configuring-Eureka-in-AWS-Cloud#eureka-aws-specific-properties\n\nThis section indicates that setting the AWS IAM keys via the configuration is required, but looking at the code, it falls back to using the AWS SDK's InstanceProfileCredentialsProvider to pick up the credentials dynamically from the EC2 Instance Metadata Service. We're much happier with leveraging this option rather than specifying the keys in the config, so I'd suggest amending the documentation to indicate that this is the fallback behavior if the keys are not specified in the config.\n\nHere are the relevant lines in the code where this fallback behavior is used:\nhttps://github.com/Netflix/eureka/blob/9711533554c62b472a7248b71764c56266ce0c8e/eureka-core/src/main/java/com/netflix/eureka/util/EIPManager.java#L353\nhttps://github.com/Netflix/eureka/blob/329d104ceab914d186a54f3a8e61c23246cc5f2a/eureka-core/src/main/java/com/netflix/eureka/util/AwsAsgUtil.java#L472", "Fixed, thanks @jeffreymyers \n =||= "], ["591", "Features/jackson codec ng integration with the client", "David Liu", "qiangdavidliu", "07/23/15, 02:04:40 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #370](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/370/) SUCCESS\nThis pull request looks good\n =||= "], ["592", "Binding exception due EurekaInstanceConfig was already configured in \u2026", "Milan Baran", "xbaran", "07/23/15, 10:27:10 PM", "ExampleEurekaGovernatedService does not work because a wrong guice binding. \n\nThe EurekaInstanceConfig is already configured in EurekaModule and also in anonymous AbstractModule. So, it causes guice to throw already configured exception. I just override EurekaModule with AbstractModule via Modules.override() method. ", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #371](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/371/) SUCCESS\nThis pull request looks good\n =||= @xbaran thanks for the fix.\n =||= "], ["593", "Better error handling", "David Liu", "qiangdavidliu", "07/23/15, 05:43:54 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #372](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/372/) SUCCESS\nThis pull request looks good\n =||= "], ["594", "Updating dependencies to jersey 1.19 and governator 1.7.5.", "David Liu", "qiangdavidliu", "07/23/15, 11:31:32 PM", "Also changing eureka-client dependencies to just guice 4 and governator-annotations.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #373](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/373/) SUCCESS\nThis pull request looks good\n =||= "], ["595", "1.x fix an expensive method call on the critical path", "David Liu", "qiangdavidliu", "07/27/15, 04:12:28 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #374](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/374/) SUCCESS\nThis pull request looks good\n =||= "], ["596", "Standardizing DiscoveryClient's optional configs", "David Liu", "qiangdavidliu", "07/27/15, 06:15:13 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #375](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/375/) SUCCESS\nThis pull request looks good\n =||= "], ["597", "add application version field", "Fabian Wallwitz", "cforce", "07/01/16, 10:30:49 PM", "The feature allows to register the same application in different versions at the same time. The lookup is able to filter the application instance list returened on the wished version (range) on query, not only on client side. We can also retrieve the latest (version) application instances only.\nThis could also be done by a naming schema for application names, like applicationname>_<version>. However this logic would need more than the \"Like\" operator for interests and additional client side filtering", "@cforce thanks for the suggestion. Are you interested in making a pull request for this feature?\n =||= I have to somehow find a solution. Because of this feature missing i would do it in the client by missung the vip field - however this solution is a workaround. I hoped you maybe have an better idea or already had same thoughts in this direction.\n =||= @cforce just re-read your initial post, are you raising this issue for eureka 1.x or eureka 2.x? Using the vip field for versioning is not a misuse, a vipAddress can be a composite of multiple variables that define the application, one of which can be the version itself.\n =||= Eureka v1 is the one released, isn't it?\n\nBut how can i search for \"in between \" or above \"v2.0\"?\n =||= Closing due to inactivity.\n =||= "], ["598", "add application alias names", "Fabian Wallwitz", "cforce", "07/01/16, 10:30:19 PM", "Similar to cnames this feature allows to register and lookup the same app under more than one name,", "@cforce thanks for the suggestion. Are you interested in making a pull request for this feature?\n =||= How would you implement that?\n =||= @cforce it's up to you:). We'd love a discussion/design beforehand but feel free to make a pull request and we can discuss over that also.\n =||= How is this different than vip? You can already specify a list to `eureka.vipAddress` and then do the lookup for a given vip.\n =||= > You can already specify a list to `eureka.vipAddress` and then do the lookup for a given vip.\n\nWhere in the Eureka code base does something interpret that property's value as a list?\n =||= Ah, there is [`com.netflix.discovery.shared.Applications#addInstanceToMap()`](https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/shared/Applications.java#L515), which contains this statement:\n\n``` java\nString[] vipAddressArray = vipAddresses.split(\",\");\n```\n =||= Closing due to inactivity.\n =||= "], ["599", "2.x various minor fixes and improvements", "David Liu", "qiangdavidliu", "07/29/15, 11:00:25 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #376](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/376/) SUCCESS\nThis pull request looks good\n =||= "], ["600", "Eureka Client dependency update to Jersey 2.x", "Fabian Wallwitz", "cforce", "07/31/15, 08:09:57 AM", "We have to add the spring-boot-starter-jersey to put Jersyey 2.14 on the classpath. The mix of both versions lead to strange NoSuchMethodErrors during application startup! The only solution seems to be to use JAX-RX 1.x (Jersey 1) . This is maybe related to https://github.com/Netflix/eureka/issues/376", "@cforce eureka-client depends on jersey 1.x only and we have not tested (or guarantee) compatibility with jersey 2.x. We also do not have any plans on upgrading to jersey 2.x in the short term.\n =||= @qiangdavidliu can we shade the dependency on Jersey 1.x? Causing issues since most other frameworks have moved on to JAX-RS 2.0.\n =||= We implement a new transport that will allow one to plug-in different HTTP client implementations. It is still on branch, but we will merge this to master probably next week. Once it is done, you can exclude jersey 1.x, and provide equivalent jersey 2.x implementation\nCheck: https://github.com/Netflix/eureka/tree/refactorings/transport/eureka-client/src/main/java/com/netflix/discovery/shared/transport\n\nIf we have time, we might provide a new module (eureka-client-jersey2), that would do exactly this.\n =||= Would that make it possible to use something other than Jersey? It is just required to be a JAX-RS implementation?\n =||= For eureka-client, yes this could be anything that implements EurekaHttpClient API. But on the server side we depend heavily on JAX-RS.\n =||= How its solved now? Do i still need to pimp like this?\n\n``` xml\n <plugins>\n            <plugin>\n                <groupId>com.spotify</groupId>\n                <artifactId>docker-maven-plugin</artifactId>\n            </plugin>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n                <!-- defined in spring-cloud-starter-parent pom (as documentation hint), but needs to be repeated here -->\n                <configuration>\n                    <requiresUnpack>\n                        <dependency>\n                            <groupId>com.netflix.eureka</groupId>\n                            <artifactId>eureka-core</artifactId>\n                        </dependency>\n                        <dependency>\n                            <groupId>com.netflix.eureka</groupId>\n                            <artifactId>eureka-client</artifactId>\n                        </dependency>\n                    </requiresUnpack>\n                </configuration>\n            </plugin>\n        </plugins>\n```\n\nor \n\n``` xml\n<dependency>\n        <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-eureka</artifactId>\n    <exclusions>                \n        <exclusion>\n            <artifactId>jsr311-api</artifactId>\n            <groupId>javax.ws.rs</groupId>\n        </exclusion>\n    </exclusions>\n</dependency>\n```\n =||= We are working towards enabling multiple transports in Eureka client. There\nis already jersey2 implementation, however DiscoveryClient is still tightly\ncoupled with jersey1.x. We plan to re-write this code next month, after\nholiday season.\n\nOn Tue, Dec 1, 2015 at 6:17 AM, Fabi notifications@github.com wrote:\n\n> How its solved now? Do i still need to pimp like this?\n> \n> com.spotify\n> docker-maven-plugin\n> \n> org.springframework.boot\n> spring-boot-maven-plugin\n> \n> <!-- defined in spring-cloud-starter-parent pom (as documentation hint),\n> but needs to be repeated here -->\n> \n> com.netflix.eureka\n> eureka-core\n> \n> com.netflix.eureka\n> eureka-client\n> \n> or\n> \n> org.springframework.cloud\n> spring-cloud-starter-eureka\n> \n> jsr311-api\n> javax.ws.rs\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/issues/600#issuecomment-160981111.\n =||= Any updates on Jersey2 version? Thanks!\n =||= @singerdmx we are doing some work that will help with this this quarter, but we can't commit to any timelines right now unfortunately. I will update once we have anything more concrete.\n =||= Could someone give rough estimate on how long it takes to decouple code from jersey v1? \nThanks!\n =||= Hi guys. Uncopling of jersey1 is essential for us in order to use Eureka. Any update on the progress would be much appreciated.\n =||= It's not a priority for them, but I'm sure they would look at a pull request.\n =||= Eagerly awaiting this as well\n =||= @jasollien @saneItchyHog we are taking a more drastic direction w.r.t. the client side of eureka (thinner clients with no jersey dependencies at all), and is working more towards this goal at the moment. We believe that this is a more flexible solution at the end of the day as it addresses other dependency problems as well as the jersey issue.\n\nUs providing a jersey 2.x implementation of the current client is technically feasible, however part of the value of eureka (client and server) is that is it battle tested in very large and varied deployment scenarios at Netflix, and even if we provide a jersey 2.x variant, it will not be used internally and will lack similar levels of production readiness.\n\nHaving said the above, the aforementioned (earlier in this thread) new transport is now active, and there is a jersey 2.x skeleton in the eureka-client-jersey2 submodule, so we are definitely more than willing to look at any pull requests to build on top of these.\n =||= @qiangdavidliu I think most of the folks following this would agree that removing the Jersey dependency from your side of things would be the 'best' solution for folks who are using this library. Personally, I don't care what you use for your underlying communications as long it's been well tested and vetted (which is what you are going for), AND doesn't get in the way of our own application development (which Jersey dependencies of any kind have the chance of doing).\n\ntl;dr: \ud83d\udc4d \n\nLook forward to the changes!\n =||= @qiangdavidliu \n\n> we are taking a more drastic direction w.r.t. the client side of eureka (thinner clients with no jersey dependencies at all), and is working more towards this goal at the moment.\n\nI am starting to look into eureka-client-jersey2 and picking up where you guys left off, but I wanted to put a feeler out to see what progress had been made on the jersey-agnostic client and if there was the possibility of a release candidate being available.\n =||= @mattnelson as part of the new work we are doing a bit more than just a different client, but are also taking advantage of this to rework the data model to update it to the 2016 requirements we have as a company, compared to when eureka was first published (better VPC support for example). Part of the work will include introducing a proxy tier to handle the compatibility with the existing eureka server so I suspect it would not fit with your immediate use case. \n\nIf you are keen to follow up on the existing -jersey2 work that would be greatly appreciated, as I don't think the newer work will completely deprecate all use of the existing client(s). I think it will bring a lot of value to this project.\n\nThanks.\n =||= @mattnelson we have users (large institutions) that would love have a jersey2 client working.\n =||= Got the PR out for this on #821 \n =||= @spencergibb now jersey 2 compatibility released in eureka 1.6.0 but you planning to upgrade to eureka 1.5.6 in 1.3.0.M1. \nis there possibility to push upgrades to 1.6.0 ?\n =||= Considering it has been over a year since the issue was closed and nowadays spring-boot applications with jersey 2 clients are widely-used, what is the recommended approach to use Eureka client in web services which also already use jersey 2 clients? \r\n\r\nFor instance, I have struggled to find a recommendation or example on using eureka clients with any spring boot app that utilizes spring-boot-starter-jersey or the likes (jersey 2 dependencies) which are included in most spring examples.  =||= "], ["601", "Remove unused reference to DynamicPropertyFactory", null, "elandau", "08/04/15, 05:45:18 PM", "This triggers Archaius static initialization, which is not necessary here.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #377](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/377/) SUCCESS\nThis pull request looks good\n =||= Thanks\n =||= "], ["602", "InstanceInfo data loaded during server bootstrap should be evicted after some time", null, "tbak", "06/02/16, 10:26:11 PM", "Eureka write server can load initial registry content from an external source, prior to setting yourself into UP status. This data must have a well defined lifecycle, and ideally its corresponding instance info holders should be removed, as soon as regular registration updates are received. Stale data must be dropped after configurable amount of time.", "archiving as eureka2 work is going through some larger internal changes.\n =||= "], ["603", "2.x Minor fixes.", null, "tbak", "08/03/15, 08:13:35 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #378](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/378/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #379](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/379/) SUCCESS\nThis pull request looks good\n =||= "], ["604", "2.x Eureka1 bridge refactoring", null, "tbak", "08/04/15, 06:13:48 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #380](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/380/) SUCCESS\nThis pull request looks good\n =||= "], ["605", "2.x Fix bug in kafka audit service.", null, "tbak", "08/04/15, 10:03:31 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #381](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/381/) SUCCESS\nThis pull request looks good\n =||= "], ["606", "Adding mini jackson deserialization to the codec sets", "David Liu", "qiangdavidliu", "08/05/15, 12:49:27 AM", "- Adding mini jackson deserialization to the codec sets\n- sync with master", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #382](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/382/) SUCCESS\nThis pull request looks good\n =||= "], ["607", "2.x Fix kafka value serializer.", null, "tbak", "08/05/15, 03:38:39 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #383](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/383/) SUCCESS\nThis pull request looks good\n =||= "], ["608", "2.x Fix resource leak in kafka service.", null, "tbak", "08/05/15, 04:12:31 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #384](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/384/) SUCCESS\nThis pull request looks good\n =||= "], ["609", "Adds a hook to allow sub-classes to customize eureka jackson module.", "Spencer Gibb", "spencergibb", "10/07/15, 09:18:43 PM", "Would allow me to replace [this reflection hack](https://github.com/spring-cloud/spring-cloud-netflix/blob/eureka-1-1-157/spring-cloud-netflix-core/src/main/java/org/springframework/cloud/netflix/eureka/DataCenterAwareJacksonCodec.java#L56-L86) with just a couple of lines in `customizeModule`.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #385](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/385/) SUCCESS\nThis pull request looks good\n =||= @spencergibb we are working on a more native jackson codec on the features/jackson_codec_ng branch. The code is pretty close to being merged back in to master. Do you want to take a look at the changes there w.r.t. your pull request?\n =||= @qiangdavidliu I saw that a few days ago. I'll take a look.\n =||= @qiangdavidliu basically what we are doing is adding some functionality to serialization/deserialization of InstanceInfo.  We have sub-classed the existing serializer/deserializer and plugged in our code back into the right places.  Will we be able to do that in `jackson_codec_ng`? (still looking over it, it's big).\n =||= @spencergibb most of the code for the new codec are in this package https://github.com/Netflix/eureka/tree/features/jackson_codec_ng/eureka-client/src/main/java/com/netflix/discovery/converters/jackson, see EurekaJacksonCodecNG.java as the main entry point.\n\nMultiple codec types (such as the older EurekaJacksonCodec and the newer NG version) will be supported for a while and configuration is available to switch between them, but at some point the non-NG codecs will be deprecated and removed. If you would like to add hooks to provide custom behaviour, I would try to add them to both EurekaJacksonCodec and EurekaJacksonCodecNG. Hopefully it'll be pretty straight forward.\n =||= @qiangdavidliu that's what I was looking for, thanks.  What do you think would be best, for me to wait until `jackson_codec_ng` gets merged into master?\n =||= If you can wait a few days, it should make it back to master. Also feel free to make pulls to that branch directly. The code in that branch is pretty much complete and sync-ed with master, so we are just waiting for some performance experiments to be done before we call it good and merge it back.\n =||= @qiangdavidliu will do.  If I get time, I'll make a pull to the branch, otherwise I'll wait.\n =||= @spencergibb is this pull still needed now that (hopefully) you no longer need to customize the serializer?\n =||= No it is not.\n =||= Thanks. Closing.\n =||= "], ["610", "2.x bug fix + storing extended ServicePort information in Eureka1 metadata", null, "tbak", "08/05/15, 11:24:30 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #386](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/386/) SUCCESS\nThis pull request looks good\n =||= "], ["611", "2.x BootstrapClusterAddresses property should be optional.", null, "tbak", "08/05/15, 11:38:23 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #387](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/387/) SUCCESS\nThis pull request looks good\n =||= "], ["612", "Adding server side capability to return compact json data", "David Liu", "qiangdavidliu", "08/06/15, 08:24:20 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #388](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/388/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #389](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/389/) SUCCESS\nThis pull request looks good\n =||= "], ["613", "2.x Add more features to EurekaCLI + fix log level in InterestChannelImpl", null, "tbak", "08/06/15, 08:51:53 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #390](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/390/) SUCCESS\nThis pull request looks good\n =||= "], ["614", "New sub-project to configure eureka using archaius2", null, "elandau", "08/10/15, 06:17:02 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #391](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/391/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #392](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/392/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #393](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/393/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #394](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/394/) SUCCESS\nThis pull request looks good\n =||= Can the legacy archaius bindings be pulled out to a separate lib so that if using archaius2 we don't have to pull in the legacy version?\n =||= Removing the legacy libs would require a bit more work.  @qiangdavidliu may take a stab at it.\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #396](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/396/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #397](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/397/) SUCCESS\nThis pull request looks good\n =||= "], ["615", "Adding eureka accept to the vip resources", "David Liu", "qiangdavidliu", "08/07/15, 09:15:30 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #395](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/395/) SUCCESS\nThis pull request looks good\n =||= "], ["616", "2.x Diagnostic REST API - initial version", null, "tbak", "08/14/15, 11:27:06 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #398](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/398/) SUCCESS\nThis pull request looks good\n =||= "], ["617", "Catchup", "Jonathan Bond", "bondj", "10/07/15, 09:20:33 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #399](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/399/) FAILURE\nLooks like there's a problem with this pull request\n =||= Thanks @bondj. This is indirectly fixed in the refactorings/transport branch. Closing.\n =||= "], ["618", "Features/jackson codec ng", "Jonathan Bond", "bondj", "08/21/15, 06:12:59 PM", "Add some interns to save memory.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #400](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/400/) SUCCESS\nThis pull request looks good\n =||= "], ["619", "2.x REST API extension", null, "tbak", "08/19/15, 06:08:35 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #401](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/401/) ABORTED\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #402](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/402/) ABORTED\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #405](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/405/) SUCCESS\nThis pull request looks good\n =||= "], ["620", "1.x Adjust severity levels of log entries in DiscoveryClient", null, "tbak", "07/01/16, 10:29:55 PM", "`DiscoveryClient` generates a lot of noise at warn level.", "Closing due to inactivity.\n =||= I actually really agree with this one. We see lots of users asking about what look like errors in the logs that are warnings.\n =||= @spencergibb we've actually removed some of the warn level logging recently, especially the reconcile hash code mismatch warn log msg that had no value, and is the most \"annoying\" of the warn logs.\n =||= @qiangdavidliu thanks for the note!\n =||= My mistake for the wrong comment when I closed this issue.\n =||= "], ["621", "2.x Integrate eureka-ui WEB UI with write server", null, "tbak", "08/20/15, 07:40:31 PM", "eureka-ui is SNAPSHOT dependency until first RC is available.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #406](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/406/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #407](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/407/) SUCCESS\nThis pull request looks good\n =||= "], ["622", "2.x Registry update that protects merge subject from being terminated", null, "tbak", "08/20/15, 10:11:36 PM", "by onError emitted by a registration observable.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #408](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/408/) SUCCESS\nThis pull request looks good\n =||= "], ["623", "1.x multiple updates", null, "tbak", "08/25/15, 03:30:34 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #409](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/409/) SUCCESS\nThis pull request looks good\n =||= "], ["624", "Updating Instance status for an Instance that doesn't exist returns 406", "Will Vanderhoef", "thepoofy", "09/21/15, 03:49:06 PM", "This is an incorrect usage of http response codes.  `406` should indicate the wrong accept header was used.  This should respond with a `404` should be thrown indicating the resource is not found.", "According to RFC2616:\n\"\n 406 Not Acceptable\nThe resource identified by the request is only capable of generating response entities which have content characteristics not acceptable according to the accept headers sent in the request.\n\"\nThis description fits the usage pattern.\n =||= The \"resource identified\" criteria hasn't been met.  In the event there is no resource identifiable by the correct response code is 404.  Going back to the RFC:\n\n```\n10.4.5 404 Not Found\n\n   The server has not found anything matching the Request-URI. No\n   indication is given of whether the condition is temporary or\n   permanent.\n```\n\nSo when an Instance has been removed from Eureka due to a timeout the URI doesn't match any values known to Eureka and should be spitting out a 404.\n\nI was extra irked by this because using a `Accept: */*` still returned a 406.\n =||= You are right, status code 404 should be returned, and after checking the code it is implemented like that. In the latest release we added a filter that enforces GZIP replies for all GET requests. If you run GET with something like \"Accept-Encoding: identity\" you will get 406 in reply. If this is the case, your options would be:\n- remove the filter from the reference web.xml (gzipEncodingEnforcingFilter)\n- support gzip encoding in your client (either do not set Accept-Encoding header, which assumes gzip is supported, or add it explicitly)\n =||= Putting aside the gzip which is not relevant here; we're using version 1.1.141 and that is not the behavior we see.\n =||= Can you upgrade to latest version? 1.1.141 is quite old, and we have done quite a few updates.\n =||= As we have not received any more information about this issue, I am closing it.\n =||= "], ["625", "Change status when the lease has expired.", null, "Swierkowski", "09/18/15, 05:46:29 PM", "When my service has crashed or killed -9 I would like to see that it is in DOWN status.\n\nCurrently when the lease has expired, the service can be evicted from the service registry. It happens when you configure enableSelfPreservation=false.\n\nI would like to not evict the service from the registry, but instead change the status to DOWN.\n\nThis feature could be configured by new config parameter like goDownWhenLeaseExpired.", "Eureka has pretty complex configuration already, and we prefer not adding more properties to it. What you are requesting here, could be implemented in a more generic way as:\n- disabling heartbeats (not supported)\n- overriding current status (supported)\n\nHeartbeats/lease are essential concept in Eureka. Self preservation was provided to protect from loosing registry content during network failures or peer node crashes. You could try to set self preservation to 100%, which ideally would prohibit any node to be evicted. You can than override instance status with REST API call `PUT /eureka/v2/apps/appID/instanceID/status?value=DOWN`.\n =||= In my case, my service has already crashed. Therefore, the service is not able to change the status using REST API.\n\nMy service is written in Java. I have already registered a JVM shutdown hook which changes the status of my service to DOWN. The problem is that when the service was not stopped gracefully the shutdown hook is not executed. It is e.g. kill -9 or OutOfMemoryError.\n\nIn my case the only thing that Eureka server knows is that it has stopped receiving heartbeats. I would like this to be interpreted as the service is DOWN.\n =||= This behavior would require bigger changes in the code, and is not directly in line with Eureka architectural principles.\n\nWhat you want to achieve here is better handled by the health check poller mechanism. This is an external monitoring service that periodically calls each server of your fleet at a well know endpoint (Eureka provides healtcheck URL field for that in InstanceInfo), and if there is no successful reply marks an instance as down.\nIf you look at karyon3 (https://github.com/Netflix/karyon/tree/3.x), it provides a framework for application health evaluation + REST endpoint.\n =||= > > > I would like this to be interpreted as the service is DOWN.\n\nLeaving aside Eureka internals, how would you use this DOWN status differently than the instance not being available in Eureka registry?\n =||= I have already implemented my own poller mechanism which is setting the status to down when there are no heartbeats. As I start Eureka server using spring boot, I have direct access to eureka registry.\n =||= > > > I have already implemented my own poller mechanism which is setting the status to down when there are no heartbeats.\n\nSo, all servers that do not send an explicit remove, will stay in eureka registry forever?\n =||= "], ["626", "[WIP] Major refactor of the registry", "David Liu", "qiangdavidliu", "09/02/15, 06:35:35 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #412](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/412/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #413](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/413/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #414](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/414/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #416](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/416/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #420](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/420/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #422](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/422/) SUCCESS\nThis pull request looks good\n =||= "], ["627", "1.x Additional metrics for client side heartbeat/registry staleness monitoring", null, "tbak", "09/01/15, 05:50:34 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #415](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/415/) SUCCESS\nThis pull request looks good\n =||= "], ["628", "1.x Registration failover when server overloaded", null, "tbak", "07/01/16, 10:29:51 PM", "Currently if servers returns 503, the request will be retried on the very same instance some time later. It is behavior we would like to have for registry fetches, but registrations/heartbeats are more critical, and at the same much lighter to handle, so retrying on another server might be a better choice.", "Closing due to inactivity.\n =||= "], ["629", "1.x Create new category for registration related metrics.", null, "tbak", "09/01/15, 09:53:19 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #417](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/417/) SUCCESS\nThis pull request looks good\n =||= "], ["630", "EurekaNameSpace not used in eureka.region", "Jaume Pinyol Vilardell", "jaume-pinyol", "09/15/15, 10:39:51 PM", "Hello,\n\nI've seen that the eureka.region property in DefaultEurekaClientConfig.class it's not tied to the namespace, and when using a different namespace there is the need to hardcode this property.\n\nRegards,\nJaume", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #421](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/421/) SUCCESS\nThis pull request looks good\n =||= Thank you for your PR. To be backward compatible, can you add a fallback logic, so if a property with a namespace does not exist, it should read \"eureka.region\" as previously.\n =||= Done! Do you want to join commits?\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #429](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/429/) SUCCESS\nThis pull request looks good\n =||= Thanks!\n =||= "], ["631", "1.x Update lease duration dynamically if changed", null, "tbak", "09/02/15, 09:27:39 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #423](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/423/) SUCCESS\nThis pull request looks good\n =||= "], ["632", "2.x readModule should bind fullFetchInterestClient", "David Liu", "qiangdavidliu", "09/03/15, 01:15:29 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #424](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/424/) SUCCESS\nThis pull request looks good\n =||= "], ["633", "2.x Moving classes around to more appropriate packages.", "David Liu", "qiangdavidliu", "09/03/15, 11:08:26 PM", "no code changes other than import changes and changes in .avdl schemas", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #425](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/425/) SUCCESS\nThis pull request looks good\n =||= "], ["634", "Make XML dependencies optional in the client", null, "tbak", "09/08/15, 11:00:05 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #426](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/426/) SUCCESS\nThis pull request looks good\n =||= "], ["635", "Adding some extensibility to codecs for client and server", "David Liu", "qiangdavidliu", "09/11/15, 11:47:38 PM", "Also adding content-type for gziped responses", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #427](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/427/) SUCCESS\nThis pull request looks good\n =||= "], ["636", "Making serverCodecs public and using a builder instead", "David Liu", "qiangdavidliu", "09/12/15, 01:06:22 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #428](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/428/) SUCCESS\nThis pull request looks good\n =||= "], ["637", "fix a flaky test", "David Liu", "qiangdavidliu", "09/14/15, 10:19:49 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #430](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/430/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #431](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/431/) SUCCESS\nThis pull request looks good\n =||= "], ["638", "EurekaMonitors fails to unregister servo monitors from JmxMonitorRegistry", "Bertrand Renuart", "brenuart", "09/14/15, 11:13:06 PM", "`EurekaMonitors.shutdown()` fails to properly unregister servo monitors from `JmxMonitorRegistry`. The following exception is thrown:\n\n```\n2015-09-14 20:28:59,904  WARN 44684 [       Thread-2]  --- com.netflix.servo.jmx.JmxMonitorRegistry           : Unable to un-register Monitor:MonitorConfig{name=RATE_LIMITED_FULL_FETCH_CANDIDATES, tags=class=EurekaMonitors, policy=DefaultPublishingPolicy}\n\njavax.management.InstanceNotFoundException: com.netflix.servo:name=count,class=EurekaMonitors,id=RATE_LIMITED_FULL_FETCH_CANDIDATES,level=INFO,type=COUNTER\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getMBean(DefaultMBeanServerInterceptor.java:1095)\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.exclusiveUnregisterMBean(DefaultMBeanServerInterceptor.java:427)\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.unregisterMBean(DefaultMBeanServerInterceptor.java:415)\n    at com.sun.jmx.mbeanserver.JmxMBeanServer.unregisterMBean(JmxMBeanServer.java:546)\n    at com.netflix.servo.jmx.JmxMonitorRegistry.unregister(JmxMonitorRegistry.java:125)\n    at com.netflix.servo.DefaultMonitorRegistry.unregister(DefaultMonitorRegistry.java:143)\n    at com.netflix.eureka.util.EurekaMonitors.shutdown(EurekaMonitors.java:184)\n```\n\nThe `EurekaMonitors` class holds an enum for every monitor used by the Eureka sub-system. Problem is:\n- registration is done with `enum.getName()` as name\n- unregister is done with `enum.name()` as name (_not the same_)", "@brenuart thanks for the issue. Will fix.\n =||= want a PR?\n =||= I am doing some clean up work on the server side right now, so can just add the fix as part of that. Feel free to provide a PR as well.\n =||= Resolved per #639\n =||= "], ["639", "Properly unregister Servo monitors on shutdown", "Bertrand Renuart", "brenuart", "09/14/15, 11:11:25 PM", "Fix for https://github.com/Netflix/eureka/issues/638", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #432](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/432/) SUCCESS\nThis pull request looks good\n =||= thanks @brenuart \n =||= "], ["640", "1.x Bug fixes and minor cleanups", null, "tbak", "09/15/15, 11:04:58 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #433](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/433/) SUCCESS\nThis pull request looks good\n =||= "], ["641", "Eureka 2.0 information propagation delay question", "Adrian Ivan", "aivans", "09/17/15, 05:34:35 PM", "Hi,\n\nWill  the Eureka 2.0 push model improve the delay for broadcasting topology changes?\nRight  now the Clients pull regularly hence the updates can take some time to the Client. I was wondering whether with the push model we will get closer to realtime.\n\nThanks", "Yes, with the push model we are getting delays as low as ~5ms, depending of\ncourse on the system load and network bandwidth.\n\nOn Wed, Sep 16, 2015 at 3:35 PM, Adrian Ivan notifications@github.com\nwrote:\n\n> Hi,\n> \n> Will the Eureka 2.0 push model improve the delay for broadcasting topology\n> changes?\n> Right now the Clients pull regularly hence the updates can take some time\n> to the Client. I was wondering whether with the push model we will get\n> closer to realtime.\n> \n> Thanks\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/issues/641.\n =||= Sounds great.\n\nI know there is an RC available, is there a timeline for a Production ready release?\n\nThanks\n =||= Hi @aivans there are some known bugs with rc.2 that we are fixing for a rc.3 release. As for 1.0, we don't have any timelines for this at the moment.\n =||= Thank you.\n\nLooking forward!\n =||= "], ["642", "1.x JSON encoding fix: do not unwrap single element arrays", null, "tbak", "09/16/15, 10:59:54 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #434](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/434/) SUCCESS\nThis pull request looks good\n =||= "], ["643", "1.x Better separation of new JSON and XML serializers", null, "tbak", "09/16/15, 11:30:51 PM", "so jackson XML specific annotations are never loaded when using JSON codecs.\nThis is required, as all jackson XML dependencies are marked as provided in\ngradle build, and are not included by default.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #435](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/435/) SUCCESS\nThis pull request looks good\n =||= "], ["644", "Feature/DI friendly server", "David Liu", "qiangdavidliu", "09/24/15, 05:46:36 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #436](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/436/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #439](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/439/) SUCCESS\nThis pull request looks good\n =||= Closed in favour of #652 which merges into a branch first.\n =||= "], ["645", "Allow custom DataCenterInfo implementations", "Spencer Gibb", "spencergibb", "09/23/15, 07:54:18 PM", "Currently there is no way to have a custom implementation that implements `UniqueIdentifier`.\n\n/cc @jkschneider ", "I understand that you have already custom serializer for your DataCenterInfo implementation. Can you tell us more about what is preventing you from implementing this interface?\n =||= @tbak @spencergibb this pull request solves the issue we have in Spring Cloud: https://github.com/Netflix/eureka/pull/646\n =||= Closing w.r.t. #649\n =||= "], ["646", "Enable custom metadata-aware DataCenterInfo implementations", "Jonathan Schneider", "jkschneider", "09/23/15, 07:42:08 PM", "Currently, `DataCenterInfo` metadata is only serialized/deserialized if it is an instance of `AmazonInfo`.  It is sometimes useful to be able to hang metadata on non-AmazonInfo `DataCenterInfo` instances (e.g. MyDataCenterInfo) as well.\n\nThis PR introduces a new `MetadataAware` interface, and both `AmazonInfo` and `MyDataCenterInfo` are made to extend it.  Any `DataCenterInfo` implementation that is also `MetadataAware` will have its metadata serialized/deserialized.\n\nSince `MyDataCenterInfo` did not previously support metadata, its metadata map is initialized to an empty map (effectively preserving its state prior to the PR).\n\nThis PR blocks progress in Spring Cloud Netflix on adoption of eureka-client 1.2.2 and later.  After merge, we can effectively get rid of the [custom codec](https://github.com/spring-cloud/spring-cloud-netflix/blob/master/spring-cloud-netflix-core/src/main/java/org/springframework/cloud/netflix/eureka/DataCenterAwareJacksonCodec.java) in Spring Cloud Netflix.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #437](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/437/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #438](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/438/) SUCCESS\nThis pull request looks good\n =||= @jkschneider thanks for the pull. Regarding your question on compatibility of adding a new Name enum, it would break older clients who while fail at Name.valueOf(\"ANewCustomName\") unfortunately. \n =||= Eureka1 default serialization engine is limited in practice to DataCenterInfo and AmazonInfo types. If a custom implementation is required, it should come with its serialization engine, possibly extending the default one.\n\nWe are in the process of migration from legacy encoding mechanism, that was both slow and memory hungry. We will remove the old code, as soon as we have enough confidence that all corner cases are covered in the new implementation. For the purpose of the migration we introduced an internal CodecWrapper API, but I would not  recommend to use it may be changed or removed in the near future.\n\nIn Eureka2 we provide BasicDataCenterInfo, in parallel with AWS implementation, which is aimed at DC deployments. I believe it makes sense to have it in Eureka1 as well. If this would solve your problem, lets go that route.\n =||= @tbak If BasicDataCenterInfo contains a customizable ID, then that is sufficient.  Custom metadata is icing on the cake, but there is no immediate need for it in Spring Cloud.\n =||= @jkschneider @spencergibb #649 should provide a way to specify custom ids for InstanceInfo without having to go through DataCenterInfo.\n =||= "], ["647", "Eureka gives 500 when app registered without Datacenter info", "Jorge Dias", "diasjorge", "09/24/15, 03:14:57 PM", "Hi,\n\nI was testing Eureka and found that if I do a push to register and app to:\n\nSERVER/v2/apps/APP_NAME and in the json data I only have something like:\n\n```\n{\n    \"instance\": {\n        \"hostName\":\"eureka-testing.example.com\",\n        \"app\":\"eureka-testing\",\n        \"ipAddr\": \"127.0.0.1\",\n        \"vipAddress\":\"eureka-testing\",\n        \"status\":\"UP\",\n        \"port\":\"8080\"\n    }\n}\n```\n\nThe status page then gives a 500.\n\nI think the submitted data should be validated against the DTD shown in the wiki or at least the page should not fail.", "We do not do any schema based validation (it is JSON), but the request should not fail with 500 in such case. As each instance record must have associated data center info, an HTTP response with status code 400 would be more meaningful here.\nThank you for reporting this.\n =||= Fixed in PR https://github.com/Netflix/eureka/pull/651\n =||= "], ["648", "unresolvable documentation link inside XSD on \"Eureka REST operations\" page", "Kevin Hakanson", "hakanson", "09/23/15, 07:59:38 PM", "When reading the XSD provided on https://github.com/Netflix/eureka/wiki/Eureka-REST-operations there is a comment with \"instructions\" that refers to what looks like an internal Netflix wiki (http://wiki.netflix.com/clearspace/docs/DOC-20965).\n\n```\n            <xsd:element name=\"hostName\" type=\"xsd:string\" />\n            <!-- app name\n                 Instructions for adding a new app name - <a _jive_internal=\"true\" href=\"/clearspace/docs/DOC-20965\" target=\"_blank\">http://wiki.netflix.com/clearspace/docs/DOC-20965</a> -->\n            <xsd:element name=\"app\" type=\"xsd:string\" />\n```\n\nCan either the XSD example be updated or the linked documentation be made accessible?", "Thanks @hakanson. The internal document no longer exist and was likely for linkage with other internal tooling and not relevant for this xsd. Updated the wiki.\n =||= "], ["649", "Decoupling the id of InstanceInfo from the id of the DataCenterInfo.", "David Liu", "qiangdavidliu", "09/23/15, 07:08:37 PM", "For compatibility ease, reusing the deprecated \"sid\" (serviceId) field.\nAlso some minor reformatting.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #440](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/440/) FAILURE\nLooks like there's a problem with this pull request\n =||= :+1: \n@dsyer this will eliminate the need for us to do any custom codec stuff.\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #441](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/441/) SUCCESS\nThis pull request looks good\n =||= Looks good\n =||= Turns out there are some lingering internal compatibility issues with reusing sid. Going to rework this pull and add a new field (client usage should be similar).\n =||= "], ["650", "1.x Encode @class entry in InstanceInfo.metadata for backward compatibility", null, "tbak", "09/23/15, 09:12:21 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #442](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/442/) SUCCESS\nThis pull request looks good\n =||= ship it.\n =||= "], ["651", "1.x Better error handling for invalid content in request", null, "tbak", "09/24/15, 03:14:36 PM", "issue: https://github.com/Netflix/eureka/issues/647", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #443](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/443/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #444](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/444/) SUCCESS\nThis pull request looks good\n =||= "], ["652", "Feature/di friendly server", "David Liu", "qiangdavidliu", "09/24/15, 05:45:55 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #445](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/445/) SUCCESS\nThis pull request looks good\n =||= "], ["653", "Reverting use of sid in #649 and introduce a new \"instanceId\" field instead", "David Liu", "qiangdavidliu", "09/24/15, 08:24:44 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #446](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/446/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #447](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/447/) SUCCESS\nThis pull request looks good\n =||= :+1: \n =||= Looks good\n =||= "], ["654", "Feature/di friendly server", "David Liu", "qiangdavidliu", "09/25/15, 04:08:10 AM", "sync with master", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #448](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/448/) SUCCESS\nThis pull request looks good\n =||= "], ["655", "2.x InstanceInfo metaData modifications ignored when metaData previously set.", "Laurent", "Crystark", "09/29/15, 08:16:35 AM", "Hi,\n\nI'm trying to keep some custom states in the  `InstanceInfo` metaData but it seems that changes are ignored in some particular cases.\n\n``` java\nprivate final AtomicReference<InstanceInfo> instanceInfo    = new AtomicReference<InstanceInfo>();\n\npublic EurekaRegistration(String namespace) {\n    config = new ArchaiusEurekaConfig(namespace);\n\n    String app = namespace;\n    String appGroup = config.appGroup.getValue();\n\n    instanceInfo.set(\n        new InstanceInfo.Builder()\n            .withId(app + \"-\" + PID)\n            .withApp(app)\n            .withAppGroup(appGroup)\n            .withStatus(Status.UP)\n            .withDataCenterInfo(BasicDataCenterInfo.fromSystemData())\n            .build()\n        );\n}\n\npublic void startRegistrationClient() {\n    EurekaRegistrationClient registrationClient = Eurekas.newRegistrationClientBuilder()\n        .withServerResolver(ServerResolvers\n            .fromHostname(config.registrationServerHost.getValue())\n            .withPort(config.registrationServerPort.getValue())\n        )\n        .build();\n\n    BehaviorSubject<InstanceInfo> infoSubject = BehaviorSubject.create();\n    registrationClient.register(infoSubject).subscribe();\n\n    Observable\n        .interval(0, config.registrationUpdateInterval.getValue(), TimeUnit.SECONDS)\n        .share()\n        .subscribe(n -> {\n            InstanceInfo ii = updateAndGet(iib -> iib\n                .withMetaData(\"updated_at\", String.valueOf(System.currentTimeMillis()))\n            );\n            infoSubject.onNext(ii);\n            LOGGER.info(\"onNext \" + ii);\n        });\n}\n\npublic InstanceInfo updateAndGet(Consumer<InstanceInfo.Builder> updater) {\n    return instanceInfo\n        .updateAndGet(ii -> {\n            InstanceInfo.Builder iib = new InstanceInfo.Builder().withInstanceInfo(ii);\n            updater.accept(iib);\n            return iib.build();\n        });\n}\n```\n\nThis sends a first event that appears in the `eureka2-write-server`'s log as well as in my app's logs but all next events aren't shown by the  `eureka2-write-server` although i can see those in my logs.\n\nSo i tried moving stuff about cause i had it working earlier and I got this working:\n\n``` java\nprivate static final InstanceInfo   II  = new InstanceInfo.Builder()\n    .withId(\"myapp-\" + PID)\n    .withApp(\"myapp\")\n    .withAppGroup(\"myapp-group\")\n    .withStatus(Status.UP)\n    .withDataCenterInfo(BasicDataCenterInfo.fromSystemData())\n    .build();\n\npublic void startRegistrationClient() {\n    EurekaRegistrationClient registrationClient = Eurekas.newRegistrationClientBuilder()\n        .withServerResolver(ServerResolvers\n            .fromHostname(config.registrationServerHost.getValue())\n            .withPort(config.registrationServerPort.getValue())\n        )\n        .build();\n\n    BehaviorSubject<InstanceInfo> infoSubject = BehaviorSubject.create();\n    registrationClient.register(infoSubject).subscribe();\n\n    Observable\n        .interval(0, config.registrationUpdateInterval.getValue(), TimeUnit.SECONDS)\n        .share()\n        .subscribe(n -> {\n            InstanceInfo ii = new InstanceInfo.Builder().withInstanceInfo(II).withMetaData(\"updated_at\", String.valueOf(System.currentTimeMillis())).build()\n            infoSubject.onNext(ii);\n            LOGGER.info(\"onNext \" + ii);\n        });\n}\n```\n\nSo I've done more testing and here's what i concluded: any new `metaData` will be ignored if the hashmap was already initialized in the previous `InstanceInfo`. Meaning: the `metaData` field needs to be `null` in the `InstanceInfo` from which you are building for it to work.\n\nI noticed something else: If you use a referenced `metas` hashmap it won't work either.\n\n``` java\nInstanceInfo ii = new InstanceInfo.Builder()\n    .withInstanceInfo(instanceInfo)\n    .withMetaData(metas)\n    .build();\ninfoSubject.onNext(ii);\n```\n\nBut if you create a new hashmap each time it will work\n\n``` java\nInstanceInfo ii = new InstanceInfo.Builder()\n    .withInstanceInfo(instanceInfo)\n    .withMetaData(new HashMap<String, String>(metas))\n    .build();\ninfoSubject.onNext(ii);\n```\n\nThen I noticed `withBuilder` actually copies the HashMap so I ended up using the following solution which works:\n\n``` java\n    private final AtomicReference<InstanceInfo.Builder> instanceInfoBuilder = new AtomicReference<InstanceInfo.Builder>();\n\n    public EurekaRegistration(String namespace) {\n        config = new ArchaiusEurekaConfig(namespace);\n\n        String app = namespace;\n        String appGroup = config.appGroup.getValue();\n\n        instanceInfoBuilder.set(\n            new InstanceInfo.Builder()\n                .withId(app + \"-\" + PID)\n                .withApp(app)\n                .withAppGroup(appGroup)\n                .withStatus(Status.UP)\n                .withDataCenterInfo(BasicDataCenterInfo.fromSystemData())\n            );\n    }\n\n    public void startRegistrationClient() {\n        EurekaRegistrationClient registrationClient = Eurekas.newRegistrationClientBuilder()\n            .withServerResolver(ServerResolvers\n                .fromHostname(config.registrationServerHost.getValue())\n                .withPort(config.registrationServerPort.getValue())\n            )\n            .build();\n\n        BehaviorSubject<InstanceInfo> infoSubject = BehaviorSubject.create();\n        registrationClient.register(infoSubject).subscribe();\n\n        Observable\n            .interval(0, config.registrationUpdateInterval.getValue(), TimeUnit.SECONDS)\n            .share()\n            .subscribe(n -> {\n                InstanceInfo.Builder ii = updateAndGet(iib -> iib.withMetaData(\"updated_at\", String.valueOf(System.currentTimeMillis())));\n                infoSubject.onNext(ii.build());\n                LOGGER.info(\"emited: \" + ii);\n            });\n    }\n\n    public InstanceInfo.Builder updateAndGet(Consumer<InstanceInfo.Builder> updater) {\n        return instanceInfoBuilder\n            .updateAndGet(iib -> {\n                InstanceInfo.Builder iib2 = new InstanceInfo.Builder()\n                    .withBuilder(iib);\n                updater.accept(iib2);\n                return iib2;\n            });\n    }\n```", "@Crystark you are right, thanks for raising the issue. The problem appears to be in the withInstanceInfo() method inside the builder, where instead of copying the metadata map, it assigns to the older instance's metadata map. \n =||= Fixed in #658\n =||= "], ["656", "1.x merge Refactorings/transport to features/di-friendly-server", null, "tbak", "10/01/15, 08:46:10 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #449](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/449/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #451](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/451/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #452](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/452/) SUCCESS\nThis pull request looks good\n =||= "], ["657", "1.x Refactorings/replication batcher", null, "tbak", "10/01/15, 08:45:32 PM", "A replacement for blitz4j batcher. A noticeable improvement over the latter one is request collapsing (removing old pending task, when a new one is submitted).", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #450](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/450/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #460](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/460/) SUCCESS\nThis pull request looks good\n =||= "], ["658", "2.x fix metadata map copy in InstanceInfo.Builder", "David Liu", "qiangdavidliu", "09/29/15, 08:16:18 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #454](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/454/) SUCCESS\nThis pull request looks good\n =||= "], ["659", "add route53 binding alternative to eip", "Arnaud Roger", "aroger-r7", "09/30/15, 03:28:51 PM", "with the eureka.bindingStrategy allow to switch between a eip binding or route53.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #455](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/455/) SUCCESS\nThis pull request looks good\n =||= @aroger-r7 thanks for the pull, this looks quite useful indeed. I apologies for this but we are close to checking in some large server side refactoring (see the feature/di-friendly-server branch) that affects this pull. Would you mind considering rebasing this change w.r.t. to that branch instead? \n\nThe overall pull request should not need to change much, and in particular in the refactoring branch some similar was work done (EIP binding was moved out of the bootstrap class for example). The main class you may want to look at is [EIPManager.java](https://github.com/Netflix/eureka/blob/feature/di-friendly-server/eureka-core/src/main/java/com/netflix/eureka/aws/EIPManager.java). You may want to just provide a route53 parallel to this and at bootstrap/setup time, we can pick between the right ones to use.\n =||= no problem. will try do that asap\n =||= closed in favor of one on  di-friendly-server\n =||= "], ["660", "1.x Eviction mechanism update", null, "tbak", "09/29/15, 09:28:27 PM", "Experimental feature with no cancellation replication for evicted items.\nImposing additional eviction constraints, based on registry size not\nreceived heartbeats.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #456](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/456/) SUCCESS\nThis pull request looks good\n =||= Looks good.\n =||= "], ["661", "Adding time based compensation to eviction processing if the eviction task  was delayed", "David Liu", "qiangdavidliu", "09/30/15, 05:20:18 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #457](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/457/) SUCCESS\nThis pull request looks good\n =||= Looks good.\n =||= "], ["662", "add route53 binding alternative to eip", "Arnaud Roger", "aroger-r7", "10/01/15, 01:12:11 AM", "rebase route53 change https://github.com/Netflix/eureka/pull/659\nto di-friendly-server", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #458](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/458/) SUCCESS\nThis pull request looks good\n =||= @aroger-r7 thanks for the contribution.\n =||= "], ["663", "1.x Better handling order of batched replication requests", "David Liu", "qiangdavidliu", "07/01/16, 10:29:43 PM", "This relates #657 but is also present in older behaviour.\n\nCurrently for server replication to a given remote peer, multiple threads are used. This can cause race conditions where the remote peer can see messages out of order (e.g. heartbeat -> cancel was received as cancel -> heartbeat).\n\nThe effect of this is to trigger temporal inconsistencies that will eventually converge due to evictions, so is not critical to the overall system function.\n\nHowever it would be useful to prevent this race condition in the future. As replication requests are now batched, the need for multiple threads is less and we can tune a good threshold of batch size vs size so that a single (supervised) thread can be used to send the replication data.", "Closing due to inactivity.\n =||= "], ["664", "Minor edit to remove some references to statics.", "David Liu", "qiangdavidliu", "10/01/15, 01:38:04 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #459](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/459/) SUCCESS\nThis pull request looks good\n =||= @aroger-r7 fyi some minor edits.\n =||= "], ["665", "1.x Refactorings/transport", null, "tbak", "10/05/15, 05:17:53 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #461](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/461/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #462](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/462/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #466](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/466/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #467](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/467/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #476](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/476/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #477](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/477/) SUCCESS\nThis pull request looks good\n =||= "], ["666", "Sync di-friendly-server branch with master", "David Liu", "qiangdavidliu", "10/02/15, 07:19:28 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #464](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/464/) SUCCESS\nThis pull request looks good\n =||= "], ["667", "Feature/di friendly server", "David Liu", "qiangdavidliu", "10/02/15, 09:34:29 PM", "Server side refactoring to be more DI friendly:\n- Adding some (rudimentary) interfaces as needed\n- Adding DI annotations as needed\n- Code refactoring and clean up\n\nInitial eureka-server-karyon3 sub project for karyon3 integration\n\n[from @aroger-r7] add route53 binding alternative to eip", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #465](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/465/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #472](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/472/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #475](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/475/) SUCCESS\nThis pull request looks good\n =||= "], ["668", "1.x Fix bug in PeerEurekaNode, that did not check for missing LeaseInfo", null, "tbak", "10/02/15, 05:08:41 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #468](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/468/) SUCCESS\nThis pull request looks good\n =||= "], ["669", "Fix NPE in StatusResource.isReplicaAvailable", "Spencer Gibb", "spencergibb", "10/02/15, 06:11:10 PM", "We see this when we're running single nodes, more of a support issue than a problem. We keep getting people asking about it.\n\n```\n2015-10-02 11:35:16.760 ERROR 3755 --- [nio-8761-exec-4] c.n.eureka.resources.StatusResource      : Could not determine if the replica is available\njava.lang.NullPointerException: null\n    at com.netflix.eureka.resources.StatusResource.isReplicaAvailable(StatusResource.java:87) [5da40e7f691eb25c4b46f56115ec929776e850fc-eureka-core-1.2.5.jar:1.2.5]\n    at com.netflix.eureka.resources.StatusResource.getStatusInfo(StatusResource.java:67) [5da40e7f691eb25c4b46f56115ec929776e850fc-eureka-core-1.2.5.jar:1.2.5]\n    at org.springframework.cloud.netflix.eureka.server.EurekaController.status(EurekaController.java:68) [spring-cloud-netflix-eureka-server-1.1.0.BUILD-SNAPSHOT.jar!/:1.1.0.BUILD-SNAPSHOT]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_05]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_05]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_05]\n    at java.lang.reflect.Method.invoke(Method.java:483) ~[na:1.8.0_05]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221) [spring-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137) [spring-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:111) [spring-webmvc-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:806) [spring-webmvc-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:729) [spring-webmvc-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85) [spring-webmvc-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959) [spring-webmvc-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893) [spring-webmvc-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970) [spring-webmvc-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861) [spring-webmvc-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:622) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846) [spring-webmvc-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) [tomcat-embed-websocket-8.0.26.jar!/:8.0.26]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.springframework.boot.actuate.autoconfigure.EndpointWebMvcAutoConfiguration$ApplicationContextHeaderFilter.doFilterInternal(EndpointWebMvcAutoConfiguration.java:249) [spring-boot-actuator-1.3.0.BUILD-SNAPSHOT.jar!/:1.3.0.BUILD-SNAPSHOT]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.springframework.boot.actuate.trace.WebRequestTraceFilter.doFilterInternal(WebRequestTraceFilter.java:102) [spring-boot-actuator-1.3.0.BUILD-SNAPSHOT.jar!/:1.3.0.BUILD-SNAPSHOT]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:87) [spring-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77) [spring-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85) [spring-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.springframework.boot.actuate.autoconfigure.MetricsFilter.doFilterInternal(MetricsFilter.java:93) [spring-boot-actuator-1.3.0.BUILD-SNAPSHOT.jar!/:1.3.0.BUILD-SNAPSHOT]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:673) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1526) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1482) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_05]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_05]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.0.26.jar!/:8.0.26]\n    at java.lang.Thread.run(Thread.java:745) [na:1.8.0_05]\n```", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #469](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/469/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #470](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/470/) SUCCESS\nThis pull request looks good\n =||= Thanks @spencergibb \n =||= @qiangdavidliu thanks for the quick turnaround!\n =||= "], ["670", "Back-porting fix #669 to new class in feature branch", "David Liu", "qiangdavidliu", "10/02/15, 06:25:50 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #471](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/471/) SUCCESS\nThis pull request looks good\n =||= "], ["671", "Feature/di friendly server", "David Liu", "qiangdavidliu", "10/02/15, 09:09:47 PM", "Sync with master.\nUpdating to governator 1.10.4", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #473](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/473/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #474](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/474/) SUCCESS\nThis pull request looks good\n =||= "], ["672", "1.x remote registry content not initialized properly during first full registry fetch", null, "tbak", "07/14/16, 05:35:36 PM", "Certain data structures (like DiscoveryClient.remoteRegionVsApps) are handled only by delta update logic.", "Not a bug, this is also handled by the full fetch code path in \n\n```\n    private Applications filterAndShuffle(Applications apps);\n```\n =||= "], ["673", "1.x Set jdk=1.8 in .netflixoss to get proper JDK in cloudbees jenkins job.", null, "tbak", "10/05/15, 06:07:01 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #478](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/478/) SUCCESS\nThis pull request looks good\n =||= "], ["674", "1.x Fix batch request/response encoding for the new Jackson codec.", null, "tbak", "10/06/15, 10:29:21 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #479](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/479/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #480](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/480/) SUCCESS\nThis pull request looks good\n =||= Ship it.\n =||= "], ["675", "Refactorings/transport sync with master", "David Liu", "qiangdavidliu", "10/07/15, 12:41:52 AM", "sync with master", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #481](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/481/) SUCCESS\nThis pull request looks good\n =||= "], ["676", "Provide a more robust way to get local host info", "David Liu", "qiangdavidliu", "06/02/16, 10:28:37 PM", "Ref #617 (unfortunately the pull is not re-openable). There is a similar fix in the transport refactoring branch work but it need to be also ported to the older code base.", "New transport is now the default, closing.\n =||= "], ["677", "1.x Add few more utility methods.", null, "tbak", "10/08/15, 03:34:09 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #482](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/482/) SUCCESS\nThis pull request looks good\n =||= "], ["678", "Intelligent resolvers for read operations", "David Liu", "qiangdavidliu", "10/11/15, 11:10:59 PM", "(WIP) initial commit of intelligent resolvers for read operations\nSome interface refactoring", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #483](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/483/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #485](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/485/) SUCCESS\nThis pull request looks good\n =||= "], ["679", "2.x AwsDataCenterInfo::getName is misleading", "Laurent", "Crystark", "06/02/16, 10:24:54 PM", "Hi,\n\nI'm currently testing eureka2. I have 2 apps registering and sending \"alive\" events to eureka2. One of the app is supposed to listen for the other and react to the other being down. The thing is, i was hoping to filter the change notifications based on the datacenter as the app must not care about other apps from other datacenters not being alive. Using `DataCenterInfo` I thought `getName` would give me the datacenter name. It turns out that `AwsDataCenterInfo` provides the instanceId when I call that method so two apps in the same datacenter but on two different instances end up returning different values for getName().\n\nSo then I thought I must have understood this wrong and DataCenterInfo may actually mean \"Information from the Datacenter\" but that's not what the JavaDoc says:\n\n```\nDataCenterInfo encapsulates information about the data center where a given server is running, plus server specific information, like IP addresses, host names, etc.\n```\n\nI'll end up not using DataCenterInfo for now to do what I want and use MetaDatas instead but I thought you may want to clarify that.\n\nThanks ! :)", "Thank you for your comment. The DataCenterInfo API is really misleading. Probably we would need to have both getName and getInstanceId methods, with the former returning the data center name. This is actually the behavior in Eureka1.\n =||= archiving as eureka2 work is going through some larger internal changes.\n =||= "], ["680", "1.x More test refactoring", null, "tbak", "10/09/15, 11:40:17 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #484](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/484/) SUCCESS\nThis pull request looks good\n =||= "], ["681", "1.x Tests refectoring", null, "tbak", "10/11/15, 10:46:27 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #486](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/486/) SUCCESS\nThis pull request looks good\n =||= "], ["682", "Splitting query and registration clients for experimental transport", "David Liu", "qiangdavidliu", "10/14/15, 01:02:35 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #487](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/487/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #488](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/488/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #489](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/489/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #490](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/490/) SUCCESS\nThis pull request looks good\n =||= "], ["683", "Various updates for refactorings/transport", "David Liu", "qiangdavidliu", "10/16/15, 09:20:08 PM", "- update staleness monitor levels if registry fetch never worked\n- Provide a mechanism to use new transport with bootstrap servers for query\n- Tune down some logging", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #491](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/491/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #492](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/492/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #493](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/493/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #494](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/494/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #495](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/495/) SUCCESS\nThis pull request looks good\n =||= "], ["684", "Refactorings/transport", "David Liu", "qiangdavidliu", "10/16/15, 10:13:14 PM", "This pull provides an abstraction over the transport layer of eureka-client. It also provides ways of resolving query targets that can handle intelligent pre-discovery query targets. For example this can be used for cases were readonly replicas of discovery servers can be deployed and queries are handled by the readonly replica, via an initial bootstrap resolve from the master replicas.\n\nAs of this current implementation, both the old and new code paths are preserved and the old code path is enabled by default. To use the new transport code, set the properties:\n\n```\neureka.experimental.transport.registration.enabled=true\neureka.experimental.transport.query.enabled=true\n```\n\nTo use the intelligent query resolver, set the properties\n\n```\neureka.transport.readClusterVip=[insert the vip address of the query targets here]\neureka.transport.useBootstrapResolverForQuery=false\n```", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #496](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/496/) SUCCESS\nThis pull request looks good\n =||= "], ["685", "Adding logging for retryClient succeed on retry", "David Liu", "qiangdavidliu", "10/20/15, 12:49:13 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #497](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/497/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #498](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/498/) SUCCESS\nThis pull request looks good\n =||= "], ["686", "1.x Support remote region fetch in the new transport", null, "tbak", "10/20/15, 10:20:44 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #499](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/499/) SUCCESS\nThis pull request looks good\n =||= "], ["687", "1.x new transport enhancements", "David Liu", "qiangdavidliu", "10/22/15, 07:40:26 PM", "- add config to define quarantine clear condition\n- better metrics and logging\n- adding jitter to sessionedClient's session duration", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #500](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/500/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #501](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/501/) SUCCESS\nThis pull request looks good\n =||= @qiangdavidliu \r\n\r\nhello, why add \"adding jitter to sessionedClient's session duration\" .\r\n\r\nthank you! =||= "], ["688", "Adding validation for required fields for instance registration", "David Liu", "qiangdavidliu", "10/22/15, 11:47:41 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #502](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/502/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #503](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/503/) SUCCESS\nThis pull request looks good\n =||= "], ["689", "update to EIPManager to check for eip binding at a different (faster) rate when none is bound.", "David Liu", "qiangdavidliu", "10/23/15, 07:12:41 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #504](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/504/) SUCCESS\nThis pull request looks good\n =||= "], ["690", "Setting OUT_OF_SERVICE for one app causes all apps on same host to register as such", null, "octonary", "01/21/16, 09:32:33 PM", "If I send an OUT_OF_SERVICE request to a particular app on a given host that runs multiple apps, all Eureka enabled apps on that same host start registering an OUT_OF_SERVICE state.\n\nFor example... in my test environment I have a Eureka-server instance and 3 Eureka enabled apps running across 3 nodes. If I issue an OUT_OF_SERVICE to appA running on node1(curl -X PUT http://node1:9090/eureka/v2/apps/appA/node1/status?value=OUT_OF_SERVICE), all apps (including Eureka-server) on node1 start showing an OUT_OF_SERVICE state. ", "@octonary thanks for raising the issue. The current implementation of OUT_OF_SERVICE does not work well with multi-tenant environments and uses the id as the key for OOS (which defaults to the hostname/aws instanceId). We will take a look at fixing this in a future release.\n =||= @octonary you can set `eureka.instanceId` for each instance to handle that case. It's what we do in [spring-cloud-netflix](https://github.com/spring-cloud/spring-cloud-netflix).\n =||= Thanks! I will start setting the instanceId.\n =||= I couldn't get eureka.instanceId to work but setting eureka.instance.metadataMap.instanceId with the spring-cloud-netflix version seems to do the trick. Thanks again.\n =||= "], ["691", "fix sessionClient's randomized sessions to be dynamic", "David Liu", "qiangdavidliu", "10/26/15, 05:11:03 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #505](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/505/) SUCCESS\nThis pull request looks good\n =||= "], ["692", "log StatusChangeEvent at warn level if DOWN was involved", "David Liu", "qiangdavidliu", "10/26/15, 05:41:44 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #506](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/506/) SUCCESS\nThis pull request looks good\n =||= "], ["693", "1.x Fix CLOSE_WAIT issue in new transport (use existing connection cleaner).", null, "tbak", "10/27/15, 11:10:01 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #507](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/507/) SUCCESS\nThis pull request looks good\n =||= ship it!\n =||= "], ["694", "Wiki - Configuring-Eureka - wrong link to default configuration", "Aur\u00e9lien Leboulanger", "herau", "10/29/15, 03:33:03 PM", "In the configuration part of the wiki page, the link to the example of default configuration isn't correct (404) : `You can take a look at the examples here for default configurations`\n\nmaybe the link should point to [https://github.com/Netflix/eureka/blob/master/eureka-server/src/main/resources/]() or [https://github.com/Netflix/eureka/tree/master/eureka-examples/conf]()", "Thank you for spotting this. I have just fixed that.\n =||= "], ["695", "1.x Remote data not fetched on the reconciliation path", null, "tbak", "11/02/15, 07:26:35 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #508](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/508/) SUCCESS\nThis pull request looks good\n =||= "], ["696", "1.x NullPointException thrown if application name is not defined (set to \u2026", null, "tbak", "11/04/15, 06:18:10 PM", "\u2026UNKNOWN)", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #509](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/509/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #510](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/510/) SUCCESS\nThis pull request looks good\n =||= "], ["697", "Add documentation of config properties", "Libor Ry\u0161av\u00fd", "liry", "11/05/15, 08:49:14 PM", "It's really pita when you run example, add some metadata and when you getMetadata() in the client it returns empty map even if you see those metada when you query API directly. Then you search through documentation and other sources and there's no information anywhere, so one has to debug it to find out that there's some magic undocumented `eureka.decoderName` config property and when one has to set it to `JacksonJson` to make it work.\n\nPlease, improve your doc! It will make our lives easier! Thank you ;)", "The example was setup with JacksonJsonMini codec, which omits all metadata\nin InstanceInfo object. I have changed it to the standard codec.\nThank you for spotting this.\n/Tomasz\n\nOn Wed, Nov 4, 2015 at 8:57 AM, Libor Rysavy notifications@github.com\nwrote:\n\n> It's really pita when you run example, add some metadata and when you\n> getMetadata() in the client it returns empty map even if you see those\n> metada when you query API directly. Then you search through documentation\n> and other sources and there's no information anywhere, so one has to debug\n> it to find out that there's some magic undocumented eureka.decoderName\n> config property and when one has to set it to JacksonJson to make it work.\n> \n> Please, improve your doc! It will make our lives easier! Thank you ;)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/issues/697.\n =||= "], ["698", "1.x Backup registry configured via property is overridden with void implementation", null, "tbak", "11/06/15, 12:53:29 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #511](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/511/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #512](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/512/) SUCCESS\nThis pull request looks good\n =||= "], ["699", "1.x some entities are gzip-ed on the fly, instead of using ResponseCache", null, "tbak", "05/30/19, 11:06:02 PM", "Only full fetch and delta fetch responses, when requested in compressed format are extracted as such from ResponseCache.\nOther entities are taken in an uncompressed format, and the compression is done by Jersey gzip filter.", "NaN"], ["700", "Program does not shutdown after using EurekaClient", "Justin Lin", "jylin", "11/06/15, 01:14:46 AM", "I have a program that uses EurekaClient to find services, but it seems that if it runs for longer than say 30 seconds, then exiting the main thread (either gracefully or because of an exception) leaves the Java program hanging. I suspect Eureka might be spawning some user threads. Could they be changed to be daemon threads instead?", "Thank you for spotting this. I have fixed this issue in this PR: https://github.com/Netflix/eureka/pull/701.\nYou should always call `EurekaClient.shutdown()`, which terminates all the allocated resources, including the thread pools.\n =||= "], ["701", "1.x Thread pools in eureka-client create non-daemon threads", null, "tbak", "11/06/15, 04:16:24 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #513](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/513/) SUCCESS\nThis pull request looks good\n =||= ship it!\n =||= "], ["702", "DiscoveryJerseyProvider: Error creating a serializer.  ClassNotFoundException: jackson", "Spencer Gibb", "spencergibb", "02/24/16, 09:54:17 PM", "```\n2015-11-06 12:50:15.910 ERROR 81323 --- [et_localhost-13] c.n.d.provider.DiscoveryJerseyProvider   : Error creating a serializer.\n\njava.lang.ClassNotFoundException: jackson\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:372) ~[na:1.8.0_05]\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:361) ~[na:1.8.0_05]\n    at java.security.AccessController.doPrivileged(Native Method) ~[na:1.8.0_05]\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:360) ~[na:1.8.0_05]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[na:1.8.0_05]\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308) ~[na:1.8.0_05]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[na:1.8.0_05]\n    at java.lang.Class.forName0(Native Method) ~[na:1.8.0_05]\n    at java.lang.Class.forName(Class.java:259) ~[na:1.8.0_05]\n    at com.netflix.discovery.provider.DiscoveryJerseyProvider.getSerializer(DiscoveryJerseyProvider.java:207) [eureka-client-1.3.4.jar:1.3.4]\n    at com.netflix.discovery.provider.DiscoveryJerseyProvider.readFrom(DiscoveryJerseyProvider.java:118) [eureka-client-1.3.4.jar:1.3.4]\n    at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:634) [jersey-client-1.19.jar:1.19]\n    at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586) [jersey-client-1.19.jar:1.19]\n    at com.netflix.eureka.transport.JerseyReplicationClient.submitBatchUpdates(JerseyReplicationClient.java:120) [eureka-core-1.3.4.jar:1.3.4]\n    at com.netflix.eureka.cluster.ReplicationTaskProcessor.process(ReplicationTaskProcessor.java:71) [eureka-core-1.3.4.jar:1.3.4]\n    at com.netflix.eureka.util.batcher.TaskExecutors$BatchWorkerRunnable.run(TaskExecutors.java:187) [eureka-core-1.3.4.jar:1.3.4]\n    at java.lang.Thread.run(Thread.java:745) [na:1.8.0_05]\n```\n\nIt fails with this class\n\n```\n@Serializer(\"jackson\") // For backwards compatibility with DiscoveryJerseyProvider\npublic class ReplicationListResponse {\n```\n\nI'm using eureka 1.3.4", "```\n2015-11-06 12:00:15.733  INFO 81323 --- [ost-startStop-1] c.n.d.provider.DiscoveryJerseyProvider   : Using encoding codec LegacyJacksonJson\n2015-11-06 12:00:15.734  INFO 81323 --- [ost-startStop-1] c.n.d.provider.DiscoveryJerseyProvider   : Using decoding codec LegacyJacksonJson\n```\n =||= Looking into the source code, this code path is executed only when the\ninjected decoder is not capable of handling the media type. It happens in\nthe replication path which should always use JSON encoding. There is a bug\nin the annotation value in ReplicationList/ReplicationResponse, which\ncontains \"jackson\", not the class name.\n\nCan you check what encoding format is used on the wire?\n\n/Tomasz\n\nOn Fri, Nov 6, 2015 at 11:54 AM, Spencer Gibb notifications@github.com\nwrote:\n\n> 2015-11-06 12:00:15.733  INFO 81323 --- [ost-startStop-1] c.n.d.provider.DiscoveryJerseyProvider   : Using encoding codec LegacyJacksonJson\n> 2015-11-06 12:00:15.734  INFO 81323 --- [ost-startStop-1] c.n.d.provider.DiscoveryJerseyProvider   : Using decoding codec LegacyJacksonJson\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/issues/702#issuecomment-154515411.\n =||= in `JerseyReplicationClient.submitBatchUpdates(JerseyReplicationClient.java:120` it sets \n\n```\n.accept(MediaType.APPLICATION_JSON_TYPE)\n.type(MediaType.APPLICATION_JSON_TYPE)\n```\n =||= Which is strange the injected decoder does not handle this. We have this\ncode version running in the cloud with no such issue.\nCan you check with the debugger why the ISerializer is being used\nin DiscoveryJerseyProvider?\n\ndecoder.support(mediaType) returns false, so either Content-Type is not\ndefined in response, or it is not application/json.\n\nOn Fri, Nov 6, 2015 at 1:00 PM, Spencer Gibb notifications@github.com\nwrote:\n\n> in\n> JerseyReplicationClient.submitBatchUpdates(JerseyReplicationClient.java:120\n> it sets\n> \n> ```\n>                 .accept(MediaType.APPLICATION_JSON_TYPE)\n>                 .type(MediaType.APPLICATION_JSON_TYPE)\n> ```\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/issues/702#issuecomment-154535654.\n =||= The problem happens when the mediaType is `application/json; charset=UTF-8`. Then it drops to the `ISerializer`.\n =||= I will fix this, and make a new release, but probably not earlier than on\nMonday.\n\nOn Fri, Nov 6, 2015 at 1:34 PM, Spencer Gibb notifications@github.com\nwrote:\n\n> The problem happens when the mediaType is application/json; charset=UTF-8.\n> Then it drops to the ISerializer.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/issues/702#issuecomment-154548393.\n =||= I think I found in our code where the charset get's forcefully appended.\n =||= Lets keep it open, as this problem may occur again and the root cause is not obviously visible.\nA simple fix would be to prevent any parameters in Content-Type header, and return a meaningful error reply.\n =||= Released in version 1.4.2\n =||= "], ["703", "1.x DiscoveryClient.reconcileAndLogDifference should handle remote data properly when logging", null, "tbak", "05/30/19, 11:05:24 PM", "Right now all remote data entities are logged as missing, as they are in the fetched Applications object, but missing in the one compared with.", "NaN"], ["704", "DiscoveryClient fails to unregister servo monitors from JmxMonitorRegistry", "Spencer Gibb", "spencergibb", "02/26/16, 01:50:08 AM", "Similar to #638 which was for EurekaServer. Using eureka 1.3.4.\n\n```\njavax.management.InstanceNotFoundException: com.netflix.servo:name=eurekaClient.resolver.lastLoadTimestamp,class=AsyncResolver,id=bootstrap,level=INFO,type=GAUGE\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getMBean(DefaultMBeanServerInterceptor.java:1095) ~[na:1.8.0_05]\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.exclusiveUnregisterMBean(DefaultMBeanServerInterceptor.java:427) ~[na:1.8.0_05]\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.unregisterMBean(DefaultMBeanServerInterceptor.java:415) ~[na:1.8.0_05]\n    at com.sun.jmx.mbeanserver.JmxMBeanServer.unregisterMBean(JmxMBeanServer.java:546) ~[na:1.8.0_05]\n    at com.netflix.servo.jmx.JmxMonitorRegistry.unregister(JmxMonitorRegistry.java:125) ~[servo-core-0.10.0.jar:0.10.0]\n    at com.netflix.servo.DefaultMonitorRegistry.unregister(DefaultMonitorRegistry.java:143) [servo-core-0.10.0.jar:0.10.0]\n    at com.netflix.servo.monitor.Monitors.unregisterObject(Monitors.java:197) [servo-core-0.10.0.jar:0.10.0]\n    at com.netflix.discovery.shared.resolver.AsyncResolver.shutdown(AsyncResolver.java:136) [eureka-client-1.3.4.jar:1.3.4]\n    at com.netflix.discovery.DiscoveryClient$EurekaTransport.shutdown(DiscoveryClient.java:259) [eureka-client-1.3.4.jar:1.3.4]\n    at com.netflix.discovery.DiscoveryClient.shutdown(DiscoveryClient.java:962) [eureka-client-1.3.4.jar:1.3.4]\n    at org.springframework.cloud.netflix.eureka.EurekaDiscoveryClientConfiguration.onApplicationEvent(EurekaDiscoveryClientConfiguration.java:189) [classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_05]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_05]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_05]\n    at java.lang.reflect.Method.invoke(Method.java:483) ~[na:1.8.0_05]\n    at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:227) [spring-context-4.2.3.BUILD-20151109.174732-45.jar:4.2.3.BUILD-SNAPSHOT]\n    at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:144) [spring-context-4.2.3.BUILD-20151109.174732-45.jar:4.2.3.BUILD-SNAPSHOT]\n    at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:106) [spring-context-4.2.3.BUILD-20151109.174732-45.jar:4.2.3.BUILD-SNAPSHOT]\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:163) [spring-context-4.2.3.BUILD-20151109.174732-45.jar:4.2.3.BUILD-SNAPSHOT]\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:136) [spring-context-4.2.3.BUILD-20151109.174732-45.jar:4.2.3.BUILD-SNAPSHOT]\n    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:380) [spring-context-4.2.3.BUILD-20151109.174732-45.jar:4.2.3.BUILD-SNAPSHOT]\n    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:334) [spring-context-4.2.3.BUILD-20151109.174732-45.jar:4.2.3.BUILD-SNAPSHOT]\n    at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:961) [spring-context-4.2.3.BUILD-20151109.174732-45.jar:4.2.3.BUILD-SNAPSHOT]\n    at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:928) [spring-context-4.2.3.BUILD-20151109.174732-45.jar:4.2.3.BUILD-SNAPSHOT]\n    at org.springframework.boot.builder.ParentContextCloserApplicationListener$ContextCloserListener.onApplicationEvent(ParentContextCloserApplicationListener.java:102) [spring-boot-1.3.0.BUILD-20151110.135218-784.jar:1.3.0.BUILD-SNAPSHOT]\n    at org.springframework.boot.builder.ParentContextCloserApplicationListener$ContextCloserListener.onApplicationEvent(ParentContextCloserApplicationListener.java:86) [spring-boot-1.3.0.BUILD-20151110.135218-784.jar:1.3.0.BUILD-SNAPSHOT]\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:163) [spring-context-4.2.3.BUILD-20151109.174732-45.jar:4.2.3.BUILD-SNAPSHOT]\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:136) [spring-context-4.2.3.BUILD-20151109.174732-45.jar:4.2.3.BUILD-SNAPSHOT]\n    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:380) [spring-context-4.2.3.BUILD-20151109.174732-45.jar:4.2.3.BUILD-SNAPSHOT]\n    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:334) [spring-context-4.2.3.BUILD-20151109.174732-45.jar:4.2.3.BUILD-SNAPSHOT]\n    at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:961) [spring-context-4.2.3.BUILD-20151109.174732-45.jar:4.2.3.BUILD-SNAPSHOT]\n    at org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:895) [spring-context-4.2.3.BUILD-20151109.174732-45.jar:4.2.3.BUILD-SNAPSHOT]\n```", "@spencergibb I have tried to reproduce this error with no success. I have seen servo ignores these kinds of errors internally (https://github.com/Netflix/servo/commit/0636b23a60889341a5c1d0dc8a1adc5b0c830180). Can you confirm?\n =||= @tbak I can confirm this issue. I will try to provide a short example in the next days.\n =||= @tbak We're still on servo 0.10.0\n =||= Same issue here with Brixton. M4\n =||= Eureka has been updated to servo 0.10.x\n =||= "], ["705", "FAILURE: Build failed with an exception", "Deleted user", "ghost", "11/11/15, 07:15:35 PM", "```\n.../eureka/eureka-client/src/main/java/com/netflix/discovery/util/ExceptionsMetric.java:54: error: cannot find symbol\n            if (exceptionCounters.putIfAbsent(exceptionName, counter) == null) {\n                                 ^\n  symbol:   method putIfAbsent(String,Counter)\n  location: variable exceptionCounters of type Map<String,Counter>\n```", "@alexandre-gauge that is a java8 method. Can you try to update to java8 and try again? Thanks.\n =||= @qiangdavidliu it might be a good idea to set the compatibility level explicitly on the build:\n\n```\nsourceCompatibility = 1.8\ntargetCompatibility = 1.8\n```\n\nThat should make the error message a bit easier to follow than cannot find symbol. For example on one of mine when trying to build on java 7 it gives:\n\n```\n* What went wrong:\nExecution failed for task ':spectator-api:compileJava'.\n> invalid source release: 1.8\n```\n =||= Thanks @brharrington. That's a good suggestion.\n =||= Updated as @brharrington suggested\n =||= Thanks @qiangdavidliu and @brharrington \n =||= "], ["706", "set source compatibility in build.gradle as java8 apis have bleed into code", "David Liu", "qiangdavidliu", "11/11/15, 10:20:50 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #514](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/514/) SUCCESS\nThis pull request looks good\n =||= "], ["707", "PeerEurekaNode: a lot of log messages", "Deleted user", "ghost", "12/03/15, 04:33:34 PM", "If i shutdown peers, the up peer produces a lot of log messages like the following one:\n\n```\ncom.sun.jersey.api.client.ClientHandlerException: java.net.SocketTimeoutException: Read timed out\n    at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:184)\n    at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:28)\n    at com.sun.jersey.api.client.Client.handle(Client.java:648)\n    at com.sun.jersey.api.client.WebResource.handle(WebResource.java:680)\n    at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)\n    at com.sun.jersey.api.client.WebResource$Builder.put(WebResource.java:527)\n    at com.netflix.eureka.cluster.PeerEurekaNode.sendHeartBeat(PeerEurekaNode.java:510)\n    at com.netflix.eureka.cluster.PeerEurekaNode.access$400(PeerEurekaNode.java:72)\n    at com.netflix.eureka.cluster.PeerEurekaNode$3.execute(PeerEurekaNode.java:275)\n    at com.netflix.eureka.cluster.PeerEurekaNode$6.executeSingle(PeerEurekaNode.java:992)\n    at com.netflix.eureka.cluster.PeerEurekaNode$6.process(PeerEurekaNode.java:844)\n    at com.netflix.logging.messaging.MessageBatcher$ProcessMessages.run(MessageBatcher.java:410)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.net.SocketTimeoutException: Read timed out\n    at java.net.SocketInputStream.socketRead0(Native Method)\n    at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\n    at java.net.SocketInputStream.read(SocketInputStream.java:170)\n    at java.net.SocketInputStream.read(SocketInputStream.java:141)\n    at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:160)\n    at org.apache.http.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:84)\n    at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:273)\n    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:140)\n    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:57)\n    at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:260)\n    at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:283)\n    at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:251)\n    at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:223)\n    at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:271)\n    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:123)\n    at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:685)\n    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:487)\n    at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:863)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:115)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:57)\n    at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:170)\n    ... 14 common frames omitted\n```", "When you shutdown a peer, other peers will continue sending replication data to this address, and for the time it is missing you will see transport related exceptions in the log file. We limit amount of errors logged in the replication channel, but we want to keep it at some level for diagnostic purposes.\n =||= Closing this issue for now. Please, reopen it if you want to further discuss this topic.\n =||= "], ["708", "2.x Extract eureka-api module", null, "tbak", "11/13/15, 01:22:25 AM", "Remove avro, and reimplement JSON encoding with the latest Jackson.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #515](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/515/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #516](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/516/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #517](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/517/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #518](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/518/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #519](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/519/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #520](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/520/) SUCCESS\nThis pull request looks good\n =||= "], ["709", "Incorrect URLs of Eureka Client and Server JavaDoc on Eureka Wiki", "Kartik", "dearjadu", "11/16/15, 08:43:54 PM", "The URLs to Eureka Client and Server JavaDoc lead to a 404 page on GitHub. These links have been broken for few weeks now. Can the owners please fix them?\n\nhttp://netflix.github.com/eureka/javadoc/eureka-client/index.html\nhttp://netflix.github.com/eureka/javadoc/eureka-client/index.html\n\nThese URLs are on the right-side navigation panel on the Eureka Wiki (https://github.com/Netflix/eureka/wiki)", "Thank you for spotting this. We no longer keep javadoc documentation in github. I have removed these links.\n =||= Thanks. Could you point me to the valid location of the JavaDoc?\n =||= Javadoc documentation is uploaded to maven central. You IDE should be able\nto download it for you.\n\nOn Mon, Nov 16, 2015 at 4:24 PM, Kartik notifications@github.com wrote:\n\n> Thanks. Could you point me to the valid location of the JavaDoc?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/issues/709#issuecomment-157218697.\n =||= Got it. Merci\n =||= "], ["710", "update to latest karyon3 and better integration for eureka-server-karyon3", "David Liu", "qiangdavidliu", "11/20/15, 06:16:17 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #521](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/521/) SUCCESS\nThis pull request looks good\n =||= "], ["711", "License violation suspicion - CDDL/GPLv2+CE reused code", "Vladim\u00edr N\u00e1vrat", "vlna", "11/19/15, 08:00:34 PM", "File `eureka-core/src/main/java/com/netflix/eureka/cluster/DynamicGZIPContentEncodingFilter.java` contains substantial part of http://grepcode.com/file/repo1.maven.org/maven2/com.sun.jersey/jersey-bundle/1.17.1/com/sun/jersey/api/client/filter/GZIPContentEncodingFilter.java\n\nOriginal file is CDDL/GPLv2+CE dual-licensed and CDDL/GPLv2+CE is not possible to relicense to Apache 2.0.\n\nI was not able to find this code under Apache 2.0 license and it looks like license violation.\n\nSuspicious code was commited by @tbak in commit Netflix/eureka@1475b3b6b9cb6a9a31f01b287a58c1c699fc91d4\n\nhttps://www.apache.org/legal/resolved.html#category-b describes proper handling of CDDL licensed code to be reused in Apache 2.0 licensed product.", "Thank you for spotting this. I will provide fresh implementation for this class, without basing it on the existing jersey code.\n =||= Fixed in #713\n =||= "], ["712", "1.x Add ETag support", null, "tbak", "06/14/16, 04:59:16 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #522](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/522/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #523](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/523/) SUCCESS\nThis pull request looks good\n =||= Closing this for now, will reopen when needed\n =||= "], ["713", "1.x Fix for issue https://github.com/Netflix/eureka/issues/711", null, "tbak", "11/19/15, 07:59:58 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #524](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/524/) SUCCESS\nThis pull request looks good\n =||= "], ["714", "1.x Remove dependency on blitz4j", null, "tbak", "12/03/15, 06:15:29 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #525](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/525/) SUCCESS\nThis pull request looks good\n =||= :+1: \n =||= :+1:\n =||= "], ["715", "Use AWS metadata IP in CloudInstanceConfig ", "Stefan Fussenegger", "sfussenegger", "01/13/16, 06:05:34 PM", "I'm trying to get Eureka running in AWS EC2 Container Service (ECS).\n\nUnfortunately, `CloudInstanceConfig` relies on `InetAddress.getLocalHost().getHostAddress()` to get the IP address. In case of Docker, this is the IP inside the Docker network (typically something like `172.17.0.2`) which isn't very helpful.\n\nUsing `MetaDataKey.localIpv4` should fix this problem without changing current behavior:\n\n``` java\n@Override\npublic String getIpAddress() {\n    return ((AmazonInfo) info).get(MetaDataKey.localIpv4);\n}\n```\n\nhere's the current implementation of `getHostName(..)`:\n\n``` java\n@Override\npublic String getHostName(boolean refresh) {\n    if (refresh) {\n        refreshAmazonInfo();\n    }\n    return ((AmazonInfo) info).get(MetaDataKey.publicHostname);\n}\n```\n\nAlternatively, there could be a new property to enable this behavior.", "CloudInstanceConfig depends on Amazon metadata. If access to metadata\nfails, and flag 'eureka.validateInstanceId' is set to false, as a fallback\na local host address is read. Possibly this is happening in your case.\nYou can always override the default CloudInstanceConfig implementation, and\nprovide your custom version that better handles docker environment.\n/Tomasz\n\nOn Fri, Dec 4, 2015 at 7:16 AM, Stefan Fussenegger <notifications@github.com\n\n> wrote:\n> \n> I'm trying to get Eureka running in AWS EC2 Container Service (ECS).\n> \n> Unfortunately, CloudInstanceConfig relies on\n> InetAddress.getLocalHost().getHostAddress() to get the IP address. In\n> case of Docker, this is the IP inside the Docker network (typically\n> something like 172.17.0.2) which isn't very helpful.\n> \n> Using MetaDataKey.localIpv4 should fix this problem without changing\n> current behavior:\n> \n> @Overridepublic String getIpAddress() {\n>     return ((AmazonInfo) info).get(MetaDataKey.localIpv4);\n> }\n> \n> here's the current implementation of getHostName(..):\n> \n> @Overridepublic String getHostName(boolean refresh) {\n>     if (refresh) {\n>         refreshAmazonInfo();\n>     }\n>     return ((AmazonInfo) info).get(MetaDataKey.publicHostname);\n> }\n> \n> Alternatively, there could be a new property to enable this behavior.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/issues/715.\n =||= There is actually some work in progress that will address this exact issue\n(for a different use case). The changes should make it into the next\nrelease.\nOn Dec 4, 2015 9:13 AM, \"tbak\" notifications@github.com wrote:\n\n> CloudInstanceConfig depends on Amazon metadata. If access to metadata\n> fails, and flag 'eureka.validateInstanceId' is set to false, as a fallback\n> a local host address is read. Possibly this is happening in your case.\n> You can always override the default CloudInstanceConfig implementation, and\n> provide your custom version that better handles docker environment.\n> /Tomasz\n> \n> On Fri, Dec 4, 2015 at 7:16 AM, Stefan Fussenegger <\n> notifications@github.com\n> \n> > wrote:\n> > \n> > I'm trying to get Eureka running in AWS EC2 Container Service (ECS).\n> > \n> > Unfortunately, CloudInstanceConfig relies on\n> > InetAddress.getLocalHost().getHostAddress() to get the IP address. In\n> > case of Docker, this is the IP inside the Docker network (typically\n> > something like 172.17.0.2) which isn't very helpful.\n> > \n> > Using MetaDataKey.localIpv4 should fix this problem without changing\n> > current behavior:\n> > \n> > @Overridepublic String getIpAddress() {\n> > return ((AmazonInfo) info).get(MetaDataKey.localIpv4);\n> > }\n> > \n> > here's the current implementation of getHostName(..):\n> > \n> > @Overridepublic String getHostName(boolean refresh) {\n> > if (refresh) {\n> > refreshAmazonInfo();\n> > }\n> > return ((AmazonInfo) info).get(MetaDataKey.publicHostname);\n> > }\n> > \n> > Alternatively, there could be a new property to enable this behavior.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/Netflix/eureka/issues/715.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/issues/715#issuecomment-162024552.\n =||= Any sort of ETA on the release? I am interested in running clients in ECS as well.\n =||= Sorry for not updating. This is actually already fixed and released in release 1.3.7. Will update the release notes also.\n =||= "], ["716", "1.x Client InstanceInfo default address resolution", "David Liu", "qiangdavidliu", "12/08/15, 09:38:14 PM", "Adding ability to define resolution order of the local InstanceInfo's \"default\" network address based on data available in AmazonInfo.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #526](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/526/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #527](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/527/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #528](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/528/) SUCCESS\nThis pull request looks good\n =||= Looks good\n =||= "], ["717", "Status REST operation completely disables instance HealthCheckHandler?", "Andreas Fundell", "abaculus", "12/09/15, 05:17:39 PM", "Hi\n\nI've noticed that when I call the REST API for status (e.g. PUT /eureka/v2/apps/appID/instanceID/status?value=UP) it makes Eureka to ignore the status updates from the instance HealthCheckHandler. Seems like the 'overriddenstatus' cannot be undone.\n\nThe only way to get Eureka to respect the HealthCheckHandler status updates from the instance HealthCheckHandler is to de-register and register again (i.e. by REST API calls or re-starting the instance).\n\nI have a use case where we want to change the status for a specific instance to e.g. DOWN/OUT_OF_SERVICE and then put it back to UP but with Eureka respecting the instance HealthCheckHandler.\n\nIs this possible somehow?\n\nKind regards,\nAndreas", "You should be able to do a delete request to clear the override:\n\n```\nDELETE /eureka/v2/apps/appID/instanceID/status\n```\n =||= The only allowed methods for endpoint is OPTIONS and PUT.\n\nUsing Eureka version 1.1.147\n =||= It looks like that was added in 1.1.148: https://github.com/Netflix/eureka/releases/tag/1.1.148\n =||= Aah, that explain things...\n\nThank you for your very helpful support! \n\nKudos\n =||= "], ["718", "Why InstanceInfo.InstanceStatus can not be a interface?", "Andrea Posadino", "andreaposadino", "12/10/15, 05:16:34 PM", "Hi,\n\nI'm working in a microservice in java using your code.\nI wanted to add a custom InstanceStatus for monitoring through Eureka when my ms is working on a specific job. Something like a \"RUNNING JOB A\" status.\nBut InstanceStatus is a enum class, so I can't extend it.\n\nI want to set my instanceStatus with this method:\nApplicationInfoManager.getInstance().setInstanceStatus(InstanceInfo.InstanceStatus)\n\nBut I can't for a custom InstanceStatus.\n\nI think that there is a reason about this choice of a defined set of InstanceStatus but I don't get it.\nIs there another way for what I want to do? \n\nThanks in advance", "InstanceStatus's purpose is to report an overall service state. You can still propagate this information using metadata field.\n =||= Thank for your answer,\n\nI just tried with ApplicationInfoManager.getInstance().registerAppMetadata(Map<String,String> appMetadata) method and worked. \n\nThank you again.\n =||= glad to help\n =||= "], ["719", "Unable to run eureka server on Weblogic 12c", "Omi", "omkar9999", "01/14/16, 06:05:46 PM", "i'm unable to run eureka server on Weblogic 12c.\nwar file is deployed successfully on Weblogic 12c but I'm receiving following error in server logs:\n\n[2015-12-10T13:36:46.135+05:30] [AdminServer] [ERROR] [] [com.netflix.eureka.PeerAwareInstanceRegistry] [tid: Eureka-EvictionTimer] [userId: <anonymous>] [ecid: 4c164384-726a-4c35-a306-2cb86fb2103a-00000003,0:8] [APP: eureka-server-1.1.37] The lease expiration has been disabled since the number of renewals per minute   is lower than the minimum threshold. Number of Renewals Last Minute : 0. The Threshold is 0.85 of total instances : 0\n[2015-12-10T13:37:08.337+05:30] [AdminServer] [ERROR] [] [com.netflix.discovery.DiscoveryClient] [tid: DiscoveryClient_ServiceURLUpdater] [userId: <anonymous>] [ecid: 4c164384-726a-4c35-a306-2cb86fb2103a-00000003,0:9] [APP: eureka-server-1.1.37] DISCOVERY: invalid zone - defaultZone defaulting to defaultZone\n[2015-12-10T13:37:11.702+05:30] [AdminServer] [WARNING] [] [com.netflix.discovery.DiscoveryClient] [tid: DiscoveryClient_CacheRefresher] [userId: <anonymous>] [ecid: 4c164384-726a-4c35-a306-2cb86fb2103a-00000003,0:6] [APP: eureka-server-1.1.37] Action: Refresh  => returned status of 404 from http://localhost/eureka/v2/apps/\n[2015-12-10T13:37:11.704+05:30] [AdminServer] [ERROR] [] [com.netflix.discovery.DiscoveryClient] [tid: DiscoveryClient_CacheRefresher] [userId: <anonymous>] [ecid: 4c164384-726a-4c35-a306-2cb86fb2103a-00000003,0:6] [APP: eureka-server-1.1.37] Can't get a response from http://localhost/eureka/v2/apps/[[\nCan't contact any eureka nodes - possibly a security group issue? java.lang.RuntimeException: Bad status: 404\n    at com.netflix.discovery.DiscoveryClient.makeRemoteCall(DiscoveryClient.java:833)\n    at com.netflix.discovery.DiscoveryClient.makeRemoteCall(DiscoveryClient.java:753)\n    at com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:615)\n    at com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:562)\n    at com.netflix.discovery.DiscoveryClient.access$1200(DiscoveryClient.java:87)\n    at com.netflix.discovery.DiscoveryClient$CacheRefreshThread.run(DiscoveryClient.java:1316)\n    at java.util.TimerThread.mainLoop(Timer.java:555)\n    at java.util.TimerThread.run(Timer.java:505)\n\n]]\n[2015-12-10T13:37:11.704+05:30] [AdminServer] [ERROR] [] [com.netflix.discovery.DiscoveryClient] [tid: DiscoveryClient_CacheRefresher] [userId: <anonymous>] [ecid: 4c164384-726a-4c35-a306-2cb86fb2103a-00000003,0:6] [APP: eureka-server-1.1.37] DiscoveryClient_EUREKA/MACHINE_NAME - was unable to refresh it's cache! status = Bad status: 404[[\njava.lang.RuntimeException: Bad status: 404\n    at com.netflix.discovery.DiscoveryClient.makeRemoteCall(DiscoveryClient.java:833)\n    at com.netflix.discovery.DiscoveryClient.makeRemoteCall(DiscoveryClient.java:753)\n    at com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:615)\n    at com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:562)\n    at com.netflix.discovery.DiscoveryClient.access$1200(DiscoveryClient.java:87)\n    at com.netflix.discovery.DiscoveryClient$CacheRefreshThread.run(DiscoveryClient.java:1316)\n    at java.util.TimerThread.mainLoop(Timer.java:555)\n    at java.util.TimerThread.run(Timer.java:505)\n\n]]\n\nNOTE: MACHINE_NAME is a name of my windows machine which cannot be disclosed", "You Eureka client/server configuration assumes that you run server on port\n80, and that the context path is 'eureka' (http://localhost/eureka/v2/apps).\nYou are using probably default configuration hence localhost address is\nused, not routable address of the host. Please consult\nhttps://github.com/Netflix/eureka/tree/master/eureka-examples/conf for\nexample configuration. You need to change 'eureka.serviceUrl.default' to\nyour eureka deployment URL.\n/Tomasz\n\nOn Mon, Dec 14, 2015 at 4:22 AM, omkar9999 notifications@github.com wrote:\n\n> i'm unable to run eureka server on Weblogic 12c\n> war file is deployed successfully on Weblogic 12c but I'm receiving\n> following error in server logs:\n> \n> [2015-12-10T13:36:46135+05:30] [AdminServer] [ERROR] []\n> [comnetflixeurekaPeerAwareInstanceRegistry] [tid: Eureka-EvictionTimer]\n> [userId: ] [ecid: 4c164384-726a-4c35-a306-2cb86fb2103a-00000003,0:8] [APP:\n> eureka-server-1137] The lease expiration has been disabled since the number\n> of renewals per minute is lower than the minimum threshold Number of\n> Renewals Last Minute : 0 The Threshold is 085 of total instances : 0\n> [2015-12-10T13:37:08337+05:30] [AdminServer] [ERROR] []\n> [comnetflixdiscoveryDiscoveryClient] [tid:\n> DiscoveryClient_ServiceURLUpdater] [userId: ] [ecid:\n> 4c164384-726a-4c35-a306-2cb86fb2103a-00000003,0:9] [APP:\n> eureka-server-1137] DISCOVERY: invalid zone - defaultZone defaulting to\n> defaultZone\n> [2015-12-10T13:37:11702+05:30] [AdminServer] [WARNING] []\n> [comnetflixdiscoveryDiscoveryClient] [tid: DiscoveryClient_CacheRefresher]\n> [userId: ] [ecid: 4c164384-726a-4c35-a306-2cb86fb2103a-00000003,0:6] [APP:\n> eureka-server-1137] Action: Refresh => returned status of 404 from\n> http://localhost/eureka/v2/apps/\n> [2015-12-10T13:37:11704+05:30] [AdminServer] [ERROR] []\n> [comnetflixdiscoveryDiscoveryClient] [tid: DiscoveryClient_CacheRefresher]\n> [userId: ] [ecid: 4c164384-726a-4c35-a306-2cb86fb2103a-00000003,0:6] [APP:\n> eureka-server-1137] Can't get a response from\n> http://localhost/eureka/v2/apps/[[\n> Can't contact any eureka nodes - possibly a security group issue?\n> javalangRuntimeException: Bad status: 404\n> at\n> comnetflixdiscoveryDiscoveryClientmakeRemoteCall(DiscoveryClientjava:833)\n> at\n> comnetflixdiscoveryDiscoveryClientmakeRemoteCall(DiscoveryClientjava:753)\n> at\n> comnetflixdiscoveryDiscoveryClientgetAndStoreFullRegistry(DiscoveryClientjava:615)\n> at comnetflixdiscoveryDiscoveryClientfetchRegistry(DiscoveryClientjava:562)\n> at comnetflixdiscoveryDiscoveryClientaccess$1200(DiscoveryClientjava:87)\n> at\n> comnetflixdiscoveryDiscoveryClient$CacheRefreshThreadrun(DiscoveryClientjava:1316)\n> at javautilTimerThreadmainLoop(Timerjava:555)\n> at javautilTimerThreadrun(Timerjava:505)\n> \n> ]]\n> [2015-12-10T13:37:11704+05:30] [AdminServer] [ERROR] []\n> [comnetflixdiscoveryDiscoveryClient] [tid: DiscoveryClient_CacheRefresher]\n> [userId: ] [ecid: 4c164384-726a-4c35-a306-2cb86fb2103a-00000003,0:6] [APP:\n> eureka-server-1137] DiscoveryClient_EUREKA/MACHINE_NAME - was unable to\n> refresh it's cache! status = Bad status: 404[[\n> javalangRuntimeException: Bad status: 404\n> at\n> comnetflixdiscoveryDiscoveryClientmakeRemoteCall(DiscoveryClientjava:833)\n> at\n> comnetflixdiscoveryDiscoveryClientmakeRemoteCall(DiscoveryClientjava:753)\n> at\n> comnetflixdiscoveryDiscoveryClientgetAndStoreFullRegistry(DiscoveryClientjava:615)\n> at comnetflixdiscoveryDiscoveryClientfetchRegistry(DiscoveryClientjava:562)\n> at comnetflixdiscoveryDiscoveryClientaccess$1200(DiscoveryClientjava:87)\n> at\n> comnetflixdiscoveryDiscoveryClient$CacheRefreshThreadrun(DiscoveryClientjava:1316)\n> at javautilTimerThreadmainLoop(Timerjava:555)\n> at javautilTimerThreadrun(Timerjava:505)\n> \n> ]]\n> \n> NOTE: MACHINE_NAME is a name of my windows machine which cannot be\n> disclosed\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/issues/719.\n =||= I am closing this issue. Please, reopen it if you wish to continue this discussion.\n =||= "], ["720", "Upgrade netflix-eventbus to purge the transitive dependency on findbugs", "Jonathan Schneider", "jkschneider", "12/22/15, 08:07:58 PM", "This effectively removes eureka-client's only transitive dependency on LGPL code.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #529](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/529/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #530](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/530/) SUCCESS\nThis pull request looks good\n =||= "], ["721", "1.x Improve backwards compatibility with legacy eureka-client,", null, "tbak", "12/22/15, 07:41:09 PM", "that ignore the new InstanceInfo.instanceId field.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #532](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/532/) SUCCESS\nThis pull request looks good\n =||= "], ["722", "Question : Eureka never unregisters a service", null, "pradeepkusingh", "01/14/16, 06:05:21 PM", "I am running few test with Eureka and seeing the issue though I shut down the micoservices , it still shows services are up and running, ribbon got the server list and call failed with 404. I went through the eureka docs 85% rule, still this one is tricky. If I disabled the self preservation mode it works, but I don't want to do that as per recommendations in prod. so what is the best configuration to not face this issue?", "If you shutdown single server, and it makes eureka enter self preservation mode, it means you have very few servers in the registry, and there is nothing else to do about it as to disable it. As you say it is in test, this should be probably ok with you. In prod, with more registry entries, self preservation should kick in only when there is  a serious issue causing massive registration expiries, like network failure.\n =||= I am closing this issue. Please, reopen it if you wish to continue this discussion.\n =||= "], ["723", "1.x Fix AWS meta data refresh", null, "tbak", "12/29/15, 03:53:14 PM", "AWS meta data updates were ignored, which for Discovery servers themselves resulted in an infinite loop of EIP binding, and registry clear/upload sequences. This in turn caused massive expiries, and large network traffic.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #533](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/533/) SUCCESS\nThis pull request looks good\n =||= "], ["724", "1.x In DiscoveryJerseyProvider change default codec to the latest one.", null, "tbak", "12/29/15, 09:35:58 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #534](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/534/) SUCCESS\nThis pull request looks good\n =||= "], ["725", "can't run 2 instances using the same discovery manager", "Yair Ogen", "yairogen", "01/14/16, 06:04:15 PM", "I am using eureka -client 1.1.147\n\nI am both a server (using spring-cloud) and ribbon client (using rxnetty based client).\n\nfor the client to work I had to write this code:\n\n if (DiscoveryManager.getInstance().getDiscoveryClient() == null) {\n            EurekaInstanceConfig eurekaInstanceConfig = new MyDataCenterInstanceConfig(getApiName());\n            EurekaClientConfig eurekaClientConfig = new DefaultEurekaClientConfig(getApiName() + \".\");\n            DiscoveryManager.getInstance().initComponent(eurekaInstanceConfig, eurekaClientConfig);\n        }\n\nproblem is that if this code runs before spring cloud initializes the server side discovery, my server doesn't register at all with eureka.\n1. As DiscoveryManager is a singleton I can only register one instance.\n2. For the client I don't want to register an instance just be able to lookup using 'com.netflix.niws.loadbalancer.DiscoveryEnabledNIWSServerList' class.\n\nIs there another way to make my LB to lookup with eureka? Maybe initialize the eureka client on the client side differently?", "You are using very old version with eureka. In later releases we improved DI support, so this should be no more an issue.\n\n> For the client I don't want to register an instance just be able to lookup using \n\nI do not understand this question. The reason to register with discovery is to be able to load server list for load balancing purposes. If you do not want to use Eureka registry, you can always use another ServerList implementation (for example ConfigurationBasedServerList).\n =||= @tbak Thanks for your reply.\nThe old version we use is coming from spring-cloud-netflix lib. I have no idea why but even thier latest version still uses eureka 1.1.147: https://repo1.maven.org/maven2/org/springframework/cloud/spring-cloud-netflix/1.0.4.RELEASE/spring-cloud-netflix-1.0.4.RELEASE.pom.\nAny idea why?\n\nRegatding the second part: I thought the A eureka client can be used for 2 puposes:\n- register a server\n- as a client, lookup other servers.\n\nSo - I was asking is it possible to be a eureka client just for lookup purposes and not register the client itself with its own instance properties as the client may not be a server in it self?\n =||= In our Brixton milestones we use later versions of eureka. It was a major refactoring to use it.\n =||= so - you recommend we try out this?\n\nhttp://repo.spring.io/libs-milestone-local/org/springframework/cloud/spring-cloud-netflix/1.1.0.M4/\n =||= @yairogen Regarding your question:\n\n> So - I was asking is it possible to be a eureka client just for lookup purposes and not register the client itself with its own instance properties as the client may not be a server in it self?\n\nIt is possible to configure eureka to only register (no registry fetch), or only do registry fetch (no registration). This is controlled via two properties:\n- eureka.registration.enabled\n- eureka.shouldFetchRegistry\n =||= I am closing this issue. Please, reopen it if you wish to continue this discussion.\n =||= "], ["726", "2.x major refactoring with new transport and channel abstractions", null, "tbak", "01/04/16, 05:02:27 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #535](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/535/) SUCCESS\nThis pull request looks good\n =||= "], ["727", "Handle registration with bad data in DataCenterInfo", "David Liu", "qiangdavidliu", "01/04/16, 10:03:18 PM", "- Moving data backfill of AmazonInfo from InstanceInfo ctor to Resource that handles registration\n- Adding an option to return 400 to such registration requests instead of backfill data", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #536](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/536/) SUCCESS\nThis pull request looks good\n =||= "], ["728", "add additional sanity check in shouldRefresh AmazonInfo", "David Liu", "qiangdavidliu", "01/05/16, 04:49:36 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #537](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/537/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #538](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/538/) SUCCESS\nThis pull request looks good\n =||= Looks good\n =||= "], ["729", "Revert https://github.com/Netflix/eureka/pull/724 due to compatibility issues with Jackson 2.6.x", null, "tbak", "01/06/16, 08:45:21 PM", "NaN", "Looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #539](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/539/) SUCCESS\nThis pull request looks good\n =||= "], ["730", "1.x Refactor Jackson serializer, so it does not depend on internal Jackson code.", null, "tbak", "01/14/16, 11:40:55 PM", "This was source of incompatibility with Jackson versions higher than 2.5.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #540](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/540/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #542](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/542/) SUCCESS\nThis pull request looks good\n =||= "], ["731", "2.x Clean protocol model, and add support for protobuf with RxNetty", null, "tbak", "01/11/16, 11:26:16 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #541](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/541/) SUCCESS\nThis pull request looks good\n =||= "], ["732", "DiscoveryClient throws Exception if no service is found", "Fabian Wilms", "FabianWilms", "01/19/16, 06:39:50 PM", "The DiscoveryClient throws an Exception when no service for the given ID is found. In my opinion thats not exceptional but infact totally possible. The method getNextServerFromEureka should return an java.util.Optional.", "Can you point which methods have this behavior? Query by id is supported by this method:\n\n``` java\npublic List<InstanceInfo> getInstancesById(String id);\n```\n\nAnd it should return empty list if no instance with the given id is found.\n =||= ``` java\npublic InstanceInfo getNextServerFromEureka(String virtualHostname, boolean secure) {\n    List<InstanceInfo> instanceInfoList = this.getInstancesByVipAddress(\n            virtualHostname, secure);\n    if (instanceInfoList == null || instanceInfoList.isEmpty()) {\n        throw new RuntimeException(\"No matches for the virtual host name :\"\n                + virtualHostname);\n    }\n    Applications apps = this.localRegionApps.get();\n    int index = (int) (apps.getNextIndex(virtualHostname.toUpperCase(),\n            secure).incrementAndGet() % instanceInfoList.size());\n    return instanceInfoList.get(index);\n}\n```\n\nThis is the method I'm talking about. `getInstancesById` is of course a good replacement.\n =||= @FabianHoltkoetter what you propose makes sense. I have a suspicion that had Optional been available prior to java8, this API would likely have been done that way. Unfortunately the getNextServerFromEureka() method is now a public API and for compatibility, it would be a breaking change to change it from returning an InstanceInfo to return an Optional<InstanceInfo>.\n =||= @FabianHoltkoetter Thanks for raising this issue. Although it is valid, I'm going to close this for now as there are work around methods (e.g. get the full list of the vip and do a simple round robin on the list), and updating the method in question would leave to requiring an incompatible version bump.\n =||= "], ["733", "Fix build error", "Justin Lin", "jylin", "01/15/16, 02:35:47 AM", "The putIfAbsent method is used on this variable which is not part of the Map interface.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #543](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/543/) SUCCESS\nThis pull request looks good\n =||= @jylin putIfAbsent is part of the map API since java8.\n =||= This is the only thing that prevents building with Java 7 though.\n =||= In that case, sure. However please do note that we are developing on java8 and may introduce other java8 only functionality in the future.\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #544](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/544/) SUCCESS\nThis pull request looks good\n =||= "], ["734", "blitz4j is no longer included in eureka server as part of 1.3.5...", "Daniel Caballero", "dcaba", "01/19/16, 05:11:11 PM", " ... #714 . Default log4j properties still points to a class that is part of blitz4j, generating an exception at boot time.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #545](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/545/) SUCCESS\nThis pull request looks good\n =||= Thank you for spotting this.\n =||= you're welcome!\n =||= "], ["735", "Document version compatibility", "Stefan Fussenegger", "sfussenegger", "06/02/16, 10:27:25 PM", "I believe this one should be document as I wasn't able to find anything in the wiki.\n\nThere are three main questions that come to mind:\n\n1) what do different version increments represent?\n2) is it supported to run clients with earlier versions than the server? patch level or minor too?\n3) is it supported to run servers with different versions (e.g. while upgrading a cluster)? patch level or minor?", "@sfussenegger thanks, we will update the wiki. To address your 3 specific questions:\n\n1) client/server protocol compatibility should be ensured for minor version updates. Minor version bumps may indicate client side java API changes or dependency changes but should not impact client/server protocol.\n2) server should be compatible with earlier clients at minor version differences.\n3) servers are designed to be upgraded one at a time (but preferably not between versions that are too far apart) so there is server-side compatibility between minor version differences.\n =||= @qiangdavidliu thanks for pointing this out. Just to clarify things a little further: we are talking `[major].[minor].[patch]` (as in [semver](http://semver.org/)), right? So client-server protocol has been backward-compatible for the whole `1.x` releases? Therefore `1.1.147` clients (currently the latest used by spring-cloud-netflix) should be compatible with the currently latest server (that is `1.3.7`), correct?\n =||= @sfussenegger yes, we use semantic versioning for eureka. Id like to say we've been trying out best to keep complete protocol compatibility for the 1.x series of releases, though to be honest I haven't really validated some of the truly early versions (say from 3+ years ago). I can however confirm that 1.1.147 is compatible with server version 1.3.7 (we have instances of 1.1.147 running with our current server deployments of 1.3.7).\n\nOne caveat is that we don't package internally using spring-cloud-netflix, so I can't verify any compatibility requirements w.r.t. the spring wrappings.\n =||= In Brixton snapshots spring-cloud-netflix has upgraded to 1.3.7.\n =||= Thanks for the update @spencergibb .\n@sfussenegger I'm going to close this issue for now. Please feel free to re-open if you have further questions.\n =||= So spring-cloud-netflix Brixton RC1 is now using Eureka 1.4.4 and I am seeing some issues with connecting to the 1.1.x-based Eureka server (from a previous spring-cloud-netflix version)  we currently use. Is this supposed to be compatible?\n =||= What issues? It may be a spring Cloud issue, not eureka.\n =||= Well. That was why I started asking in https://github.com/spring-cloud/spring-cloud-netflix/issues/953 . Since I am getting issues very similar to that.\n\nBasically the service registers fine. But updates fail with exceptions like this:\n\n```\n2016-04-13 15:06:13.289 ERROR 46782 --- [tbeatExecutor-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error\n\njavax.ws.rs.WebApplicationException: null\n    at com.netflix.discovery.provider.DiscoveryJerseyProvider.readFrom(DiscoveryJerseyProvider.java:110) ~[eureka-client-1.4.4.jar:1.4.4]\n    at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:634) ~[jersey-client-1.19.1.jar:1.19.1]\n    at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586) ~[jersey-client-1.19.1.jar:1.19.1]\n    at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.sendHeartBeat(AbstractJerseyEurekaHttpClient.java:105) ~[eureka-client-1.4.4.jar:1.4.4]\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.4.4.jar:1.4.4]\n    at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.4.4.jar:1.4.4]\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.4.4.jar:1.4.4]\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.4.4.jar:1.4.4]\n    at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:89) ~[eureka-client-1.4.4.jar:1.4.4]\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.4.4.jar:1.4.4]\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.4.4.jar:1.4.4]\n    at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:119) [eureka-client-1.4.4.jar:1.4.4]\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.4.4.jar:1.4.4]\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.4.4.jar:1.4.4]\n    at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) [eureka-client-1.4.4.jar:1.4.4]\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.4.4.jar:1.4.4]\n    at com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:823) [eureka-client-1.4.4.jar:1.4.4]\n    at com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1379) [eureka-client-1.4.4.jar:1.4.4]\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_73]\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_73]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_73]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_73]\n    at java.lang.Thread.run(Thread.java:745) [na:1.8.0_73]\n```\n =||= @kristofferpeterhansel it's possible you are running into an eureka incompatibility also. We keep a much closer eye on (earlier) client, (later) server compatibility than the reverse (looks like you are trying to run a later client client 1.4.4 with an earlier server 1.1.x?), and typically upgrade the server much more aggressively than the client versions.\n\nWhat exact server version are you running with?\n =||= @qiangdavidliu You are correct. It is exactly the scenario you describe. We run a spring-cloud-netflix 1.0.1-based Eureka server. Making it 1.1.147.\n\nI suppose there is technically no reason why we couldn't upgrade it - since it is only a Eureka server and have no other dependencies. But it is a bit of a problem if we have to kill all our Eureka instances at the same time to do it. And I suspect they would have the same problem and can't replicate data between an old and a new instance?\n =||= @kristofferpeterhansel how big of a cluster do you run? You _should_ be able to upgrade the nodes one by one ... but given that the version 1.1.147 is now over a year old, it's \"possible\" an incompatibility exist. What happens if you just upgrade one of the nodes to the latest server build? Does it work for you?\n =||= @qiangdavidliu Currently we run just two instances in each of our environments. There is no reason why I couldn't try it out in our test environment and see what happens. So I suppose I'll try that out when I\n\nI realise it is an old version. But since we are using the version that comes with Spring Cloud Netflix. That is sort of imposed on us by that. But I guess that is mainly a problem with that project not getting all that frequent updates. And a good reason to reconsider why we are using the Eureka server wrapped in Spring Boot.\n =||= @kristofferpeterhansel we ended up using \"plain\" eureka server for the same reason. the spring-cloud version really doesn't add anything other than a nice launcher inside IDEs. Eureka documentation is scarce already and the spring-cloud version really doesn't help. \n\nIt's pretty much what Samsung does to Android. Changes are mostly a matter of taste, come with their own issues and you wait forever for updates ;)\n =||= Closing this issue as the discussion seem to have to come to some conclusion.\n =||= "], ["736", "Update to archaius2 2.0.0-rc.36", null, "elandau", "01/20/16, 12:56:01 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #546](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/546/) SUCCESS\nThis pull request looks good\n =||= "], ["737", "Add a feature to tell the client which IP address to register in case of multiple IPs", "Michael Rumpf", "mrumpf", "04/13/16, 12:26:42 AM", "My office notebook uses a VPN/PPP connection into the corporate LAN for any kind of internet access.\nMy home LAN is using the network 192.168.0.1/255.255.255.0. The VPN client cuts any route into the 192.168... network and allows only connections into the PPP network (10.177.196.145/255.255.255.255), created by the VPN client.\nThe Eureka client, when I set the eureka.instance.preferIpAddress to true, registers with for example 192.168.0.125. This IP cannot be reached due to the restrictive VPN client, cutting all routes, except for the corporate PPP network.\n\nThere is a discussion on stackoverflow covering the topic:\nhttp://stackoverflow.com/questions/9481865/getting-the-ip-address-of-the-current-machine-using-java\n\nMaking this work is an important developer feature. With the current implementation Eureka cannot be used for development in a corporate environment via a VPN (home office).", "I just saw that there is an algorithm to prefer IPs from NICs whose name ends with a \"0\".\nhttps://github.com/Netflix/eureka/blob/de24b9349fe579dba687f069f2bf495c8fe97c3f/eureka-client/src/main/java/com/netflix/discovery/util/SystemUtil.java\n\nWhen I run the code with some System.out.println() statements I get the following output on my Windows 7 machine:\n\n```\nnicName=lo\n   ip: 127.0.0.1\n   ip: 0:0:0:0:0:0:0:1\nnicName=net0\nnicName=net1\nnicName=net2\nnicName=ppp0\nnicName=eth0\nnicName=eth1\nnicName=eth2\nnicName=ppp1\nnicName=net3\nnicName=eth3\n   ip: 192.168.0.125\n   ip: fe80:0:0:0:f427:8c69:7f63:a33c%eth3\nnicName=net4\nnicName=eth4\nnicName=net5\nnicName=wlan0\n   ip: fe80:0:0:0:5181:a1a4:46f2:3fbc%wlan0\nnicName=eth5\n   ip: fe80:0:0:0:ed7c:5cca:a408:9f9e%eth5\nnicName=net6\nnicName=wlan1\nnicName=net7\n   ip: fe80:0:0:0:0:5efe:a9fe:5f96%net7\nnicName=eth6\nnicName=net8\nnicName=net9\nnicName=eth7\n   ip: 169.254.95.150\n   ip: fe80:0:0:0:d999:4068:11a7:5f96%eth7\nnicName=net10\n   ip: fe80:0:0:0:0:5efe:ab1:c491%net10\nnicName=net11\nnicName=net12\nnicName=eth8\nnicName=eth9\nnicName=eth10\nnicName=eth11\nnicName=eth12\nnicName=wlan2\nnicName=wlan3\nnicName=eth13\nnicName=eth14\nnicName=eth15\nnicName=eth16\nnicName=wlan4\nnicName=eth17\nnicName=eth18\nnicName=eth19\nnicName=eth20\nnicName=eth21\nnicName=eth22\nnicName=eth23\nnicName=wlan5\nnicName=eth24\nnicName=wlan6\nnicName=wlan7\nnicName=ppp2\nFound IP=fe80:0:0:0:0:5efe:ab1:c491%net10\n   ip: 10.177.196.145\n```\n\nThe code could be adapted to set the preferred NIC name instead of the default \"eth0\":\n\n```\neureka.instance.preferredNic=net10 or ppp2\n```\n\nMy ipconfig output (truncated) looks like this:\n\n```\nWindows IP Configuration\n\nPPP adapter Global Remote:\n\n   Connection-specific DNS Suffix  . :\n   IPv4 Address. . . . . . . . . . . : 10.177.196.145\n   Subnet Mask . . . . . . . . . . . : 255.255.255.255\n   Default Gateway . . . . . . . . . : 0.0.0.0\n\nEthernet adapter Local Area Connection:\n\n   Connection-specific DNS Suffix  . : lan\n   Link-local IPv6 Address . . . . . : fe80::f427:8c69:7f63:a33c%11\n   IPv4 Address. . . . . . . . . . . : 192.168.0.125\n   Subnet Mask . . . . . . . . . . . : 255.255.255.0\n   Default Gateway . . . . . . . . . : 192.168.0.5\n```\n\nForcing the host address to \"localhost/127.0.0.1\" would also be a good option for local development:\n\n```\neureka.instance.forceHostAddress=127.0.0.1\n```\n =||= Thanks @mrumpf . We'll take a look at this.\n =||= The Spring Cloud Team claims to have this already fixed: https://github.com/spring-cloud/spring-cloud-netflix/issues/788\n =||= There is such function, see http://projects.spring.io/spring-cloud/spring-cloud.html#ignore-network-interfaces \n =||= You need a recent brixton version for it BTW.\n\nThen you can ignore all unwanded interfaces by:\n\n```\nspring:\n  cloud:\n    inetutils:\n      ignoredInterfaces:\n        - tun.*\n\n```\n =||= "], ["738", "How can i use Feign connect eureka?", "Dreampie", "Dreampie", "02/03/16, 04:53:49 PM", "How can i use Feign connect eureka and load balance\uff1f", "Please, check this with feign project maintainers (https://github.com/Netflix/feign).\n =||= "], ["739", "Fix for issue #702 (handle charset provided in Content-Type header)", null, "tbak", "02/05/16, 11:51:43 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #547](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/547/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #548](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/548/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #550](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/550/) SUCCESS\nThis pull request looks good\n =||= ship it\n =||= "], ["740", "Disable EIP binding calls based on config", "Salman Malik", "maliksalman", "05/27/16, 08:32:23 PM", "For our needs, we would like to run a eureka cluster in an AWS VPC. We would rely on DNS TXT records for the eureka servers and clients to discover each other. Furthermore, we would be running the eureka servers and all their client instances in VPC private subnets. Assigning EIPs to the eureka servers in this scenario makes no sense. \n\nCurrently, there is no way of letting `com.netflix.eureka.EurekaBootStrap` know not to worry about EIPs. We tried playing with properties exposed by `com.netflix.eureka.EurekaServerConfig` - but they are not enough. Specifically, we tried to set the `eIPBindRebindRetries` to 0 and `eIPBindingRetryIntervalMs` to really large value (like Interger.MAX_VALUE). With these settings the `com.netflix.eureka.util.EIPManager` can be held at bay for about 24 days - it will then try to do its thing again. \n\nIf we introduce a new property (like `disableEIPBinds`) in `com.netflix.eureka.EurekaServerConfig` and change the rest of code accordingly, we can easily circumvent the EIP binding altogether. We can make the properties default value to be `false` so it is backwards compatible. I am willing to submit a PR if this approach is appropriate.", "Hi @maliksalman thanks for the issue. For different deployment environments, we are aiming for a more custom strategy based on the AwsBinder (https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/aws/AwsBinder.java) interface and better DI support for the server (there are some work-in-progress code in the eureka-server-karyon3 package). The idea would be to be able to custom bind different components of eureka servers as needs arise. So in your case, you can bind your own (NoOp or specialised) AwsBinder to suit your use cases, whereas the default that works for us is the EIPBinder.\n\nWe are hoping to have this complete in the short term.\n =||= That must be new. I was working with spring-cloud-netflix-core 1.0.1 which includes eureka-client 1.1.147. I will look into this.\n\n@qiangdavidliu, thanks for the pointer.\n =||= The next version of spring-cloud-netfix uses the latest version of eureka.\n =||= Latest spring-cloud-netflix is on eureka 1.4.x, closing.\n =||= @spencergibb has this feature been introduced =||= @maliksalman is it possible for you to share repo link? I also need to implement same feature set into our eureka which runs in same zone on aws vpc without ASG/DNS based peerawareness. =||= "], ["741", "1.x Removing old client transport in favour of the (no longer) experimental transport", "David Liu", "qiangdavidliu", "02/06/16, 03:19:49 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #549](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/549/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #551](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/551/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #552](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/552/) SUCCESS\nThis pull request looks good\n =||= "], ["742", "1.x Fix async resolver to use daemon threads", "David Liu", "qiangdavidliu", "02/07/16, 12:03:10 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #553](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/553/) SUCCESS\nThis pull request looks good\n =||= "], ["743", "Revert fix for issue #702 due to external dependencies on DiscoveryJerseyProvider", null, "tbak", "02/08/16, 06:27:49 PM", "Some clients used this provider for non-eureka data structures, and this change\nis breaking them. We need to better understand those use cases.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #554](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/554/) FAILURE\nLooks like there's a problem with this pull request\n =||= "], ["744", "Fix for issue #702 (handle charset provided in Content-Type header)", null, "tbak", "02/17/16, 10:36:58 PM", "This PR (compared to the previouse, undone one #739) checks for entity\ntypes and is applied only to eureka specific data structures.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #555](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/555/) SUCCESS\nThis pull request looks good\n =||= "], ["745", "1.x Add composite strategy bootstrap resolver ", "David Liu", "qiangdavidliu", "02/15/16, 08:48:14 PM", "Two features for multi-account, multi vpc type support:\n- an option for (all) resolvers to use hostnames or ipAddresses for resolution\n- an option to bootstrap with a composite strategy, where the bootstrap resolver prefers to load data from local registry, else attempts to make a remote get vips call for write servers. The remote call will make a dns/config look up for target hosts.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #556](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/556/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #557](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/557/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #558](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/558/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #559](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/559/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #561](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/561/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #563](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/563/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #564](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/564/) SUCCESS\nThis pull request looks good\n =||= Looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #565](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/565/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #566](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/566/) SUCCESS\nThis pull request looks good\n =||= "], ["746", "Move back to java7 compatibility.", "Spencer Gibb", "spencergibb", "02/15/16, 07:00:58 PM", "Spring Cloud Netflix is still java7 compatible.\n\nWhen using java7 to build, the following error occurs because servo is java8 only.\n\njava.lang.UnsupportedClassVersionError: com/netflix/servo/monitor/Monitors\n    at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:126)\n    at com.netflix.discovery.BackUpRegistryTest.setUp(BackUpRegistryTest.java:71)\n\nSpring Cloud Netflix still uses the java7 servo.\n\nBuilding with java8 and targeting java7 still works and maintains the required compatibility.\n\n@twicksell ", "Is there anything I need to do to make sure it's built with java8?\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #562](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/562/) SUCCESS\nThis pull request looks good\n =||= This was set in 78677c43800e715a3e861536ba84e5ff82510090 by @qiangdavidliu \n =||= @spencergibb looks good, I'll merge this in. Will spring cloud netflix be moving to java8 servo soon?\n =||= @qiangdavidliu spring Cloud will start moving to java 8 with spring 5 and boot 2. Spring 5 is due next year, milestones starting this year. We would be OK staying on an the 1.3.x line if you move to java 8 in 1.4.x\n =||= Great, thanks for letting me know. There is no great need to enforce java8 for now, so we can try to make sure we can build against java7 unless anything comes up.\n =||= "], ["747", "1.x updating AmazonInfo's refresh policy to be more lenient", "David Liu", "qiangdavidliu", "02/16/16, 12:12:20 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #567](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/567/) SUCCESS\nThis pull request looks good\n =||= "], ["748", "Could not determine if the replica is available exception", null, "drax68", "03/23/16, 05:24:11 PM", "Hi, I've noticed no active replicas on status page for eureka cluster consisting of 2 eureka servers. We use route53-based txt dns setup, both servers in different az.\nAll running replicas in _unavailable-replicas_ list, though logs contains replication activity.\n- What effect does it have for eureka cluster?\n- Can it cause situations when cluster losts overriden registry data when new servers added?\n  Any help in finding reasons of such behaviour appreciated.\n  Currently we use eureka 1.1.151\n  Exceptions when new server added to eureka cluster:\n\n```\nCould not determine if the replica is available \n! java.lang.NullPointerException: null\n! at com.netflix.eureka.resources.StatusResource.isReplicaAvailable(StatusResource.java:89)\n! at com.netflix.eureka.resources.StatusResource.getStatusInfo(StatusResource.java:69)\n! at sun.reflect.GeneratedMethodAccessor136.invoke(Unknown Source)\n! at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n! at java.lang.reflect.Method.invoke(Method.java:497)\n! at freemarker.ext.beans.BeansWrapper.invokeMethod(BeansWrapper.java:912)\n! at freemarker.ext.beans.SimpleMethodModel.exec(SimpleMethodModel.java:107)\n! at freemarker.core.MethodCall._eval(MethodCall.java:98)\n! at freemarker.core.Expression.eval(Expression.java:111)\n! at freemarker.core.Assignment.accept(Assignment.java:106)\n! at freemarker.core.Environment.visit(Environment.java:265)\n! at freemarker.core.MixedContent.accept(MixedContent.java:93)\n! at freemarker.core.Environment.visit(Environment.java:265)\n! at freemarker.core.Environment.process(Environment.java:243)\n! at freemarker.template.Template.process(Template.java:277)\n! at com.yammer.dropwizard.views.freemarker.FreemarkerViewRenderer.render(FreemarkerViewRenderer.java:56)\n! at com.yammer.dropwizard.views.ViewMessageBodyWriter.writeTo(ViewMessageBodyWriter.java:74)\n! at com.yammer.dropwizard.views.ViewMessageBodyWriter.writeTo(ViewMessageBodyWriter.java:22)\n! at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306)\n! at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1479)\n! at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1391)\n! at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1381)\n! at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)\n! at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)\n! at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)\n! at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)\n! at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:669)\n! at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1448)\n! at com.netflix.eureka.StatusFilter.doFilter(StatusFilter.java:68)\n! at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1419)\n! at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:66)\n! at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118)\n! at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113)\n! at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1419)\n! at com.yammer.dropwizard.servlets.ThreadNameFilter.doFilter(ThreadNameFilter.java:29)\n! at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1419)\n! at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455)\n! at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1075)\n! at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:384)\n! at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1009)\n! at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)\n! at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)\n! at com.yammer.metrics.jetty.InstrumentedHandler.handle(InstrumentedHandler.java:200)\n! at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)\n! at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)\n! at org.eclipse.jetty.server.Server.handle(Server.java:368)\n! at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489)\n! at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53)\n! at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:942)\n! at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:1004)\n! at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:640)\n! at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)\n! at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)\n! at org.eclipse.jetty.server.nio.BlockingChannelConnector$BlockingChannelEndPoint.run(BlockingChannelConnector.java:298)\n! at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n! at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)\n! at java.lang.Thread.run(Thread.java:745)\n```", "Hi @drax68 eureka 1.1.51 is over 3 years old, and significant changes have gone into eureka since. I'm not sure if it will be easy to figure out what issue you might be running into given the age of the version. Are you able to upgrade to a more recent release?\n =||= @qiangdavidliu Correction, we currently use 1.1.151 version\n =||= Please advise, which version (1.2, 1.3) should we use to fix mentioned issue.\n =||= Minor versions of servers should still be compatible. We are running with 1.3.8 servers as of this moment.\n =||= So, @qiangdavidliu is this actually a bug or something? Can you explain please more about the issue and its impact to Eureka availability, reliability etc.?\n\nAlso, this issue seems that it is server-related only. Can we update only the server version and keep 1.1.151 for the clients?\n =||= @pparth from looking at your error log and comparing against source code, it looks like the status result you are seeing is due to an NPE in your StatusResource itself, not necessarily due to any actual system issues. Given that you are seeing replication logs, it's likely your servers are still connected. One way to check is to try to make a /v2/apps/<your discovery server app name> call to see what the registry data looks like.\n\nAs an aside regarding the NPE, are you using the provided war to deploy your server or customizing it? Using the provided artifacts there shouldn't be any NPEs.\n =||= Indeed, this has to do with the StatusResource and we do have a customised Eureka Service and do not use the original war. We were just wandering whether this error is not only about status and has a deeper root cause as we  have a replication issue. @drax68  please provide more info about this.\n =||= @qiangdavidliu we have reproducible test case, where changes in eureka cluster contents (addition/removal of eureka servers to/from txt dns records) causes loss of overriden data in registry on all eureka servers (overriden statuses, custom metadata). Is this something known, or will require separate issue to investigate?\n =||= @drax68 that is a known issue. status overrides for eureka at an instance level are scoped for the lifetime of a registration. So for example when you remove a server, a previously registering client to that server (which was overridden) will switch registration to a different server, and reset the override. We have explored a few different ways of dealing with internally but it has not come up as a priority. Typically internally we set overrides at an (EC2) ASG level, and that is guarded by AwsAsgUtil.java.\n =||= @qiangdavidliu \n- Unfortunately, we think this issue raises its ugly head not only in a manual/administrative cluster upgrade but also in a standard failure pattern where a client cannot communicate with a server instance due to a network issue (e.g. for us, the ELB in front of the instance, croaked). This led all clients registered to this instance to switch to another server instance, which is what expected from the highly available Eureka setup we have in place. However, everything went south, as all our clients register themselves as STARTING and then we switch them to UP through the REST API, as part of a deployment workflow process we have in place. So, we ended up with ALL these clients switching back to STARTING and then all traffic stopped! There goes the highly available cluster! \n- At any case, we thought that the STARTING status was in place exactly to support this kind of workflow process. What are we doing wrong then? That we override/change the status externally through the REST API? If we allowed the instance to change its status on its own, from STARTING to UP, is everything going to work ok? We can do that if this solves the issue, however, this does not feel right as we pretend that the instance knows when it is ok to receive traffic when this is definitely an external, deployment-driven decision.\n- Please provide then, what is the usefulness of having an override status in addition to the standard status. Why the REST API does not change the original status field? Where is the override concept used? \n- Can you explain more what is \"we set overrides at an (EC2) ASG level, and that is guarded by AwsAsgUtil.java\"?\n =||= Hi @pparth \n\nCan I clarify that your (client) applications register with STARTING only, and only transition to UP status via an external trigger (the REST call from the deployment workflow process mentioned)?\n\nWe use discovery's statuses slightly differently internally. Internally, we tie discovery statuses (STARTING, UP, DOWN) with our application healthchecks, and the state transitions between these statuses are automatically governed by the applications. For example, an application will register with STARTING, and at some point in time (e.g. Guice container initialized, or some known async warm-up process has completed), the application will automatically transition it's own status to UP. The healthcheck is also tied in to this (eurekaClient.registerHealthCheckHandler()) and is used to move between UP and DOWN programmatically. All this can be achieved via usage of EurekaClient and ApplicationInfoManager.\n\nThe OUT_OF_SERVICE status is used as a special case override. Our deployment workflow has the ability to make PUT and DELETE rest calls to the eureka servers to set and remove OUT_OF_SERVICE override statuses (see https://github.com/Netflix/eureka/wiki/Eureka-REST-operations, I have updated the doc to reflect the DELETE option of removing overrides).\n\nA slight clarification to my point earlier regarding instance-level overrides are scoped only for a registration lifecycle, if a client re-registration happens to a different eureka server (as is the case when the original target eureka server disappears, such as for re-deployment), this is not considered as a new registration lifecycle (as an explicit unregistration never happens), and as such overrides are preserved.\n\nRegarding my comment on AwsAsgUtil, internally our most common form of overrides are applied at the (EC2) AutoScalingGroup level. We synchronized our ASG disables with eureka's OUT_OF_SERVICE status, and the logic for that is contained within AwsAsgUtil.\n =||= Got it.\n\nUnfortunately, in our case, we maintain multiple Service types per machine in an ASG, so, we cannot link the ASG disables to a specific Service type Eureka status.\n\nRegarding the status overrides, it seems that we are back to zero. According to you, the overrides should be preserved in our case. So, @drax68  please check again about our case and dig up more information about what exactly happened in our system.\n =||= Re-tested that case, it's reproducible:\nEureka server configuration\n\n```\neureka.appinfo.replicate.interval = 15\neureka.client.refresh.interval = 15\neureka.client.registerWithEureka = true\neureka.datacenter = cloud\neureka.environment = env\neureka.eurekaServer.context = eureka/v2\neureka.eurekaServer.domainName = eureka.env.example.com\neureka.eurekaServer.port = 8010\neureka.lease.duration = 45\neureka.lease.renewalInterval = 15\neureka.name = eureka\neureka.peerEurekaStatusRefreshTimeIntervalMs = 15000\neureka.port = 8010\neureka.preferSameZone = false\neureka.region = us-west-1\neureka.remoteRegion.registryFetchIntervalInSeconds = 15\neureka.serviceEnabled = true\neureka.serviceUrl.us-west-1a = {{us-west-1a-eureka-instance}}/eureka/v2/\neureka.serviceUrl.us-west-1c = {{us-west-1c-eureka-instance}}/eureka/v2/\neureka.shouldUseDns = true\neureka.statusPageUrlPath = /eureka/status\neureka.us-west-1.availabilityZones = us-west-1a,us-west-1c\neureka.vipAddress = eureka.example.com\n```\n\nEureka dns name txt.us-west-1.eureka.env.example.com resolves to TXT record\n`\"txt.us-west-1a.eureka.env.example.com\" \"txt.us-west-1c.eureka.env.example.com\"`\n\ntxt.us-west-1a.eureka.env.example.com resolves to\n`\"elb1\"`\n\ntxt.us-west-1c.eureka.env.example.com resolves to\n`\"elb2\"`\n\nTest case is:\n1. Deploy new pair of eureka instances behind individual elb\n2. Wait for initial sync (let's say existing eureka instances has <apps__hashcode>STARTING_17_UP_122_</apps__hashcode> and newly-created <apps__hashcode>UP_118_</apps__hashcode>)\n3. Append new instances to az-specific txt records:\ntxt.us-west-1a.eureka.env.example.com resolves to\n`\"elb1\" \"elb3\"`\ntxt.us-west-1c.eureka.env.example.com resolves to\n`\"elb2\" \"elb4\"`\n4. Logs contains:\n\n```\nUpdating the serviceUrls as they seem to have changed from [elb1, elb2] to [elb1, elb2, elb3, elb4] \nUpdating the replica nodes as they seem to have changed from [elb1, elb2] to [elb1, elb2, elb3, elb4] \n```\n\nAnd after that many service entries expiring with:\n`DS: Registry: expired lease for SERVICENAME - i-foobar`\n\nNot all services expiring at that moment, only about 30% of registered services.\nOther services registry data remain unchanged, and all overrides migrated to a new nodes.\nAs I understand, service completely de-registered on expiration.\nWhat can be the source of this massive expiration on cluster contents changes?\n =||= @qiangdavidliu Can you take a look at our latest information regarding the issue please?\n =||= @pparth looking at your description, this could potentially be an issue due to the order of operation between bringing up the new servers, and adding their records to the txt record. When a new server comes up, it will do a one time sync with a recognized peer (in this case an existing server). However this is one time only, so by the time this peer becomes a live server (due to the addition of it to the master txt records), the data it contain may now exceed the expiration deadline, especially when clients switch to registering with it.\n\nCan you try the following to see if it helps with your case:\n1. Add one elb to the txt record first before bringing up the new server\n2. Wait a little to make sure dns propagates\n3. Bring up the new eureka server\n\nEureka clients and servers are able to handle \"missing\" servers in the cluster.\n =||= Thank you, @qiangdavidliu \nThat sequence helped with unexpected registry data expiration.\n =||= @drax68 glad to hear that this resolves your issue.\n =||= i don't know english =||= "], ["749", "New EurekaEventListener API", null, "elandau", "02/17/16, 02:16:08 AM", "Introduce a new EurekaEventListener API for getting EurekaClient state change notification.  \n\nThis API is cleaner than forcing the Netflix EventBus on users of EurekaClient.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #568](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/568/) SUCCESS\nThis pull request looks good\n =||= This will be very nice! /cc @dsyer \n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #569](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/569/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #570](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/570/) SUCCESS\nThis pull request looks good\n =||= "], ["750", "HTTPS serviceUrls end up being HTTP in 1.4.1", "Will Tran", "william-tran", "02/22/16, 08:16:53 PM", "https://github.com/Netflix/eureka/blob/v1.4.1/eureka-client/src/main/java/com/netflix/discovery/shared/resolver/aws/ConfigClusterResolver.java#L79 Should probably be \n\n```\n\"https\".equalsIgnoreCase(serviceURI.getScheme()),\n```", "Fixed by PR #751. Thank you for spotting this.\n =||= "], ["751", "Use getScheme() to compare against https.", "Spencer Gibb", "spencergibb", "02/22/16, 08:47:01 PM", "fixes gh-750", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #571](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/571/) SUCCESS\nThis pull request looks good\n =||= @spencergibb Thank you for the fix.\n =||= @tbak closed but not merged?\n =||= thanks!\n =||= Sorry, my mistake. It is merged now.\n\nOn Mon, Feb 22, 2016 at 12:25 PM, Spencer Gibb notifications@github.com\nwrote:\n\n> @tbak https://github.com/tbak closed but not merged?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/pull/751#issuecomment-187368775.\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #572](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/572/) SUCCESS\nThis pull request looks good\n =||= NP @tbak, we appreciate the work and super fast turn around!\n =||= "], ["752", "Only append port to serviceUrl if port >= 0", "Spencer Gibb", "spencergibb", "02/23/16, 11:27:45 PM", "Fixes a problem communicating with an eureka server that is running on port 80 or 443 (such as the case in cloud foundry). serviceUrl looked like this http://eurekahost:-1\n\nI can confirm this works on a local build.\n\nSee https://github.com/spring-cloud/spring-cloud-netflix/issues/840 for the original issue.", "FYI @tbak\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #573](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/573/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #574](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/574/) SUCCESS\nThis pull request looks good\n =||= Thanks!\n =||= @tbak thanks for the quick merge! Any idea on a release date?\n =||= @spencergibb It is done.\n =||= Sweet! @tbak you've been super helpful.\n =||= "], ["753", "PeerAwareInstanceRegistryImpl.syncUp blocks unecessarily", "Will Tran", "william-tran", "02/24/16, 11:42:01 PM", "https://github.com/Netflix/eureka/blob/f2d9dbd886c2644d07ed5de6451c142a995af225/eureka-core/src/main/java/com/netflix/eureka/registry/PeerAwareInstanceRegistryImpl.java#L206\n\nIf its the last (or only) iteration of the loop, there's no need to sleep, because you won't be retrying again. To highlight the issue, if I wanted to implement a server that tries to fetch registry from peers once (with eureka.servier.registrySyncRetries=1), but in case their are no other peers alive, continue startup, we'd block for an additional 30 seconds before startup can complete. ", "NaN"], ["754", "Sleep during syncUp only if necessary", "Will Tran", "william-tran", "02/24/16, 11:42:01 PM", "Fixes #753", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #575](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/575/) SUCCESS\nThis pull request looks good\n =||= Looks good. Thanks\n =||= "], ["755", "Eureka server security", "Kennedy Oliveira", "kennedyoliveira", "02/26/16, 07:00:59 PM", "Hello everyone!\n\nI used eureka in a private network and it's very fine, similar to AWS, but now i need to use it exposed to the internet and was thinking if there is some security like https and at least a basic auth to protect so other people if they found the server can't register to it.\n\nIs there something? Because i can't use a firewall since the microservices will have dynamic ips.", "Eureka does not provide any authentication mechanism, but it supports SSL.\nTo secure your deployment you might create private key/certificates for\nboth endpoints, and enable client side authentication. To do that you must\ninject properly configured instance of EurekaJerseyClient (or build it\nwith EurekaJerseyClientBuilder). You can find those classes in\neureka-client package. There is unfortunately no documentation how to do\nthat.\nIf basic authentication is enough you can always configure it via servlet\ncontainer, and on the client side provide authentication credentials in\nEureka URLs (I have never tried that, so I am not 100% sure if this will\nwork).\n/Tomasz\n\nOn Thu, Feb 25, 2016 at 5:54 PM, Kennedy Oliveira notifications@github.com\nwrote:\n\n> Hello everyone!\n> \n> I used eureka in a private network and it's very fine, similar to AWS, but\n> now i need to use it exposed to the internet and was thinking if there is\n> some security like https and at least a basic auth to protect so other\n> people if they found the server can't register to it.\n> \n> Is there something? Because i can't use a firewall since the microservices\n> will have dynamic ips.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/issues/755.\n =||= @tbak basic auto used to work (version < 1.3.xish). Something changed with the use of `*Endpoint` classes. https://github.com/spring-cloud/spring-cloud-netflix/commit/ca81f5671a029fe81d3fe88991d2abf782648310 is how we solved it.\n =||= @spencergibb Good to know. We will fix it. I have created a separate issue to track it (https://github.com/Netflix/eureka/issues/756).\n =||= @tbak thanks man!\n =||= Thank you everyone for the feedback, i'll wait a solution for #756, and while it doesn't ready i'm gonna try spring cloud netflix.\n =||= "], ["756", "Restore HTTP authentication support in eureka client", null, "tbak", "03/17/16, 07:00:15 PM", "Check https://github.com/Netflix/eureka/issues/755 for the context.", "Hello! Any news on this topic?\n =||= Sorry, we have been busy recently. Would you like to make a PR for this?\n =||= I would love to, but don't know how can i make it, if you give me some hints, i don't understand the eureka server, well didn't looked at the source through.\n\nAnyway, i'll try, but would be very helpful if you could give me some advices.\n\nThank you!\n =||= i use jks credential, i create it on jvm (build 1.8.0_151-b12),  in the server i use server.keystore,  in the client i use server.cer.\r\nbut error message:\r\nCaused by: java.io.IOException: Invalid keystore format\r\n\tat sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:658) ~[na:1.8.0_111]\r\n\tat sun.security.provider.JavaKeyStore$JKS.engineLoad(JavaKeyStore.java:56) ~[na:1.8.0_111]\r\n\tat sun.security.provider.KeyStoreDelegator.engineLoad(KeyStoreDelegator.java:224) ~[na:1.8.0_111]\r\n\tat sun.security.provider.JavaKeyStore$DualFormatJKS.engineLoad(JavaKeyStore.java:70) ~[na:1.8.0_111]\r\n\r\nserver.keystore:\r\nkeytool -validity 365 -genkey -v -alias server -keyalg RSA -keystore server.keystore -dname \"CN=127.0.0.1,OU=icesoft,O=icesoft,L=Haidian,ST=Beijing,c=cn\" -storepass 123456 -keypass 123456 \r\nserver.cer:\r\nkeytool -export -v -alias server -keystore server.keystore -storepass 123456 -rfc -file server.cer\r\n\r\n```java\r\n@Configuration\r\npublic class EurekaJerseyClientAdapter\r\n{\r\n    @Bean\r\n    public EurekaJerseyClient eurekaJerseyClient()\r\n    {\r\n        EurekaJerseyClientImpl.EurekaJerseyClientBuilder builder = new\r\n                EurekaJerseyClientImpl.EurekaJerseyClientBuilder()\r\n                .withTrustStoreFile(\"server.cer\",\"123456\");\r\n        return builder.build();\r\n    }\r\n}\r\n``` =||= "], ["757", "set instance status using applicationInfoManager instead of directly", "David Liu", "qiangdavidliu", "02/27/16, 12:13:17 AM", "NaN", "Looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #576](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/576/) SUCCESS\nThis pull request looks good\n =||= "], ["758", "Self-preservation mode logged and announced by JMX", "Daniel Caballero", "dcaba", "03/28/16, 03:34:34 PM", "A new schedule is generated to announce if the instance is in self-preservation using servo", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #577](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/577/) SUCCESS\nThis pull request looks good\n =||= Servo can do probing automatically. Please, check how it is implemented in DiscoveryClient:\n\n``` java\n    @com.netflix.servo.annotations.Monitor(name = METRIC_REGISTRATION_PREFIX + \"lastSuccessfulHeartbeatTimePeriod\",\n            description = \"How much time has passed from last successful heartbeat\", type = DataSourceType.GAUGE)\n    private long getLastSuccessfulHeartbeatTimePeriodInternal() {\n        long delay = getLastSuccessfulHeartbeatTimePeriod();\n        heartbeatStalenessMonitor.update(computeStalenessMonitorDelay(delay));\n        return delay;\n    }\n```\n\nCan you reimplement it using this approach?\n =||= Hi!\n\n  I will assess this in the next days! The dedicated scheduler (plus polling) just for monitoring purposes looked a bit overkilling, but I thought may be the cleanest one until you presented this servo feature to me ;) . I will keep you posted,\n\n```\n Daniel\n```\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #582](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/582/) FAILURE\nLooks like there's a problem with this pull request\n =||= Hi,\n\n  I've been taking a look, and I guess we have two options:\n- discard this PR. I've been browsing the current metrics you are exporing, and bearing in mind the method \"isBelowRenewThreshold\" is also there, the additional metric this PR incorporates adds small value.\n- keep the suggested approach. Thanks to the additional schedule/thread, eureka will be logging if the instance is in self-preservation mode, or not. This could be interesting staff for admins. If we let servo to prove this, I understand the schedule (and the log generation) will be driven by external JMX polls, that does not look ideal. One point that can be interesting, though, is to log only transitions, instead of every renewalSelfPreservationStatusUpdateIntervalMs.\n  \n  Thanks!\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #583](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/583/) SUCCESS\nThis pull request looks good\n =||= @dcaba I propose to close this PR. As you have stated we have roughly equivalent metric already, and if we would like to implement this anyway, we should use servo annotations.\n =||= "], ["759", "Adding an ondemand instanceInfo update trigger when new HealthCheckHa\u2026", "David Liu", "qiangdavidliu", "03/01/16, 01:14:27 AM", "\u2026ndlers\n\nare registered with EurekaClient", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #578](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/578/) SUCCESS\nThis pull request looks good\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #579](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/579/) SUCCESS\nThis pull request looks good\n =||= "], ["760", "Adding equals and hashcode to EurekaModule", "David Liu", "qiangdavidliu", "03/02/16, 07:28:26 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #580](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/580/) SUCCESS\nThis pull request looks good\n =||= "], ["761", "Add additional logging for client transport resolution of eureka server info", "David Liu", "qiangdavidliu", "03/03/16, 12:42:17 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #581](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/581/) SUCCESS\nThis pull request looks good\n =||= "], ["762", "java.lang.ClassNotFoundException: com.netflix.eureka.converters.EntityBodyConverter", "Deleted user", "ghost", "03/30/16, 07:46:02 PM", "I found \"@Serializer(\"com.netflix.eureka.converters.EntityBodyConverter\")\" in \"com.netflix.eureka.util.StatusInfo\".\n\nBut  the \"EntityBodyConverter\" is in \"com.netflix.discovery.converters\",miss \"discovery\"\n\nI use eureka-core and eureka-client  version is 1.1.147", "@neo-tian thanks for that. This was fixed in release 1.1.158.\n =||= Thank you,that is great\n\n2016-03-31 3:46 GMT+08:00 David Liu notifications@github.com:\n\n> Closed #762 https://github.com/Netflix/eureka/issues/762.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/Netflix/eureka/issues/762#event-608808695\n =||= "], ["763", "change deprecated governator-annotations to replacement (governator-api)", "David Liu", "qiangdavidliu", "03/11/16, 08:26:13 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #584](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/584/) SUCCESS\nThis pull request looks good\n =||= "], ["764", "How to dynamic set eureka client information [InstanceID, port]", "Kennedy Oliveira", "kennedyoliveira", "03/14/16, 06:59:47 PM", "Hello!\n\nI'm developing an app and i wanna register with eureka after starting the server, and the port will be a random one, that the server will first try to bind and if it success that port will be used, so since eureka-client uses file based configuration, there is someway to set the port and instanceID info without using a file?\n\nThank you", "Eureka provides EurekaClientConfig configuration class, so you can always write your own implementation to set Eureka service urls with dynamic ports. If you need this for unit testing, please have a look at our DiscoveryClientResource junit resource that we use internally for testing (eureka-test-utils package). We are using ephemeral ports there.\n =||= Hey @tbak, thank you, i'll sure check your implementation and maybe try to create my own.\n\nQuick question, i noticed when i start the injector the eureka-client begins the initialisation, there is a way to delay it till i call something to start it?\n =||= @kennedyoliveira Eureka is starting the initialization immediately in the constructor. To delay it, you would have to implement a wrapper.\n =||= @tbak, got it, thank you for clarifying my doubts!\n =||= "], ["765", "Fix issue #756 (restore HTTP authentication support)", null, "tbak", "03/17/16, 06:59:51 PM", "NaN", "@kennedyoliveira Here is the fix restoring basic authentication. Most of the code there is the test code, to make sure we do not miss this feature in the future. We do not use HTTP basic authentication as it is inherently insecure.\n =||= Thanks @tbak, we have folks that use it in conjunction with SSL.  Looks good!\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #585](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/585/) SUCCESS\nThis pull request looks good\n =||= @tbak, thank you very much! I know it's not safe, but i was planing to use with SSL as @spencergibb, there is any alternative to this method for eureka?\n =||= There's some SSL certificate security, but other than that...\n =||= @kennedyoliveira We are using client side certificates, to authenticate both sides of the connection.\n =||= :+1: \n =||= @tbak, sounds interesting, how is that?\n =||= @kennedyoliveira Sorry, I have to take it back about the client side certificate validation. There are however some ways to do that (via SSL system properties or creating custom EurekaJerseyClient).\n =||= @tbak, hmm i will search about that, i don't know much about SSL, just the basic, anyway, thank you for fixing it! If you have any source of documentation/books/ anything about this case and could tell me, i appreciate :D\n =||= "], ["766", "Eureka sample service periodically fails when client connects", "Lena", "lenadroid", "05/27/16, 08:40:52 PM", "I am following the example from this repo.\nEureka server is running on localhost:8080.\n\nAs a next step I attempt to run the sample service, like this:\n\n`./gradlew :eureka-examples:runExampleService`\n\nHere is the output that I get:\n\n```\n$ ./gradlew :eureka-examples:runExampleService --stacktrace\n    Inferred project: eureka, version: 1.4.6-SNAPSHOT\n    Publication mavenNebula not found in project :.\n    [buildinfo] Properties file path was not found! (Relevant only for builds running on a CI Server)\n    Publication named 'mavenNebula' does not exist for project ':' in task ':artifactoryPublish'.\n    None of the specified publications matched for project ':' - nothing to publish.\n    :eureka-client:compileJava UP-TO-DATE\n    :eureka-client:processResources UP-TO-DATE\n    :eureka-client:classes UP-TO-DATE\n    :eureka-client:writeManifestProperties UP-TO-DATE\n    :eureka-client:jar\n    :eureka-examples:compileJava\n    warning: [options] bootstrap class path not set in conjunction with -source 1.7\n    Note: Some input files use or override a deprecated API.\n    Note: Recompile with -Xlint:deprecation for details.\n    1 warning\n    :eureka-examples:processResources UP-TO-DATE\n    :eureka-examples:classes\n    :eureka-examples:runExampleService\n    [main] WARN com.netflix.config.sources.URLConfigurationSource - No URLs will be polled as dynamic configuration sources.\n    [main] INFO com.netflix.config.sources.URLConfigurationSource - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.\n    [main] INFO com.netflix.config.DynamicPropertyFactory - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@46ee7fe8\n    [main] INFO com.netflix.config.util.ConfigurationUtils - Loaded properties file file:/Users/lenok/Documents/Programming/Github/eureka/eureka-examples/conf/sample-eureka-service.properties\n    [main] WARN com.netflix.config.util.ConfigurationUtils - file:/Users/lenok/Documents/Programming/Github/eureka/eureka-examples/conf/sample-eureka-service.properties is already loaded\n    [main] INFO com.netflix.appinfo.providers.EurekaConfigBasedInstanceInfoProvider - Setting initial instance status as: STARTING\n    [main] INFO com.netflix.discovery.provider.DiscoveryJerseyProvider - Using JSON encoding codec LegacyJacksonJson\n    [main] INFO com.netflix.discovery.provider.DiscoveryJerseyProvider - Using JSON decoding codec LegacyJacksonJson\n    [main] INFO com.netflix.discovery.provider.DiscoveryJerseyProvider - Using XML encoding codec XStreamXml\n    [main] INFO com.netflix.discovery.provider.DiscoveryJerseyProvider - Using XML decoding codec XStreamXml\n    [main] INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration\n    [main] INFO com.netflix.discovery.DiscoveryClient - Disable delta property : false\n    [main] INFO com.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null\n    [main] INFO com.netflix.discovery.DiscoveryClient - Force full registry fetch : false\n    [main] INFO com.netflix.discovery.DiscoveryClient - Application is null : false\n    [main] INFO com.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true\n    [main] INFO com.netflix.discovery.DiscoveryClient - Application version is -1: true\n    [main] INFO com.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server\n    [main] INFO com.netflix.discovery.DiscoveryClient - The response status is 200\n    [main] INFO com.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30\n    [main] INFO com.netflix.discovery.InstanceInfoReplicator - InstanceInfoReplicator onDemand update allowed rate per min is 4\n    Registering service to eureka with STARTING status\n    Simulating service initialization by sleeping for 2 seconds...\n    Done sleeping, now changing status to UP\n    [main] INFO com.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1458260744041, current=UP, previous=STARTING]\n    Waiting ... verifying service registration with eureka ...\n    [DiscoveryClient-InstanceInfoReplicator-0] INFO com.netflix.discovery.DiscoveryClient - DiscoveryClient_SAMPLEREGISTERINGSERVICE/Alenas-MacBook-Pro.local: registering service...\n    [DiscoveryClient-InstanceInfoReplicator-0] INFO com.netflix.discovery.DiscoveryClient - DiscoveryClient_SAMPLEREGISTERINGSERVICE/Alenas-MacBook-Pro.local - registration status: 204\n    Waiting ... verifying service registration with eureka ...\n    Waiting ... verifying service registration with eureka ...\n    Service started and ready to process requests..\n    > Building 88% > :eureka-examples:runExampleService\n```\n\nAfter I start the client, like this:\n\n```\n$ ./gradlew :eureka-examples:runExampleClient\n    Inferred project: eureka, version: 1.4.6-SNAPSHOT\n    Publication mavenNebula not found in project :.\n    [buildinfo] Properties file path was not found! (Relevant only for builds running on a CI Server)\n    Publication named 'mavenNebula' does not exist for project ':' in task ':artifactoryPublish'.\n    None of the specified publications matched for project ':' - nothing to publish.\n    :eureka-client:compileJava UP-TO-DATE\n    :eureka-client:processResources UP-TO-DATE\n    :eureka-client:classes UP-TO-DATE\n    :eureka-client:writeManifestProperties UP-TO-DATE\n    :eureka-client:jar\n    :eureka-examples:compileJava\n    warning: [options] bootstrap class path not set in conjunction with -source 1.7\n    Note: Some input files use or override a deprecated API.\n    Note: Recompile with -Xlint:deprecation for details.\n    1 warning\n    :eureka-examples:processResources UP-TO-DATE\n    :eureka-examples:classes\n    :eureka-examples:runExampleClient\n    [main] WARN com.netflix.config.sources.URLConfigurationSource - No URLs will be polled as dynamic configuration sources.\n    [main] INFO com.netflix.config.sources.URLConfigurationSource - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.\n    [main] INFO com.netflix.config.DynamicPropertyFactory - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@46ee7fe8\n    [main] INFO com.netflix.config.util.ConfigurationUtils - Loaded properties file file:/Users/lenok/Documents/Programming/Github/eureka/eureka-examples/conf/sample-eureka-client.properties\n    [main] WARN com.netflix.config.util.ConfigurationUtils - file:/Users/lenok/Documents/Programming/Github/eureka/eureka-examples/conf/sample-eureka-client.properties is already loaded\n    [main] INFO com.netflix.appinfo.providers.EurekaConfigBasedInstanceInfoProvider - Setting initial instance status as: STARTING\n    [main] INFO com.netflix.discovery.provider.DiscoveryJerseyProvider - Using JSON encoding codec LegacyJacksonJson\n    [main] INFO com.netflix.discovery.provider.DiscoveryJerseyProvider - Using JSON decoding codec JacksonJson\n    [main] INFO com.netflix.discovery.provider.DiscoveryJerseyProvider - Using XML encoding codec XStreamXml\n    [main] INFO com.netflix.discovery.provider.DiscoveryJerseyProvider - Using XML decoding codec XStreamXml\n    [main] INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration\n    [main] INFO com.netflix.discovery.DiscoveryClient - Disable delta property : false\n    [main] INFO com.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null\n    [main] INFO com.netflix.discovery.DiscoveryClient - Force full registry fetch : false\n    [main] INFO com.netflix.discovery.DiscoveryClient - Application is null : false\n    [main] INFO com.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true\n    [main] INFO com.netflix.discovery.DiscoveryClient - Application version is -1: true\n    [main] INFO com.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server\n    [main] INFO com.netflix.discovery.DiscoveryClient - The response status is 200\n    [main] INFO com.netflix.discovery.DiscoveryClient - Not registering with Eureka server per configuration\n    Found an instance of example service to talk to from eureka: sampleservice.mydomain.net:8001\n    healthCheckUrl: http://Alenas-MacBook-Pro.local:8001/healthcheck\n    override: UNKNOWN\n    Connected to server. Sending a sample request: FOO Thu Mar 17 17:11:33 PDT 2016\n    Waiting for server response..\n    Received response from server: BAR Thu Mar 17 17:11:33 PDT 2016\n    Exiting the client. Demo over..\n\n    BUILD SUCCESSFUL\n\n    Total time: 9.497 secs\n```\n\nIt basically connects to the server and waits for response, etc.\n\nAt the same time on the service terminal I see the following happening. Sometimes when I do these actions I see the successful response on the eureka service:\n\n```\n  Client got connected... processing request from the client\n    Received a request from the example client: FOO Thu Mar 17 17:30:16 PDT 2016\n    Sending the response to the client: BAR Thu Mar 17 17:30:16 PDT 2016\n    Simulating service doing work by sleeping for 10 seconds...\n    Removing registration from eureka\n    [main] INFO com.netflix.discovery.DiscoveryClient - DiscoveryClient_SAMPLEREGISTERINGSERVICE/Alenas-MacBook-Pro.local - deregister  status: 200\n    Shutting down server. Demo over.\n\n    BUILD SUCCESSFUL\n\n    Total time: 4 mins 53.331 secs\n\n```\n\nAnd sometimes it gives errors, like here:\n\n```\n Client got connected... processing request from the client\n    Received a request from the example client: FOO Thu Mar 17 17:33:30 PDT 2016\n    Sending the response to the client: BAR Thu Mar 17 17:33:30 PDT 2016\n    Simulating service doing work by sleeping for 10 seconds...\n    Removing registration from eureka\n    Exception in thread \"main\" java.lang.NoClassDefFoundError: com/netflix/discovery/shared/transport/decorator/EurekaHttpClientDecorator$2\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71)\n        at com.netflix.discovery.DiscoveryClient.unregister(DiscoveryClient.java:886)\n        at com.netflix.discovery.DiscoveryClient.shutdown(DiscoveryClient.java:869)\n        at com.netflix.eureka.ExampleServiceBase.stop(ExampleServiceBase.java:89)\n        at com.netflix.eureka.ExampleServiceBase.start(ExampleServiceBase.java:80)\n        at com.netflix.eureka.ExampleEurekaService.main(ExampleEurekaService.java:45)\n    Caused by: java.lang.ClassNotFoundException: com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n        ... 6 more\n    :eureka-examples:runExampleService FAILED\n\n    FAILURE: Build failed with an exception.\n\n    * What went wrong:\n    Execution failed for task ':eureka-examples:runExampleService'.\n    > Process 'command '/Library/Java/JavaVirtualMachines/jdk1.8.0_73.jdk/Contents/Home/bin/java'' finished with non-zero exit value 1\n\n    * Try:\n    Run with --info or --debug option to get more log output.\n\n    * Exception is:\n    org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':eureka-examples:runExampleService'.\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:69)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)\n        at org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:35)\n        at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:64)\n        at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\n        at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:42)\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:52)\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:53)\n        at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n        at org.gradle.api.internal.AbstractTask.executeWithoutThrowingTaskFailure(AbstractTask.java:305)\n        at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.executeTask(AbstractTaskPlanExecutor.java:79)\n        at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.processTask(AbstractTaskPlanExecutor.java:63)\n        at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.run(AbstractTaskPlanExecutor.java:51)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:23)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:88)\n        at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:29)\n        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:62)\n        at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)\n        at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:68)\n        at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)\n        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:62)\n        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:55)\n        at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:149)\n        at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:106)\n        at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:86)\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.run(InProcessBuildActionExecuter.java:80)\n        at org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:33)\n        at org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:24)\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:36)\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:26)\n        at org.gradle.launcher.cli.RunBuildAction.run(RunBuildAction.java:51)\n        at org.gradle.internal.Actions$RunnableActionAdapter.execute(Actions.java:171)\n        at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:237)\n        at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:210)\n        at org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:35)\n        at org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:24)\n        at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:206)\n        at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:169)\n        at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:33)\n        at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:22)\n        at org.gradle.launcher.Main.doAction(Main.java:33)\n        at org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:45)\n        at org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:54)\n        at org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:35)\n        at org.gradle.launcher.GradleMain.main(GradleMain.java:23)\n        at org.gradle.wrapper.BootstrapMainStarter.start(BootstrapMainStarter.java:30)\n        at org.gradle.wrapper.WrapperExecutor.execute(WrapperExecutor.java:127)\n        at org.gradle.wrapper.GradleWrapperMain.main(GradleWrapperMain.java:56)\n    Caused by: org.gradle.process.internal.ExecException: Process 'command '/Library/Java/JavaVirtualMachines/jdk1.8.0_73.jdk/Contents/Home/bin/java'' finished with non-zero exit value 1\n        at org.gradle.process.internal.DefaultExecHandle$ExecResultImpl.assertNormalExitValue(DefaultExecHandle.java:365)\n        at org.gradle.process.internal.DefaultJavaExecAction.execute(DefaultJavaExecAction.java:31)\n        at org.gradle.api.tasks.JavaExec.exec(JavaExec.java:60)\n        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:63)\n        at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.doExecute(AnnotationProcessingTaskFactory.java:218)\n        at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:211)\n        at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:200)\n        at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:579)\n        at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:562)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:80)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:61)\n        ... 47 more\n\n\n    BUILD FAILED\n\n    Total time: 1 mins 1.267 secs\n```\n\nWhat might be the problem?", "@lenadroid are you running the client and server from the same git repo? Wondering if there may be a version mismatch somewhere as the server has a dependency on the client also.\n =||= @qiangdavidliu yeah, from the same. \n =||= @lenadroid this is a pretty weird one. The class that's failing with ClassNotFound is there, and your successful executions also prove that. Are you able to see the same sort of problems with a more complicated set up than the simple examples provided?\n =||= eureka is pretty unstable and avoid to use it in serious applications.\n =||= @SphereUser I'm curious to the instability that you are seeing. We internally run eureka at very large scale and it has been stable for many years. One thing we are trying to update is documentation on configuration and operation of the servers, which currently on github is lacking some advanced info.\n =||= Closing this issue as the problem is specific (after more investigation) for the example when ran with gradle using the gradle applications plugin. Using the dist option and also in real operation the ClassNotFoundExceptions are not seen.\n =||= "], ["767", "1.x Add test showing issue with OUT_OF_SERVICE status registration.", null, "tbak", "04/07/16, 09:21:44 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #586](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/586/) SUCCESS\nThis pull request looks good\n =||= During internal discussion we decided to handle this at REST layer, by not allowing registrations with OUT_OF_SERVICE status set.\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #590](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/590/) SUCCESS\nThis pull request looks good\n =||= "], ["768", "Source code build failure", "XuZhi Lu", "searover", "05/30/19, 11:09:53 PM", "When I clone and build the source code, it appears an error that say nothing but a test case failed in \nEurekaClientServerRestIntegrationTest.java:244 , I have no idea what to do until I look into the source code and find the file, locate 244 line , i see it try to bind port 8080, and then i konw the port 8080 must be already in use, so i solved this problem.\n\nMaybe in the unit test code, we should add some try catch code, let user know what it happens...", "We should use ephemeral ports in tests. We do this now in most of the tests that create server sockets, but not everywhere. Thank you for spotting this.\n =||= "], ["769", "back rev servo to 0.10.1 to be java7 compatible", "David Liu", "qiangdavidliu", "03/28/16, 09:48:11 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #587](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/587/) SUCCESS\nThis pull request looks good\n =||= nice :smiley: \n =||= "], ["770", "Configuration links in wiki page is invalid.", "XuZhi Lu", "searover", "03/30/16, 07:51:58 PM", "https://github.com/Netflix/eureka/wiki/Configuring-Eureka\nIn the Configuration section, the advance configuration links are invalid, could you update this information, thank you.", "@searover we no longer host javadoc, but the interfaces themselves are documented. Have updated the links on the wikipage. Thanks.\n =||= "], ["771", "Fix up DI server to use governator", "David Liu", "qiangdavidliu", "03/29/16, 06:09:32 PM", "Since Karyon3 is no longer under deployment.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #588](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/588/) SUCCESS\nThis pull request looks good\n =||= "], ["772", "Limiting the number of instances of an application", "Andre Miranda", "andreldm", "04/13/16, 05:29:42 PM", "I'd like to know if it's possible to limit the number of instances registered at a given time.", "@andreldm there are no limits (either on total number of instances, or number of instances per application) currently. Is this some new functionality you are looking at?\n =||= I was trying to limit the number of instance to only one at a time. Now I'm convinced this defeats the whole point of service discovery, so Eureka should not be ideal to my case.\n =||= @andreldm one of the tenants of eureka is that instances are abstracted away and application talk to each other over some fungible set of physical instances. If your use case require limiting it to just 1 instance, then yes eureka doesn't make too much sense.\n =||= "], ["773", "1.x EIPManager: if instance is not associated with one EIP, do not try to unbind", "LUONG Trong-Hieu", "hieurl", "04/11/16, 10:17:34 PM", "Instead, throw exception\nReason: DescribeAddressRequest with null public ip returns list of all public address\nIf instance is not associated with one eip, Eureka will dissociate first ip on list which does not belong to the instance", "Quick check using python awscli\n\n> aws ec2 describe-addresses --public-ips | jq '.Addresses[0]'\n> {\n>   \"InstanceId\": \"i-xxxxx\",\n>   \"PublicIp\": \"xxx.xxx.xxx.xxx\",\n>   \"Domain\": \"standard\"\n> }\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #589](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/589/) SUCCESS\nThis pull request looks good\n =||= @hieurl thanks for the pull. Looking at the change, unbindEIP() is currently really used at shutdown time, so a more optimized behaviour when unbindEIP() is called when no EIP is bound, is to perhaps log.info() and then just return from the function, instead of throwing an RuntimeException. What do you think?\n =||= @qiangdavidliu seem reasonable to me. I'm going to push a commit.\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #592](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/592/) SUCCESS\nThis pull request looks good\n =||= @hieurl thanks for the contribution.\n =||= "], ["774", "Check if transport is null in DiscoveryClient#unregister", null, "tbak", "04/07/16, 09:50:57 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #591](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/591/) SUCCESS\nThis pull request looks good\n =||= :+1: \n =||= "], ["775", "404 in Wiki", "Steve Wall", "stevewallcgi", "04/18/16, 06:17:35 AM", "A 404 is returned when trying to access http://netflix.github.io/eureka/javadoc/eureka-core/com/netflix/eureka/EurekaServerConfig.html from https://github.com/Netflix/eureka/wiki/Understanding-Eureka-Peer-to-Peer-Communication", "Hi @stevewallecs we are working on some updated documentation. Hold on.\n =||= Fixed the broken link, closing this issue for now. Will be adding some higher level docs for configuration both the client and server later.\n =||= "], ["776", "Adding util class", "David Liu", "qiangdavidliu", "04/13/16, 05:27:10 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #593](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/593/) SUCCESS\nThis pull request looks good\n =||= "], ["777", "\"Cannot execute request on any known server\" when i set up a Eureka cluster by skyDns", null, "bspline", "04/18/16, 06:13:25 AM", "I also post this question on \"https://groups.google.com/forum/#!topic/eureka_netflix/WV1Tfp1I5Mc\"\n\nEureka version: 1.4.4\n\nWhen i refer to \"https://github.com/Netflix/eureka/wiki/Configuring-Eureka-in-AWS-Cloud\", i want to set up a Eureka cluster by skyDns.\n\nthis is all the configuration of my eureka-client :\n\neureka.region=us-east-1\n\neureka.name=eureka\n\neureka.vipAddress=eureka.mydomain.net\n\neureka.port=8080\n\neureka.shouldUseDns=true\n\neureka.serviceUrl.default=http://localhost:8080/eureka/v2/\n\neureka.shouldOnDemandUpdateStatusChange=false\neureka.eurekaServer.domainName=bar.skydns.paas\neureka.eurekaServer.context=eureka/v2\neureka.eurekaServer.port=8080\n\nIn my skydns, i set TXT records,\nthe result are follows:\n\ncommand:     dig txt.us-east-1.bar.skydns.paas txt\nresult:\n                    ;; QUESTION SECTION:\n                    ;txt.us-east-1.bar.skydns.paas. IN  TXT\n\n```\n                ;; ANSWER SECTION:\n                txt.us-east-1.bar.skydns.paas. 3600 IN  TXT \"us-east-1c.bar.skydns.paas\"\n                txt.us-east-1.bar.skydns.paas. 3600 IN  TXT \"us-east-1d.bar.skydns.paas\"\n```\n\ncommand:     dig txt.us-east-1c.bar.skydns.paas txt\nresult:  \n                   ;; QUESTION SECTION:\n                   ;t.us-east-1c.bar.skydns.paas.   IN  TXT\n\n```\n               ;; ANSWER SECTION:\n               txt.us-east-1c.bar.skydns.paas.  3600 IN TXT \"http://10.120.180.235:8080/discovery/v2/\"\n```\n\ni can get the response  of  \"dig txt.us-east-1d.bar.skydns.paas txt\" too.  the answer is :  txt.us-east-1d.bar.skydns.paas. 3600 IN TXT \"http://10.120.180.117:8080/discovery/v2/\"\n\nAt last,when i startup the tomcat, there are some problems :\n\n2016-04-16 11:43:36,565 ERROR com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient:83 [localhost-startStop-1] [execute] Request execution error\ncom.sun.jersey.api.client.ClientHandlerException: java.net.UnknownHostException: http: unknown error\n        at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187)\n        at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123)\n        at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27)\n        at com.sun.jersey.api.client.Client.handle(Client.java:652)\n        at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682)\n        at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)\n        at com.sun.jersey.api.client.WebResource$Builder.get(WebResource.java:509)\n        at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.getApplicationsInternal(AbstractJerseyEurekaHttpClient.java:194)\n        at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.getApplications(AbstractJerseyEurekaHttpClient.java:165)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\n        at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\n        at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118)\n        at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:119)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n        at com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1013)\n        at com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:927)\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:441)\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:304)\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:300)\n        at com.netflix.eureka.EurekaBootStrap.initEurekaServerContext(EurekaBootStrap.java:147)\n        at com.netflix.eureka.EurekaBootStrap.contextInitialized(EurekaBootStrap.java:96)\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4812)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5255)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:147)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:725)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:701)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:717)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:939)\n        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1812)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\nCaused by: java.net.UnknownHostException: http: unknown error\n        at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)\n        at java.net.InetAddress$2.lookupAllHostAddr(InetAddress.java:928)\n        at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1323)\n        at java.net.InetAddress.getAllByName0(InetAddress.java:1276)\n        at java.net.InetAddress.getAllByName(InetAddress.java:1192)\n        at java.net.InetAddress.getAllByName(InetAddress.java:1126)\n        at org.apache.http.impl.conn.SystemDefaultDnsResolver.resolve(SystemDefaultDnsResolver.java:44)\n        at org.apache.http.impl.conn.DefaultClientConnectionOperator.resolveHostname(DefaultClientConnectionOperator.java:259)\n        at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:159)\n        at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144)\n        at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:131)\n        at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:611)\n        at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:446)\n        at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:863)\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:115)\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:57)\n        at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173)\n        ... 41 more\n\n2016-04-16 11:43:36,578 WARN  com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient:129 [localhost-startStop-1] [execute] Request execution failure\n2016-04-16 11:43:36,580 ERROR com.netflix.discovery.DiscoveryClient:934 [localhost-startStop-1] [fetchRegistry] DiscoveryClient_EUREKA/SZV1000048497 - was unable to refresh its cache! status = Cannot execute request on any known server\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n        at com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1013)\n        at com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:927)\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:441)\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:304)\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:300)\n        at com.netflix.eureka.EurekaBootStrap.initEurekaServerContext(EurekaBootStrap.java:147)\n        at com.netflix.eureka.EurekaBootStrap.contextInitialized(EurekaBootStrap.java:96)\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4812)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5255)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:147)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:725)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:701)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:717)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:939)\n        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1812)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\n2016-04-16 11:45:46,609 WARN  com.netflix.discovery.InstanceInfoReplicator:107 [DiscoveryClient-InstanceInfoReplicator-0] [run] There was a problem with the instance info replicator\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\n    at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\n    at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\n    at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:806)\n    at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:103)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n\nWhen i make a request to http://10.120.180.235:8080/eureka/ and  http://10.120.180.117:8080/eureka/\nThese are the responses:\nInstances currently registered with Eureka\nApplication\n\nAMIs\n\nAvailability Zones\n\nStatus\n\nApplication AMIs    Availability Zones  Status\nNo data available in table\nGeneral Info\nName    Value\nenvironment test\nnum-of-cpus 4\ntotal-avail-memory  553mb\ncurrent-memory-usage    234mb (42%)\nserver-uptime   00:03\nregistered-replicas http://http://10.120.180.235:8080/discovery/v2/:8080/eureka/v2/\navailable-replicas  \nunavailable-replicas    http://http://10.120.180.235:8080/discovery/v2/:8080/eureka/v2/,\nInstance Info\nName    Value\nipAddr  10.120.180.235\nstatus  UP\n\nInstances currently registered with Eureka\nApplication\n\nAMIs\n\nAvailability Zones\n\nStatus\n\nApplication AMIs    Availability Zones  Status\nNo data available in table\nGeneral Info\nName    Value\nenvironment test\nnum-of-cpus 4\ntotal-avail-memory  562mb\ncurrent-memory-usage    251mb (44%)\nserver-uptime   00:27\nregistered-replicas http://http://10.120.180.235:8080/discovery/v2/:8080/eureka/v2/\navailable-replicas  \nunavailable-replicas    http://http://10.120.180.235:8080/discovery/v2/:8080/eureka/v2/,\nInstance Info\nName    Value\nipAddr  10.120.180.117\nstatus  UP\n\nThe application of eureka is missing and when i register to 10.120.180.117 with a application named Hello ,i cant't find the Hello  in the both eureka servers.\n\nDo i make some mistakes in the  configuration of eureka-client  or some others ?", "Hi @bspline looking at the records, it looks like your configuration is expecting \"eureka/v2/...\", whereas the txt records are expecting it of the form \"discovery/v2/...\". There is a mistake in https://github.com/Netflix/eureka/wiki/Deploying-Eureka-Servers-in-EC2 between the words eureka vs discovery that would have caused this. The page has been updated. Thanks.\n =||= I hava done what you said ,but it does not work.\nThe Error log almost is the same.It can only find one txtRecord.\n\n2016-04-18 20:33:20,733 INFO  com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver:40 [localhost-startStop-1] [getClusterEndpoints] Resolving eureka endpoints via DNS\nThe txtRecord is : us-east-1d.bar.skydns.paas\nThe cnamesString is : [us-east-1d.bar.skydns.paas]\nThe rootClusterDNS is : txt.us-east-1.bar.skydns.paas\nThe zoneDomain is : us-east-1d.bar.skydns.paas\nThe txtRecord is : http://10.120.180.117:8080/eureka/v2/\nThe cnamesString is : [http://10.120.180.117:8080/eureka/v2/]\nThe txtRecord is : http://10.120.180.117:8080/eureka/v2/\nThe cnamesString is : [http://10.120.180.117:8080/eureka/v2/]\nThe zoneAddresses is : http://10.120.180.117:8080/eureka/v2/\n2016-04-18 20:33:20,807 INFO  com.netflix.discovery.DiscoveryClient:920 [localhost-startStop-1] [fetchRegistry] Disable delta property : false\n2016-04-18 20:33:20,807 INFO  com.netflix.discovery.DiscoveryClient:921 [localhost-startStop-1] [fetchRegistry] Single vip registry refresh property : null\n2016-04-18 20:33:20,807 INFO  com.netflix.discovery.DiscoveryClient:922 [localhost-startStop-1] [fetchRegistry] Force full registry fetch : false\n2016-04-18 20:33:20,807 INFO  com.netflix.discovery.DiscoveryClient:923 [localhost-startStop-1] [fetchRegistry] Application is null : false\n2016-04-18 20:33:20,807 INFO  com.netflix.discovery.DiscoveryClient:924 [localhost-startStop-1] [fetchRegistry] Registered Applications size is zero : true\n2016-04-18 20:33:20,808 INFO  com.netflix.discovery.DiscoveryClient:926 [localhost-startStop-1] [fetchRegistry] Application version is -1: true\n2016-04-18 20:33:20,808 INFO  com.netflix.discovery.DiscoveryClient:1009 [localhost-startStop-1] [getAndStoreFullRegistry] Getting all instance registry info from the eureka server\n2016-04-18 20:33:20,899 ERROR com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient:83 [localhost-startStop-1] [execute] Request execution error\ncom.sun.jersey.api.client.ClientHandlerException: java.net.UnknownHostException: http: unknown error\n        at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187)\n        at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123)\n        at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27)\n        at com.sun.jersey.api.client.Client.handle(Client.java:652)\n        at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682)\n        at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)\n        at com.sun.jersey.api.client.WebResource$Builder.get(WebResource.java:509)\n        at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.getApplicationsInternal(AbstractJerseyEurekaHttpClient.java:194)\n        at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.getApplications(AbstractJerseyEurekaHttpClient.java:165)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\n        at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\n        at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118)\n        at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:119)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n        at com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1013)\n        at com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:927)\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:441)\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:304)\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:300)\n        at com.netflix.eureka.EurekaBootStrap.initEurekaServerContext(EurekaBootStrap.java:147)\n        at com.netflix.eureka.EurekaBootStrap.contextInitialized(EurekaBootStrap.java:96)\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4812)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5255)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:147)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:725)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:701)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:717)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:939)\n        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1812)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\nCaused by: java.net.UnknownHostException: http: unknown error\n        at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)\n        at java.net.InetAddress$2.lookupAllHostAddr(InetAddress.java:928)\n        at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1323)\n        at java.net.InetAddress.getAllByName0(InetAddress.java:1276)\n        at java.net.InetAddress.getAllByName(InetAddress.java:1192)\n        at java.net.InetAddress.getAllByName(InetAddress.java:1126)\n        at org.apache.http.impl.conn.SystemDefaultDnsResolver.resolve(SystemDefaultDnsResolver.java:44)\n at org.apache.http.impl.conn.DefaultClientConnectionOperator.resolveHostname(DefaultClientConnectionOperator.java:259)\n        at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:159)\n        at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144)\n        at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:131)\n        at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:611)\n        at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:446)\n        at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:863)\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:115)\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:57)\n        at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173)\n        ... 41 more\n2016-04-18 20:33:20,902 WARN  com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient:129 [localhost-startStop-1] [execute] Request execution failure\n2016-04-18 20:33:20,903 ERROR com.netflix.discovery.DiscoveryClient:934 [localhost-startStop-1] [fetchRegistry] DiscoveryClient_EUREKA/SZV1000048538 - was unable to refresh its cache! status = Cannot execute request on any known server\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n        at com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1013)\n        at com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:927)\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:441)\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:304)\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:300)\n        at com.netflix.eureka.EurekaBootStrap.initEurekaServerContext(EurekaBootStrap.java:147)\n        at com.netflix.eureka.EurekaBootStrap.contextInitialized(EurekaBootStrap.java:96)\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4812)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5255)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:147)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:725)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:701)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:717)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:939)\n        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1812)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\n =||= @fangzhining sorry about that, looks like when I fixed the documentation mistake on that page, I did not do it fully (update yet again). For the dns option, you only need the hostname in the records, and should not include \"http://\", the port, nor the \"eureka/v2\".\n =||= service-hi_1     | 2017-07-18 12:33:41.357 ERROR 1 --- [           main] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_SERVICE-HI/18b4cd4a712a:service-hi:8763 - was unable to refresh its cache! status = Cannot execute request on any known server\r\nservice-hi_1     | \r\nservice-hi_1     | com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\nservice-hi_1     | \tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111) ~[eureka-client-1.6.1.jar!/:1.6.1]\r\nservice-hi_1     | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.6.1.jar!/:1.6.1]\r\nservice-hi_1     | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137) ~[eureka-client-1.6.1.jar!/:1.6.1]\r\nservice-hi_1     | \tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.6.1.jar!/:1.6.1]\r\nservice-hi_1     | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.6.1.jar!/:1.6.1]\r\nservice-hi_1     | \tat com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1013) [eureka-client-1.6.1.jar!/:1.6.1]\r\nservice-hi_1     | \tat com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:927) [eureka-client-1.6.1.jar!/:1.6.1]\r\nservice-hi_1     | \tat com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:408) [eureka-client-1.6.1.jar!/:1.6.1]\r\nservice-hi_1     | \tat com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:266) [eureka-client-1.6.1.jar!/:1.6.1]\r\nservice-hi_1     | \tat com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:262) [eureka-client-1.6.1.jar!/:1.6.1]\r\nservice-hi_1     | \tat org.springframework.cloud.netflix.eureka.CloudEurekaClient.<init>(CloudEurekaClient.java:60) [spring-cloud-netflix-eureka-client-1.3.0.RC1.jar!/:1.3.0.RC1]\r\nservice-hi_1     | \tat org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration.eurekaClient(EurekaClientAutoConfiguration.java:225) [spring-cloud-netflix-eureka-client-1.3.0.RC1.jar!/:1.3.0.RC1]\r\nservice-hi_1     | \tat org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration$$EnhancerBySpringCGLIB$$6eaebe88.CGLIB$eurekaClient$0(<generated>) [spring-cloud-netflix-eureka-client-1.3.0.RC1.jar!/:1.3.0.RC1]\r\nservice-hi_1     | \tat org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration$$EnhancerBySpringCGLIB$$6eaebe88$$FastClassBySpringCGLIB$$fe359a98.invoke(<generated>) [spring-cloud-netflix-eureka-client-1.3.0.RC1.jar!/:1.3.0.RC1]\r\nservice-hi_1     | \tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) [spring-core-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:358) [spring-context-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration$$EnhancerBySpringCGLIB$$6eaebe88.eurekaClient(<generated>) [spring-cloud-netflix-eureka-client-1.3.0.RC1.jar!/:1.3.0.RC1]\r\nservice-hi_1     | \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_131]\r\nservice-hi_1     | \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_131]\r\nservice-hi_1     | \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_131]\r\nservice-hi_1     | \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_131]\r\nservice-hi_1     | \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162) [spring-beans-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588) [spring-beans-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1173) [spring-beans-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1067) [spring-beans-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:513) [spring-beans-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483) [spring-beans-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.beans.factory.support.AbstractBeanFactory$2.getObject(AbstractBeanFactory.java:345) [spring-beans-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.cloud.context.scope.GenericScope$BeanLifecycleWrapper.getBean(GenericScope.java:359) [spring-cloud-context-1.2.0.RC1.jar!/:1.2.0.RC1]\r\nservice-hi_1     | \tat org.springframework.cloud.context.scope.GenericScope.get(GenericScope.java:176) [spring-cloud-context-1.2.0.RC1.jar!/:1.2.0.RC1]\r\nservice-hi_1     | \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:340) [spring-beans-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) [spring-beans-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.aop.target.SimpleBeanTargetSource.getTarget(SimpleBeanTargetSource.java:35) [spring-aop-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.cloud.netflix.eureka.serviceregistry.EurekaRegistration.getTargetObject(EurekaRegistration.java:133) [spring-cloud-netflix-eureka-client-1.3.0.RC1.jar!/:1.3.0.RC1]\r\nservice-hi_1     | \tat org.springframework.cloud.netflix.eureka.serviceregistry.EurekaRegistration.getEurekaClient(EurekaRegistration.java:122) [spring-cloud-netflix-eureka-client-1.3.0.RC1.jar!/:1.3.0.RC1]\r\nservice-hi_1     | \tat org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry.maybeInitializeClient(EurekaServiceRegistry.java:56) [spring-cloud-netflix-eureka-client-1.3.0.RC1.jar!/:1.3.0.RC1]\r\nservice-hi_1     | \tat org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry.register(EurekaServiceRegistry.java:37) [spring-cloud-netflix-eureka-client-1.3.0.RC1.jar!/:1.3.0.RC1]\r\nservice-hi_1     | \tat org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration.start(EurekaAutoServiceRegistration.java:73) [spring-cloud-netflix-eureka-client-1.3.0.RC1.jar!/:1.3.0.RC1]\r\nservice-hi_1     | \tat org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:175) [spring-context-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.context.support.DefaultLifecycleProcessor.access$200(DefaultLifecycleProcessor.java:50) [spring-context-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:348) [spring-context-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:151) [spring-context-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:114) [spring-context-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:879) [spring-context-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.finishRefresh(EmbeddedWebApplicationContext.java:144) [spring-boot-1.5.2.RELEASE.jar!/:1.5.2.RELEASE]\r\nservice-hi_1     | \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:545) [spring-context-4.3.7.RELEASE.jar!/:4.3.7.RELEASE]\r\nservice-hi_1     | \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) [spring-boot-1.5.2.RELEASE.jar!/:1.5.2.RELEASE]\r\nservice-hi_1     | \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:737) [spring-boot-1.5.2.RELEASE.jar!/:1.5.2.RELEASE]\r\nservice-hi_1     | \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:370) [spring-boot-1.5.2.RELEASE.jar!/:1.5.2.RELEASE]\r\nservice-hi_1     | \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:314) [spring-boot-1.5.2.RELEASE.jar!/:1.5.2.RELEASE]\r\nservice-hi_1     | \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1162) [spring-boot-1.5.2.RELEASE.jar!/:1.5.2.RELEASE]\r\nservice-hi_1     | \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1151) [spring-boot-1.5.2.RELEASE.jar!/:1.5.2.RELEASE]\r\nservice-hi_1     | \tat com.forezp.ServiceHiApplication.main(ServiceHiApplication.java:17) [classes!/:0.0.1-SNAPSHOT]\r\nservice-hi_1     | \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_131]\r\nservice-hi_1     | \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_131]\r\nservice-hi_1     | \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_131]\r\nservice-hi_1     | \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_131]\r\nservice-hi_1     | \tat org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48) [app.jar:0.0.1-SNAPSHOT]\r\nservice-hi_1     | \tat org.springframework.boot.loader.Launcher.launch(Launcher.java:87) [app.jar:0.0.1-SNAPSHOT]\r\nservice-hi_1     | \tat org.springframework.boot.loader.Launcher.launch(Launcher.java:50) [app.jar:0.0.1-SNAPSHOT]\r\nservice-hi_1     | \tat org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:51) [app.jar:0.0.1-SNAPSHOT]\r\n =||= "], ["778", "Unavailable-replicas when configuring Eureka cluster in private subnets ", "Ervan Setiawan", "ervansetiawan", "05/03/16, 03:41:08 PM", "We are trying to configure a Eureka cluster in private subnets within a VPC. Our setup consists of two Eureka servers that span two availability zones.\n\nEach Eureka server is assigned an Elastic Network Interface with a static private IP. \n\nEverything starts up, except that the Eureka servers don't seem to be aware of their peers.\n\nLogs : \n2016-04-16 14:49:02,642 INFO  com.netflix.eureka.registry.PeerAwareInstanceRegistryImpl:222 [Eureka-EIPBinder] [openForTraffic] Got 0 instances from neighboring DS node\n2016-04-16 14:49:02,642 INFO  com.netflix.eureka.registry.PeerAwareInstanceRegistryImpl:222 [Eureka-EIPBinder] [openForTraffic] Got 0 instances from neighboring DS node\n2016-04-16 14:49:02,642 INFO  com.netflix.eureka.registry.PeerAwareInstanceRegistryImpl:223 [Eureka-EIPBinder] [openForTraffic] Renew threshold is: 0\n\nEureka dashboard :\n\n```\nName    Value\nenvironment test\nnum-of-cpus 1\ntotal-avail-memory  74mb\ncurrent-memory-usage    45mb (60%)\nserver-uptime   00:22\nregistered-replicas http://ec2-10-0-2-5.eu-central-1.compute.amazonaws.com:8080/eureka/v2/, http://ec2-10-0-1-5.eu-central-1.compute.amazonaws.com:8080/eureka/v2/\navailable-replicas  \nunavailable-replicas    http://ec2-10-0-2-5.eu-central-1.compute.amazonaws.com:8080/eureka/v2/,http://ec2-10-0-1-5.eu-central-1.compute.amazonaws.com:8080/eureka/v2/,\n```", "Hi @ervansetiawan , the eureka servers are themselves clients as well, and use eureka-client to register with the server cluster (non-deterministic which server to register with, though governed by the zonal preferences). Its possible to see no peers if these clients on the servers fail with their registration. Can you see if there are client registration failure logs on your servers? \n =||= I don't see any client registration failures in the logs. The two Eureka instances are registered with UP status. \n\n```\n2016-04-22 19:50:14,298 INFO  com.netflix.eureka.registry.AbstractInstanceRegistry:266 [http-nio-8080-exec-10] [register] Registered instance EUREKA/i-b0019a0c with status UP (replication=true)\n2016-04-22 19:50:16,852 WARN  com.netflix.eureka.registry.AbstractInstanceRegistry:353 [http-nio-8080-exec-1] [renew] DS: Registry: lease doesn't exist, registering resource: EUREKA - i-8371d13e\n2016-04-22 19:50:16,852 WARN  com.netflix.eureka.resources.InstanceResource:116 [http-nio-8080-exec-1] [renewLease] Not Found (Renew): EUREKA - i-8371d13e\n2016-04-22 19:50:17,366 INFO  com.netflix.eureka.registry.AbstractInstanceRegistry:266 [http-nio-8080-exec-2] [register] Registered instance EUREKA/i-8371d13e with status UP (replication=true)\n2016-04-22 19:50:23,787 WARN  com.netflix.appinfo.CloudInstanceConfig:183 [DiscoveryClient-InstanceInfoReplicator-0] [shouldUpdate] Newly resolved AmazonInfo contains less data than previous old:10 -> new:9, skipping an update cycle\n2016-04-22 19:50:53,798 WARN  com.netflix.appinfo.CloudInstanceConfig:183 [DiscoveryClient-InstanceInfoReplicator-0] [shouldUpdate] Newly resolved AmazonInfo contains less data than previous old:10 -> new:9, skipping an update cycle\n2016-04-22 19:51:13,796 INFO  com.netflix.discovery.DiscoveryClient:921 [DiscoveryClient-HeartbeatExecutor-0] [renew] DiscoveryClient_EUREKA/i-b0019a0c - Re-registering apps/EUREKA\n2016-04-22 19:51:13,796 INFO  com.netflix.discovery.DiscoveryClient:862 [DiscoveryClient-HeartbeatExecutor-0] [register] DiscoveryClient_EUREKA/i-b0019a0c: registering service...\n2016-04-22 19:51:13,802 WARN  com.netflix.discovery.DiscoveryClient:1250 [DiscoveryClient-CacheRefreshExecutor-0] [reconcileAndLogDifference] The Reconcile hashcodes do not match, client : UP_2_, server : UP_1_. Getting the full registry\n2016-04-22 19:51:13,807 INFO  com.netflix.discovery.DiscoveryClient:881 [DiscoveryClient-HeartbeatExecutor-0] [register] DiscoveryClient_EUREKA/i-b0019a0c - registration status: 204\n2016-04-22 19:51:13,810 WARN  com.netflix.discovery.DiscoveryClient:1288 [DiscoveryClient-CacheRefreshExecutor-0] [reconcileAndLogDifference] The reconcile string is\n2016-04-22 19:51:13,811 WARN  com.netflix.discovery.DiscoveryClient:1296 [DiscoveryClient-CacheRefreshExecutor-0] [reconcileAndLogDifference] The Reconcile hashcodes after complete sync up, client : UP_1_, server : UP_1_.\n2016-04-22 19:51:14,036 INFO  com.netflix.eureka.registry.PeerAwareInstanceRegistryImpl:222 [Eureka-EIPBinder] [openForTraffic] Got 0 instances from neighboring DS node\n2016-04-22 19:51:14,036 INFO  com.netflix.eureka.registry.PeerAwareInstanceRegistryImpl:223 [Eureka-EIPBinder] [openForTraffic] Renew threshold is: 0\n2016-04-22 19:51:14,036 INFO  com.netflix.eureka.registry.PeerAwareInstanceRegistryImpl:231 [Eureka-EIPBinder] [openForTraffic] Priming AWS connections for all replicas..\n2016-04-22 19:51:14,036 INFO  com.netflix.eureka.registry.PeerAwareInstanceRegistryImpl:264 [Eureka-EIPBinder] [primeAwsReplicas] No peers needed to prime.\n2016-04-22 19:51:14,037 INFO  com.netflix.eureka.registry.PeerAwareInstanceRegistryImpl:234 [Eureka-EIPBinder] [openForTraffic] Changing status to UP\n```\n\nThis is the registration information from one of the Eureka nodes.\n\n```\n  <instance>\n      <instanceId>i-8371d13e</instanceId>\n      <hostName>10.0.1.5</hostName>\n      <app>EUREKA</app>\n      <ipAddr>10.0.1.5</ipAddr>\n      <status>UP</status>\n      <overriddenstatus>UNKNOWN</overriddenstatus>\n      <port enabled=\"true\">8080</port>\n      <securePort enabled=\"false\">443</securePort>\n      <countryId>1</countryId>\n      <dataCenterInfo class=\"com.netflix.appinfo.AmazonInfo\">\n        <name>Amazon</name>\n        <metadata>\n          <accountId>xxxxxxxxxxxxx</accountId>\n          <local-hostname>ip-10-0-1-5.eu-central-1.compute.internal</local-hostname>\n          <public-hostname>10.0.1.5</public-hostname>\n          <instance-id>i-8371d13e</instance-id>\n          <local-ipv4>10.0.1.5</local-ipv4>\n          <instance-type>t2.micro</instance-type>\n          <vpc-id>vpc-7a035213</vpc-id>\n          <ami-id>ami-bc5b48d0</ami-id>\n          <mac>02:4a:4e:75:bf:f9</mac>\n          <availability-zone>eu-central-1a</availability-zone>\n        </metadata>\n      </dataCenterInfo>\n      <leaseInfo>\n        <renewalIntervalInSecs>30</renewalIntervalInSecs>\n        <durationInSecs>90</durationInSecs>\n        <registrationTimestamp>1461354527294</registrationTimestamp>\n        <lastRenewalTimestamp>1461354646800</lastRenewalTimestamp>\n        <evictionTimestamp>0</evictionTimestamp>\n        <serviceUpTimestamp>1461354527294</serviceUpTimestamp>\n      </leaseInfo>\n      <metadata class=\"java.util.Collections$EmptyMap\"/>\n      <appGroupName>UNKNOWN</appGroupName>\n      <homePageUrl>http://10.0.1.5:8080/</homePageUrl>\n      <statusPageUrl>http://10.0.1.5:8080/Status</statusPageUrl>\n      <healthCheckUrl>http://10.0.1.5:8080/healthcheck</healthCheckUrl>\n      <vipAddress>eureka.mydomain.net</vipAddress>\n      <isCoordinatingDiscoveryServer>true</isCoordinatingDiscoveryServer>\n      <lastUpdatedTimestamp>1461354527294</lastUpdatedTimestamp>\n      <lastDirtyTimestamp>1461353686823</lastDirtyTimestamp>\n      <actionType>ADDED</actionType>\n    </instance>\n```\n\nThis is the Eureka dashboard \n\n```\n\nDS Replicas: ip-10-0-1-5.eu-central-1.compute.internalip-10-0-2-5.eu-central-1.compute.internal\nInstances currently registered with Eureka\nApplication AMIs    Availability Zones  Status\nApplication AMIs    Availability Zones  Status\nEUREKA  ami-bc5b48d0 (2),   eu-central-1a (1), eu-central-1b (1),   UP (2) - i-b0019a0c, i-8371d13e,\nGeneral Info\nName    Value\nenvironment test\nnum-of-cpus 1\ntotal-avail-memory  80mb\ncurrent-memory-usage    46mb (57%)\nserver-uptime   00:19\nregistered-replicas http://ip-10-0-1-5.eu-central-1.compute.internal:8080/eureka/v2/, http://ip-10-0-2-5.eu-central-1.compute.internal:8080/eureka/v2/\navailable-replicas  \nunavailable-replicas    http://ip-10-0-1-5.eu-central-1.compute.internal:8080/eureka/v2/,http://ip-10-0-2-5.eu-central-1.compute.internal:8080/eureka/v2/,\nInstance Info\nName    Value\npublic-ipv4 null\npublic-hostname 10.0.1.5\ninstance-id i-8371d13e\ninstance-type   t2.micro\nami-id  ami-bc5b48d0\nipAddr  10.0.1.5\nstatus  UP\navailability-zone   eu-central-1a\n```\n\nOne thing that I also noticed is that I have two Eureka servers so I am expecting to only see one registered replica. As you can see in that dashboard, there are two registered replicas. Somehow the Eureka server considers itself as it's own replica. I did not see that behavior when I use EIPs in public subnets.\n =||= I am curious about setting up eureka in VPC with private IPs - could you share how you set it up?\n =||= @jelez eureka servers are not really designed to operate with floating IPs, the servers themselves need to have fixed IPs (e.g. EIPs in aws) to work well.\n =||= I finally got this to work internally. It appears that the root cause is the fact that com.netflix.eureka.util.StatusUtil.isReplicaAvailable is comparing the values of serviceUrl param with the hostName in the registry. \n\nSince I am running Eureka cluster in a private subnet, the hostName in the registry is the private IP address (i.e. 10.0.0.5). In my original configuration, I had set up the Eureka nodes to use private DNS name (ip-1-0-0-5.region.compute.internal) as the serviceUrl. They don't match up, thus, the unavailable replicas.\n\nMy fix is to simply use the private IP addresses as the serviceUrls of the Eureka nodes.\n =||= @jelez We are using Elastic Network Interface to provide static private IP addresses. \n =||= @ervansetiawan  I am facing the same problem. I am not seeing any available replicas. This is my eureka client properties file. \r\n\r\n\r\nregistered-replicas | 172.X.X.X, 172.X.X.X, 172.X.X.X\r\n-- | --\r\navailable-replicas | \u00a0\r\nunavailable-replicas | 172.X.X.X,172.X.X.X,172.X.X.X\r\n\r\nI am not seeing the replicas and i found this error in the log file.\r\n\r\n2017-08-17 02:59:32,503 ERROR com.netflix.discovery.DiscoveryClient:943 [DiscoveryClient-CacheRefreshExecutor-0] [fetchRegistry] DiscoveryClient_EUREKALATEST/i-08a03bc3538034239 - was unable to refresh its cache! status = There is no known eureka server; cluster server list is empty\r\ncom.netflix.discovery.shared.transport.TransportException: There is no known eureka server; cluster server list is empty\r\n\r\nHere are my eureka client properties and server properties file.\r\n** cat eureka-client.properties\r\n##Eureka Client configuration for Eureka Service\r\n\r\n#Properties based configuration for eureka client. The properties specified here is mostly what the users\r\n#need to change. All of these can be specified as a java system property with -D option (eg)-Deureka.region=us-east-1\r\n\r\n#Region where eureka is deployed -For AWS specify one of the AWS regions, for other datacenters specify a arbitrary string\r\n#indicating the region.This is normally specified as a -D option (eg) -Deureka.region=us-east-1\r\n#eureka.region=us-east-1\r\neureka.region=${archaius.deployment.region}\r\neureka.us-east-1.availabilityZones=us-east-1b,us-east-1c,us-east-1d\r\n\r\n#Name of the application to be identified by other services\r\n\r\neureka.name=eurekalatest\r\neureka.serviceUrl.us-east-1b=172...*\r\neureka.serviceUrl.us-east-1c=172....\r\neureka.serviceUrl.us-east-1d=172....\r\n\r\n#Virtual host name by which the clients identifies this service\r\neureka.vipAddress=eureka.${aesd.archaius.deployment.domain}\r\n\r\n#The port where the service will be identified and will be serving requests\r\neureka.port=8080\r\n\r\n#For eureka clients running in eureka server, it needs to connect to servers in other zones\r\neureka.preferSameZone=false\r\n\r\n#Change this if you want to use a DNS based lookup for determining other eureka servers. For example\r\n#of specifying the DNS entries, check the eureka-client-test.properties, eureka-client-prod.properties\r\n#eureka.shouldUseDns=true\r\n\r\n#eureka.eurekaServer.domainName=${aesd.archaius.deployment.domain}\r\n\r\neureka.eurekaServer.context=eureka/v2\r\n\r\neureka.healthCheckUrl=http://${archaius.deployment.serverPrivIP}:8080/eureka/healthcheck\r\n\r\neureka.registration.enabled=false\r\n**\r\n =||= @qiangdavidliu eureka supports DNS querying mode, so i think floating IPs are valid option: https://github.com/Netflix/eureka/wiki/Deploying-Eureka-Servers-in-EC2#configuring-eips-using-dns =||= "], ["779", "update server build default props.", "David Liu", "qiangdavidliu", "04/18/16, 06:03:52 AM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #594](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/594/) FAILURE\nLooks like there's a problem with this pull request\n =||= [NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #595](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/595/) SUCCESS\nThis pull request looks good\n =||= "], ["780", "\"Cannot execute request on any known server\" when i set up a Eureka cluster by skyDns(2)", null, "fangzhining", "04/22/16, 06:45:49 AM", "After reading the solution of \n \"Cannot execute request on any known server\" when i set up a Eureka cluster by skyDns #777, i have  changed \"http://10.120.180.117:8080/discovery/v2/\" into \"http://10.120.180.117:8080/eureka/v2/\",but it does not work,i can't setup the cluster of eureka.\n\nThe Error log almost is the same.It can only find one txtRecord.\n\n2016-04-18 20:33:20,733 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver:40 [localhost-startStop-1] [getClusterEndpoints] Resolving eureka endpoints via DNS\nThe txtRecord is : us-east-1d.bar.skydns.paas\nThe cnamesString is : [us-east-1d.bar.skydns.paas]\nThe rootClusterDNS is : txt.us-east-1.bar.skydns.paas\nThe zoneDomain is : us-east-1d.bar.skydns.paas\nThe txtRecord is : http://10.120.180.117:8080/eureka/v2/\nThe cnamesString is : [http://10.120.180.117:8080/eureka/v2/]\nThe txtRecord is : http://10.120.180.117:8080/eureka/v2/\nThe cnamesString is : [http://10.120.180.117:8080/eureka/v2/]\nThe zoneAddresses is : http://10.120.180.117:8080/eureka/v2/\n2016-04-18 20:33:20,807 INFO com.netflix.discovery.DiscoveryClient:920 [localhost-startStop-1] [fetchRegistry] Disable delta property : false\n2016-04-18 20:33:20,807 INFO com.netflix.discovery.DiscoveryClient:921 [localhost-startStop-1] [fetchRegistry] Single vip registry refresh property : null\n2016-04-18 20:33:20,807 INFO com.netflix.discovery.DiscoveryClient:922 [localhost-startStop-1] [fetchRegistry] Force full registry fetch : false\n2016-04-18 20:33:20,807 INFO com.netflix.discovery.DiscoveryClient:923 [localhost-startStop-1] [fetchRegistry] Application is null : false\n2016-04-18 20:33:20,807 INFO com.netflix.discovery.DiscoveryClient:924 [localhost-startStop-1] [fetchRegistry] Registered Applications size is zero : true\n2016-04-18 20:33:20,808 INFO com.netflix.discovery.DiscoveryClient:926 [localhost-startStop-1] [fetchRegistry] Application version is -1: true\n2016-04-18 20:33:20,808 INFO com.netflix.discovery.DiscoveryClient:1009 [localhost-startStop-1] [getAndStoreFullRegistry] Getting all instance registry info from the eureka server\n2016-04-18 20:33:20,899 ERROR com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient:83 [localhost-startStop-1] [execute] Request execution error\ncom.sun.jersey.api.client.ClientHandlerException: java.net.UnknownHostException: http: unknown error\nat com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187)\nat com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123)\nat com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27)\nat com.sun.jersey.api.client.Client.handle(Client.java:652)\nat com.sun.jersey.api.client.WebResource.handle(WebResource.java:682)\nat com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)\nat com.sun.jersey.api.client.WebResource$Builder.get(WebResource.java:509)\nat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.getApplicationsInternal(AbstractJerseyEurekaHttpClient.java:194)\nat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.getApplications(AbstractJerseyEurekaHttpClient.java:165)\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\nat com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73)\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\nat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118)\nat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79)\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\nat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:119)\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\nat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\nat com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1013)\nat com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:927)\nat com.netflix.discovery.DiscoveryClient.(DiscoveryClient.java:441)\nat com.netflix.discovery.DiscoveryClient.(DiscoveryClient.java:304)\nat com.netflix.discovery.DiscoveryClient.(DiscoveryClient.java:300)\nat com.netflix.eureka.EurekaBootStrap.initEurekaServerContext(EurekaBootStrap.java:147)\nat com.netflix.eureka.EurekaBootStrap.contextInitialized(EurekaBootStrap.java:96)\nat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4812)\nat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5255)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:147)\nat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:725)\nat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:701)\nat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:717)\nat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:939)\nat org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1812)\nat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\nat java.util.concurrent.FutureTask.run(FutureTask.java:266)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\nat java.lang.Thread.run(Thread.java:745)\nCaused by: java.net.UnknownHostException: http: unknown error\nat java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)\nat java.net.InetAddress$2.lookupAllHostAddr(InetAddress.java:928)\nat java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1323)\nat java.net.InetAddress.getAllByName0(InetAddress.java:1276)\nat java.net.InetAddress.getAllByName(InetAddress.java:1192)\nat java.net.InetAddress.getAllByName(InetAddress.java:1126)\nat org.apache.http.impl.conn.SystemDefaultDnsResolver.resolve(SystemDefaultDnsResolver.java:44)\nat org.apache.http.impl.conn.DefaultClientConnectionOperator.resolveHostname(DefaultClientConnectionOperator.java:259)\nat org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:159)\nat org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144)\nat org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:131)\nat org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:611)\nat org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:446)\nat org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:863)\nat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:115)\nat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:57)\nat com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173)\n... 41 more\n2016-04-18 20:33:20,902 WARN com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient:129 [localhost-startStop-1] [execute] Request execution failure\n2016-04-18 20:33:20,903 ERROR com.netflix.discovery.DiscoveryClient:934 [localhost-startStop-1] [fetchRegistry] DiscoveryClient_EUREKA/SZV1000048538 - was unable to refresh its cache! status = Cannot execute request on any known server\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\nat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111)\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\nat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\nat com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1013)\nat com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:927)\nat com.netflix.discovery.DiscoveryClient.(DiscoveryClient.java:441)\nat com.netflix.discovery.DiscoveryClient.(DiscoveryClient.java:304)\nat com.netflix.discovery.DiscoveryClient.(DiscoveryClient.java:300)\nat com.netflix.eureka.EurekaBootStrap.initEurekaServerContext(EurekaBootStrap.java:147)\nat com.netflix.eureka.EurekaBootStrap.contextInitialized(EurekaBootStrap.java:96)\nat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4812)\nat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5255)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:147)\nat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:725)\nat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:701)\nat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:717)\nat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:939)\nat org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1812)\nat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\nat java.util.concurrent.FutureTask.run(FutureTask.java:266)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\nat java.lang.Thread.run(Thread.java:745)", "@fangzhining sorry about that, looks like when I fixed the documentation mistake on that page, I did not do it fully (update yet again). For the dns option, you only need the hostname in the records, and should not include \"http://\", the port, nor the \"eureka/v2\".\n =||= @qiangdavidliu ,thank you for you solution,but i hava done this too,the following are my attempts;\n**The first trying:**\nThe metadata in DNS:\ndig txt.us-east-1.bar.skydns.paas txt\n;; QUESTION SECTION:\n;txt.us-east-1.bar.skydns.paas. IN  TXT\n;; ANSWER SECTION:\ntxt.us-east-1.bar.skydns.paas. 3600 IN  TXT \"us-east-1d.bar.skydns.paas\"\ntxt.us-east-1.bar.skydns.paas. 3600 IN  TXT \"us-east-1c.bar.skydns.paas\"\n\ndig txt.us-east-1c.bar.skydns.paas txt\n;; QUESTION SECTION:\n;txt.us-east-1c.bar.skydns.paas.    IN  TXT\n;; ANSWER SECTION:\ntxt.us-east-1c.bar.skydns.paas. 3600 IN TXT \"10.120.180.235\"\n\ndig txt.us-east-1d.bar.skydns.paas txt\n;; QUESTION SECTION:\n;txt.us-east-1d.bar.skydns.paas.    IN  TXT\n;; ANSWER SECTION:\ntxt.us-east-1d.bar.skydns.paas. 3600 IN TXT \"10.120.180.117\"\n\n**The result:\nIt can only get  one eureka endpoints via DNS, and at last**\n2016-04-19 09:44:17,986 WARN  com.netflix.config.util.ConfigurationUtils:177 [localhost-startStop-1] [getConfigFromPropertiesFile] file:/usr/local/apache-tomcat-8.0.32/webapps/eureka/WEB-INF/classes/eureka-client.properties is already loaded\n2016-04-19 09:44:18,334 INFO  com.netflix.discovery.provider.DiscoveryJerseyProvider:70 [localhost-startStop-1] [<init>] Using JSON encoding codec LegacyJacksonJson\n2016-04-19 09:44:18,335 INFO  com.netflix.discovery.provider.DiscoveryJerseyProvider:71 [localhost-startStop-1] [<init>] Using JSON decoding codec LegacyJacksonJson\n2016-04-19 09:44:18,335 INFO  com.netflix.discovery.provider.DiscoveryJerseyProvider:80 [localhost-startStop-1] [<init>] Using XML encoding codec XStreamXml\n2016-04-19 09:44:18,335 INFO  com.netflix.discovery.provider.DiscoveryJerseyProvider:81 [localhost-startStop-1] [<init>] Using XML decoding codec XStreamXml\n2016-04-19 09:44:18,600 INFO  com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver:40 [localhost-startStop-1] [getClusterEndpoints] Resolving eureka endpoints via DNS\nThe txtRecord is : us-east-1c.bar.skydns.paas\nThe cnamesString is : [us-east-1c.bar.skydns.paas]\nThe rootClusterDNS is : txt.us-east-1.bar.skydns.paas\nThe zoneDomain is : us-east-1c.bar.skydns.paas\nThe txtRecord is : 10.120.180.235\nThe cnamesString is : [10.120.180.235]\nThe txtRecord is : 10.120.180.235\nThe cnamesString is : [10.120.180.235]\nThe zoneAddresses is : 10.120.180.235\n2016-04-19 09:44:18,646 INFO  com.netflix.discovery.DiscoveryClient:920 [localhost-startStop-1] [fetchRegistry] Disable delta property : false\n2016-04-19 09:44:18,646 INFO  com.netflix.discovery.DiscoveryClient:921 [localhost-startStop-1] [fetchRegistry] Single vip registry refresh property : null\n2016-04-19 09:44:18,646 INFO  com.netflix.discovery.DiscoveryClient:922 [localhost-startStop-1] [fetchRegistry] Force full registry fetch : false\n2016-04-19 09:44:18,646 INFO  com.netflix.discovery.DiscoveryClient:923 [localhost-startStop-1] [fetchRegistry] Application is null : false\n2016-04-19 09:44:18,647 INFO  com.netflix.discovery.DiscoveryClient:924 [localhost-startStop-1] [fetchRegistry] Registered Applications size is zero : true\n2016-04-19 09:44:18,647 INFO  com.netflix.discovery.DiscoveryClient:926 [localhost-startStop-1] [fetchRegistry] Application version is -1: true\n2016-04-19 09:44:18,647 INFO  com.netflix.discovery.DiscoveryClient:1009 [localhost-startStop-1] [getAndStoreFullRegistry] Getting all instance registry info from the eureka server\n\nthe response of \"http://10.120.180.117:8080/eureka/\"\nDS Replicas: 10.120.180.235\nInstances currently registered with Eureka\nApplication\n\nSearch Application\nAMIs\n\nSearch AMIs\nAvailability Zones\n\nSearch Availability Zones\nStatus\n\nSearch Status\nApplication AMIs    Availability Zones  Status\nNo data available in table\nGeneral Info\nName    Value\nenvironment prod\nnum-of-cpus 4\ntotal-avail-memory  567mb\ncurrent-memory-usage    237mb (41%)\nserver-uptime   00:02\nregistered-replicas http://10.120.180.235:8080/eureka/v2/\navailable-replicas  \nunavailable-replicas    http://10.120.180.235:8080/eureka/v2/,\nInstance Info\nName    Value\nipAddr  10.120.180.117\nstatus  UP\n\n**The Second trying:**\nThe metadata in DNS:\ndig txt.us-east-1.bar.skydns.paas txt\n;; QUESTION SECTION:\n;txt.us-east-1.bar.skydns.paas. IN  TXT\n;; ANSWER SECTION:\ntxt.us-east-1.bar.skydns.paas. 3600 IN  TXT \"us-east-1c.bar.skydns.paas\"\n\ndig txt.us-east-1c.bar.skydns.paas txt\n;; QUESTION SECTION:\n;txt.us-east-1c.bar.skydns.paas.    IN  TXT\n;; ANSWER SECTION:\ntxt.us-east-1c.bar.skydns.paas. 3600 IN TXT \"10.120.180.235 10.120.180.117\"\n\n**But the Domain Name Resolution is wrong, there will be get a extra \",like \nthe response of \"http://10.120.180.235:8080/eureka/\"**\n\nDS Replicas:\nInstances currently registered with Eureka\nApplication\n\nSearch Application\nAMIs\n\nSearch AMIs\nAvailability Zones\n\nSearch Availability Zones\nStatus\n\nSearch Status\nApplication AMIs    Availability Zones  Status\nNo data available in table\nGeneral Info\nName    Value\nenvironment prod\nnum-of-cpus 4\ntotal-avail-memory  562mb\ncurrent-memory-usage    317mb (56%)\nserver-uptime   00:01\nregistered-replicas http://\"10.120.180.235:8080/eureka/v2/, http://10.120.180.117\":8080/eureka/v2/\navailable-replicas  \nunavailable-replicas    http://\"10.120.180.235:8080/eureka/v2/,http://10.120.180.117\":8080/eureka/v2/,\nInstance Info\nName    Value\nipAddr  10.120.180.235\nstatus  UP\n\n2016-04-19 10:02:48,307 ERROR com.netflix.eureka.util.StatusUtil:72 [http-nio-8080-exec-6] [isReplicaAvailable] Could not determine if the replica is available\njava.net.URISyntaxException: Illegal character in authority at index 7: http://10.120.180.117\":8080/eureka/v2/\n\nif i set this in DNS ,the eureka can only find the IP \"10.120.180.235\"  like the first trying\uff1a\ndig txt.us-east-1c.bar.skydns.paas txt\n;; QUESTION SECTION:\n;txt.us-east-1c.bar.skydns.paas.    IN  TXT\n;; ANSWER SECTION:\ntxt.us-east-1c.bar.skydns.paas. 3600 IN TXT \"10.120.180.235\"\ntxt.us-east-1c.bar.skydns.paas. 3600 IN TXT \"10.120.180.117 \"\n\n**The Third trying:**\nThe metadata in DNS:\ndig txt.us-east-1.bar.skydns.paas txt\n;; QUESTION SECTION:\n;txt.us-east-1.bar.skydns.paas. IN  TXT\n;; ANSWER SECTION:\ntxt.us-east-1.bar.skydns.paas. 3600 IN  TXT \"us-east-1c.bar.skydns.paas\"\n\ndig txt.us-east-1c.bar.skydns.paas txt\n;; QUESTION SECTION:\n;txt.us-east-1c.bar.skydns.paas.    IN  TXT\n;; ANSWER SECTION:\ntxt.us-east-1c.bar.skydns.paas. 3600 IN TXT \" 10.120.180.235 10.120.180.117 \"\n\n**But the Domain Name Resolution is wrong, there will be get a extra \u201chttp://\":8080/eureka/v2/ \u201d,like \nthe response of \"http://10.120.180.235:8080/eureka/\"**\n\nDS Replicas: 10.120.180.23510.120.180.117\nInstances currently registered with Eureka\nApplication\n\nSearch Application\nAMIs\n\nSearch AMIs\nAvailability Zones\n\nSearch Availability Zones\nStatus\n\nSearch Status\nApplication AMIs    Availability Zones  Status\nEUREKA  n/a (2),    (2),    UP (2) - SZV1000048497, SZV1000048537,\nGeneral Info\nName    Value\nenvironment prod\nnum-of-cpus 4\ntotal-avail-memory  374mb\ncurrent-memory-usage    299mb (79%)\nserver-uptime   00:00\nregistered-replicas http://10.120.180.235:8080/eureka/v2/, http://\":8080/eureka/v2/, http://10.120.180.117:8080/eureka/v2/\navailable-replicas  \nunavailable-replicas    http://10.120.180.235:8080/eureka/v2/,http://\":8080/eureka/v2/,http://10.120.180.117:8080/eureka/v2/,\nInstance Info\nName    Value\nipAddr  10.120.180.235\nstatus  UP\n\nIs this the cluster of eureka?    if yes,how could i rm the http://\":8080/eureka/v2/ ?  \nwhen i use the  cluster of eureka ,are there will be any problems?\n =||= @fangzhining can you tell me which AwsBinder you are using? Are you using Route53 or EIP? Thanks.\n =||= @qiangdavidliu , i may have found what is wrong.i use skydns as my DNS,when i set the domain,it is not the format such as :\n**txt.us-east-1.mydomaintest.netflix.net=\"us-east-1c.mydomaintest.netflix.net\" \n\"us-east-1d.mydomaintest.netflix.net\" \"us-east-1e.mydomaintest.netflix.net\"**\nbut like this:\ncurl -XPUT http://127.0.0.1:4001/v2/keys/skydns/paas/skydns/bar/us-east-1/txt/x1 -d value='{\"text\":\"us-east-1c.bar.skydns.paas\",\"targetstrip\":1}'\ncurl -XPUT http://127.0.0.1:4001/v2/keys/skydns/paas/skydns/bar/us-east-1/txt/x2 -d value='{\"text\":\"us-east-1d.bar.skydns.paas\",\"targetstrip\":1}'\n\nand the function of  *_getCNamesFromTxtRecord in DnsResolver.java *_,always only find the first one.\n\nthen in order to adapt to the format, i set domain in skydns like this \uff1a\ncurl -XPUT http://127.0.0.1:4001/v2/keys/skydns/paas/skydns/bar/us-east-1/txt/x1 -d value='{\"text\":\"us-east-1c.bar.skydns.paas us-east-1d.bar.skydns.paas\",\"targetstrip\":1}'\n\nthere will be another problem,when the function of  **getCNamesFromTxtRecord in DnsResolver.java *\\*  run the code:**String[] cnames = txtRecord.split(\" \");**.\nthe cnames  is \uff1a[\"us-east-1d.bar.skydns.paas,us-east-1c.bar.skydns.paas\"]. it is not right.\n\nso, at last ,i change the function **getCNamesFromTxtRecord**,rm the \" in the element of cnames  ,it seems to be all right the result is as the following:\n\nthe response of http://10.120.180.235:8080/eureka/\n\nDS Replicas: 10.120.180.23510.120.180.11710.120.175.175\nInstances currently registered with Eureka\nApplication\n\nSearch Application\nAMIs\n\nSearch AMIs\nAvailability Zones\n\nSearch Availability Zones\nStatus\n\nSearch Status\nApplication AMIs    Availability Zones  Status\nEUREKA  n/a (3),    (3),    UP (3) - SZV1000048497, SZV1000048537, SZV1000048538,\nSAMPLEREGISTERINGSERVICE    n/a (1),    (1),    UP (1) - SZV1000048389,\nGeneral Info\nName    Value\nenvironment prod\nnum-of-cpus 4\ntotal-avail-memory  638mb\ncurrent-memory-usage    278mb (43%)\nserver-uptime   00:15\nregistered-replicas http://10.120.180.235:8080/eureka/v2/, http://10.120.180.117:8080/eureka/v2/, http://10.120.175.175:8080/eureka/v2/\navailable-replicas  \nunavailable-replicas    http://10.120.180.235:8080/eureka/v2/,http://10.120.180.117:8080/eureka/v2/,http://10.120.175.175:8080/eureka/v2/,\nInstance Info\nName    Value\nipAddr  10.120.180.235\nstatus  UP\n\nthe response of http://10.120.180.117:8080/eureka/\nDS Replicas: 10.120.180.23510.120.180.11710.120.175.175\nInstances currently registered with Eureka\nApplication\n\nSearch Application\nAMIs\n\nSearch AMIs\nAvailability Zones\n\nSearch Availability Zones\nStatus\n\nSearch Status\nApplication AMIs    Availability Zones  Status\nEUREKA  n/a (3),    (3),    UP (3) - SZV1000048497, SZV1000048537, SZV1000048538,\nSAMPLEREGISTERINGSERVICE    n/a (1),    (1),    UP (1) - SZV1000048389,\nGeneral Info\nName    Value\nenvironment prod\nnum-of-cpus 4\ntotal-avail-memory  632mb\ncurrent-memory-usage    277mb (43%)\nserver-uptime   00:15\nregistered-replicas http://10.120.180.235:8080/eureka/v2/, http://10.120.180.117:8080/eureka/v2/, http://10.120.175.175:8080/eureka/v2/\navailable-replicas  \nunavailable-replicas    http://10.120.180.235:8080/eureka/v2/,http://10.120.180.117:8080/eureka/v2/,http://10.120.175.175:8080/eureka/v2/,\nInstance Info\nName    Value\nipAddr  10.120.180.117\nstatus  UP\n =||= I'm having this same issue while using ActiveDirectory as my DNS server:\r\n\r\n```\r\n2017-12-21 17:43:45.457  WARN 3136 --- [nfoReplicator-0] c.n.d.s.t.d.RetryableEurekaHttpClient    : Request execution failed with message: Illegal character in authority at index 7: http://eureka02.mydomain.com\":8761\r\n2017-12-21 17:43:45.458  WARN 3136 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_UNKNOWN/eureka02.mydomain.com:8761 - registration failed Cannot execute request on any known server\r\n```\r\n\r\nNotice the quote appended to URL\r\nIs this just something which works in Route53 and not on other DNS servers?\r\n\r\n```\r\n[eureka02 eureka]# dig txt.office-1a.eureka.mydomain.com TXT\r\n; <<>> DiG 9.9.4-RedHat-9.9.4-51.el7 <<>> txt.office-1a.eureka.mydomain.com TXT\r\n;; QUESTION SECTION:\r\n;txt.office-1a.eureka.mydomain.com. IN TXT\r\n\r\n;; ANSWER SECTION:\r\ntxt.office-1a.eureka.mydomain.com. 38400 IN TXT \"eureka01.mydomain.com eureka02.mydomain.com\"\r\n```\r\n =||= I\u2019m having this same issue, when fix it?\r\nThe problem is in DnsResolver.getCNamesFromTxtRecord(), \r\n` \r\n  \r\n\r\n        if (attr != null) {\r\n            txtRecord = attr.get().toString();\r\n        }\r\n        Set<String> cnamesSet = new TreeSet<String>();\r\n        if (txtRecord == null || txtRecord.trim().isEmpty()) {\r\n            return cnamesSet;\r\n        }\r\n        String[] cnames = txtRecord.split(\" \");\r\n`\r\n\r\n` txtRecord = attr.get().toString(); ` =||= "], ["781", "2.x", "Lenny Beltr\u00e1n", "LennyZtyle", "04/21/16, 07:43:25 PM", "NaN", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #596](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/596/) FAILURE\nLooks like there's a problem with this pull request\n =||= @LennyZtyle eureka 2.x is not work that can be merged into 1.x (on master branch).\n =||= "], ["782", "No war file created for eureka 2 server", "Christian Schneider", "cschneider", "05/02/16, 07:46:48 AM", "The wiki says that I should have a eureka server war after the build.\n\nThe directory eureka/eureka2-server/build/libs only contains this though:\neureka2-server-2.0.0-SNAPSHOT.jar  eureka2-server-2.0.0-SNAPSHOT-javadoc.jar  eureka2-server-2.0.0-SNAPSHOT-sources.jar\n\nI build using  \n./gradlew build\n\nIs this a bug or is the documentation just not up to date?", "Hi @cschneider eureka2 is not a tomcat base application, so there is no war file generated. Having said this, the current stable eureka is the build on the master branch, which is the 1.x system. The 2.x system is currently not complete. Thanks.\n =||= I know 2.x is not yet released. We are currently evaluating registries and eureka 2 sounds quite good from the API perspective. \nDoes it make sense to already look into eureka2? Our product is going to go into production end of this year. Do you think eureka2 will be out until then?\nIf yes how do I start the server? I do not have the requirement for it to be a war.\n =||= "], ["783", "Unversioned user agent when shading eureka-client", "Matt Nelson", "mattnelson", "05/30/19, 11:09:53 PM", "When shading eureka-client the manifest is lost in favor of the parent. DiscoveryBuildInfo[1] assumes that the version can be obtained from the manifest. Which propagates itself as an unknown version on the client user agents[2].\n\n```\nJava-EurekaClient/v<version_unknown>\nJava-EurekaClient-Replication/v<version_unknown>\n```\n\nSince eureka is using the `nebula.netflixoss` plugin a `eureka-client.properties` file is dropped in `META-INF`, I tried to use that file as a drop in replacement of the manifest and found some issues[3]. Do you have a preference for the resolution?\n- Wait for gradle-info-plugin to be fixed, then use file as a `Manifest`\n- Use the `eureka-client.properties` as is and parse out `Implementation-Version`\n\n[1] https://github.com/Netflix/eureka/blob/v1.4.6/eureka-client/src/main/java/com/netflix/discovery/util/DiscoveryBuildInfo.java#L55\n[2] https://github.com/Netflix/eureka/blob/v1.4.6/eureka-client/src/main/java/com/netflix/discovery/shared/transport/jersey/EurekaJerseyClientImpl.java#L198\n[3] https://github.com/nebula-plugins/gradle-info-plugin/issues/28", "@mattnelson we are open to either resolution step, though I can foresee potential confusion w.r.t. option 2 as the (archaius based) configuration file for eureka is also called eureka-client.properties.\n =||= The `eureka-client.properties` file will be in the `META-INF` resource folder and while it is the same file name, it would take some work for a user to incidentally put this file on the archaius path. I'll get started on the plugin updates as that seems to be to most correct way to resolve this. I'll have a follow up PR to change eureka to fall back to `eureka-client.properties` once the plugin updates are available.\n =||= "], ["784", "Support healthy status on server StatusInfo", "Matt Nelson", "mattnelson", "09/23/16, 05:09:07 PM", "When one of the replicas is down the eureka server status should reflect that in the healthy flag on `StatusInfo` and `/eureka/v2/status` endpoint.", "[NetflixOSS \u00bb eureka \u00bb eureka-pull-requests #597](https://netflixoss.ci.cloudbees.com/job/NetflixOSS/job/eureka/job/eureka-pull-requests/597/) SUCCESS\nThis pull request looks good\n =||= @mattnelson sorry about missing this PR, not sure how I missed this.\n\nThe changes in general looks fine, though taking a look at the information exposed by StatusInfo (which is code that has been moved around a bunch of times now and is pretty old), the contract for isHealthy seems poorly defined. The isHealthy field should really only be applied to the local server itself, as at a cluster level, eureka is can still be considered \"healthy\" even with some down replicas.\n =||= The cluster health would depend on the deployment configuration? Using the EIP/DNS options would provide multiple levels of resiliency. Using the `eureka.serviceUrl` property could have huge impacts with a down replica.\n\nI think the `isHealthy` contract could be defined with the introduction of a new property which is the threshold of down replicas in which is it unhealthy due to the inability to replicate confidently.\n =||= If you are accessing eureka (server) through the provided eureka-client, then the theoretical threshold for DOWN replicas is pretty much n-1. There is a some load balancing built into the provided client such that they can handle parts of the server cluster being unavailable.\n\nThe replication protocol within eureka is a broadcast model, and hence as long as you have a single server standing, the cluster is \"ok\" (provided that this single server can handle the incoming requests of the world of course).\n =||= Hi @mattnelson , eureka is designed to be able to operate fully even when replicas are missing (as long as not all replicas are missing, and of course there are enough replicas to satisfy the data output bandwidth requirements). Replication is not tied to the number of replicas available so having downed replicas does not affect replication at a local level between the healthy replicas.\n\nI do agree fully with you that it would be very useful to have, from the status endpoint, a view of the cluster's health. However the current PR results in an \"unhealthy\" status for a given server, if peers of this server are unhealthy. This would be incorrect information per our discussions in this thread.\n\nHow would you like to proceed? You are more than welcome to update this PR to expand on the health status to expose cluster level health if you would like to define a cluster level down threshold. Alternatively we can close this PR for now, and start a new PR for that.\n\nThanks.\n =||= For the sake of not losing the context of this discussion. I will make the changes and update the PR. I will try to get the proposed changes done in the next couple of days.\n =||= Finally got around to making these changes in bf6aa56945abbb3c067f6c4ae492fbe5f95bf489\n- Went with an integer for the number of required up replicas since I think the common uses cases would be a relatively low number of replicas.\n- Couldn't come up with a good name for the property so looking for suggestions there.\n- Handles the default property value of 0 to remain passive with the current functionality of an unset healthy flag.\n =||= @mattnelson sorry didn't see this PR getting updated, some minor quibbles but LGTM.\n =||= @qiangdavidliu Addressed PR comments on bc336a27b5cb6ef45b4499c89f4e25d28ee07b9f\n =||= Not sure what caused the failure. I don't seem to be able to see the output of the travis build. I built the project locally several times to see if I could reproduce, but all the builds passed.\n =||= @mattnelson thanks, the failures are not your fault. Ever since we migrated to travisCI we've had these intermittent failures. Current theory is that the limited CPU that the travis containers are configured for are not enough for some of the multi-treading tests. I'll trigger some reruns for you.\n =||= @mattnelson the failures are actually due to one of the tests added:\n\n```\ncom.netflix.eureka.util.StatusUtilTest > testGetStatusInfoHealthy FAILED\n    java.lang.AssertionError at StatusUtilTest.java:28\n```\n =||= Figured out the failure reason. This branch wasn't rebased with the changes I introduced on #831.\n\nI cherry picked that commit over and fixed the tests.\n =||= Looks good, merged. Thanks.\n =||= "], ["785", "Improve documentation for the server configuration in the yml file.", "Andres Gomez", "agomezcafeto", "05/27/16, 08:41:39 PM", "I can not find any documentation about how to configure the eureka server, specifically, documentation related with the yml file.", "@agomezcafeto eureka does not use a yml based configuration. Currently, the configs are self documented in javadoc in EurekaServerConfig.java, and you can get some highlevel set up information from https://github.com/Netflix/eureka/wiki/Deploying-Eureka-Servers-in-EC2\n =||= "], ["786", "Adding some utilities", "David Liu", "qiangdavidliu", "05/10/16, 08:04:45 PM", "NaN", "NaN"], ["787", "Added ENI aws binder", null, "jc89", "05/18/16, 06:39:06 PM", "Added binder for aws elastic network interfaces.\nThis is done creating an AWSBinder and modifying the delegate to properly choose using the new binder strategy", "@jc89 thanks for the PR. Could you please also add some comments to specify what the expected DNS records would look like, and what tags the ENIs will need to be tagged with? Thanks.\n =||= @qiangdavidliu a few dns record examples:\n\ntxt.us-east-1.eureka=\"us-east-1a.eureka\" \"us-east-1b.eureka\"\ntxt.us-east-1a.eureka=\"ip-172-31-y-y.ec2.internal\"\ntxt.us-east-1b.eureka=\"ip-172-31-x-x.ec2.internal\"\n\nwhere \"ip-172-31-x-x.ec2.internal\" is the ENI private dns\n\nNo tags are requiered for the enis, just like with elastic ips, are deduced from service urls or dns records.\n\nI will add more later\n =||= If you'd like to configure it via service urls, the service urls should look like this\n\n```\neureka.awsBindingStrategy=ENI\neureka.serviceUrl.us-east-1a=http://ip-172-31-35-108.ec2.internal:7001/eureka/v2/\n```\n =||= Thanks again @jc89. Would you mind adding what you just described as javadoc comments to the Top of the ENIBinder class? That way the documentation will live with the code.\n\nOtherwise everything looks fine, and I'll merge this in as soon as you add the documentation.\n =||= @qiangdavidliu Done\n =||= @jc89 thanks for the contrib.\n =||= "], ["788", "Eureka Ribbon not working in Weblogic 12c server", null, "remesh22", "05/10/16, 02:27:27 PM", "I am not able to call a microservice from another service using RestTempale backed by ribbon.\nEverything works fine if i use Tomcat instead of weblogic. Is Ribbon supposed to work on weblogic?\n restTemplate.exchange() is giving me the following error:\n\njava.lang.IllegalStateException: Error processing condition on org.springframework.cloud.netflix.ribbon.eureka.EurekaRibbonClientConfiguration.ribbonPing\n    at org.springframework.boot.autoconfigure.condition.SpringBootCondition.matches(SpringBootCondition.java:64) ~[spring-boot-autoconfigure-1.3.2.RELEASE.jar:1.3.2.RELEASE]\n    at org.springframework.context.annotation.ConditionEvaluator.shouldSkip(ConditionEvaluator.java:102) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForBeanMethod(ConfigurationClassBeanDefinitionReader.java:178) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:140) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:116) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:333) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:243) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:273) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:98) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:678) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.__refresh(AbstractApplicationContext.java:520) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.jrLockAndRefresh(AbstractApplicationContext.java) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.cloud.netflix.ribbon.SpringClientFactory.createContext(SpringClientFactory.java:148) ~[spring-cloud-netflix-core-1.0.7.RELEASE.jar:1.0.7.RELEASE]\n    at org.springframework.cloud.netflix.ribbon.SpringClientFactory.getContext(SpringClientFactory.java:113) ~[spring-cloud-netflix-core-1.0.7.RELEASE.jar:1.0.7.RELEASE]\n    at org.springframework.cloud.netflix.ribbon.SpringClientFactory.getInstance(SpringClientFactory.java:181) ~[spring-cloud-netflix-core-1.0.7.RELEASE.jar:1.0.7.RELEASE]\n    at org.springframework.cloud.netflix.ribbon.SpringClientFactory.getLoadBalancer(SpringClientFactory.java:90) ~[spring-cloud-netflix-core-1.0.7.RELEASE.jar:1.0.7.RELEASE]\n    at org.springframework.cloud.netflix.ribbon.RibbonLoadBalancerClient.getLoadBalancer(RibbonLoadBalancerClient.java:108) ~[spring-cloud-netflix-core-1.0.7.RELEASE.jar:1.0.7.RELEASE]\n    at org.springframework.cloud.netflix.ribbon.RibbonLoadBalancerClient.getServer(RibbonLoadBalancerClient.java:97) ~[spring-cloud-netflix-core-1.0.7.RELEASE.jar:1.0.7.RELEASE]\n    at org.springframework.cloud.netflix.ribbon.RibbonLoadBalancerClient.choose(RibbonLoadBalancerClient.java:58) ~[spring-cloud-netflix-core-1.0.7.RELEASE.jar:1.0.7.RELEASE]\n    at org.springframework.cloud.netflix.ribbon.RibbonClientHttpRequestFactory.createRequest(RibbonClientHttpRequestFactory.java:62) ~[spring-cloud-netflix-core-1.0.7.RELEASE.jar:1.0.7.RELEASE]\n    at org.springframework.http.client.support.HttpAccessor.createRequest(HttpAccessor.java:77) ~[spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:592) ~[spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:557) ~[spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:475) ~[spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at com.vzw.prepay.client.RestTemplateClient.exchange(RestTemplateClient.java:28) ~[myv-prepay-common-1.0.0.jar:na]\n    at com.vzw.prepay.client.impl.PaymentServiceClientImpl.getPaymentHistory(PaymentServiceClientImpl.java:31) ~[_wl_cls_gen.jar:na]\n    at com.vzw.prepay.controller.PaymentController.getPaymentHistory(PaymentController.java:29) ~[_wl_cls_gen.jar:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_60]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_60]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_60]\n    at java.lang.reflect.Method.invoke(Method.java:497) ~[na:1.8.0_60]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:222) ~[spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137) ~[spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110) ~[spring-webmvc-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:814) ~[spring-webmvc-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:737) ~[spring-webmvc-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85) ~[spring-webmvc-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959) ~[spring-webmvc-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893) ~[spring-webmvc-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:969) ~[spring-webmvc-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:860) ~[spring-webmvc-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:687) ~[javax.servlet.javax.servlet-api.jar:3.1.0]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:845) ~[spring-webmvc-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) ~[javax.servlet.javax.servlet-api.jar:3.1.0]\n    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:286) ~[com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:260) ~[com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:137) ~[com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:350) ~[com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:25) ~[com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at org.springframework.boot.actuate.autoconfigure.EndpointWebMvcAutoConfiguration$ApplicationContextHeaderFilter.doFilterInternal(EndpointWebMvcAutoConfiguration.java:237) ~[spring-boot-actuator-1.3.2.RELEASE.jar:1.3.2.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at org.springframework.boot.actuate.trace.WebRequestTraceFilter.doFilterInternal(WebRequestTraceFilter.java:111) ~[spring-boot-actuator-1.3.2.RELEASE.jar:1.3.2.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at com.vzw.prepay.filter.AuthorizationFilter.doFilter(AuthorizationFilter.java:83) ~[myv-prepay-common-1.0.0.jar:1.0.0]\n    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:207) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:176) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) ~[spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262) ~[spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:87) ~[spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77) ~[spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:121) ~[spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at org.springframework.boot.actuate.autoconfigure.MetricsFilter.doFilterInternal(MetricsFilter.java:103) ~[spring-boot-actuator-1.3.2.RELEASE.jar:1.3.2.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at org.springframework.boot.context.web.ErrorPageFilter.doFilter(ErrorPageFilter.java:120) [spring-boot-1.3.2.RELEASE.jar:1.3.2.RELEASE]\n    at org.springframework.boot.context.web.ErrorPageFilter.access$000(ErrorPageFilter.java:61) [spring-boot-1.3.2.RELEASE.jar:1.3.2.RELEASE]\n    at org.springframework.boot.context.web.ErrorPageFilter$1.doFilterInternal(ErrorPageFilter.java:95) [spring-boot-1.3.2.RELEASE.jar:1.3.2.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.boot.context.web.ErrorPageFilter.doFilter(ErrorPageFilter.java:113) [spring-boot-1.3.2.RELEASE.jar:1.3.2.RELEASE]\n    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3654) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.__run(WebAppServletContext.java:3620) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:326) [com.oracle.weblogic.security.subject.jar:12.2.1.0]\n    at weblogic.security.service.SecurityManager.runAsForUserCode(SecurityManager.java:196) [com.oracle.weblogic.security.subject.jar:12.2.1.0]\n    at weblogic.servlet.provider.WlsSecurityProvider.runAsForUserCode(WlsSecurityProvider.java:203) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at weblogic.servlet.provider.WlsSubjectHandle.run(WlsSubjectHandle.java:71) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at weblogic.servlet.internal.WebAppServletContext.doSecuredExecute(WebAppServletContext.java:2423) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2280) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2258) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at weblogic.servlet.internal.ServletRequestImpl.runInternal(ServletRequestImpl.java:1626) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1586) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at weblogic.servlet.provider.ContainerSupportProviderImpl$WlsRequestExecutor.run(ContainerSupportProviderImpl.java:270) [com.oracle.weblogic.servlet.jar:12.2.1.0]\n    at weblogic.invocation.ComponentInvocationContextManager._runAs(ComponentInvocationContextManager.java:348) [com.bea.core.utils.full.jar:12.2.1.0]\n    at weblogic.invocation.ComponentInvocationContextManager.runAs(ComponentInvocationContextManager.java:333) [com.bea.core.utils.full.jar:12.2.1.0]\n    at weblogic.work.LivePartitionUtility.doRunWorkUnderContext(LivePartitionUtility.java:54) [com.oracle.weblogic.work.jar:12.2.1.0]\n    at weblogic.work.PartitionUtility.runWorkUnderContext(PartitionUtility.java:41) [com.bea.core.weblogic.workmanager.jar:12.2.1.0]\n    at weblogic.work.SelfTuningWorkManagerImpl.runWorkUnderContext(SelfTuningWorkManagerImpl.java:617) [com.bea.core.weblogic.workmanager.jar:12.2.1.0]\n    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:397) [com.bea.core.weblogic.workmanager.jar:12.2.1.0]\n    at weblogic.work.ExecuteThread.run(ExecuteThread.java:346) [com.bea.core.weblogic.workmanager.jar:12.2.1.0]\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.integration.config.ConsumerEndpointFactoryBean#0' is defined\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:698) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.boot.autoconfigure.condition.BeanTypeRegistry$DefaultBeanTypeRegistry.collectBeanNamesForTypeFromFactoryBeans(BeanTypeRegistry.java:214) ~[spring-boot-autoconfigure-1.3.2.RELEASE.jar:1.3.2.RELEASE]\n    at org.springframework.boot.autoconfigure.condition.BeanTypeRegistry$DefaultBeanTypeRegistry.getNamesForType(BeanTypeRegistry.java:202) ~[spring-boot-autoconfigure-1.3.2.RELEASE.jar:1.3.2.RELEASE]\n    at org.springframework.boot.autoconfigure.condition.OnBeanCondition.collectBeanNamesForType(OnBeanCondition.java:182) ~[spring-boot-autoconfigure-1.3.2.RELEASE.jar:1.3.2.RELEASE]\n    at org.springframework.boot.autoconfigure.condition.OnBeanCondition.collectBeanNamesForType(OnBeanCondition.java:187) ~[spring-boot-autoconfigure-1.3.2.RELEASE.jar:1.3.2.RELEASE]\n    at org.springframework.boot.autoconfigure.condition.OnBeanCondition.getBeanNamesForType(OnBeanCondition.java:171) ~[spring-boot-autoconfigure-1.3.2.RELEASE.jar:1.3.2.RELEASE]\n    at org.springframework.boot.autoconfigure.condition.OnBeanCondition.getMatchingBeans(OnBeanCondition.java:139) ~[spring-boot-autoconfigure-1.3.2.RELEASE.jar:1.3.2.RELEASE]\n    at org.springframework.boot.autoconfigure.condition.OnBeanCondition.getMatchOutcome(OnBeanCondition.java:113) ~[spring-boot-autoconfigure-1.3.2.RELEASE.jar:1.3.2.RELEASE]\n    at org.springframework.boot.autoconfigure.condition.SpringBootCondition.matches(SpringBootCondition.java:47) ~[spring-boot-autoconfigure-1.3.2.RELEASE.jar:1.3.2.RELEASE]\n    ... 104 common frames omitted", "Netflix doesn't maintain Spring Projects. You should probably report this here ttps://github.com/spring-cloud/spring-cloud-netflix/issues\n =||= Thanks.Reporting as an issue in htps://github.com/spring-cloud/spring-cloud-netflix/issues.\n =||= "], ["789", "Travis conversion", "Rob Spieldenner", "rspieldenner", "05/09/16, 09:54:56 PM", "NaN", "NaN"], ["790", "Fixing an edge case if dataCenterInfo is null or DataCenterInfo.Name is null", "David Liu", "qiangdavidliu", "05/11/16, 12:50:53 AM", "NaN", "lgtm \n =||= "], ["791", "Supplement to #790 to check for null for DataCenterInfo.getName()", "David Liu", "qiangdavidliu", "05/11/16, 01:21:56 AM", "NaN", "NaN"], ["792", "update gradle version and netflixoss version to be compatible with travisCI", "David Liu", "qiangdavidliu", "05/11/16, 05:23:21 AM", "NaN", "NaN"], ["793", "ignore javadoc errors (for now)", "David Liu", "qiangdavidliu", "05/11/16, 05:37:03 AM", "NaN", "NaN"], ["794", "minor test fix", "David Liu", "qiangdavidliu", "05/11/16, 05:58:29 AM", "NaN", "NaN"], ["795", "Using beta Travis trusty vm for builds (more cpu -> better for tests)", "David Liu", "qiangdavidliu", "05/18/16, 07:45:02 PM", "NaN", "NaN"], ["796", "API for delete application", "Beatrice Peng", "bebepeng", "06/03/16, 08:47:22 PM", "So we have found ourselves in the situation where somehow the instanceID registered has \"http://\" in it. We are unable to use the regular delete endpoint to get rid of it.  It would be nice to expose an endpoint that would delete the app or clear all instanceIDs.", "+1\n =||= @bebepeng @zgagnon  sorry for not taking a look at this issue earlier. Can you describe the issue you are seeing in a bit more detail? From what you describe, can I assume the \"http://\" of the id is what's preventing the DELETE request due to url parsing?\n\nIf that is the case, eureka have an internal eviction mechanism where if a heartbeat from a client source is missed for 3 consecutive times (using default config, this would be ~90s), then that entry will be evicted from the registry on the client side. Are you able to shutdown the client with bad instancesIds for that amount of time? If so, that will allow you to evict these client with bad ids.\n\nAs for defining instanceIds, as of release 1.2.5 there is a configuration option available to define a custom instanceid for the client instead of sourcing it automatically (see #553), and if you are using the default configuration options, the config setting is eureka.instanceId=some-id\n =||= Have resolved the issue.\n\nOur Eureka instance was in self-preservation mode due to a large number of instances being turned off at once. After manually deleting all extraneous instances that we could, the invalid id instance (http://127.0.0.1) failed its heartbeats and was removed. In this case, a different app had 50+ instances registered at one point (which were all disabled), and after removing them one-by-one, the problem resolved.\n\nWith either case, being able to delete the app would have made this a bit easier.\n =||= Glad to hear that issue is resolve on your end. Closing this issue.\n\nW.r.t. an API for application level deletion, agree that it would be useful in some cases. If there is some urgency to the desire of this feature, please feel free to make a PR to add it. Thanks.\n =||= "], ["797", "Add fail fast option to AmazonInfo init", "David Liu", "qiangdavidliu", "05/19/16, 07:00:44 PM", "Add fail fast option to AmazonInfo init (esp at bootstrap time) so that running with VPN will not unncecessarily cause long hang times waiting on each key's ReadTimeout.", "NaN"], ["798", "Update client initialization example", null, "fcjreed", "05/27/16, 10:25:57 PM", "Please update the example eureka client code to reflect the deprecated changes.", "Thanks, fix in #801\n =||= "], ["799", "The default jersey configuration makes the API logic unavailable", "\u5510\u76db\u519b", "tsjsdbd", "05/27/16, 08:48:56 PM", "Eureka server code [here](https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/resources/ApplicationsResource.java#L150): if http client don't want gzip response, then the server will return result uncompressed.\n\nbut when you try this feature, it always return compressed result with Gzip\u3002\n\nafter some investgation, i find the default jersey configuration let jersey always compress the response content.\n1. [configuration1](https://github.com/Netflix/eureka/blob/bee851e469d0b0d7964743eb24d4ae52d23f0984/eureka-server-governator/src/main/java/com/netflix/eureka/EurekaInjectorCreator.java#L45)\n2. [configuration2](https://github.com/Netflix/eureka/blob/master/eureka-server/src/main/webapp/WEB-INF/web.xml#L48)\n@qizha", "@tsjsdbd thanks for noting this. What you say is correct. From the server side logic, gzip or not is an option governed by accept encoding. However the default server build contains, as a default filter, the Gzip encoding filter that gzips all responses regardless of accept encoding.\n\nInternally, our usage levels are so high that is not realistic to produce unzip responses for any request, hence the default this way as a server side guard against all incoming requests.\n\nIf you do need the ability to return zipped or unzipped data depending on accept encoding, please edit your server build to remove the default usage of the gzip filter.\n =||= thanks for kindly reply, I agree that no need to return unzipped data for most scenario.\nbut on another hand, if the low level implementation finished the job about the feature, the appliacation level should no do it again, just focus on application logic maybe is more concise :-) \n(it have a little code deal with the HTTP header, and judge whether compress the response, and some code for compress algorithm)\n =||= "], ["800", "Handle on demand update within InstanceInfoReplicator initial delay", "Matt Nelson", "mattnelson", "05/27/16, 08:24:53 PM", "When performing an on demand status update within the InstanceInfoReplicator start's initial delay the originally scheduled task is not cancelled which results in two scheduled tasks being executed for the life of the process.", "@mattnelson thanks for the fix!\n =||= "], ["801", "remove deprecated code form examples", "David Liu", "qiangdavidliu", "05/27/16, 10:25:53 PM", "NaN", "lgtm\n =||= "], ["802", "race condition when registering instance ?", "De Simone Alessandro", "alessnet", "08/22/16, 10:27:49 PM", "Hello,\n\nI'm using the REST api to register my service in Eureka.\nThere is a case when one of my Eureka server doesn't see the latest status of my registered service.\n\nLet's say I have two Eureka instances MACHINE1 and MACHINE2.\nWhen my service starts, it takes the first available server (MACHINE1) and does a register (POST /v2/apps/myservice) with the status \"STARTING\".\n\nThe service does start and then register again with the status \"UP\".\nIf for any reason (let's say a connection issue) the second call to register is done on MACHINE2 right after the first call, then the service is seen as \"STARTING\" on MACHINE2 and \"Up\" on MACHINE1, no matter how long we wait (heartbeats are sent).\n\nIn the logs of MACHINE2, I have the following warning:\n\n> 2016-05-31 09:04:38,614 INFO  com.netflix.eureka.registry.AbstractInstanceRegistry:266 [http-nio-8080-exec-44] [register] Registered instance myservice/inst1 with status UP (replication=false)\n> \n> 2016-05-31 09:04:39,098 WARN  com.netflix.eureka.registry.AbstractInstanceRegistry:209 [http-nio-8080-exec-3] [register] **There is an existing lease and the existing lease's dirty timestamp 1464710678627 is greater than the one that is being registered 1464710678020**\n> \n> 2016-05-31 09:04:39,098 INFO  com.netflix.eureka.registry.AbstractInstanceRegistry:266 [http-nio-8080-exec-3] [register] Registered instance myservice/inst1 with status STARTING (replication=true)\n> \n> 2016-05-31 09:06:37,723 INFO  com.netflix.eureka.registry.AbstractInstanceRegistry:330 [http-nio-8080-exec-32] [internalCancel] Cancelled instance myservice/inst1 (replication=false)\n\nIf I wait 5 seconds between \"Starting\" and \"Up\", the issue disappears.\n\nSo I suppose that the second register call is processed BEFORE the replication takes place. When the registration takes place, the \"expired\" registration is kept anyway (ignoring dirty timestamp). I'm using Eureka 1.4.8.\n\n```\nif (existingLease != null && (existingLease.getHolder() != null)) {\n                Long existingLastDirtyTimestamp = existingLease.getHolder().getLastDirtyTimestamp();\n                Long registrationLastDirtyTimestamp = r.getLastDirtyTimestamp();\n                logger.debug(\"Existing lease found (existing={}, provided={}\", existingLastDirtyTimestamp, registrationLastDirtyTimestamp);\n                if (existingLastDirtyTimestamp > registrationLastDirtyTimestamp) {\n                    logger.warn(\"There is an existing lease and the existing lease's dirty timestamp {} is \" +\n                                    \"greater than the one that is being registered {}\",\n                            existingLastDirtyTimestamp,\n                            registrationLastDirtyTimestamp);\n                    r.setLastDirtyTimestamp(existingLastDirtyTimestamp);\n                }\n```\n\nCan you please explain if I made something wrong or if indeed Eureka doesn't handle this well ?\n\nThank you,\n\nAlessandro De Simone", "@alessnet are you using eureka via direct REST requests, and not through the provided eureka-client? There are a few subtleties in the way registrations are handled by eureka, that is usually abstracted away by using the client. Primarily, these are:\n- the client contains a eureka specific loadbalancer for talking to the server cluster, such that it minimises target switches for a given client:server pair.\n- the client abstract away the usage of the InstanceInfo.lastDirtyTimestamp field in the registration protocol, which is used to provide linearization for registration events even if they end up going to different eureka servers.\n =||= @qiangdavidliu\n\nI'm using the REST API in C#. Using the java client (event in a separate process) not an option unfortunately.\n\nI'm specifying the dirtytimestamp myself during registration at client side (in case the timers on the two eureka servers are slightly off). But the issue persists if I don't specify it. What should I put in this field ?\n\nI agree that a correct load balancer will minimize switches and will try to stick to MACHINE1 for the second register. But in my understanding you can still have this issue in real live production. If MACHINE1 doesn't answer to the second register, the load balancer will redirect the call to MACHINE2. If the replication between MACHINE1 and MACHINE2 is slow for some reason, you will end up with the exact same situation where the second register is discarded on MACHINE2 after the replication.\n\nCan you please explain me how the java client handles this situation ? (or lead me more precisely to the source file). \n\nThank you ! :)\n =||= @alessnet the lastDirtyTimestamp is intended to be supplied at the client side (and is what the java client does, see [InstanceInfoReplicator.java](https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/InstanceInfoReplicator.java) for code and also comments on client registration logic).\n\nSince this intended to be client generated (and guaranteed at the client side to be serialized), it is possible to use this value as the mechanism to serialize write operations (register, update and cancel). The server side replication logic also utilize the dirtyTimestamp to deal with conflict as you described.\n =||= @qiangdavidliu\n\nFirst of all, thank you for taking the time to answer my questions :)\n\nI'm sending a dirty timestamp and commands are correctly serialized at clientside (so the second register is correctly sent after the first one correctly finished). This is similar to your java code, so I can assure you that I don't make two write operations in parallel.\n\nThe only difference I see is that every command is delayed by x seconds while my implementation does not. And that was my original question : if you say that the race condition I had could be avoided only by delaying each command, how is that possible? There always could be a lag/partition in the network that could last longer that the chosen delay. Waiting at client side to hope for a correct sync between replicas seems wrong.\n\n> The server side replication logic also utilize the dirtyTimestamp to deal with conflict as you described.\n\nIn the log I have attached, you see that one of the server (which will end up showing the wrong state) print a warning about a old dirtytimestamp (replication=true). If I understand this correctly, in  [AbstractInstanceRegistry](https://github.com/Netflix/eureka/blob/da2f9e5bcf2503487a52d839093f039bea065af2/eureka-core/src/main/java/com/netflix/eureka/registry/AbstractInstanceRegistry.java#L208) the server takes the expired entry (\"STARTING\") anyway but keep the more recent dirtystimestamp (the one of the \"UP\"). It seems that If the server had ignored this expired command, the server would have kept the \"UP\" as expected.\n\nWhen this occurs, no matter how much time I wait, the two servers doesn't see the same status. Why is this related to the client and why the servers cannot agree of the final status?\n =||= @alessnet sorry about only getting back to you now, I was away for a bit.\n\nI did some more digging into the code, and I think you are correct in saying that (if using the REST api directly), there is a potential registration race condition where if two successive registration requests landed on different machines and happen fast enough such that replication has not yet occurred between the two machines, it may lead to the inconsistency you observed. I believe the provided java client's error handling (inadvertently) guards against this which is why we have not seen it in our production systems.\n\nI'm going to see if I can repro this and work on a fix if it is confirmed. Thanks again for point this out!\n =||= Hi @qiangdavidliu, did you manage to reproduce this?\n =||= Hi @alessnet we have not had time to work on this unfortunately. Will see if we can try to repro this this week.\n =||= @alessnet I've semi-verified it via the above PR, and will be doing some tests in our test and prod environments before confirming.\n =||= Fixed in release 1.4.9\n =||= Actually 1.4.9 provided a mechanism to \"fix\" this, but has not defaulted it yet. Will keep this open until we switch the defaults over.\n =||= Released in 1.4.11\n =||= "], ["803", "Eureka Peer Server throwing java.lang.NullPointerException: null at com.netflix.eureka.registry.AbstractInstanceRegistry.renew", "Jose A. I\u00f1igo", "codependent", "06/22/16, 05:54:59 AM", "I am using Spring Cloud Netflix to run two Eureka (1.4.6) servers with peer awareness and found this issue after their last API upgrade:\n\n```\njava.lang.NullPointerException: null\n    at com.netflix.eureka.registry.AbstractInstanceRegistry.renew(AbstractInstanceRegistry.java:379) ~[eureka-core-1.4.6.jar:1.4.6]\n    at com.netflix.eureka.registry.PeerAwareInstanceRegistryImpl.renew(PeerAwareInstanceRegistryImpl.java:401) ~[eureka-core-1.4.6.jar:1.4.6]\n    at org.springframework.cloud.netflix.eureka.server.InstanceRegistry.renew(InstanceRegistry.java:127) ~[spring-cloud-netflix-eureka-server-1.1.0.RELEASE.jar:1.1.0.RELEASE]\n    at com.netflix.eureka.resources.InstanceResource.renewLease(InstanceResource.java:112) ~[eureka-core-1.4.6.jar:1.4.6]\n    at com.netflix.eureka.resources.PeerReplicationResource.handleHeartbeat(PeerReplicationResource.java:148) ~[eureka-core-1.4.6.jar:1.4.6]\n    at com.netflix.eureka.resources.PeerReplicationResource.dispatch(PeerReplicationResource.java:113) ~[eureka-core-1.4.6.jar:1.4.6]\n    at com.netflix.eureka.resources.PeerReplicationResource.batchReplication(PeerReplicationResource.java:85) ~[eureka-core-1.4.6.jar:1.4.6]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_74]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_74]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_74]\n    at java.lang.reflect.Method.invoke(Unknown Source) ~[na:1.8.0_74]\n```\n\n[Here are the details](https://github.com/spring-cloud/spring-cloud-netflix/issues/1065) to reproduce the problem.", "I sent him here as the NPE is in pure eureka code \n =||= Thanks @spencergibb. Looking at the the issue on the spring cloud netflix issue and the code, I see that the NPE is due to an out of order creation of a metrics counter. This is a harmless NPE that should only happen at init time. We will take a look at a simple PR to address this regardless.\n\nThe details: this is caused due to the second server not completing initialization (specifically, the openForTraffic() method on the local registry that creates the metrics counter in question) before having the first server heartbeat to the second server, and trying to log the renew metrics on an as yet non-existent metrics counter.\n =||= Fix will be available in the next release.\n =||= "], ["804", "How long is the registration information retained on the client side after eureka server closed", null, "magicDong88", "06/22/16, 05:55:05 AM", "Application(A) as a service was registered in the eureka server, so another application(B) was able to call the service (A) by eureka client. Then I shutdown the eureka server, What I'm confused about is that the app(B) still was able to call the service(A) during about 30 seconds. \nCould you please explain how long is the registration information retained on the client side after eureka server closed and which property affect the duration.\nThank you,", "Hi, if you are using the provided java eureka-client, then the registry cache on the client side will be forever and does not expire. The data will update if (at least one) eureka server exist and is reachable, and if no eureka servers exist, then the cache will essentially be frozen in time. Note that the default DiscoveryClient.java implementation offers the method getLastSuccessfulRegistryFetchTimePeriod() for users to monitor for staleness of the local registry cache.\n\nIf by closing the server, you mean the shutdown of the server for Application(A), then the entries for Application(A) will be purged from the local cache of the client on Application(B). The time delays are:\n\nA shutdown gracefully -> eureka server removes entries for A (0s delay)\nA has a dirty shutdown -> eureka server evicts entries for A (90s delay)\n        +\nB cache update -> B see cache update for removal of A (0-30s cache refresh cycle)\n\nAlso please note that if you run with a small number if instances, you may be subject to self-preservation as described here (https://github.com/Netflix/eureka/wiki/Understanding-Eureka-Peer-to-Peer-Communication), and may want to tune the self-preservation thresholds as necessary.\n =||= "], ["805", "! Fix erroneous connectionIdleTimeout value", "Vincent Seguin", "vseguin", "06/14/16, 10:03:45 PM", "This commit is related to issue [https://github.com/spring-cloud/spring-cloud-netflix/issues/729](https://github.com/spring-cloud/spring-cloud-netflix/issues/729).\n\nWhen overriding the connectionIdleTimeout value, it was erroneously using a seconds value, although default value is in milliseconds.", "@vseguin thank you for the fix!\n =||= "], ["806", "Fix (harmless) NPE at server startup due to init order on a metrics counter", "David Liu", "qiangdavidliu", "06/16/16, 08:22:14 PM", "#803", "hey David, I can see that this change will fix the NPE problem, but wanted to suggest that an underlying problem is still present.  It looks like the root issue is that MeasuredRate doesn't manage its resources (Timer, TimerTask) in a way that's compatible with AbstractInstanceRegistry.  Since MeasuredRate starts its internal timer in construction, AbstractInstanceRegistry can't instantiate it until 'postInit' and that led to the NPE you fixed.  \nIf MeasuredRate had lifecycle methods (start, stop) to handle timer activity, then it could be constructed immediately by AbstractInstanceRegistry and avoid NPEs altogether.  Additionally the 'stop' method would enable AbstractInstanceRegistry to free up its resources on shutdown().\n =||= looks good.  I had one comment on use of 'volatile' but not a blocker.\n =||= "], ["807", "Prefer javax.inject provider over guice", "Matt Nelson", "mattnelson", "06/17/16, 10:15:51 PM", "The guice provider[1] has been updated to extend the javax.inject provider. When supplying a custom provider such as the health check handler provider the contract can be relaxed to the base type.\n\n[1] http://static.javadoc.io/com.google.inject/guice/4.0/com/google/inject/Provider.html\n[2] https://github.com/Netflix/eureka/blob/v1.4.8/eureka-client/src/main/java/com/netflix/discovery/DiscoveryClient.java#L255-260", "We have to do some odd workarounds for eureka's guice dependency sometimes https://github.com/spring-cloud/spring-cloud-netflix/commit/89e893fc9bfcbbd4fb531453430638d25ea8ee41\n =||= Addressed with #808 \n =||= "], ["808", "Prefer javax.inject Provider over guice Provider for #807", "Matt Nelson", "mattnelson", "06/16/16, 09:51:41 PM", "Made the changes to prefer the javax.inject Provider over the guice Provider where possible. The remaining usages of the guice provider are blocked by https://github.com/google/guice/pull/926.", "Thanks @mattnelson \n =||= "], ["809", "Deploy on Wildfly", "Kennedy Oliveira", "kennedyoliveira", "07/12/16, 08:05:08 PM", "Hi everyone,\n\ni tried to deploy the eureka-server on Wildfly, but it's not working, i think there's something with Jersey, i don't have knowledge about Jersey, so my doubt is, it's possible to deploy it on Wildfly? \n\nThere's something special about using Jersey instead of another JAX-RS implementation?\n\nBy the way, the problem deploying on Wildfly is: \n\n```\n2016-06-17 00:56:00,823 INFO  com.sun.jersey.server.impl.application.WebApplicationImpl:815 [default task-2] [_initiate] Initiating Jersey application, version 'Jersey: 1.19 02/11/2015 03:25 AM'\n2016-06-17 00:56:01,054 ERROR com.sun.jersey.server.impl.application.RootResourceUriRules:98 [default task-2] [<init>] The ResourceConfig instance does not contain any root resource classes.\n00:56:01,056 ERROR [io.undertow.request] (default task-2) UT005023: Exception handling request to /eureka/v2/apps/: com.sun.jersey.api.container.ContainerException: The ResourceConfig instance does not contain any root resource classes.\n    at com.sun.jersey.server.impl.application.RootResourceUriRules.<init>(RootResourceUriRules.java:99)\n    at com.sun.jersey.server.impl.application.WebApplicationImpl._initiate(WebApplicationImpl.java:1359)\n    at com.sun.jersey.server.impl.application.WebApplicationImpl.access$700(WebApplicationImpl.java:180)\n    at com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:799)\n    at com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:795)\n    at com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:193)\n    at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:795)\n    at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:790)\n    at com.sun.jersey.spi.container.servlet.ServletContainer.initiate(ServletContainer.java:509)\n    at com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:339)\n    at com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:605)\n    at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:207)\n    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:394)\n    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:744)\n    at io.undertow.servlet.core.LifecyleInterceptorInvocation.proceed(LifecyleInterceptorInvocation.java:111)\n    at org.wildfly.extension.undertow.security.RunAsLifecycleInterceptor.init(RunAsLifecycleInterceptor.java:84)\n    at io.undertow.servlet.core.LifecyleInterceptorInvocation.proceed(LifecyleInterceptorInvocation.java:97)\n    at io.undertow.servlet.core.ManagedFilter.createFilter(ManagedFilter.java:79)\n    at io.undertow.servlet.core.ManagedFilter.getFilter(ManagedFilter.java:65)\n    at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:60)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n    at com.netflix.eureka.GzipEncodingEnforcingFilter.doFilter(GzipEncodingEnforcingFilter.java:48)\n    at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:60)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n    at com.netflix.eureka.ServerRequestAuthFilter.doFilter(ServerRequestAuthFilter.java:52)\n    at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:60)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n    at com.netflix.eureka.StatusFilter.doFilter(StatusFilter.java:68)\n    at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:60)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n    at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)\n    at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\n    at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\n    at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:131)\n    at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\n    at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\n    at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\n    at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\n    at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\n    at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:284)\n    at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:263)\n    at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:81)\n    at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:174)\n    at io.undertow.server.Connectors.executeRootHandler(Connectors.java:202)\n    at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:793)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n\n2016-06-17 00:56:01,092 WARN  com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient:127 [ServerService Thread Pool -- 5] [execute] Request execution failure with status code 500; retrying on another server if available\n2016-06-17 00:56:01,092 ERROR com.netflix.discovery.DiscoveryClient:951 [ServerService Thread Pool -- 5] [fetchRegistry] DiscoveryClient_EUREKA/MacBook.local - was unable to refresh its cache! status = Cannot execute request on any known server\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\n    at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\n    at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n    at com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1030)\n    at com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:944)\n    at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:444)\n    at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:304)\n    at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:300)\n    at com.netflix.eureka.EurekaBootStrap.initEurekaServerContext(EurekaBootStrap.java:147)\n    at com.netflix.eureka.EurekaBootStrap.contextInitialized(EurekaBootStrap.java:96)\n    at io.undertow.servlet.core.ApplicationListeners.contextInitialized(ApplicationListeners.java:187)\n    at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:198)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:100)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:82)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n    at org.jboss.threads.JBossThread.run(JBossThread.java:320)\n2016-06-17 00:56:01,093 WARN  com.netflix.discovery.DiscoveryClient$1:325 [ServerService Thread Pool -- 5] [get] Using default backup registry implementation which does not do anything.\n```", "@kennedyoliveira unfortunately we have not tried out any deployments on Wildfly, and I am not sure if any one in the community have tried this either. It might be worth while asking this question in the Eureka Google Group to see if anyone from the community respond.\n =||= "], ["810", "Old 'javax.ws.rs' library", "Waldemar Rittscher", "Writtscher", "06/28/16, 09:36:34 PM", "I've come across some nasty dependency clashes by using eureka-client jar and some newer libraries. Eureka-Client jar does depend on **jsr311** which is the old specification. Some of my dependecies do require **javax.ws.rs-api** which is the new one. For example **javax.ws.core.Response** is different in the new version and this causes some troubles for me. I've exluded the old one but this is just a ticking bomb.\n\nAre there plans to migrate to the new api specification?", "@Writtscher we have decided to take a different direction and will be making the client side of eureka independent of jaxrs completely. Work is being done internally, however we don't have any timelines that can be shared as of yet.\n =||= Well thanks for the quick answer. I'm fine for now pulling the new library and exclude the _jsr311_ dependecy as there is no failure at the moment. \n =||= "], ["811", "Fixing a potential registration race condition as described in issue #802", "David Liu", "qiangdavidliu", "06/28/16, 09:36:15 PM", "issue #802\n\nEnable new behaviour via:\neureka.experimental.registry.registration.ignoreIfDirtyTimestampIsOlder=true", "NaN"], ["812", "com.netflix.eureka.shouldSSLConnectionsUseSystemSocketFactory not working", "bitsofinfo", "bitsofinfo", "07/14/16, 05:20:10 PM", "on 1.4.8\n\nWhen this `DiscoveryClient` constructor is invoked\n\n`public DiscoveryClient(ApplicationInfoManager applicationInfoManager, final EurekaClientConfig config, DiscoveryClientOptionalArgs args) {`\n\nThe system property `com.netflix.eureka.shouldSSLConnectionsUseSystemSocketFactory=true` does not seem to be obeyed.\n\nTrying to solve this kind of exception:\n\n```\n2016-07-05 18:53:58.676  INFO 655 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_MYAPP/hosa222:myapp-config:8888: registering service...\n2016-07-05 18:53:58.683 ERROR 655 --- [nfoReplicator-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error\n\ncom.sun.jersey.api.client.ClientHandlerException: javax.net.ssl.SSLException: Certificate for <localhost> doesn't match common name of the certificate subject: my-ssl-test\n        at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187) ~[jersey-apache-client4-1.19.1.jar:1.19.1]\n        at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123) ~[jersey-client-1.19.1.jar:1.19.1]\n        at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27) ~[eureka-client-1.4.8.jar:1.4.8]\n        at com.sun.jersey.api.client.Client.handle(Client.java:652) ~[jersey-client-1.19.1.jar:1.19.1]\n        at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682) ~[jersey-client-1.19.1.jar:1.19.1]\n        at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74) ~[jersey-client-1.19.1.jar:1.19.1]\n        at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:570) ~[jersey-client-1.19.1.jar:1.19.1]\n        at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.register(AbstractJerseyEurekaHttpClient.java:56) ~[eureka-client-1.4.8.jar:1.4.8]\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.4.8.jar:1.4.8]\n        at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.4.8.jar:\n```\n\nThis is set on `EurekaClientFactoryBuilder` the via the deprecated setter `withSystemSSLConfiguration`... but the executing code making the http call is consuming from `EurekaJerseyClientImpl.EurekaJerseyClientBuilder.MyDefaultApacheHttpClient4Config` where the value is false.\n\nSeems like the bug is in the `buildLegacy` method of `JerseyEurekaHttpClientFactoryBuilder`", "@bitsofinfo thanks. PR #813 should be a fix.\n =||= Thank you, such a quick response. Thanks man\n =||= @bitsofinfo give 1.4.10-rc.1 a try and see if it fixes your issue?\n =||= thanks, Yes I ran the 1.4.10-rc.1 in a debugger in my app and now it properly invokes `createSystemSslCM()`  when `buildLegacy` is invoked. \n\n@qiangdavidliu Quick question, what would be the best strategy to have this use a custom HostnameVerifier? I don't see a way to configure that. Should I open a separate ticket?\n =||= @Jumpy-Squirrel does this solve your issue at: https://github.com/spring-cloud/spring-cloud-netflix/issues/1077\n =||= Closing this issue as the specific issue to address is resolved. Custom hostname verifier is tracked in #816.\n =||= "], ["813", "Propagate systemSSL config for client all the way through", "David Liu", "qiangdavidliu", "07/06/16, 09:48:42 PM", "Fix for #812", "NaN"], ["814", "Eureka Server Basic HTTP Auth configuration", "Moiz Khan", "moizkhan2712", "08/24/16, 12:45:28 PM", "Hi,\n\nI've managed to get multiple Eureka servers up, running and synchronized without issue. Looking at the docs,class definitions and other forum posts, there doesn't seem to be a clear way to implement HTTP authentication server-side. Is this possible at all or not? It looks to be possible in the spring-cloud-netflix eureka repo from this [post](http://stackoverflow.com/questions/28974752/securing-eureka-in-spring-cloud).\n\nThanks & Regards,\nMoiz Khan", "@moizkhan2712 our internal set-up do SSL via fronting the eureka tomcat servers with an apache layer.\n =||= "], ["815", "client for elasticsearch", "Krishna Gangaraju", "gangakrishh", "07/12/16, 07:58:37 PM", "Do we've any plugin or client for elasticsearch to be register with Eureka?", "https://github.com/Netflix/Raigad is one possible solution.\n =||= "], ["816", "Add support for custom HostnameVerifier", "bitsofinfo", "bitsofinfo", "05/30/19, 11:09:53 PM", "There seems to be no way to specify a custom HostnameVerifier for the DiscoveryClient.\n\nCan this support be easily added?\n\nSee #812 ", "Hi @bitsofinfo that sounds like a useful addition for eureka. We are a bit swamped with other work at this moment, would you like to try a PR for this feature? Thanks.\n =||= This has been released with 1.8.5\r\n\r\nhttps://github.com/Netflix/eureka/releases/tag/v1.8.5 =||= should this be closed? =||= "], ["817", "Rewrite status override logic in registry using a rule framework", "Nikos Michalakis", "drtechniko", "07/22/16, 06:14:15 PM", "NaN", "@qiangdavidliu Here you go. Let's chat so I can fill you in if you have any questions.\n =||= There is more room for making this more DI friendly (AwsInstanceRegistry for example) but I didn't want to stir the waters too much in this PR.\n =||= Minor quibbles, but LGTM. Thanks for the PR.\n =||= "], ["818", "IndexOutOfBounds Exception thrown repeatedly when Eureka has no EIPs containing \"ec2-\"", null, "robertnosburn", "05/30/19, 11:09:53 PM", "The EIPManager has a running task that looks to bind Eureka to EIPs.  In our case we are writing an application which is hosted in AWS but will not be publicly available and will be accessible ONLY from our corporate network.\n\nWe have an AWS Direct Connect to our corporate environment.  My EC2 container running my docker images, including Eureka, does not have a public nor elastic IP address.  In this case the only \"ec2Urls\" value is \"http://localhost:8761\".\n\nEIPManager.getEIPsFromServiceUrls(List<String> ec2Urls) (line:346-349) does not handle this case and line 347 will throw:\njava.lang.StringIndexOutOfBoundsException: String index out of range: -4\n        at java.lang.String.substring(String.java:1967) ~[na:1.8.0_91]\n        at com.netflix.eureka.aws.EIPManager.getEIPsFromServiceUrls(EIPManager.java:342) ~[eureka-core-1.4.6.jar!/:1.4.6]\n        at com.netflix.eureka.aws.EIPManager.getEIPsForZoneFromConfig(EIPManager.java:322) ~[eureka-core-1.4.6.jar!/:1.4.6]\n        at com.netflix.eureka.aws.EIPManager.getCandidateEIPs(EIPManager.java:304) ~[eureka-core-1.4.6.jar!/:1.4.6]\n        at com.netflix.eureka.aws.EIPManager.isEIPBound(EIPManager.java:157) ~[eureka-core-1.4.6.jar!/:1.4.6]\n        at com.netflix.eureka.aws.EIPManager$EIPBindingTask.run(EIPManager.java:412) ~[eureka-core-1.4.6.jar!/:1.4.6]\n        at java.util.TimerThread.mainLoop(Timer.java:555) [na:1.8.0_91]\n        at java.util.TimerThread.run(Timer.java:505) [na:1.8.0_91]\n\nI propose a check to ensure that the index is greater than -1 before parsing the substrings.\n\nSee #819  as a potential fix.\n\nThanks,\n\nRobert", "Hi @robertnosburn thank you for the PR. Looking at your usecase, it seems like what you would prefer is that the EIPBinder not run at all?\n\nEureka servers need to have fixed IPs, and EIP is one mechanism that we use to guarantee that in a cloud environment. However if you are able to guarantee that via some other mechanism, then possibly a better way to disable the errors from the EIPBinder is to not initialize the EIPBinder at all.\n\nEureka server currently support a configuration AwsBinder strategy (see https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/aws/AwsBinderDelegate.java) where configuration (eureka. awsBindingStrategy=<EIP, ROUTE53, ENI>) can be used to define the binder type. What about a proposal that we add a fourth option (NOOP for a no-op binder) to that set of binders, which you can then configure via properties in your setup?\n =||= Hi David,\n\nI think that you are correct, I do not have any EIPs and so the EIPBinder would be unnecessary.  My Eureka runs in a docker container in an ec2 instance with a loadbalancer and a route-53 entry pointing to it.  This is how it's getting a fixed IP.  My microservices with Eureka clients know the location of the Eureka server by it's route-53 cname.  It does not need an internet routable.\n\nLooking through the code I also saw \"e-ipbind-rebind-retries\", which I tried setting to 0 in my application.yml both as \n`eureka:`\n`e-ipbind-rebind-retries: 0`\n`e-ipbinding-retry-interval-ms-when-unbound: 86400000`\n\nand \n`eureka:`\n`server:`\n`e-ipbind-rebind-retries: 0`\n`e-ipbinding-retry-interval-ms-when-unbound: 86400000`\n\nIt looked as though this would allow the Binder to run once per day and not actually try to do the bind, but for some reason these values weren't getting picked up.\n\nSo yes, if I could persuade the EIPBinder to not run, that would be ideal.\n\nAs a side note, I think that my PR should still stand, it's probably not a bad idea to validate an index before using it in a substring, don't you think?\n\nThanks and Regards\n =||= David,\n\nI found the \"eureka.server.binding-strategy\" and set it to route53.  This causes a NPE on the EurekaController:\n\n2016-07-20 23:44:54.878 ERROR 5 --- [nio-8761-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause\n\njava.lang.NullPointerException: null\n        at org.springframework.cloud.netflix.eureka.server.EurekaController.getServerContext(EurekaController.java:143) ~[spring-cloud-netflix-eureka-server-1.1.4.RELEASE.jar!/:1.1.4.RELEASE]\n        at org.springframework.cloud.netflix.eureka.server.EurekaController.getRegistry(EurekaController.java:139) ~[spring-cloud-netflix-eureka-server-1.1.4.RELEASE.jar!/:1.1.4.RELEASE]\n\nThoughts?\nThanks,\n =||= @robertnosburn I buy your point, thanks. Have merged your PR in. As for the route53binder, let me take a look at that. We don't actually use that binder optional at Netflix and it was contributed to us by an external user, so it may have quirks that's specific for their use case. \n =||= David,\n\nDigging a little further, the actual exception is:\njava.lang.RuntimeException: Cannot bootstrap eureka server :\n        at org.springframework.cloud.netflix.eureka.server.EurekaServerBootstrap.contextInitialized(EurekaServerBootstrap.java:87) ~[spring-cloud-netflix-eureka-server-1.1.4.RELEASE.jar!/:1.1.4.RELEASE]\n        at org.springframework.cloud.netflix.eureka.server.EurekaServerInitializerConfiguration$1.run(EurekaServerInitializerConfiguration.java:70) ~[spring-cloud-netflix-eureka-server-1.1.4.RELEASE.jar!/:1.1.4.RELEASE]\n        at java.lang.Thread.run(Thread.java:745) [na:1.8.0_91]\nCaused by: java.lang.NoSuchMethodError: com.amazonaws.AmazonWebServiceRequest.copyPrivateRequestParameters()Ljava/util/Map;\n        at com.amazonaws.services.route53.AmazonRoute53Client.invoke(AmazonRoute53Client.java:1544) ~[aws-java-sdk-route53-1.9.3.jar!/:na]\n        at com.amazonaws.services.route53.AmazonRoute53Client.listHostedZones(AmazonRoute53Client.java:382) ~[aws-java-sdk-route53-1.9.3.jar!/:na]\n        at com.netflix.eureka.aws.Route53Binder.getHostedZone(Route53Binder.java:238) ~[eureka-core-1.4.9.jar!/:1.4.9]\n        at com.netflix.eureka.aws.Route53Binder.getResourceRecordSetWithHostedZone(Route53Binder.java:212) ~[eureka-core-1.4.9.jar!/:1.4.9]\n        at com.netflix.eureka.aws.Route53Binder.doBind(Route53Binder.java:109) ~[eureka-core-1.4.9.jar!/:1.4.9]\n        at com.netflix.eureka.aws.Route53Binder.start(Route53Binder.java:89) ~[eureka-core-1.4.9.jar!/:1.4.9]\n\nHowever that method exists in the 1.9.3 version of the aws-sdk-core jar.\n\nBUT..\n\nA dependency:tree on my project reveals:\n[INFO] |  |  +- com.netflix.eureka:eureka-core:jar:1.4.9:compile\n[INFO] |  |  |  +- com.amazonaws:aws-java-sdk-core:jar:1.10.30:runtime\n[INFO] |  |  |  +- com.amazonaws:aws-java-sdk-ec2:jar:1.10.30:runtime\n[INFO] |  |  |  +- com.amazonaws:aws-java-sdk-autoscaling:jar:1.9.3:runtime\n[INFO] |  |  |  +- com.amazonaws:aws-java-sdk-sts:jar:1.9.3:runtime\n[INFO] |  |  |  +- com.amazonaws:aws-java-sdk-route53:jar:1.9.3:runtime\n\nI have performed a thorough search and I cannot see any reason why v1.10.30 of ec2 and core should be included, instead of the 1.9.3, as specified in the gradle files in tag v1.4.9\n\nThanks,\n =||= @robertnosburn, @qiangdavidliu   I have a problem with aws-java-sdk-core:jar:1.10.30:runtime and aws-java-sdk-ec2:jar:1.10.30:runtime dependencies as well.\nNotice:\nI am using aws-java-sdk-sqs:1.10.72 which depends on aws-java-sdk-core:jar:1.10.72\nI am using eureka-core:jar:1.4.10 which depends on aws-java-sdk-core:jar:1.9.3 and aws-java-sdk-ec2:jar:1.9.3\nDependency tree for -Dincludes=com.amazonaws:\n[INFO] |  - com.amazonaws:aws-java-sdk-sqs:jar:1.10.72:compile\n[INFO] |     - (com.amazonaws:aws-java-sdk-core:jar:1.10.30:compile - version managed from 1.10.72; omitted for duplicate)\n[INFO] +- org.springframework.cloud:spring-cloud-starter-eureka:jar:1.1.5.RELEASE:compile\n[INFO] |  - com.netflix.eureka:eureka-core:jar:1.4.10:compile\n[INFO] |     +- (com.amazonaws:aws-java-sdk-core:jar:1.10.30:runtime - version managed from 1.9.3; omitted for duplicate)\n[INFO] |     +- com.amazonaws:aws-java-sdk-ec2:jar:1.10.30:runtime (version managed from 1.9.3)\n[INFO] |     |  - (com.amazonaws:aws-java-sdk-core:jar:1.10.30:runtime - version managed from 1.9.3; omitted for duplicate)\n[INFO] |     +- com.amazonaws:aws-java-sdk-autoscaling:jar:1.9.3:runtime\n[INFO] |     |  - (com.amazonaws:aws-java-sdk-core:jar:1.10.30:runtime - version managed from 1.9.3; omitted for duplicate)\n[INFO] |     +- com.amazonaws:aws-java-sdk-sts:jar:1.9.3:runtime\n[INFO] |     |  - (com.amazonaws:aws-java-sdk-core:jar:1.10.30:runtime - version managed from 1.9.3; omitted for duplicate)\n[INFO] |     - com.amazonaws:aws-java-sdk-route53:jar:1.9.3:runtime\n[INFO] |        - (com.amazonaws:aws-java-sdk-core:jar:1.10.30:runtime - version managed from 1.9.3; omitted for duplicate)\n\nWhich causes java.lang.ClassNotFoundException: com.amazonaws.ClientConfigurationFactory\n\nWhen I explicitly declare the dependency aws-java-sdk-core:1.10.72 it fixes my problem with the aws-java-sdk-core dependency and I can run my application, but the dependency tree still shows that something is forcing the version aws-java-sdk-ec2:jar:1.10.30\n\n[INFO] |  - com.amazonaws:aws-java-sdk-sqs:jar:1.10.72:compile\n[INFO] |     - (com.amazonaws:aws-java-sdk-core:jar:1.10.72:compile - omitted for duplicate)\n[INFO] +- org.springframework.cloud:spring-cloud-starter-eureka:jar:1.1.5.RELEASE:compile\n[INFO] |  - com.netflix.eureka:eureka-core:jar:1.4.10:compile\n[INFO] |     +- (com.amazonaws:aws-java-sdk-core:jar:1.10.72:runtime - version managed from 1.9.3; omitted for duplicate)\n[INFO] |     +- com.amazonaws:aws-java-sdk-ec2:jar:1.10.30:runtime (version managed from 1.9.3)\n[INFO] |     |  - (com.amazonaws:aws-java-sdk-core:jar:1.10.72:runtime - version managed from 1.10.30; omitted for duplicate)\n[INFO] |     +- com.amazonaws:aws-java-sdk-autoscaling:jar:1.9.3:runtime\n[INFO] |     |  - (com.amazonaws:aws-java-sdk-core:jar:1.10.72:runtime - version managed from 1.9.3; omitted for duplicate)\n[INFO] |     +- com.amazonaws:aws-java-sdk-sts:jar:1.9.3:runtime\n[INFO] |     |  - (com.amazonaws:aws-java-sdk-core:jar:1.10.72:runtime - version managed from 1.9.3; omitted for duplicate)\n[INFO] |     - com.amazonaws:aws-java-sdk-route53:jar:1.9.3:runtime\n[INFO] |        - (com.amazonaws:aws-java-sdk-core:jar:1.10.72:runtime - version managed from 1.9.3; omitted for duplicate)\n\nI took a look at the gradle and pom files of eureka-core:1.4.10 and both declare dependencies to aws-java-sdk-core:1.9.3 and aws-java-sdk-ec2:1.9.3 so I don't know what is forcing the version 1.10.30\n =||= @ibaiul can you double check to see that all of your aws-java-sdk-* dependencies are at the exact same patch version? Misalignment between the aws java sdk jar can cause these kind of errors. =||= @qiangdavidliu @robertnosburn I have similar requirement where I dont want any EIP binder is there a way to stop EIPManager  =||= "], ["819", "Check the sub-string index value before trying to sub-string on it.", null, "robertnosburn", "07/21/16, 01:31:29 AM", "See issue #818 -\n\nIn a private application with no elastic IPs exceptions will be thrown when there are no URLs containing \"ec2-\".  With this modification, the exception will not be thrown and the rest of the process will simply not bind to any EIPs.", "@robertnosburn thanks for the PR.\n =||= "], ["820", "How can i listen client register event in eureka server?", "ryan xu", "fengbaicanhe", "07/29/16, 08:10:56 AM", "Is there any mechanism in **eureka server** ,that i can listen all eureka client register/deregister event, when i    catch the event,so i can send a notification to someone", "Hi @fengbaicanhe the current eureka server implementation have some level of caching, and does not support real time notifications.\n =||= @qiangdavidliu  Is there any plan for this feature?\n =||= @fengbaicanhe there's nothing on that that we can commit to at the moment unfortunately.\n =||= ok, thanks @qiangdavidliu \n =||= Hi @qiangdavidliu is there any detail explanation about cache level implementation? thanks =||= "], ["821", "Support jersey2 for client/server", "Matt Nelson", "mattnelson", "08/23/16, 11:32:06 PM", "Initial support for jersey2 for #600 \n\nDeployed these changes to our local snapshot repository. I've been running our builds with the snapshot for the last week. I believe the only non-passive change for existing jersey1 consumers is the relocation of `DiscoveryClientOptionalArgs` from an inner class of `DiscoveryClient` this was because the optional args has a method to supply additional filters which the interface was changed with jaxrs2.\n### client\n\nChanged `DiscoveryClient` to accept a `TransportClientFactories` on the optional args class to support supplying the jersey2 transport client factory.\n\n``` java\nJersey2DiscoveryClientOptionalArgs args = new Jersey2DiscoveryClientOptionalArgs();\nargs.setTransportClientFactories(Jersey2TransportClientFactories.getInstance());\nDiscoveryManager.getInstance().initComponent(new MyDataCenterInstanceConfig(), new DefaultEurekaClientConfig(), args);\n```\n### server\n\nAdded `EurekaServerContextBinder` to use the hk2 injectors for `EurekaServerContext`. The `GuiceFilter` is no longer required to be on the filter chain. I did not create a `eureka-server-jersey2` module since I am not deploying eureka-server as a war. Added `Jersey2EurekaBootStrap` which uses the client/server jersey2 classes for peer replication.\n\n``` java\n// Expects that you have already initialized the discovery client\nnew Jersey2EurekaBootStrap(DiscoveryManager.getInstance().getDiscoveryClient()\n```", "@mattnelson thank you for the PR! Much appreciated. I'll take a look at this as soon as I can.\n =||= @mattnelson are you running both jersey2 client and server in your set up, or just the client?\n =||= @spencergibb you'll be interested in this PR too.\n =||= @qiangdavidliu \n\n> are you running both jersey2 client and server in your set up, or just the client?\n\nI am running both client and server. The environment I'm using has 4 clients and 1 server (I'll work on getting another server integrated to verify cluster replication) that are able to register and use ribbon with `DiscoveryEnabledNIWSServerList`.\n =||= @mattnelson much appreciated. It would be good to have some confirmation that replication is also unaffected once you have >1 server running.\n =||= Addressed comments on 7dbea2d1e1b5d3d2e816593f8542a27107cdc10d\n =||= @qiangdavidliu Finally had a chance to validate replication.\n\nHad 36 clients register with a cluster of 3 eureka servers. Then had an additional 2 eureka servers that were only configured with the other 3 eureka servers to ensure that the apps they got were only through replication. Took a while because I had to trace down a bug in `PeerEurekaNodes. isThisMyUrl`[1] and `EurekaTransportConfig.applicationsResolverUseIp`[2]. The virtualization environment I was using only supports IP resolution. I'll get a PR out for those changes as it will be a blocker for me to validate a release candidate of these changes.\n\n[1] https://github.com/Netflix/eureka/blob/v1.4.10/eureka-core/src/main/java/com/netflix/eureka/cluster/PeerEurekaNodes.java#L230-L234\n[2] https://github.com/Netflix/eureka/blob/v1.4.10/eureka-client/src/main/java/com/netflix/discovery/shared/transport/EurekaTransportConfig.java#L31\n =||= @mattnelson great to hear, thanks!\n =||= @qiangdavidliu Is there anything else you need in order to get this PR merged?\n =||= @mattnelson nothing major, I just thought (per your last message) that you were making some additional changes to the PR for replication?\n =||= I can include them with this PR if you want, but they are not related to the jersey2 uplift. They are isolated to running eureka in IP address resolver transport mode.\n =||= Ah. In that case then all good. A separate PR would be better if they are unrelated. Let me make a release of eureka without this going in first to have an artifact for the current head before merging this in.\n =||= Created #831 for the IP address transport issue.\n =||= @qiangdavidliu Now that https://github.com/Netflix/eureka/releases/tag/v1.4.11 is released, are there any other blockers? \n =||= @mattnelson I'm looking at merging this in and doing a release. There is one last issue where due to the move of \"DiscoveryClientOptionalArgs\" it creates a minor api incompatibility. I am assessing the blast radius of this at the moment.\n =||= @mattnelson there are a few small changes that I would like to make to this PR, but in the interest of not blocking you further, what do you say to moving this PR to against the (newly created) \"contrib/jersey2\" branch, where we can merge it in, and then I will make some PRs for the minor changes before we moving it back into master?\n\nedit: I'm actually able to change the base branch, so have done the above.\n =||= @mattnelson Can you please share any documentation available to use Eureka with Jersey2. I am looking to run Eureka Server as a packaged web app in a servlet container which isn't compatible with Jersey 1. =||= "], ["822", "Moving experimental replication fix to default", "David Liu", "qiangdavidliu", "07/21/16, 09:25:16 PM", "Ref PR #811 \nFix for issue #802 \nMaking the fix default now that is has been tested in production.", "NaN"], ["823", "VPC Deployments", "Rommel Tinoco", "ShadySQL", "07/27/16, 03:06:14 PM", "Not sure where to ask this - marked also a question on the google group. I essentially want to know if Eureka only supports deployments of EIP. I dont want to advertise all our services to the world. ", "Hi @ShadySQL eureka support other forms of fixed addresses. such as ENI and Route53 DNS (which in EC2 vpc can be private). In all cases (EIP or otherwise) you can secure your service with Security Groups.\n\nSee https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/DefaultEurekaServerConfig.java#L664 where you can supply the binding strategy via eureka.awsBindingStrategy=...\n =||= @qiangdavidliu what value to provide for `eureka.serviceUrl.us-east-1a=` ??\r\nAs private IP's are assigned automatically so we can not hardcode in the code ?\r\n =||= "], ["824", "Fix typo in EurekaInstanceConfig", "Richard Benkovsky", "Benky", "08/11/16, 07:43:43 PM", "NaN", "Thanks for the contribution @Benky \n =||= "], ["825", "Where does eureka store the registration data?", null, "silentAllay", "08/09/16, 03:38:42 AM", "Where does eureka store the registration data? in Memory? or both memory and file?", "I'm memory\n =||= if all the eureka servers crash, how to recover registration data?\n =||= @killjason if it all crashes the data will be rebuilt by the service registration heartbeat. As the first startup happens.\n =||= @marcosbarbero , OK, got it, thx~\n =||= "], ["826", "Problems getting maven project configured with eureka-client", "Jesse Shaffer", "dajester2013", "08/03/16, 02:30:58 PM", "I imported the eureka-client dependency into my maven project, in an attempt to build an app based on http://sparkjava.com (instead of spring) that would register as a client.  I've used https://github.com/Netflix/eureka/tree/master/eureka-examples/src/main/java/com/netflix/eureka as a guide to some degree of success:\n\nThe project compiles and runs fine within Eclipse, but trying to compile with maven from the command line fails with something to the effect of \"package not found com.netflix.config\".  Looking at the client's pom, all of its dependencies are marked runtime.  Apparently, Eclipse is cool with that and uses those dependencies when compiling anyways, however the command-line fails.\n\nWhat is the best way to get around this?  Actually, what I really want to know is if anyone have a non-spring, maven example project that uses eureka-client to register RESTful services?", "For some background on the runtime dependencies issue with nebula, see: https://github.com/nebula-plugins/nebula-publishing-plugin/issues/31\n\nThe simplest short term work around I know of would be to just add the dependency directly to your project rather than relying on it being transitive. For `com.netflix.config` specifically, the dependency below provides that package:\n\nhttps://mvnrepository.com/artifact/com.netflix.archaius/archaius-core/0.7.4\n =||= thanks for the info - i posted a comment there with a suggested fix from the gradle forums.  it's really unfortunate that i either have to use gradle or spend so much time inspecting eureka's (or any other netflix-developed component's) dependency tree and manually configuring my maven dependencies.  that is a complete waste of my time, and speaks very poorly of gradle to me.\n =||= "], ["827", "register only one rest/method/class to Eureka server", null, "silentAllay", "08/03/16, 04:21:23 PM", "In the Eureka client application, we defined 'spring.application.name'  in the file 'application.properties'.\nso this application will register to Eureka server, If I just want to register one rest/method/class of this Eureka client application, How should I do?", "This is the wrong repo to ask. Use spring cloud Netflix please.\n =||= @spencergibb , OK, I create a issue in spring cloud netflix:\nhttps://github.com/spring-cloud/spring-cloud-netflix/issues/1222\n =||= "], ["828", "Eureka-server.properties has content of MANIFEST.MF on distributions", "Miguel", "miggy9001", "03/16/17, 06:12:38 PM", "For Eureka-client since version 1.4.6 the Eureka-server.properties file has the exact same content as the MANIFEST.MF inside of the META-INF folder. So when deployed the default file reflects that of MANIFEST.MF. (Issue in version 1.4.7-rc.3 to current version 1.4.11-rc.1)", "Hi @miggy8234 do you mean the configuration based eureka-server.properties? The one that is sourced by the configuration system (archaius) should be under the path WEB-INF/classes/eureka-server.properties .\n =||= Hello @qiangdavidliu , No I mean if I download the latest jar from the maven central repository and deploy it to a server. The eureka.property files will have the same content as the MANIFEST.MF.\n\nDownloaded from here: http://search.maven.org/#search%7Cga%7C1%7Ceureka-client\n =||= Hi @miggy8234 your link is for the client (eureka-client), do you mean the client or the server? For the eureka server themselves, you'll need to build them as a war which packages in the eureka-server.properties prop file.\n =||= It's the war file itself:\nhttps://repo1.maven.org/maven2/com/netflix/eureka/eureka-server/1.5.3/eureka-server-1.5.3.war\n\nTake a look at **META-INF/eureka-server.properties**\n =||= Hi @rs017991 the correct property file is in the war at **/WEB-INF/classes/eureka-server.properties**. The file in META-INF may have the same name, but that is purely an artifact of the war name and is auto generated by the build. It does not affect actual property loading of the property file.\n\nThanks.\n =||= "], ["829", "my eureka server cluster have a exception", "Lee", "lijunyong", "09/02/16, 08:50:02 PM", "2016-08-08 17:18:08.999 DEBUG 12076 --- [nio-7001-exec-7] o.a.coyote.http11.Http11NioProcessor     : Error parsing HTTP request header\n\njava.io.EOFException: Unexpected EOF read on the socket\n    at org.apache.coyote.http11.InternalNioInputBuffer.fill(InternalNioInputBuffer.java:152) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.coyote.http11.AbstractNioInputBuffer.parseRequestLine(AbstractNioInputBuffer.java:190) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1009) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:672) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1502) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1458) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_40]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_40]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.0.33.jar:8.0.33]\n\nis it normal?", "Hi @lijunyong what environment (tomcat version etc) are you trying to run the server under? Thanks.\n =||= @qiangdavidliu tomcat 8.0.33\n =||= Hi @lijunyong we do have tomcat8 servers running as well, but I have not been able to repro this issue. Are you still seeing the problem? It might also be worthwhile asking this in the google group to see if the community has any idea. Thanks.\n =||= "], ["830", "Does eureka server support server-side load balance strategy?", null, "silentAllay", "09/02/16, 08:47:19 PM", "As I know, Ribbon supports client-side load balance strategy,Does eureka server support server-side load balance strategy?", "Hi @killjason there is some very basic \"client side LB\" available via the default java client, see EurekaClient.getNextServerFromEureka(). However there are currently no LB rest endpoints exposed from the server.\n =||= "], ["831", "Support eureka servers configured with IP addresses", "Matt Nelson", "mattnelson", "08/23/16, 11:28:52 PM", "When configuring the `eureka.serviceUrl.default` with IP addresses the comparisons performed in `PeerEurekaNodes` and `StatusUtil` prevent the instances from recognizing themselves and therefore never report themselves as available.\n\nAs discussed on #821 (https://github.com/Netflix/eureka/pull/821#issuecomment-237416131) follow PR.", "Thanks for the fix!\n =||= "], ["832", "jersey2 compatibility updates", "David Liu", "qiangdavidliu", "08/26/16, 10:49:16 PM", "- add missing client side filters\n- changed some jersey2 interfaces to standardise on javax.wx.rs\n- changed some eureka-jersey2 interfaces to be more inline with interfaces in eureka-jersey1\n- added back DiscoveryClient.DiscoveryClientOptionalArgs which was part of the public API\n- added README", "@mattnelson this is an update to your PR #821\n =||= Changes look good so far. I'll pull this branch down early next week and verify in my test environment.\n =||= Cool, thanks. Merging it in then. Once you've verified that it is fine in your env, I'll move it into master and cut a release.\n =||= Finally had a chance to validate these changes. Verified client registration with 30+ clients, replication, client status changes, ribbon load balancing.\n =||= Great, thanks @mattnelson. I'll merge the jersey2 branch into master and have it released in the 1.6.0 release.\n =||= @qiangdavidliu till now you still working on 1.5.x release train\nKindly any dates when release 1.6.0 containing this PR will be released ?\n =||= Hi @adoura we had some internal needs that triggered the flurry of 1.5.x releases recently. It looking like that should be stabalizing, so we are tentatively looking at merging in the jersey2 support and cutting 1.6.x sometime this week.\n =||= "], ["833", "Archaius2 client compatibility", "David Liu", "qiangdavidliu", "09/06/16, 10:35:15 PM", "NaN", "NaN"], ["834", "How many service instances can one instance of eureka support?", "Zhou Tao", "iamzhout", "05/31/17, 07:42:50 AM", "I have checked eureka wiki, and not found this kind of information.\n\nCould you please share the performance matrix about Eureka? such as:\n1.  How many service instances can one instance of Eureka support?\n2.  How many CPU / memory should one eureka use under such condition?\n3.  What's the original refresh interval for eureka client in such circumstances, and how many concurrent requests can eureka support, such as xx thousand tps?\n\nThanks,", "Hi @iamzhout we don't have any exact numbers on the edge limits for eureka, and of course this also is highly dependent on the instance type that the servers are deployed on. To give you a rough idea:\n1. eureka servers do not shard their registry, so from a memory footprint p.o.v. all servers will share the same restrictions. Having said that, we have typically found that network I/O being the bounding factor (by far) rather than cpu or memory, especially considering that the network out for queries will increase with the number of instances registered with eureka. \n\nWe run a pretty limited number of servers internally (~10), which serves many 10s of thousands of clients. Having said that, these servers are running on the larger EC2 instance types. If the number of clients reduce, the number of servers can also be reduced.\n1. See above regarding network I/O being the bigger bounding factor for eureka servers. Eureka servers does need some baseline amounts of CPU and memory to operate, probably something similar to an EC2 .2xl would be fine.\n2. The original (if not overridden) refresh rate is 30seconds.\n =||= Thanks @qiangdavidliu for your reply.\n\nCurrently, we are doing some performance test purely on eureka to check its capability and performance in large scale, and found some problems during the process, mainly are:\n1.  after registered 100,000 service instances to eureka, and then call delete API (~200 threads concurrently), eureka will be extremely slow of response\n2.   after registered 10,000 service instances to eureka, and refresh server list with \"/eureka/v2/apps/delta\" API every 30 seconds (~200 threads), eureka will slow of response; and the response size is quite large, about 1MB for single request.\n\nWhat's your suggestion on above performance issue, is it because we didn't call the correct API, use eureka in the right way, or it do have reached the uplimit of eureka itself?  What's the recommended/suitable refresh/hearbeat interval under 100s of thousands service instances?\n\nThanks,\nTao\n =||= Thanks for the update. I have some questions regarding your set up:\n- are you testing with just a single eureka server, or with a cluster set up (and if so, how many instances?)\n- with your 200 concurrent calls, are they (relating to the above) hitting the same server or distributed? what is the rate of these calls?\n\nAddress your questions without understanding of the two questions above, \n1. We typically run with a cluster set up (~10) as mentioned, so the requests would be shared between these servers. Additionally, we have independent deployments in different regions so the environment itself is effectively sharded.\n2. We did encounter this issue as well, and resolve it by adding an autoscalable readonly proxy fleet internally. There is logic (disabled via configuration) inside eureka-client that handles logic regarding a redirect to only do reads from servers in the readonly fleet. The readonly fleet code has not been open sourced yet, but it is quite straight forward:\n\n```\neureka-server's REST resource -> cache -> eureka-client connecting to write servers\n```\n\nsee [EurekaTransportConfig.java](https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/shared/transport/EurekaTransportConfig.java) for the configs as well as javadoc.\n\nLastly, there are some server side optimizations that we have not enabled by default in OSS configs yet (mainly due to complexity of upgrading an existing deployment with these). \n- See [this setting](https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/DefaultEurekaServerConfig.java#L586) which enables batching for the server to server replication.\n- Are you using the gzipEncodingEnforcingFilter? This is enabled by default in the provided example web.xml but your set up may be different.\n =||= Closing old issue. Please re-open if necessary. =||= "], ["835", "Remove use of deprecated static accessor.", "Spencer Gibb", "spencergibb", "08/31/16, 06:48:13 PM", "Add a builder method and check that instanceInfo is not null in build().\n\nFound this in a test where the static singleton was null :-(", "Thanks @spencergibb \n =||= "], ["836", "How to set hostname for eureka-client?", null, "silentAllay", "02/15/17, 09:43:27 AM", "How to set hostname for eureka-client which is registered in eureka-server?", "Hi @killjason the hostname should be automatically discovered by eureka-client.\n =||= @qiangdavidliu, what about the IP address? \n =||= @killjason same for ip address as well. The client auto detects your hostname and IP via standard system calls, and then (optionally, if in EC2) overlays these with data retrieved from calling the ec2 instance metadata url.\n =||= @qiangdavidliu,what if the server have multi network interfaces?\n =||= @killjason we don't yet support multiple interfaces.\n =||= How does eureka-client decide which ip should use if have two interfaces?\n =||= @killjason if the server is running on Amazon, it defaults to eth0. Otherwise, the default interface is whatever will be picked up by InetAddress.getLocalHost().\n =||= @killjason You can pass your own implementation of PropertiesInstanceConfig to the ApplicationManager. This implementation can override getHostName() and getIpAddress() in a way you want.\n =||= @rfoltyns , I extends com.netflix.appinfo.MyDataCenterInstanceConfig to override getHostName() and getIpAddress(), is that OK?\n =||= @killjason yeah, MyDataCenterInstanceConfig also extends this class\n =||= "], ["837", "Improve TimedSupervisorTask concurrency handling", "Davor Sauer", "d-sauer", "09/02/16, 01:26:29 PM", "Don't schedule TimeSupervisorTask if scheduler is shutting down\nAdditional logging in case that executor and scheduler are shutting down.\n\nI notice this when shutting down Tomcat server:\n\n```\nERROR c.n.discovery.TimedSupervisorTask - task supervisor rejected the task\njava.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@29004f06 rejected from java.util.concurrent.ThreadPoolExecutor@2d3fcefe[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 17]\n        at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)\n        at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)\n        at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1369)\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\n        at com.netflix.discovery.TimedSupervisorTask.run(TimedSupervisorTask.java:62)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\n```\n\nthis fix should show those error more gracefully", "NaN"], ["838", "Don't schedule TimeSupervisorTask if scheduler is shutting down.", "Davor Sauer", "d-sauer", "09/02/16, 05:25:42 PM", "Don't schedule TimeSupervisorTask if scheduler is shutting down\nAdditional logging in case that executor and scheduler are shutting down.\n\nI notice this when shutting down Tomcat server:\n\n```\nERROR c.n.discovery.TimedSupervisorTask - task supervisor rejected the task\njava.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@29004f06 rejected from java.util.concurrent.ThreadPoolExecutor@2d3fcefe[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 17]\n              at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)\n              at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)\n              at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1369)\n              at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\n              at com.netflix.discovery.TimedSupervisorTask.run(TimedSupervisorTask.java:62)\n              at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n              at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n              at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n              at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n              at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n              at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n              at java.lang.Thread.run(Thread.java:745)\n```\n\nthis fix should show those error more gracefully", "@d-sauer thanks for the contribution!\n =||= How to avoid this waing? =||= "], ["839", "How to init TWO eureka-clients using plain java code WITHOUT properties files?", null, "silentAllay", "09/06/16, 04:57:54 PM", "How to init TWO eureka-clients using plain java code WITHOUT properties files?", "@killjason you can just create them using the constructor. See some examples here:\nhttps://github.com/Netflix/eureka/blob/master/eureka-examples/src/main/java/com/netflix/eureka/ExampleEurekaClient.java\n =||= @qiangdavidliu, the example still use the property file:sample-eureka-client.properties.\nHow to set properties value in java code dynamicly?\n =||= "], ["840", "EIP publicip association not correctly updated on fresh instance", null, "nick-pww", "09/09/16, 08:43:03 PM", "Seem to have found an problem with public EIP address association not being correctly updated when a new AWS server starts and has a new Eureka server starting with it. When the server starts up, it correctly registers itself:\n\n```\n2016-09-06 15:55:29.040  WARN 3399 --- [Thread-10] com.netflix.eureka.aws.EIPManager        : The selected EIP 54.67.102.122 is associated with another instance i-0666b391 according to AWS, hence skipping this\n2016-09-06 15:55:29.628  INFO 3399 --- [Thread-10] com.netflix.eureka.aws.EIPManager        :\n\n\nAssociated i-25f11391 running in zone: us-west-1c to elastic IP: X.X.X.X\n```\n\nBut, every minute after that we get the following log entry:\n\n```\n2016-09-06 16:24:55.568  INFO 3399 --- [Eureka-EIPBinder] c.n.e.r.PeerAwareInstanceRegistryImpl    : Got 1 instances from neighboring DS node\n2016-09-06 16:24:55.568  INFO 3399 --- [Eureka-EIPBinder] c.n.e.r.PeerAwareInstanceRegistryImpl    : Renew threshold is: 1\n2016-09-06 16:24:55.568  INFO 3399 --- [Eureka-EIPBinder] c.n.e.r.PeerAwareInstanceRegistryImpl    : Priming AWS connections for all replicas..\n2016-09-06 16:24:55.568  INFO 3399 --- [Eureka-EIPBinder] c.n.e.r.PeerAwareInstanceRegistryImpl    : No peers needed to prime.\n2016-09-06 16:24:55.568  INFO 3399 --- [Eureka-EIPBinder] c.n.e.r.PeerAwareInstanceRegistryImpl    : Changing status to UP\n2016-09-06 16:24:55.713  WARN 3399 --- [Eureka-EIPBinder] com.netflix.eureka.aws.EIPManager        : The selected EIP X.X.X.X is associated with another instance i-0666b391 according to AWS, hence skipping this\n2016-09-06 16:24:55.804  INFO 3399 --- [Eureka-EIPBinder] com.netflix.eureka.aws.EIPManager        : My instance i-25f11391 seems to be already associated with the EIP X.X.X.X\n```\n\nDebugging this, the call to `isEIPBound()` is always failing, and this is because the following is always `null`:\n\n```\nString myPublicIP = ((AmazonInfo) myInfo.getDataCenterInfo()).get(MetaDataKey.publicIpv4);\n```\n\nIt looks like there is stale datacenterinfo and it never gets refreshed (from what I can tell) and there there are no settings available to have it refreshed automatically.\n\nThe odd side affect of this, and we noticed, is that the registry continually gets wiped, and reset causing obvious potential issues down stream for our clients.\n\nI'm trying to poke around the code to see if I can find a solution for this, but right now the only 'fix' is to restart the service after the EIP has been initially bound.", "This is on 1.4.9. Also, I couldn't find anything that said it would matter but we are using spring-boots starter projects as the basis for the app, and the app is started with the following main class:\n\n```\n@SpringBootApplication\n@EnableEurekaServer\n@EnableAutoConfiguration\npublic class EurekaServer {\n\n    @Value(\"${server.port}\")\n    private Integer nonSecurePort;\n    @Autowired\n    private InetUtils utils;\n\n    public static void main(String[] args) {\n        new SpringApplicationBuilder(EurekaServer.class).web(true).run(args);\n    }\n\n    @Bean\n    @Profile(\"aws\")\n    public EurekaInstanceConfigBean awsEurekaConfig() {\n        EurekaInstanceConfigBean b = new EurekaInstanceConfigBean(utils);\n        b.setNonSecurePort(nonSecurePort);\n        b.setSecurePortEnabled(false);\n        AmazonInfo info = AmazonInfo.Builder.newBuilder().autoBuild(\"eureka\");\n        b.setDataCenterInfo(info);\n        return b;\n    }\n\n}\n```\n =||= @nick-pww this seems spring cloud specific, you might be able to get better help at https://github.com/spring-cloud/spring-cloud-netflix. \n\nInternally, our deployment of eureka does depend on this, and we have not observed the EIP issue you described. We do not run with spring cloud however.\n =||= @qiangdavidliu Can you point to where the dataCenterInfo is refreshed in the regular Eureka code? I could find where it got initialized, but nowhere where it might get refreshed. The only call I found was `ApplicationManager.refreshDataCenterInfoIfRequired()`, but can't find any thing that actually calls this method.\n\nI'll keep digging and guess open an issue with spring-cloud folks too...\n =||= @nick-pww the default DiscoveryClient should start up a thread to run the [InstanceInfoReplicator](https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/InstanceInfoReplicator.java), which when it runs will refresh the datacenter info.\n\nNote that the Amazon based datacenter info refreshes in ApplicationInfoManager only occurs if the config is of CloudInstanceInstanceConfig.\n =||= "], ["841", "remove governator dep for eureka-client", "David Liu", "qiangdavidliu", "09/06/16, 11:44:25 PM", "NaN", "NaN"], ["842", "update archaius2 version", "David Liu", "qiangdavidliu", "09/07/16, 12:36:47 AM", "NaN", "NaN"], ["843", "Refactoring AmazonInfo refresh into common class", "David Liu", "qiangdavidliu", "09/08/16, 06:26:31 AM", "- other minor clean ups", "name AmazonInfo is overly broad; they (amazon guys) call it InstanceMetadata in the documentation and I think that's on-target.\n =||= yeah that's stuck forever unfortunately.\n =||= @qiangdavidliu thanks for jumping on this so quickly!\n =||= "], ["844", "Instance config should only add metadata if value is valid", "David Liu", "qiangdavidliu", "09/08/16, 08:58:43 PM", "NaN", ":thumbsup:\n =||= "], ["845", "sync jersey2 branch with master", "David Liu", "qiangdavidliu", "09/15/16, 01:54:46 AM", "NaN", "NaN"], ["846", "Remove uses of archaius2 config.getPrefixedView()", "David Liu", "qiangdavidliu", "09/15/16, 01:22:32 AM", "It currently has issues when combined with config interpolation", ":thumbsup:\n =||= Can you elaborate on what the issues are? Why not fix the prefixed views in archaius2?\n =||= The issue is to do with config interpolation when using prefixedView, where if prefixedView is used, then the interpolator automatically expect the same prefix to be attached to the interpolated config.\n\ne.g. if my.prefix.config=${ENV_VAR}, then using prefixed view with prefix=my.prefix, ENV_VAR will not be loaded as the interpolator will expect my.prefix.ENV_VAR instead.\n\nWe will fix archaius2, however as the fix is less clear right now we are doing this to be unblocked.\n =||= "], ["847", "update to archaius2 2.1.6", "David Liu", "qiangdavidliu", "09/15/16, 07:25:01 PM", "NaN", "NaN"], ["848", "update archaius2 to 2.1.7", "David Liu", "qiangdavidliu", "09/15/16, 08:56:00 PM", "NaN", "NaN"], ["849", "Add optional args to ApplicationInfoManager", "David Liu", "qiangdavidliu", "09/20/16, 05:53:38 AM", "NaN", "NaN"], ["850", "Build of Sample Project fails [Test Fail]", "Ayush Choubey", "ayusun", "09/21/16, 08:19:00 AM", "So I tried to follow the instruction given in https://github.com/Netflix/eureka/wiki/Building-Eureka-Client-and-Server\n\nSo while building using gradle, there were some tests that were being performed and one of the test failed.\n\n`DicscoverClientHealthTest.java : 72`\n\nI think probably it should be `assertNotEquals` instead of `assertEquals`\n\nI changed it and my tests are passing. Can you guys look into it. Even the identifying message says\n`Instance info status not as expected.`, so probably you guys wanted to test for negation but tested assertedEquals, (not sure though)", "If it turns out to be valid, I can probably send a pull request, if required\nThough I am not sure, how the build is passing over here\n =||= Closing it, for some reason it passed in my another machine.\n =||= "], ["851", "how to copy eureka.war under _$TOMCAT_HOME/webapps/", null, "elyorm", "09/22/16, 04:25:08 AM", "NaN", "NaN"], ["852", "synchronize a few use cases of CloudInstanceConfig to be available to eureka-client-archaius2", "David Liu", "qiangdavidliu", "09/23/16, 04:07:21 AM", "NaN", "NaN"], ["853", "update XStream to 1.4.9 to patch XXE vulnerability", "Taylor Wicksell", "twicksell", "09/26/16, 01:14:14 AM", "NaN", "\ud83d\udc4d \n =||= "], ["854", "multiple copies of NodeJS service registering from same machine. Eureka Server cannot register", "Deeksha Sharma", "deekshasharma", "02/03/17, 06:48:22 AM", "I am running NodeJS service say **MyService** on 3 different ports(8080,8081,8082) on single AWS EC2 machine. Now when my services register with Eureka Server. I see that Eureka server only registers the last instance of service that started on  port 8082. So basically it registers and keeps the data of single service(host:port) if the Amazon instance-id and Service name are same for all instances of MyService.\nIs this a bug with Eureka or it is designed to have the service of same type to be deployed on different machines.\n\nAnother thing I noticed: With the same setup when I register Service1 , Service2 and Service3 with different names, they are registered with Eureka Server. But becaue its the same service running on 3 ports I need the information about all instances (host1:port1, host2:port2, host3:port3) under the same application name. ", "@deekshasharma the default id for eureka registration is the instanceId of the EC2 instance, however there is configuration available to customize the id so they are unique across your services. Are you registering by direct http POST? If you, you'll want to supply a custom instance_id field at the InstanceInfo level.\n\nSimilarly, the port field in the InstanceInfo is available to be customized with the port of your services.\n =||= Thanks for the reply!\nYes I am using http POST to send the registration payload via a Node JS eurekaClient.\nI got it what you are saying. We are anyways customizing the appName and port when sending the registration info. We can also do the same for instance-id. \n\nSo to resolve this issue we are currently providing a suffix to our service name like \n(myservice-port1, myservice-port2) and doing that resolves our issue even though the instance-id is same for all.\n =||= \ud83d\udc4d  =||= "], ["855", "Contrib/jersey2 compatibility", "David Liu", "qiangdavidliu", "09/30/16, 09:56:41 PM", "NaN", "@mattnelson going into master\n =||= We don't have any example on how to use it? Can you share some, or guide us to some documents, so that it will be easier for us.\nThanks.\n =||= @ayusun \n\nThere are some notes on the initial jersey2 PR #821. The readmes for eureka-client-jersey2/eureka-core-jersey2 could be updated before 1.6.0 is released.\n =||= "], ["856", "Exception is thrown when instance metadata contains non-ascii string", "Yang Lin", "todoubaba", "05/30/19, 11:09:54 PM", "service config:\n\n```\neureka:\n    instance:\n        metadataMap:\n            test: \u4e2d\u6587\n```\n\n```\njavax.ws.rs.WebApplicationException: null\n    at com.netflix.discovery.provider.DiscoveryJerseyProvider.readFrom(DiscoveryJerseyProvider.java:110)\n    at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:634)\n    at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586)\n    at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.getApplicationsInternal(AbstractJerseyEurekaHttpClient.java:198)\n    at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.getApplications(AbstractJerseyEurekaHttpClient.java:165)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\n    at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\n    at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118)\n    at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\n    at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:119)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\n    at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n    at com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1030)\n    at com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:944)\n    at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:444)\n    at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:304)\n    at org.springframework.cloud.netflix.eureka.CloudEurekaClient.<init>(CloudEurekaClient.java:51)\n    at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration.eurekaClient(EurekaClientAutoConfiguration.java:190)\n    at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration$$EnhancerBySpringCGLIB$$e01b9f1f.CGLIB$eurekaClient$1(<generated>)\n    at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration$$EnhancerBySpringCGLIB$$e01b9f1f$$FastClassBySpringCGLIB$$cabd0ea0.invoke(<generated>)\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:356)\n    at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration$$EnhancerBySpringCGLIB$$e01b9f1f.eurekaClient(<generated>)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1426)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1123)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1018)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:510)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$2.getObject(AbstractBeanFactory.java:345)\n    at org.springframework.cloud.context.scope.GenericScope$BeanLifecycleWrapper.getBean(GenericScope.java:359)\n    at org.springframework.cloud.context.scope.GenericScope.get(GenericScope.java:176)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:340)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\n    at org.springframework.aop.target.SimpleBeanTargetSource.getTarget(SimpleBeanTargetSource.java:35)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:192)\n    at com.sun.proxy.$Proxy123.getApplications(Unknown Source)\n    at org.springframework.cloud.netflix.eureka.EurekaDiscoveryClientConfiguration.maybeInitializeClient(EurekaDiscoveryClientConfiguration.java:120)\n    at org.springframework.cloud.netflix.eureka.EurekaDiscoveryClientConfiguration.start(EurekaDiscoveryClientConfiguration.java:97)\n    at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:173)\n    at org.springframework.context.support.DefaultLifecycleProcessor.access$200(DefaultLifecycleProcessor.java:51)\n    at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:346)\n    at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:149)\n    at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:112)\n    at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:874)\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.finishRefresh(EmbeddedWebApplicationContext.java:144)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:544)\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:759)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:369)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:313)\n```", "Hi @todoubaba we've never really tested eureka with non-ascii values in the metadata map. If you want to make a contribution to enable this, that would be much appreciated.\n =||= "], ["857", "Make registration error message more meaningful when using JSON", "David Rose", "drse", "05/30/19, 11:09:54 PM", "Currently, when using `POST` to register an app with `JSON`, omitting the `port`, `securePort`, and `dataCenterInfo` structures (`$`, `@enabled`, `@class`) produces a generic message:\n\n``` json\n{\n  \"error\": \"cannot parse request body\"\n}\n```\n\nIt's not directly evident how the XML XSD maps to JSON, would be nice if there was more detailed feedback, or a silent fail that can assume defaults for those values.", "I have the same error now,how did you solve? Can you give me a example of json? Thanks! @drse \r\nThere is no problem when use xml ,when I use json ,it give me this error message.\r\n\r\nI have found the problem,json should like this:\r\n`{\r\n\t\"instance\" :{\r\n    \"hostName\": \"myHost\",\r\n    \"app\": \"myApp\",\r\n    \"ipAddr\": \"127.0.0.1\",\r\n    \"port\": {\"$\": 8080,\"@enabled\": \"true\"},\r\n    \"securePort\": {\"$\": 433,\"@enabled\": \"false\"},\r\n    \"dataCenterInfo\": { \"name\": \"MyOwn\",\"@class\":\"com.netflix.appinfo.InstanceInfo$DefaultDataCenterInfo\" }\r\n\t}\r\n}` =||= account same questions, hope get reply! =||= Hope the error message can be more readable! that would be very helpful =||= "], ["858", "XSD doc is incomplete and has errors", "Vito", "vitosamson", "05/30/19, 11:09:54 PM", "It looks like the XSD spec does not match what Eureka actually expects for the `port` and `securePort` fields, which is:\n\n``` json\n\"port\": {\n  \"$\": <positiveInt>,\n  \"@enabled\": <bool>\n},\n\"securePort\": {\n  \"$\": <positiveInt>,\n  \"@enabled\": <bool>\n}\n```\n\nThe XSD spec lists `port` and `securePort` as just `positiveInteger` types. The XSD should be updated to reflect the required structure for those fields.\n\nIn addition there seems to be a required `\"@class\"` parameter on the `dataCenterInfo`. I couldn't find anything about that parameter in the XSD spec.", "HI @vitosamson thanks for the issue, we'll take a look at the documentation.\n =||= "], ["859", "eureka & swagger-ui", "Alfred", "yihukurama", "10/24/16, 05:43:16 PM", "- Brixton.SR5 eureka  and swagger ui 2.6.0\n\nI just use swagger ui and eureka for my project. However there is no reproducing about the issue, swagger-ui work well but eureka cannot found the application name. I use two day for this bug, at last I common all about swagger ui and eureka found the service.Could you help me to solve this issue.", "Hi @yihukurama you may want to ask this question at https://github.com/spring-cloud/spring-cloud-netflix\n =||= "], ["860", "Is there a use case for different values of virtualHostname and secureVirtualHostname?", "Will Tran", "william-tran", "10/19/16, 11:49:46 PM", "When is it useful to have a secureVirtualHostname that's different from virtualHostname? We have other flags to signify whether we want to use the secure port (eg ribbon.IsSecure and isSecure flags on EurekaClient methods) and whether that securePort is enabled (InstanceInfo.isSecurePortEnabled). I can see a use for having a null secureVirtualHostname if isSecurePortEnabled is false, then the instance won't come up in a query when the isSecure flag is true, and vice versa for virtualHostname. But I can't come up with a reason to have different non-null values of those two properties. ", "Hi @william-tran some of the usage of the metadata such as these are driven by convention, so it depends somewhat on how you want to interpret this. In one scenario it might be used as a way to have a permissive server (I support both) and restrictive clients.\n =||= Thank you for the response @qiangdavidliu. We are having difficulty thinking of use cases where virtual hostname and secure virtual hostname should have different non-null property values. Would you be able to point towards customer use cases where this is used?\n =||= "], ["861", "- fix minor typo in PropertyBasedClientConfigConstants.java", "LUONG Trong-Hieu", "hieurl", "10/20/16, 07:17:03 PM", "Nothing much, just a typo fix\n\nINITIAL_REGISTRATION_REPLCIATION_DELAY_KEY -> INITIAL_REGISTRATION_REPLICATION_DELAY_KEY", "Thanks @hieurl \n =||= "], ["862", "Convert all remaining guice provider references to javax", "Matt Nelson", "mattnelson", "10/20/16, 07:19:49 PM", "Follow up to #808 now that guice has been released and pulled in.", "thanks @mattnelson \n =||= "], ["863", "Can't upsert Route53 Record Set", "Elnur Abdurrakhimov", "elnur", "11/08/16, 01:34:31 AM", "I'm trying to use the Route53 binder. It works for the first time when a record set doesn't exist. But after instances in an ASG get replaced, the binder can't upsert the same record set it created earlier.\n\nI'm seeing this in the logs:\n\n```\ncom.netflix.eureka.aws.Route53Binder     : Unable to find free domain in [1c.eureka.example.internal.]\n```\n\nAny ideas what's wrong? Any workarounds?", "I gave full EC2 profile permissions for Route53, EC2, and ASG just in case it could be a permission problem. But it didn't help.\n =||= Okay, it looks like it's intentional. The binder only looks for free domains. That doesn't make much sense though. Thanks to autoscaling, instances come and go but it'd be nice to have a fixed number of domains to have stable locations of Eureka instances. So if an instance a domain points to is long gone, this Route53 binder can't update the domain to point to a new Eureka instance.\n =||= @elnur we do not use the Route53Binder at Netflix, and it was a component that contributed to us externally. The implementation as it is today may be specific to the contributor's internal needs. You can try to contact @aroger-r7 to discuss.\n =||= Later, I've figured out that the Route53 binder unbinds itself from domain name on shutdown. But it was too late since I got it all working with EIP. \ud83d\ude42 \n\nThe EIP approach is more predictable here because an EIP gets released when an EC2 instance dies without a clean shutdown, and hence Eureka will assign an EIP to itself in any case. While the Route53 binder relies on proper shutdown to unbind itself.\n =||= @elnur glad to hear that you have resolved your issue.\n =||= "], ["864", "How to get CPUs info from discoveryClient?", null, "flamhaze5946", "10/24/16, 05:47:50 PM", "In this ClassMeta's code I have not found any method to get clients' runtime infomation.\nby the way, every time I start my application, about 30s - 60s eureka server can register my application's information up, is it a heartbeat problem? Can I set the heartbeat quickly?(I want to update Clients' information quickly, too)\nThank you !", "Now I try to registerAppMetadata to achieve it, thanks\n =||= \ud83d\udc4d \n =||= "], ["865", "Eureka propagates registry info to its peer node only(peer's peer cannot get this replication)", "\u738b\u9e3f\u98de", "wanghongfei", "10/24/16, 05:40:10 PM", "I have three Eureka instances A, B and C. A's peer is pointed to B, B is pointed to C, C is pointed to A:\n\n![yvmm2](https://cloud.githubusercontent.com/assets/4201347/19636216/8c1f7580-99fa-11e6-8509-bfedd048aef4.jpg)\n\nWhen I registered my service to Eureka A, Eureka B got this registry info as expected. But C got nothing at all, which means B didn't propagate info to C.  \n\nIs this the correct behavior as Eureka being designed or there's something wrong with my configuration?\n## UPDATE\n\nI found the answer from `PeerAwareInstanceRegistry#replicateToPeers()`, it contains following code:\n\n```\n// If it is a replication already, do not replicate again as this will create a poison replication\n            if (peerEurekaNodes == Collections.EMPTY_LIST || isReplication) {\n                return;\n            }\n```\n\nWhy don't we add some description for this to wiki?", "@wanghongfei eureka server set up actually requires that you configure as peers all other available servers. So in your example, you would configure both B and C to be peers of A. I have updated the wiki page https://github.com/Netflix/eureka/wiki/Deploying-Eureka-Servers-in-EC2. Thanks.\n =||= "], ["866", "Query on release date for Eureka 2.0", "Kalyan", "kalyanvgopal-zz", "10/24/16, 05:41:57 PM", "Hi,\n\nEureka 2.0 proposed features are very interesting But I could not find any information on release date. \nCan any one help me with a release date for 2.0?\n\nRegards\nKalyan", "@kalyanvgopal we've had some internal changes w.r.t. to eureka2, and do not have any time lines for open sourcing.\n =||= "], ["867", "Delay call to DiscoveryClient.fetchRegistry at boot", "Greg Arakelian", "arakelian", "07/18/18, 01:08:59 PM", "I'm writing a simple application which combines Eureka server, Discovery client, and Zuul Proxy into a single project.  Instead of static routes, I want my Zuul proxy to use Discovery client.\r\n\r\neureka.client.registerWithEureka is set to false.  This is the recommended setting for standalone Eureka servers.\r\n\r\nIf I set eureka.client.fetchRegistry to false, Eureka server boot and operates normally, but Zuul Proxy will not work because Discovery Client is basically limited to the static routes.  It's unaware of the application registered with Eureka server.\r\n\r\nIf I set eureka.client.fetchRegistry to true (and eureka.client.serviceUrl.defaultZone pointing back at itself), the Eureka server boots, and Zuul Proxy works.  However, I see a spurious error in the logs at boot time, because DiscoveryClient attempts to immediately load the list of applications due code at line 408.\r\n\r\n if (clientConfig.shouldFetchRegistry() && !fetchRegistry(false)) {\r\n       fetchRegistryFromBackup();\r\n}\r\n\r\nIt'd be great if we could have another flag, \"shouldFetchRegistryImmediately\" so that we could change these lines to read:\r\n\r\n if (clientConfig.shouldFetchRegistry() && clientConfig.shouldFetchRegistryImmediately() && !fetchRegistry(false)) {\r\n            fetchRegistryFromBackup();\r\n        }\r\n\r\nIn my use case, I would set eureka.client.shouldFetchRegistryImmediately to false, and DiscoveryClient would then reload after 30 seconds (the default refresh interval), when the single standalone application has booted and is ready to respond.", "Hi @garakelian thank you for the issue. At Netflix, we try to guard against cases where a local eureka-client starts up without any registry information, as that can adversely affect the server performance. As such, we deliberately did not put in a lazy loading option within eureka-client.\n =||= @qiangdavidliu, Respectfully, you could still guard against cases likes like this, by making it the default setting, but still allow someone to configure it so that it doesn't load immediately. I'd be happy to submit a PR for this change if I thought that it would be merged. =||= @garakelian we welcome any PR that improves eureka from the community. =||= Closing this as I'm currently not using Eureka. Thank you. =||= I tried to implement this, but I was not able to add any configuration parameter by changing EurekaClientConfig, This interface is implemented by org.springframework.cloud.netflix.eureka.EurekaClientConfigBean also. Only option for me is to remove the whole block:\r\n\r\n```\r\n        if (clientConfig.shouldFetchRegistry() && !fetchRegistry(false)) {\r\n            fetchRegistryFromBackup();\r\n        }\r\n```\r\n\r\nAny suggestions? =||= "], ["868", "Eureka client can't read the server's registry.", null, "jianminli", "11/05/16, 03:43:42 PM", "I have set up an Eureka server and a client, both of which are written in spring boot. I am using these two application for my Spring MVC testing. The server and client are running well.\r\n\r\nServer's configuration application.properties is as below.\r\n\r\n> server.port=8761\r\n> spring.application.name=service-itself\r\n> eureka.client.service-url.default-zone=http://localhost:8761/eureka/\r\n> eureka.client.register-with-eureka=true\r\n> eureka.client.fetch-registry=false\r\n> logging.level.com.netflix.eureka=OFF\r\n> logging.level.com.netflix.discovery=OFF\r\n\r\nclient's is as below: application.yml\r\n\r\n> spring:\r\n>   application:\r\n>     name: say-hello\r\n> \r\n> server:\r\n>   port: 8090\r\n> \r\n> eureka:\r\n>   client:\r\n>     service-url:\r\n>       defaultZone: http://${eureka.host:localhost}:${eureka.port:8761}/eureka/\r\n\r\nWhen accessing the Eureka dashboard localhost:8761, I can see that client has been registered.\r\n\r\nFor my Spring MVC gateway, as it is not a Spring boot project, so I copied the [example](https://github.com/Netflix/eureka/blob/master/eureka-examples/src/main/java/com/netflix/eureka/ExampleEurekaClient.java) to my project simply for testing whether it can connect to the Eureka server and retrieve the registered the instance of \"say-hello\" client. Unfortunately, it cannot do so with saying \"Cannot get an instance of example service to talk to from eureka\" which is printed at line 76 in the example class.\r\n\r\nHere is the eureka-client.properties placed in gateway's classpath. I can confirmed that the Client class is reading the config file.\r\n\r\n> eureka.name=gatewayEurekaClient\r\n> eureka.vipAddress=say-hello\r\n> eureka.port=8761\r\n> eureka.preferSameZone=true\r\n> eureka.preferSameZone=true\r\n> eureka.shouldUseDns=false\r\n> eureka.serviceUrl.default=http://localhost:8761/eureka\r\n> eureka.serviceUrl.defaultZone=http://localhost:8761/eureka\r\n\r\n\r\nSome debug information here:\r\n\r\n> instanceInfo    InstanceInfo  (id=234)  \r\n>     actionType  null    \r\n>     appGroupName    \"UNKNOWN\" (id=246)  \r\n>     appName \"GATEWAYEUREKACLIENT\" (id=247)  \r\n>     asgName null    \r\n>     countryId   1   \r\n>     dataCenterInfo  PropertiesInstanceConfig$1  (id=248)    \r\n>     healthCheckExplicitUrl  null    \r\n>     healthCheckRelativeUrl  \"/healthcheck\" (id=253) \r\n>     healthCheckSecureExplicitUrl    null    \r\n>     healthCheckUrl  \"http://A156N7AB89AXNZQ:8761/healthcheck\" (id=254)  \r\n>     homePageUrl \"http://A156N7AB89AXNZQ:8761/\" (id=255) \r\n>     hostName    \"A156N7AB89AXNZQ\" (id=256)  \r\n>     instanceId  \"A156N7AB89AXNZQ\" (id=256)  \r\n>     ipAddr  \"10.209.66.64\" (id=257) \r\n>     isCoordinatingDiscoveryServer   Boolean  (id=258)   \r\n>     isInstanceInfoDirty false   \r\n>     isSecurePortEnabled false   \r\n>     isUnsecurePortEnabled   true    \r\n>     lastDirtyTimestamp  Long  (id=260)  \r\n>     lastUpdatedTimestamp    Long  (id=263)  \r\n>     leaseInfo   LeaseInfo  (id=264) \r\n>     metadata    ConcurrentHashMap<K,V>  (id=266)    \r\n>     overriddenstatus    InstanceInfo$InstanceStatus  (id=267)   \r\n>     port    8761    \r\n>     secureHealthCheckUrl    null    \r\n>     securePort  443 \r\n>     secureVipAddress    null    \r\n>     secureVipAddressUnresolved  null    \r\n>     sid \"na\" (id=270)   \r\n>     status  InstanceInfo$InstanceStatus  (id=271)   \r\n>     statusPageExplicitUrl   null    \r\n>     statusPageRelativeUrl   \"/Status\" (id=272)  \r\n>     statusPageUrl   \"http://A156N7AB89AXNZQ:8761/Status\" (id=273)   \r\n>     version \"unknown\" (id=274)  \r\n>     vipAddress  \"say-hello\" (id=275)    \r\n>     vipAddressUnresolved    \"say-hello\" (id=275) ", "Could you tell me how you solved the problem? =||= \r\nI had the same difficulty of registering services with spring mvc 4 with eureka but using the SIDECAR of spring I could solve it and be able to add the other components such as Ribbon, so you must create a spring-boot project to add the dependency of sidecar, then to the spring mvc project when deploying modify the port so that it leaves like this (example: localhost: 9090 / service1) also you must have a service that is \"health\" with this name that returns \"status: UP\" (localhost: 9090 / health), I found all this configuration in this project of which I was guided (https://github.com/BarathArivazhagan/spring-cloud-sidecar-sample)\r\nAlso the sidecar is independent of the language of the service only needs the service \"Health\" to be able to register it in eureka.Therefore you have a sidecar which listens to the project with spring mvc, the eureka escuha to the sidecar.In the repository of which I There is a complete description of how the components interact. =||= "], ["869", "Remove assignment of instanceInfo from static instance.", "Spencer Gibb", "spencergibb", "11/08/16, 01:38:50 AM", "f40f54a03d135379845aeb8c060b4f768fe7e7b5 made instanceInfo a required field to be set, but an assignment was still happening from `ApplicationInfoManager.getInstance().getInfo()` overwriting assigned field.", "thanks @spencergibb \n =||= "], ["870", "Update README.md", "David Liu", "qiangdavidliu", "11/08/16, 01:46:17 AM", "NaN", "NaN"], ["871", "Eureka Client deployment issue in Weblogic 12.2.1", null, "muraliguttha", "11/17/16, 11:31:00 AM", "Hi,\r\nI am trying to deploy eureka client (war file) in weblogic 12.2.1. I am getting below issue.\r\nBut same war is working fine in Tomcat 9 version without any changes.\r\n\r\nPlease suggest / guide for any changes are required for weblogic\r\n\r\ncontextInitialized()***\r\nNov 15, 2016 12:47:34 PM com.netflix.config.sources.URLConfigurationSource <init>\r\nWARNING: No URLs will be polled as dynamic configuration sources.\r\n<Nov 15, 2016 12:47:34 PM IST> <Warning> <com.netflix.config.sources.URLConfigurationSource> <BEA-000000> <No URLs will be polled as dynamic configuration sources.>\r\nNov 15, 2016 12:47:34 PM com.netflix.config.sources.URLConfigurationSource <init>\r\nINFO: To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.\r\nNov 15, 2016 12:47:34 PM com.netflix.config.DynamicPropertyFactory getInstance\r\nINFO: DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@60fdb4eb\r\nNov 15, 2016 12:47:34 PM com.netflix.config.util.ConfigurationUtils getConfigFromPropertiesFile\r\nINFO: Loaded properties file zip:/scratch/programs/Oracle/MiddlewareINFRA/Oracle_Home/user_projects/domains/RDdomain/servers/AdminServer/tmp/_WL_user/FCLiteCustomerService/9tqc86/war/WEB-INF/lib/_wl_cls_gen.jar!/customer-service.properties\r\nNov 15, 2016 12:47:34 PM com.netflix.appinfo.providers.EurekaConfigBasedInstanceInfoProvider get\r\nINFO: Setting initial instance status as: STARTING\r\nNov 15, 2016 12:47:34 PM com.netflix.config.util.ConfigurationUtils getConfigFromPropertiesFile\r\nWARNING: zip:/scratch/programs/Oracle/MiddlewareINFRA/Oracle_Home/user_projects/domains/RDdomain/servers/AdminServer/tmp/_WL_user/FCLiteCustomerService/9tqc86/war/WEB-INF/lib/_wl_cls_gen.jar!/customer-service.properties is already loaded\r\n<Nov 15, 2016 12:47:34 PM IST> <Warning> <com.netflix.config.util.ConfigurationUtils> <BEA-000000> <zip:/scratch/programs/Oracle/MiddlewareINFRA/Oracle_Home/user_projects/domains/RDdomain/servers/AdminServer/tmp/_WL_user/FCLiteCustomerService/9tqc86/war/WEB-INF/lib/_wl_cls_gen.jar!/customer-service.properties is already loaded>\r\nNov 15, 2016 12:47:34 PM com.netflix.discovery.provider.DiscoveryJerseyProvider <init>\r\nINFO: Using JSON encoding codec LegacyJacksonJson\r\nNov 15, 2016 12:47:34 PM com.netflix.discovery.provider.DiscoveryJerseyProvider <init>\r\nINFO: Using JSON decoding codec LegacyJacksonJson\r\nNov 15, 2016 12:47:35 PM com.netflix.discovery.provider.DiscoveryJerseyProvider <init>\r\nINFO: Using XML encoding codec XStreamXml\r\nNov 15, 2016 12:47:35 PM com.netflix.discovery.provider.DiscoveryJerseyProvider <init>\r\nINFO: Using XML decoding codec XStreamXml\r\nNov 15, 2016 12:47:35 PM com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver getClusterEndpoints\r\nINFO: Resolving eureka endpoints via configuration\r\nNov 15, 2016 12:47:35 PM com.netflix.discovery.DiscoveryClient fetchRegistry\r\nINFO: Disable delta property : false\r\nNov 15, 2016 12:47:35 PM com.netflix.discovery.DiscoveryClient fetchRegistry\r\nINFO: Single vip registry refresh property : null\r\nNov 15, 2016 12:47:35 PM com.netflix.discovery.DiscoveryClient fetchRegistry\r\nINFO: Force full registry fetch : false\r\nNov 15, 2016 12:47:35 PM com.netflix.discovery.DiscoveryClient fetchRegistry\r\nINFO: Application is null : false\r\nNov 15, 2016 12:47:35 PM com.netflix.discovery.DiscoveryClient fetchRegistry\r\nINFO: Registered Applications size is zero : true\r\nNov 15, 2016 12:47:35 PM com.netflix.discovery.DiscoveryClient fetchRegistry\r\nINFO: Application version is -1: true\r\nNov 15, 2016 12:47:35 PM com.netflix.discovery.DiscoveryClient getAndStoreFullRegistry\r\nINFO: Getting all instance registry info from the eureka server\r\nNov 15, 2016 12:47:35 PM com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient execute\r\nSEVERE: Request execution error\r\njavax.ws.rs.WebApplicationException: HTTP 400 Bad Request\r\n        at com.netflix.discovery.provider.DiscoveryJerseyProvider.readFrom(DiscoveryJerseyProvider.java:110)\r\n        at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:634)\r\n        at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586)\r\n        at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.getApplicationsInternal(AbstractJerseyEurekaHttpClient.java:198)\r\n        at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.getApplications(AbstractJerseyEurekaHttpClient.java:165)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\r\n        at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\r\n        at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118)\r\n        at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:119)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\r\n        at com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1030)\r\n        at com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:944)\r\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:444)\r\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:304)\r\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:300)\r\n        at com.oracle.fclitecustomerservice.CustomerServiceContextListener.initializeEurekaClient(CustomerServiceContextListener.java:100)\r\n        at com.oracle.fclitecustomerservice.CustomerServiceContextListener.contextInitialized(CustomerServiceContextListener.java:30)\r\n        at weblogic.servlet.internal.EventsManager$FireContextListenerAction.run(EventsManager.java:725)\r\n        at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:326)\r\n        at weblogic.security.service.SecurityManager.runAsForUserCode(SecurityManager.java:196)\r\n        at weblogic.servlet.provider.WlsSecurityProvider.runAsForUserCode(WlsSecurityProvider.java:203)\r\n        at weblogic.servlet.provider.WlsSubjectHandle.run(WlsSubjectHandle.java:71)\r\n        at weblogic.servlet.internal.EventsManager.executeContextListener(EventsManager.java:251)\r\n        at weblogic.servlet.internal.EventsManager.notifyContextCreatedEvent(EventsManager.java:204)\r\n        at weblogic.servlet.internal.EventsManager.notifyContextCreatedEvent(EventsManager.java:189)\r\n        at weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1910)\r\n        at weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3063)\r\n        at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1830)\r\n        at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:875)\r\n        at weblogic.application.internal.ExtensibleModuleWrapper$StartStateChange.next(ExtensibleModuleWrapper.java:360)\r\n        at weblogic.application.internal.ExtensibleModuleWrapper$StartStateChange.next(ExtensibleModuleWrapper.java:356)\r\n        at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:45)\r\n        at weblogic.application.internal.ExtensibleModuleWrapper.start(ExtensibleModuleWrapper.java:138)\r\n        at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:124)\r\n        at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:237)\r\n        at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:232)\r\n        at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:45)\r\n        at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:82)\r\n        at weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:52)\r\n        at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:753)\r\n        at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:45)\r\n        at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:263)\r\n        at weblogic.application.internal.SingleModuleDeployment.activate(SingleModuleDeployment.java:53)\r\n        at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:165)\r\n        at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:80)\r\n        at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:601)\r\n        at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:171)\r\n        at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:121)\r\n        at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:343)\r\n        at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:895)\r\n        at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1422)\r\n        at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:454)\r\n        at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:181)\r\n        at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195)\r\n        at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13)\r\n        at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:68)\r\n        at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:643)\r\n        at weblogic.invocation.ComponentInvocationContextManager._runAs(ComponentInvocationContextManager.java:348)\r\n        at weblogic.invocation.ComponentInvocationContextManager.runAs(ComponentInvocationContextManager.java:333)\r\n        at weblogic.work.LivePartitionUtility.doRunWorkUnderContext(LivePartitionUtility.java:54)\r\n        at weblogic.work.PartitionUtility.runWorkUnderContext(PartitionUtility.java:41)\r\n        at weblogic.work.SelfTuningWorkManagerImpl.runWorkUnderContext(SelfTuningWorkManagerImpl.java:617)\r\n        at weblogic.work.ExecuteThread.execute(ExecuteThread.java:397)\r\n        at weblogic.work.ExecuteThread.run(ExecuteThread.java:346)\r\n\r\n<Nov 15, 2016 12:47:35 PM IST> <Error> <com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient> <BEA-000000> <Request execution error\r\njavax.ws.rs.WebApplicationException: HTTP 400 Bad Request\r\n        at com.netflix.discovery.provider.DiscoveryJerseyProvider.readFrom(DiscoveryJerseyProvider.java:110)\r\n        at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:634)\r\n        at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586)\r\n        at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.getApplicationsInternal(AbstractJerseyEurekaHttpClient.java:198)\r\n        at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.getApplications(AbstractJerseyEurekaHttpClient.java:165)\r\n        Truncated. see log file for complete stacktrace\r\n>\r\nNov 15, 2016 12:47:35 PM com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient execute\r\nWARNING: Request execution failure\r\n<Nov 15, 2016 12:47:35 PM IST> <Warning> <com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient> <BEA-000000> <Request execution failure>\r\nNov 15, 2016 12:47:35 PM com.netflix.discovery.DiscoveryClient fetchRegistry\r\nSEVERE: DiscoveryClient_CUSTOMERSERVICE/ofss222433 - was unable to refresh its cache! status = Cannot execute request on any known server\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\r\n        at com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1030)\r\n        at com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:944)\r\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:444)\r\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:304)\r\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:300)\r\n        at com.oracle.fclitecustomerservice.CustomerServiceContextListener.initializeEurekaClient(CustomerServiceContextListener.java:100)\r\n        at com.oracle.fclitecustomerservice.CustomerServiceContextListener.contextInitialized(CustomerServiceContextListener.java:30)\r\n        at weblogic.servlet.internal.EventsManager$FireContextListenerAction.run(EventsManager.java:725)\r\n        at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:326)\r\n        at weblogic.security.service.SecurityManager.runAsForUserCode(SecurityManager.java:196)\r\n        at weblogic.servlet.provider.WlsSecurityProvider.runAsForUserCode(WlsSecurityProvider.java:203)\r\n        at weblogic.servlet.provider.WlsSubjectHandle.run(WlsSubjectHandle.java:71)\r\n        at weblogic.servlet.internal.EventsManager.executeContextListener(EventsManager.java:251)\r\n        at weblogic.servlet.internal.EventsManager.notifyContextCreatedEvent(EventsManager.java:204)\r\n        at weblogic.servlet.internal.EventsManager.notifyContextCreatedEvent(EventsManager.java:189)\r\n        at weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1910)\r\n        at weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3063)\r\n        at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1830)\r\n        at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:875)\r\n        at weblogic.application.internal.ExtensibleModuleWrapper$StartStateChange.next(ExtensibleModuleWrapper.java:360)\r\n        at weblogic.application.internal.ExtensibleModuleWrapper$StartStateChange.next(ExtensibleModuleWrapper.java:356)\r\n        at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:45)\r\n        at weblogic.application.internal.ExtensibleModuleWrapper.start(ExtensibleModuleWrapper.java:138)\r\n        at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:124)\r\n        at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:237)\r\n        at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:232)\r\n        at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:45)\r\n        at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:82)\r\n        at weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:52)\r\n        at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:753)\r\n        at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:45)\r\n        at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:263)\r\n        at weblogic.application.internal.SingleModuleDeployment.activate(SingleModuleDeployment.java:53)\r\n        at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:165)\r\n        at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:80)\r\n        at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:601)\r\n        at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:171)\r\n        at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:121)\r\n        at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:343)\r\n        at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:895)\r\n        at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1422)\r\n        at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:454)\r\n        at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:181)\r\n        at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195)\r\n        at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13)\r\n        at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:68)\r\n        at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:643)\r\n        at weblogic.invocation.ComponentInvocationContextManager._runAs(ComponentInvocationContextManager.java:348)\r\n        at weblogic.invocation.ComponentInvocationContextManager.runAs(ComponentInvocationContextManager.java:333)\r\n        at weblogic.work.LivePartitionUtility.doRunWorkUnderContext(LivePartitionUtility.java:54)\r\n        at weblogic.work.PartitionUtility.runWorkUnderContext(PartitionUtility.java:41)\r\n        at weblogic.work.SelfTuningWorkManagerImpl.runWorkUnderContext(SelfTuningWorkManagerImpl.java:617)\r\n        at weblogic.work.ExecuteThread.execute(ExecuteThread.java:397)\r\n        at weblogic.work.ExecuteThread.run(ExecuteThread.java:346)\r\n\r\n<Nov 15, 2016 12:47:35 PM IST> <Error> <com.netflix.discovery.DiscoveryClient> <BEA-000000> <DiscoveryClient_CUSTOMERSERVICE/ofss222433 - was unable to refresh its cache! status = Cannot execute request on any known server\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\r\n        Truncated. see log file for complete stacktrace\r\n>\r\nNov 15, 2016 12:47:35 PM com.netflix.discovery.DiscoveryClient$1 get\r\nWARNING: Using default backup registry implementation which does not do anything.\r\n<Nov 15, 2016 12:47:35 PM IST> <Warning> <com.netflix.discovery.DiscoveryClient> <BEA-000000> <Using default backup registry implementation which does not do anything.>\r\nNov 15, 2016 12:47:35 PM com.netflix.discovery.DiscoveryClient initScheduledTasks\r\nINFO: Starting heartbeat executor: renew interval is: 30\r\nNov 15, 2016 12:47:35 PM com.netflix.discovery.InstanceInfoReplicator <init>\r\nINFO: InstanceInfoReplicator onDemand update allowed rate per min is 4\r\nNov 15, 2016 12:47:35 PM com.netflix.discovery.DiscoveryClient <init>\r\nINFO: Discovery Client initialized at timestamp 1479194255836 with initial instances count: 0\r\nRegistering service to API Discovery Server with STARTING status ***\r\nSimulating service initialization by sleeping for 2 seconds ***\r\nDone sleeping, now changing status to UP ***\r\nNov 15, 2016 12:47:37 PM com.netflix.discovery.DiscoveryClient$3 notify\r\nINFO: Saw local status change event StatusChangeEvent [timestamp=1479194257840, current=UP, previous=STARTING]\r\nWaiting ... verifying service registration with API Discovery Server ...\r\nNov 15, 2016 12:47:37 PM com.netflix.discovery.DiscoveryClient register\r\nINFO: DiscoveryClient_CUSTOMERSERVICE/ofss222433: registering service...\r\n2016-11-15 12:47:37,866 INFO  org.apache.http.impl.client.DefaultRequestDirector:696 [DiscoveryClient-InstanceInfoReplicator-0] [tryExecute] I/O exception (com.fasterxml.jackson.databind.JsonMappingException) caught when processing request to {}->http://10.184.152.253:8080: Conflicting property name definitions: 'lastRenewalTimestamp' (for [method com.netflix.appinfo.LeaseInfo#getRenewalTimestamp(0 params)]) vs 'renewalTimestamp' (for [parameter #4, annotations: {interface com.fasterxml.jackson.annotation.JsonProperty=@com.fasterxml.jackson.annotation.JsonProperty(value=renewalTimestamp, required=false)}])\r\n2016-11-15 12:47:37,871 INFO  org.apache.http.impl.client.DefaultRequestDirector:706 [DiscoveryClient-InstanceInfoReplicator-0] [tryExecute] Retrying request to {}->http://10.184.152.253:8080\r\nNov 15, 2016 12:47:37 PM com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient execute\r\nSEVERE: Request execution error\r\ncom.sun.jersey.api.client.ClientHandlerException: org.apache.http.client.ClientProtocolException\r\n        at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187)\r\n        at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123)\r\n        at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27)\r\n        at com.sun.jersey.api.client.Client.handle(Client.java:652)\r\n        at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682)\r\n        at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)\r\n        at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:570)\r\n        at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.register(AbstractJerseyEurekaHttpClient.java:56)\r\n\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\r\n        at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\r\n        at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118)\r\n        at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:119)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n        at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:815)\r\n        at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:104)\r\n        at com.netflix.discovery.InstanceInfoReplicator$1.run(InstanceInfoReplicator.java:88)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:745)\r\nCaused by: org.apache.http.client.ClientProtocolException\r\n        at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:867)\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:115)\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:57)\r\n        at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173)\r\n        ... 30 more\r\nCaused by: org.apache.http.client.NonRepeatableRequestException: Cannot retry request with a non-repeatable request entity.  The cause lists the reason the original request failed.\r\n        at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:659)\r\n        at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:487)\r\n        at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:863)\r\n        ... 33 more\r\nCaused by: com.fasterxml.jackson.databind.JsonMappingException: Conflicting property name definitions: 'lastRenewalTimestamp' (for [method com.netflix.appinfo.LeaseInfo#getRenewalTimestamp(0 params)]) vs 'renewalTimestamp' (for [parameter #4, annotations: {interface com.fasterxml.jackson.annotation.JsonProperty=@com.fasterxml.jackson.annotation.JsonProperty(value=renewalTimestamp, required=false)}])\r\n        at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:248)\r\n        at com.fasterxml.jackson.databind.ObjectWriter._configAndWriteValue(ObjectWriter.java:811)\r\n        at com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:650)\r\n        at com.netflix.discovery.converters.EurekaJacksonCodec.writeTo(EurekaJacksonCodec.java:194)\r\n        at com.netflix.discovery.converters.wrappers.CodecWrappers$LegacyJacksonJson.encode(CodecWrappers.java:304)\r\n        at com.netflix.discovery.provider.DiscoveryJerseyProvider.writeTo(DiscoveryJerseyProvider.java:135)\r\n        at com.sun.jersey.api.client.RequestWriter$RequestEntityWriterImpl.writeRequestEntity(RequestWriter.java:231)\r\n        at com.sun.jersey.client.apache4.ApacheHttpClient4Handler$2.writeTo(ApacheHttpClient4Handler.java:289)\r\n        at org.apache.http.entity.HttpEntityWrapper.writeTo(HttpEntityWrapper.java:89)\r\n        at org.apache.http.impl.client.EntityEnclosingRequestWrapper$EntityWrapper.writeTo(EntityEnclosingRequestWrapper.java:108)\r\n        at org.apache.http.impl.entity.EntitySerializer.serialize(EntitySerializer.java:117)\r\n        at org.apache.http.impl.AbstractHttpClientConnection.sendRequestEntity(AbstractHttpClientConnection.java:265)\r\n        at org.apache.http.impl.conn.AbstractClientConnAdapter.sendRequestEntity(AbstractClientConnAdapter.java:231)\r\n        at org.apache.http.protocol.HttpRequestExecutor.doSendRequest(HttpRequestExecutor.java:236)\r\n        at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:121)\r\n        at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:685)\r\n        ... 35 more\r\nCaused by: java.lang.IllegalStateException: Conflicting property name definitions: 'lastRenewalTimestamp' (for [method com.netflix.appinfo.LeaseInfo#getRenewalTimestamp(0 params)]) vs 'renewalTimestamp' (for [parameter #4, annotations: {interface com.fasterxml.jackson.annotation.JsonProperty=@com.fasterxml.jackson.annotation.JsonProperty(value=renewalTimestamp, required=false)}])\r\n        at com.fasterxml.jackson.databind.introspect.POJOPropertyBuilder.findRenamed(POJOPropertyBuilder.java:694)\r\n        at com.fasterxml.jackson.databind.introspect.POJOPropertyBuilder.findNewName(POJOPropertyBuilder.java:673)\r\n        at com.fasterxml.jackson.databind.introspect.POJOPropertiesCollector._renameProperties(POJOPropertiesCollector.java:682)\r\n        at com.fasterxml.jackson.databind.introspect.POJOPropertiesCollector.collect(POJOPropertiesCollector.java:242)\r\n        at com.fasterxml.jackson.databind.introspect.BasicClassIntrospector.collectProperties(BasicClassIntrospector.java:142)\r\n        at com.fasterxml.jackson.databind.introspect.BasicClassIntrospector.forSerialization(BasicClassIntrospector.java:68)\r\n        at com.fasterxml.jackson.databind.introspect.BasicClassIntrospector.forSerialization(BasicClassIntrospector.java:11)\r\n        at com.fasterxml.jackson.databind.SerializationConfig.introspect(SerializationConfig.java:530)\r\n        at com.fasterxml.jackson.databind.ser.BeanSerializerFactory.createSerializer(BeanSerializerFactory.java:133)\r\n        at com.fasterxml.jackson.databind.SerializerProvider._createUntypedSerializer(SerializerProvider.java:1077)\r\n        at com.fasterxml.jackson.databind.SerializerProvider._createAndCacheUntypedSerializer(SerializerProvider.java:1037)\r\n        at com.fasterxml.jackson.databind.SerializerProvider.findValueSerializer(SerializerProvider.java:445)\r\n        at com.fasterxml.jackson.databind.SerializerProvider.findTypedValueSerializer(SerializerProvider.java:599)\r\n        at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:93)\r\n        at com.fasterxml.jackson.databind.ObjectMapper.writeValue(ObjectMapper.java:1837)\r\n        at com.fasterxml.jackson.core.base.GeneratorBase.writeObject(GeneratorBase.java:261)\r\n        at com.fasterxml.jackson.core.JsonGenerator.writeObjectField(JsonGenerator.java:1312)\r\n        at com.netflix.discovery.converters.EurekaJacksonCodec$InstanceInfoSerializer.serialize(EurekaJacksonCodec.java:358)\r\n        at com.netflix.discovery.converters.EurekaJacksonCodec$InstanceInfoSerializer.serialize(EurekaJacksonCodec.java:316)\r\n        at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:237)\r\n        ... 50 more\r\n\r\n<Nov 15, 2016 12:47:37 PM IST> <Error> <com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient> <BEA-000000> <Request execution error\r\ncom.sun.jersey.api.client.ClientHandlerException: org.apache.http.client.ClientProtocolException\r\n        at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187)\r\n        at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123)\r\n        at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27)\r\n        at com.sun.jersey.api.client.Client.handle(Client.java:652)\r\n        at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682)\r\n        Truncated. see log file for complete stacktrace\r\nCaused By: org.apache.http.client.ClientProtocolException\r\n        at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:867)\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:115)\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:57)\r\n        at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173)\r\n        at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123)\r\n        Truncated. see log file for complete stacktrace\r\nCaused By: org.apache.http.client.NonRepeatableRequestException: Cannot retry request with a non-repeatable request entity.  The cause lists the reason the original request failed.\r\n        at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:659)\r\n        at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:487)\r\n        at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:863)\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:115)\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:57)\r\n        Truncated. see log file for complete stacktrace\r\nCaused By: com.fasterxml.jackson.databind.JsonMappingException: Conflicting property name definitions: 'lastRenewalTimestamp' (for [method com.netflix.appinfo.LeaseInfo#getRenewalTimestamp(0 params)]) vs 'renewalTimestamp' (for [parameter #4, annotations: {interface com.fasterxml.jackson.annotation.JsonProperty=@com.fasterxml.jackson.annotation.JsonProperty(value=renewalTimestamp, required=false)}])\r\n        at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:248)\r\n        at com.fasterxml.jackson.databind.ObjectWriter._configAndWriteValue(ObjectWriter.java:811)\r\n        at com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:650)\r\n        at com.netflix.discovery.converters.EurekaJacksonCodec.writeTo(EurekaJacksonCodec.java:194)\r\n        at com.netflix.discovery.converters.wrappers.CodecWrappers$LegacyJacksonJson.encode(CodecWrappers.java:304)\r\n        Truncated. see log file for complete stacktrace\r\nCaused By: java.lang.IllegalStateException: Conflicting property name definitions: 'lastRenewalTimestamp' (for [method com.netflix.appinfo.LeaseInfo#getRenewalTimestamp(0 params)]) vs 'renewalTimestamp' (for [parameter #4, annotations: {interface com.fasterxml.jackson.annotation.JsonProperty=@com.fasterxml.jackson.annotation.JsonProperty(value=renewalTimestamp, required=false)}])\r\n        at com.fasterxml.jackson.databind.introspect.POJOPropertyBuilder.findRenamed(POJOPropertyBuilder.java:694)\r\n        at com.fasterxml.jackson.databind.introspect.POJOPropertyBuilder.findNewName(POJOPropertyBuilder.java:673)\r\n        at com.fasterxml.jackson.databind.introspect.POJOPropertiesCollector._renameProperties(POJOPropertiesCollector.java:682)\r\n        at com.fasterxml.jackson.databind.introspect.POJOPropertiesCollector.collect(POJOPropertiesCollector.java:242)\r\n        at com.fasterxml.jackson.databind.introspect.BasicClassIntrospector.collectProperties(BasicClassIntrospector.java:142)\r\n        Truncated. see log file for complete stacktrace\r\n>\r\nNov 15, 2016 12:47:37 PM com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient execute\r\nWARNING: Request execution failure\r\n<Nov 15, 2016 12:47:37 PM IST> <Warning> <com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient> <BEA-000000> <Request execution failure>\r\nNov 15, 2016 12:47:37 PM com.netflix.discovery.DiscoveryClient register\r\nWARNING: DiscoveryClient_CUSTOMERSERVICE/ofss222433 - registration failed Cannot execute request on any known server\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n        at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:815)\r\n        at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:104)\r\n        at com.netflix.discovery.InstanceInfoReplicator$1.run(InstanceInfoReplicator.java:88)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:745)\r\n<Nov 15, 2016 12:47:37 PM IST> <Warning> <com.netflix.discovery.DiscoveryClient> <BEA-000000> <DiscoveryClient_CUSTOMERSERVICE/ofss222433 - registration failed Cannot execute request on any known server\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n        Truncated. see log file for complete stacktrace\r\n>\r\nNov 15, 2016 12:47:37 PM com.netflix.discovery.InstanceInfoReplicator run\r\nWARNING: There was a problem with the instance info replicator\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n        at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:815)\r\n        at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:104)\r\n        at com.netflix.discovery.InstanceInfoReplicator$1.run(InstanceInfoReplicator.java:88)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:745)\r\n\r\n<Nov 15, 2016 12:47:37 PM IST> <Warning> <com.netflix.discovery.InstanceInfoReplicator> <BEA-000000> <There was a problem with the instance info replicator\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n        Truncated. see log file for complete stacktrace\r\n>\r\n\r", "Able to solve this problem. There are conflicts with libraries in WLS.\nAble to proceed after providing libraries details.\n =||= @muraliguttha care to share some details? =) =||= > Able to solve this problem. There are conflicts with libraries in WLS.\r\n> Able to proceed after providing libraries details.\r\n\r\n@muraliguttha could you please share what libraries did you fix to resolve the issue? =||= @muraliguttha can you provide more details ? as far i tried to deploy it on weblogic 12.2.1.3 and getting Jersey related issues because weblogic 12.2.1.3 supports latest JAX RS Jersey implementation and Eureka uses old versions of Jersey  =||= "], ["872", "DiscoveryClient.shutdown() does not shutdown all Threads - MemoryLeak", "Benjamin Klaus", "klues", "02/03/17, 06:40:33 AM", "Hi,\r\n\r\nI'm using Eureka-Client 1.4.11.\r\nWe are running applications containing an eureka-client on Tomcat 7.0.42 and on undeploy although I call EurekaClient#shutdown(), I get the following warning:\r\nSEVERE: The web application appears to have started a thread named [AsyncResolver-bootstrap-1] but has failed to stop it. This is very likely to create a memory leak.\r\n\r\nAfter some time of debugging I found out that the reason is to be found in AsyncResolver#shutdown():\r\nAt AsyncResolver.java:144 if I call\r\nexecutorService.shutdownNow(); \r\ninstead of\r\nexecutorService.shutdown();\r\n\r\nthen I do not get the Tomcat-Message anymore. I think the reason is that ExecutorService#shutdown() >>...Initiates an orderly shutdown in which previously submitted tasks are executed...<< (see https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#shutdown() ), while shutdownNow() >>Attempts to stop all actively executing tasks<<, and therefore the \"backgroundTask\" is started once more, which itself schedules a new Task (see TimedSupervisorTask.java:61) and therefore some Thread does not termiate...\r\n\r\nI do not fully understand these Threads, but if I call executorService.shutdownNow() as mentioned above, I get one FutureTask as result, that was terminated:\r\nhttp://prntscr.com/d7l5zf\r\n...and Tomcat does not report a memory-leak issue anymore.\r\nTherefore I would recommend to replace AsyncResolver.java:144-145 by:\r\nexecutorService.shutdownNow();\r\nthreadPoolExecutor.shutdownNow();", "created pull request for this issue\n =||= Thanks @klues fixed in #876 =||= "], ["873", "Eureka Client cannot make HTTPS requests to servers that use multiple certificates via SNI", "Will Tran", "william-tran", "11/21/16, 08:23:21 PM", "EurekaJerseyClientImpl uses deprecated, pre HTTPClient 4.3 APIs to create the SSLSocketFactory used in MonitoredConnectionManager [[1]](https://github.com/Netflix/eureka/blob/v1.6.0/eureka-client/src/main/java/com/netflix/discovery/shared/transport/jersey/EurekaJerseyClientImpl.java#L222). Support for https://en.wikipedia.org/wiki/Server_Name_Indication was introduced in Apache HttpClient 4.3.2 [[2]](https://hc.apache.org/news.html). When using the deprecated APIs, requests to servers that are protected with multiple certificates, which is typical of environments with many applications behind a single load balancer, will fail.\r\n\r\nThis can be demonstrated by setting the serviceUrl to `https://api.google.com/`. If the SSL handshake doesn't do SNI properly, the client will get the certificate for `www.google.com`, and hostname verification will fail with this exception. If SNI succeeds we won't see this exception (but we'll see another Eureka specific exception obviously).\r\n\r\n```\r\n2016-11-15 17:12:33.841 ERROR 65408 --- [nfoReplicator-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error\r\n\r\ncom.sun.jersey.api.client.ClientHandlerException: javax.net.ssl.SSLException: Certificate for <api.google.com> doesn't match any of the subject alternative names: [www.google.com]\r\n\tat com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187) ~[jersey-apache-client4-1.19.1.jar:1.19.1]\r\n\tat com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123) ~[jersey-client-1.19.1.jar:1.19.1]\r\n\tat com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27) ~[eureka-client-1.4.11.jar:1.4.11]\r\n\r\n...\r\n\r\nCaused by: javax.net.ssl.SSLException: Certificate for <api.google.com> doesn't match any of the subject alternative names: [www.google.com]\r\n\tat org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:165) ~[httpclient-4.5.2.jar:4.5.2]\r\n\tat org.apache.http.conn.ssl.BrowserCompatHostnameVerifier.verify(BrowserCompatHostnameVerifier.java:61) ~[httpclient-4.5.2.jar:4.5.2]\r\n\tat org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:141) ~[httpclient-4.5.2.jar:4.5.2]\r\n\tat org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:114) ~[httpclient-4.5.2.jar:4.5.2]\r\n\tat org.apache.http.conn.ssl.SSLSocketFactory.verifyHostname(SSLSocketFactory.java:580) ~[httpclient-4.5.2.jar:4.5.2]\r\n\tat org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:554) ~[httpclient-4.5.2.jar:4.5.2]\r\n\tat org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:412) ~[httpclient-4.5.2.jar:4.5.2]\r\n\tat \r\n...\r\n``` \r\n\r\n[1] https://github.com/Netflix/eureka/blob/v1.6.0/eureka-client/src/main/java/com/netflix/discovery/shared/transport/jersey/EurekaJerseyClientImpl.java#L222\r\n[2] https://hc.apache.org/news.html", "NaN"], ["874", "Support HTTPS requests to servers that use multiple certificates", "Will Tran", "william-tran", "11/21/16, 08:23:21 PM", "Use Apache HttpClient 4.3+ SSL handling which supports SNI, and\r\nadapt it to the deprecated pre 4.3 API.\r\n\r\nFixes #873", "It would be great if we could get this backported to 1.4.x like in my fork, and release a v1.4.12 so we can include this fix in a Spring Cloud Camden SR.\n =||= "], ["875", "Questions: What is the road map for Eureka 2 and is there a timeframe for when Spring Cloud will adopt it ", null, "russBDigitalGlobe", "02/03/17, 06:39:55 AM", "Hi,\r\nI'm wondering what the road map is for Eureka 2 and when Spring Cloud will adopt it as part of their release?\r\n\r\nThanks in advance,\r\n\r\nRuss Baker", "This is not the forum for spring cloud. And, someone correct me if I'm wrong, but eureka 2 is on hold.\n =||= @spencergibb that is correct. We've done some major change to our approach, and the code that is currently in the 2.x branch can be considered archived. =||= "], ["876", "use shutdownNow() instead of shutdown()", "Benjamin Klaus", "klues", "02/03/17, 06:01:09 AM", "shutdown() does not prevent execution of previously submitted tasks, which can cause that AsyncResolver.shutdown() does not really shutdown all tasks -> memory leak", "see https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html#shutdown() for effects of shutdown() and shutdownNow()\n =||= This solved the same issue in our shared tomcat environment is there any chance of it being merged? =||= I built my own release containing this fix and we are using it in our project. I don't know why it is not being merged. If you need the release containing the fix and you don't want to build it on your own just contact me. =||= Hi @klues . If it possible give me please credentials for your eureka realise fix. Thanks. =||= see https://github.com/klues/eureka/tree/jar-containing-memory-leak-fix/bin for my built release containing this fix. Its based on version 1.4.11 =||= @klues thanks. =||= @klues thanks for the contrib. =||= "], ["877", "Register instance API\u2018s TPS is too low", "Shawn", "tianxiaoliang", "02/03/17, 06:39:09 AM", "I use ab to test register instance API\uff0c the performance is 2k TPS, and the CPU usage is only about 200%\uff0cbut The baremental has 72 cpu cores\uff0cIs there any limit to cpu usage in source code", "Also the heartbeat perf is 5w tps, it became 16w TPS after I open keep alive in tomcat,but register instance API perf is still 2k,and in response header there is no connection:keep-alive header.\r\nSo in server side,the register instance handler disabled keep alive? Why? =||= I found there is a lock in register method, that makes perf low and low cpu usage\uff0cwhy eureka lock before register a instance\uff1f\r\nprivate final Lock read = readWriteLock.readLock(); =||= 2K TPS is enough for most conditions.\r\nEven in alibaba, the registry center is far from 2K TPS.\r\n100 can be considered as a huge load.\r\n\r\n2K \u7684TPS\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u5df2\u7ecf\u591f\u4e86\u3002\r\n\u5373\u4fbf\u662f\u963f\u91cc\uff0c\u6ce8\u518c\u4e2d\u5fc3\u6bcf\u79d2\u4e5f\u4e0d\u4f1a\u6ce8\u518c2K\u4e2a\u5e94\u7528\u3002\u4e0a\u767e\u4e2a\u5c31\u5df2\u7ecf\u5f88\u591a\u4e86\u3002 =||= Thanks @qiukeren . @tianxiaoliang agree that the registration code path for eureka can probably be improved for higher TPS, however we have not had the need at Netflix to work on this. =||= "], ["878", "It takes minutes to discover instance in eureka", "Shawn", "tianxiaoliang", "02/03/17, 06:37:02 AM", "after register a instance,eureka returned 204,but sometimes it takes a long time to query the instance by API, why?\r\n\r\nalso ,if the instance dead and doesn't  deregister in eureka.it may takes minutes to disappear in eureka.why?\r\n\r\nHow can I change this to discover at once after register", "The latency is likely being caused by the response cache.\r\n\r\nhttps://github.com/Netflix/eureka/blob/v1.6.1/eureka-core/src/main/java/com/netflix/eureka/registry/ResponseCache.java =||= "], ["879", "App not getting re-register once Eureka server restart...", null, "FunTechLearner", "02/03/17, 06:36:25 AM", "I register my app on  Eureka  Server  through PCF market Service...The problem is that when Eureka Server gets restarted all apps or client  which was alerady register  gets unbinded and never gets register again automatically even though all apps are already binded to Eureka Server. I have to again restart all my apps to gets themselves register on Eureka Server.....Any help is highly appreciated", "@aserg it looks like your question is more pertinent to the spring-cloud-netflix usage of eureka. I would recommend that you ask your question at https://github.com/spring-cloud/spring-cloud-netflix  =||= "], ["880", "Eureka server shows status of Zuul gateway as \"STARTING\"", null, "truelocalpreetham", "12/12/16, 05:13:44 AM", "We are running Zuul gateway on AWS ECS docker and eureka on EC2. Eureka server instances status shows as \"UP\". But the Zuul gateway status has not changed to \"UP\" and stayed in \"STARTING\" state from past 2 days. Can you please let me know what may be the issue of not changing the status or can you please direct me what can be done.\r\n\r\nPlease find the eureka logs below\r\n\r\n```\r\n19:01:30.456 [http-nio-8761-exec-10] WARN  InstanceResource: Not Found (Renew): ZUUL-GATEWAY - 1d0c677de0f1:zuul-gateway:8080\r\n19:01:30.456 [http-nio-8761-exec-10] WARN  AbstractInstanceRegistry: DS: Registry: lease doesn't exist, registering resource: ZUUL-GATEWAY - c26c46362ec4:zuul-gateway:8080\r\n19:01:30.456 [http-nio-8761-exec-10] WARN  InstanceResource: Not Found (Renew): ZUUL-GATEWAY - c26c46362ec4:zuul-gateway:8080\r\n19:01:30.970 [http-nio-8761-exec-2] INFO  AbstractInstanceRegistry: Registered instance ZUUL-GATEWAY/1d0c677de0f1:zuul-gateway:8080 with status STARTING (replication=true)\r\n19:01:30.971 [http-nio-8761-exec-2] INFO  AbstractInstanceRegistry: **Registered instance ZUUL-GATEWAY/c26c46362ec4:zuul-gateway:8080 with status STARTING (replication=true)**\r\n19:01:33.037 [http-nio-8761-exec-3] WARN  AbstractInstanceRegistry: DS: Registry: lease doesn't exist, registering resource: ZUUL-GATEWAY - 1bfbb3bd79a5:zuul-gateway:8080\r\n19:01:33.037 [http-nio-8761-exec-3] WARN  InstanceResource: Not Found (Renew): ZUUL-GATEWAY - 1bfbb3bd79a5:zuul-gateway:8080\r\n19:01:33.551 [http-nio-8761-exec-4] INFO  AbstractInstanceRegistry: **Registered instance ZUUL-GATEWAY/1bfbb3bd79a5:zuul-gateway:8080 with status STARTING** (replication=true)\r\n19:01:35.028 [http-nio-8761-exec-8] WARN  AbstractInstanceRegistry: DS: Registry: lease doesn't exist, registering resource: ZUUL-GATEWAY - e8a291e686f7:zuul-gateway:8080\r\n19:01:35.028 [http-nio-8761-exec-8] WARN  InstanceResource: Not Found (Renew): ZUUL-GATEWAY - e8a291e686f7:zuul-gateway:8080\r\n19:01:35.542 [http-nio-8761-exec-9] INFO  AbstractInstanceRegistry: **Registered instance ZUUL-GATEWAY/e8a291e686f7:zuul-gateway:8080 with status STARTING** (replication=true)\r\n\r\n```\r\n\r\n_Note:\r\nWhen I run locally, the application status will be \"UP\". It gets registered with \"UP\" status directly. But on AWS EC2, if I restart the eureka, the zuul application registers with \"STARTING\" status._", "NaN"], ["881", "What's the relationship about region, zone and a eureka cluster?", "\u5468\u7acb", "eacdy", "02/03/17, 06:34:24 AM", "Since I havn't used AWS, I wonder what's the relationship about region, zone and a eureka cluster. I've  drew a picture below, am I right?\r\n![4-2](https://cloud.githubusercontent.com/assets/9031050/21100232/e7157014-c0ad-11e6-8b36-93bf0bd9b6fe.png)\r", "Each region is a geographical location in AWS, every region has multiple availability zone which are completely isolated from each other(Think of it as a separate datacenter)\r\nFor example U.S. East(Virginia) is one region with: us-east-1b, us-east-1c, us-east-1d availability zones. More info [here](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html)  =||= @samdvr Got it.\r\nSeems that eureka can be deployed in different zones, so I wonder whether the picture I drew is right. =||= @eacdy your picture is correct. At Netflix our set up is to deploy several servers per zone, and all the servers in the region (across the zones) are peered together for redundancy. =||= "], ["882", "409 Conflict in replication task", null, "fredboutin", "02/03/17, 03:06:59 PM", "We got a bunch of \r\n\r\n> The replication of task xxx failed with response code 409\r\n\r\nin production after putting an instance out of service and then restarting an application on it. We had to reboot eureka because it never recovered from it. From that comment in the JerseyReplicationClient : `\r\n// In the case of replication, send the current instance info in the registry for the\r\nreplicating node to sync itself with this one.` I tried to track down what happens when a 409 is returned and it seems like it is not handled on the server making the request. The server should use the entity instance info it receives with the 409, but it doesn't seem to happen anywhere I checked. I couldn't reproduce the bug, but that's what I've seen from navigating in the code. Does this rings a bell? Any help or clue would be appreciated.\r\n\r\nThanks!", "I'd like some input as well, we had the same problem =||= Eureka uses a client side field within InstanceInfo `lastDirtyTimestamp` for conflict resolution. If you are using the java eureka-client, this should be taken care of already. However if you are using direct http calls, then for any client side updates that changes some InstanceInfo value (e.g. a POST or a PUT), it is recommended that an extra queryParam `lastDirtyTimestamp=System.currentTimeMillis()` be added. =||= Thanks for your answer, I guess this is our problem! When we put it out of service, we use this call manually (in a custom UI) : PUT /eureka/apps/{applicationId}/{instanceId}/status?value=UP and we are not specifying any lastDirtyTimestamp. =||= and how to specifying the lastDirtyTimestamp param or where add it into eureka client =||= @995270418L It's added automatically by the eureka client. We were using a custom UI that made ajax requests without the `lastDirtyTimestamp` parameter (it's optional). =||= @fredboutin @jebeaudet  Which version has corrected this Issue? thanks! =||= We corrected the way we call eureka by adding the lastDirtyTimestamp parameter, no version update was necessary. =||= @sangyuruo you _might_ need https://github.com/Netflix/eureka/issues/933 as well for a complete fix for this issue. =||= @fredboutin @jebeaudet Thanks for your answer! =||= "], ["883", "Eureka - Unable to send heartbeat (Spring Cloud Brixton.Sr1 / Eureka 1.4.8)", null, "Milesy", "01/30/17, 11:39:34 AM", "When I startup my Eureka server node I get exceptions at startup. (Cross posted to Spring Cloud, but it seems more specific to the actual Eureka code itself).\r\n\r\nI have turned on Jersey logging to give an idea of the data in transit.\r\n\r\n[error.txt](https://github.com/Netflix/eureka/files/651625/error.txt)\r\n\r\nThe JSON returned seems to be a server error rather than the expected instance JSON.\r\n\r\n{\"timestamp\":1481713238850,\"status\":500,\"error\":\"Internal Server Error\",\"exception\":\"java.lang.NullPointerException\",\"message\":\"No message available\",\"path\":\"/eureka/apps/FOO.COM.SERVICE.EUREKA/foo.com:com.foo.service.eureka:8761\"}\r\n\r\nAfter this error happens, It doesnt happen again and I can access the URL fine:\r\n\r\nhttp://foo.com:8761/eureka/apps/FOO.COM.SERVICE.EUREKA/foo.com:com.foo.service.eureka:8761?status=UP&lastDirtyTimestamp=1481713210390\r\n\r\nand I can see a valid JSON response.\r\n\r\nSo it looks like the heart beat is possibly attempting to happen before the server has fully initialised? (Just my thought) \r\n\r\nMy POM looks like - [pom.txt](https://github.com/Netflix/eureka/files/651624/pom.txt)\r\n* Note I have had to force spring-cloud-starter-eureka-server to 1.1.4.RELEASE as we don't have 1.1.2.RELEASE in our internal repo yet (but it was working last week fine)\r\n\r\nMy configuration looks like:\r\n\r\n```java\r\n@Configuration\r\n@EnableProperties\r\n@EnableAutoConfiguration\r\n@EnableEurekaServer\r\npublic class ApplicationConfig {\r\n    @Bean\r\n    public DiscoveryClient.DiscoveryClientOptionalArgs discoveryClientOptionalArgs() {\r\n        DiscoveryClient.DiscoveryClientOptionalArgs args = new DiscoveryClient.DiscoveryClientOptionalArgs();\r\n        List<ClientFilter> filters = new ArrayList<>();\r\n        filters.add(new HTTPBasicAuthFilter(\"eureka\", \"default\"));\r\n        filters.add(new LoggingFilter());\r\n        args.setAdditionalFilters(filters);\r\n\r\n        return args;\r\n    }    \r\n}\r\n```", "NaN"], ["884", "Register a service under several names", null, "MarcP04", "05/31/17, 07:43:13 AM", "I'm looking to register a service under several names to handle service versionning issues, but maybe my approach is totally wrong, you tell me.\r\n\r\nHere's what I want to do:\r\nI have a service \"Service\". The first version of has a \"ServiceV1\" REST controller, it registers as \"ServiceV1\" in Eureka registry. I have a feign client for \"FeignClientV1\" corresponding to that \"ServiceV1\".\r\nLater, new functionnalities are added to my service. I register them in a \"ServiceV2\" REST controller, and create a \"FeignClientV2\" which contains only the new functionnalities. My problem is that today I can only register my service as \"ServiceV2\" in Eureka registry, while I would like to register it as \"ServiceV1\" and \"ServiceV2\" because I want the clients only having the FeignClientV1 to be able to work with either my service v2 or my service v1.\r\n\r\nI didn't find anyway to do that, here are related subjects I found:\r\nhttp://stackoverflow.com/questions/25859782/how-to-locate-services-by-version-with-netflix-eureka-and-ribbon\r\nhttp://stackoverflow.com/questions/36712303/registering-one-application-multiple-times-aliases-in-netflix-eureka\r\nhttps://github.com/Netflix/eureka/issues/598 (but I don't see how \"eureka.vipAddress\" fills the need)", "@MarcP04 you can register multiple vipAddresses for a service, as long as they are comma delimited (e.g. vipAddress=vip1,vip2). In this way, you can use a strategy where your ServiceV1 register with vip `vip1`, and a newer deployment that also support the v2 api register with a vip of `vip1,vip2`.\r\n\r\nFrom a client side, clients that ask for vip1 will get servers for both older and newer deployments, whereas clients that want vip2 will only get the newer servers. =||= "], ["885", "cannot access javax.inject.provider", "yllions", "yllions", "01/09/17, 03:02:11 AM", "when i try the eureka client examples in a maven project, it said \"cannot access javax.inject.provider\".", "how did  you  resolve ,i hava same quesition =||= You need to add following dependency:\r\n```xml\r\n<dependency>\r\n            <groupId>javax.inject</groupId>\r\n            <artifactId>javax.inject</artifactId>\r\n            <version>1</version>\r\n </dependency>\r\n``` =||= "], ["886", "Could i pass configuration items to eureka client programmatically?", "yllions", "yllions", "02/03/17, 06:30:03 AM", "Could i pass configuration items to eureka client programmatically instead of configuration file on the classpath?", "@xiaoerlyl you can, if you create your own implementation of EurekaClientConfig. You can then either use it directly, or create an override Guice binding to your own impl. =||= "], ["887", "Images are not available in wiki document", "Vikram Purohit", "VikramBPurohit", "02/03/17, 06:29:23 AM", "https://github.com/Netflix/eureka/wiki/Eureka-2.0-Architecture-Overview", "@VikramBPurohit I would advice not looking too deeply into eureka2. Per our wiki:\r\n```\r\nThe 2.x branch is currently frozen as we have had some internal changes w.r.t. to eureka2, and do not have any time lines for open sourcing of the new changes.\r\n``` =||= "], ["888", "help\uff01help\uff01when eureka client  OOM happened\uff0cbut eureka server\u2019s app status not down", null, "zhudan", "02/03/17, 06:28:21 AM", "when eureka client  OOM happened\uff0cbut eureka server\u2019s app status not down\uff0cnot down\u3002\u3002\u3002\u3002\u3002\uff1b\r\n\r\nCaused by: java.lang.OutOfMemoryError: unable to create new native thread\u3002\r\n\r\n\r\n<spring-cloud.version>Brixton.M5</spring-cloud.version>\r\n\r\n\r\n\r\n\r\n`2017-01-14 16:25:44.855 ERROR http-nio-10.161.175.42-9512-ClientPoller-0  org.apache.tomcat.util.net.NioEndpoint[log:182] -\r\njava.lang.OutOfMemoryError: unable to create new native thread\r\n        at java.lang.Thread.start0(Native Method) [na:1.8.0_65]\r\n        at java.lang.Thread.start(Thread.java:714) [na:1.8.0_65]\r\n        at java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:950) ~[na:1.8.0_65]\r\n        at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1368) ~[na:1.8.0_65]\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:161) ~[tomcat-embed-core-8.0.30.jar!/:8.0.30]\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:141) ~[tomcat-embed-core-8.0.30.jar!/:8.0.30]\r\n        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:621) ~[tomcat-embed-core-8.0.30.jar!/:8.0.30]\r\n        at org.apache.tomcat.util.net.NioEndpoint$Poller.processKey(NioEndpoint.java:1113) ~[tomcat-embed-core-8.0.30.jar!/:8.0.30]\r\n        at org.apache.tomcat.util.net.NioEndpoint$Poller.run(NioEndpoint.java:1071) ~[tomcat-embed-core-8.0.30.jar!/:8.0.30]\r\n        at java.lang.Thread.run(Thread.java:745) [na:1.8.0_65]`\r", "This is not the repo for Spring Cloud issues =||= "], ["889", "Update gradle version from 2.10 to 3.3", "Bruno Bottazzini", "brunobottazzini", "02/03/17, 06:10:14 AM", "The version 3.3 brings a lot of performance improvements and bug fixes\r\nAs can be seen in the following link:\r\nhttps://docs.gradle.org/current/release-notes\r\n\r\nSigned-off-by: Bruno Bottazzini <bruno.bottazzini@targatelematics.com>", "Hi @brunobottazzini a [Nebula](https://nebula-plugins.github.io/) update may also be required to get gradle 3.x to work for this project. Thanks. =||= "], ["890", "Eureka peer-peer communication doc is ambiguous", "Abhijit Sarkar", "asarkar", "05/30/19, 11:09:54 PM", "> If any time, the renewals falls below the percent configured for that value (below 85% within 15 mins), the server stops expiring instances to protect the current instance registry information.\r\n\r\nWhat does this mean? The service that stopped renewing is shut down (pretty hard to believe Eureka can do that)? Or Eureka just takes that instance out of registry?\r\n\r\n> In the case of network outages between peers, following things may happen\r\nThe heartbeat replications between peers may fail and the server detects this situation and enters into a self-preservation mode protecting the current state.\r\n\r\nDoes not receving a heartbeat from an Eureka peer treated the same as not receiving a heartbeat from other services?", "@asarkar thanks for the question. I looked at the related issues on spring-cloud and it looks like you have found the answers you need.\r\n\r\nOut of curiosity, what versions of eureka are you running with? I read your blog (nice summary) and a few things with eureka/ribbon latencies have been improved recently. =||= @qiangdavidliu Thanks for your response. Not all my questions have been answered. If you read my blog, you'd have seen references to 2 tickets opened on Spring Cloud that're still open. For the sake of completion, if you could take the time to answer those, I think the blog will become more useful.\r\n\r\n[spring-cloud-netflix#373](https://github.com/spring-cloud/spring-cloud-netflix/issues/373)\r\n\r\n[spring-cloud-netflix#203](https://github.com/spring-cloud/spring-cloud-netflix/issues/203)\r\n\r\nAlso, I'm interested in knowing what are the improvements in Eureka you mentioned. We've moved to using Kubernetes service discovery from Eureka so I don't have a ready answer of what version we were previously using. =||= "], ["891", "2.x", null, "BenjenStark", "02/03/17, 06:04:32 AM", "NaN", "@BenjenStark these branches are not meant to be merged. Thanks. =||= "], ["892", "Multiple eureka servers to lookup", null, "erikgollot", "02/03/17, 08:48:22 PM", "Is there a way to lookup multiple Eureka servers with Feign ?\r\nI do not talk about multiple servers into multiple zones but really 2 or more Eureka servers not linked ?\r\nMy need is that we've one information system with its own Eureka server and a Group level information system with also its own Eureka server. The two Eureka servers cannot know each other.\r\nThanks", "And some services are provided by the local information system and orher by the Group level information system =||= @erikgollot it is possible to create multiple eureka-clients within the same JVM (if you avoid using DI), and potentially you may then be able to configure these separate clients to connect to the two separate server groups. =||= Oh yes thanks\r\nIt could be nice to add this capability into the annotation. I wiil see if I can investigate this =||= "], ["893", "Problem peering with HTTP Authentication.", null, "Milesy", "05/30/19, 11:09:54 PM", "During troubleshooting at the following issue - https://github.com/spring-cloud/spring-cloud-netflix/issues/1647 I have came to see that the Jersey Client which is responsible for peering does not respect any HTTP authentication across the cluster.\r\n\r\nThis is within eureka-core-1.4.12\r\n\r\nWe use a shared Eureka defaultZone and all our of Eureka peers and the services which are discoverable must be locked down both with SSL and also with some authentication.\r\n\r\nIf we use a defaultZone like : \r\n\r\n`eureka.defaultZone=https://eureka:password@host1.business.net:8761/eureka/,https://eureka:password@host2.business.net:8761/eureka/`\r\n\r\neverything works as expected, but it is not the ideal solution because those URLs are logged out into unsecured log files with the username and password within them.\r\n\r\nThe discovery client we configure in such a way:\r\n\r\n```\r\n    @Bean\r\n    public DiscoveryClient.DiscoveryClientOptionalArgs discoveryClientOptionalArgs() {\r\n        DiscoveryClient.DiscoveryClientOptionalArgs args = new DiscoveryClient.DiscoveryClientOptionalArgs();\r\n        List<ClientFilter> filters = new ArrayList<>();\r\n        filters.add(new HTTPBasicAuthFilter(eurekaUsername, eurekaPassword));\r\n\r\n        if (\"true\".equals(eurekaLogging)) {\r\n            filters.add(new LoggingFilter());\r\n        }\r\n\r\n        args.setAdditionalFilters(filters);\r\n\r\n        return args;\r\n    }\r\n```\r\n\r\nWe would like the Jersey Client within the JerseyReplicationClient class to also be configurable so we can inject an authentication filter into it, for example where it is used here:\r\n\r\n```\r\n    @Override\r\n    public EurekaHttpResponse<ReplicationListResponse> submitBatchUpdates(ReplicationList replicationList) {\r\n        ClientResponse response = null;\r\n        try {\r\n            response = jerseyApacheClient.resource(serviceUrl)\r\n                    .path(PeerEurekaNode.BATCH_URL_PATH)\r\n                    .accept(MediaType.APPLICATION_JSON_TYPE)\r\n                    .type(MediaType.APPLICATION_JSON_TYPE)\r\n                    .post(ClientResponse.class, replicationList);\r\n            if (!isSuccess(response.getStatus())) {\r\n                return anEurekaHttpResponse(response.getStatus(), ReplicationListResponse.class).build();\r\n            }\r\n            ReplicationListResponse batchResponse = response.getEntity(ReplicationListResponse.class);\r\n            return anEurekaHttpResponse(response.getStatus(), batchResponse).type(MediaType.APPLICATION_JSON_TYPE).build();\r\n        } finally {\r\n            if (response != null) {\r\n                response.close();\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nThis is one of the fails we see within the logs:\r\n\r\n```\r\n26-01-2017 15:04:39 [TaskBatchingWorker-target_host1-18] ERROR c.n.e.c.ReplicationTaskProcessor - Batch update failure with HTTP status code 401; discarding 1 replication tasks\r\n26-01-2017 15:04:39 [TaskBatchingWorker-target_host1-18] WARN  c.n.e.u.b.TaskExecutors - Discarding 1 tasks of TaskBatchingWorker-target_host1-18 due to permanent error\r\n26-01-2017 15:04:50 [AsyncResolver-bootstrap-executor-0] INFO  c.n.d.s.r.a.ConfigClusterResolver - Resolving eureka endpoints via configuration\r\n26-01-2017 15:04:50 [Eureka-EvictionTimer] INFO  c.n.e.r.AbstractInstanceRegistry - Running the evict task with compensationTime 0ms\r\n26-01-2017 15:04:50 [Eureka-EvictionTimer] INFO  c.n.e.r.AbstractInstanceRegistry - Evicting 1 items (expired=1, evictionLimit=1)\r\n26-01-2017 15:04:50 [Eureka-EvictionTimer] WARN  c.n.e.r.AbstractInstanceRegistry - DS: Registry: expired lease for EUREKA/host2:eureka:8761\r\n26-01-2017 15:04:50 [Eureka-EvictionTimer] INFO  c.n.e.r.AbstractInstanceRegistry - Cancelled instance EUREKA/host2:eureka:8761 (replication=false)\r\n```\r\n\r\nI am looking for the appropriate approval within our business to contribute myself, if that will help get things moving quicker.\r\n\r\nRegards,\r\n\r\nChris\r\n\r", "@Milesy thank you for the issue. We can take a look at this, but definitely if you are able to get the appropriate approval for a contribution, that'll likely lead to a quicker turn around. =||= Is there a work around ? =||= Any solutions here. Surely one can exclude logging the defaultZone URL's at least? =||= "], ["894", "Why properties eureka.securePort and eureka.securePort.enabled do not affect HomepageUrl and StatusUrl?", "Benjamin Klaus", "klues", "02/03/17, 06:13:30 AM", "Hi,\r\n\r\nI'm using eureka-client version 1.4.11 and trying I'm getting the infos of registered clients from my eureka-server using the method DiscoveryClient#getInstancesByVipAddress().\r\n\r\nNow we want to use a secure connection between our application-clients and the services managed by eureka and therefore getting secure URLs from the InstanceInfos returned by DiscoveryClient#getInstancesByVipAddress().\r\n\r\n**For me the expected behavior would be:**\r\nsetting the properties:\r\n_eureka.securePort=443_\r\n_eureka.securePort.enabled=true_\r\nin my configuration should result in getting https-URLs from the instanceInfos retrieved by DiscoveryClient#getInstancesByVipAddress(), therefore I expect these values:\r\ninstanceInfo..getHomePageUrl() == **https**://< hostname >:**443**/home\r\ninstanceInfo.getStatusPageUrl() == **https**://< hostname >:**443**/status\r\ninstanceInfo.getHealthCheckUrl() == **https**://< hostname >:**443**/health\r\n\r\n**But the actual behaviour is:**\r\nwith securePort.enabled=true\r\nI get the following URLs:\r\ninstanceInfo..getHomePageUrl() == **http**://< hostname >:**80**/home\r\ninstanceInfo.getStatusPageUrl() == **http**://< hostname >:**80**/status\r\ninstanceInfo.getHealthCheckUrl() == **http**://< hostname >:**80**/health\r\nand there is the additional property:\r\ninstanceInfo.getSecureHealthCheckUrl() == **https**://< hostname >:**443**/health\r\n\r\nSo i can use instanceInfo.getSecureHealthCheckUrl() for my purpose, but it seems strange for me that the other properties remain unsecure http-URLs if I set securePort.enabled=true.", "@klues thanks for raising this issue. What you describe make sense, however the reason it is this way today is primarily due to legacy reasons and unfortunately making large scale changes here would be difficult without breaking some level of backwards compatibility. =||= "], ["895", "Fixed missing url in log output", "Richard M\u00fcller", "RichiMueller", "02/03/17, 06:01:42 AM", "We get a lot of these log messages in our logfiles. We can't see which URL is causing the log message, as the placeholder {} is missing in the text. This pull request fixes this.", "Thanks @RichiMueller  =||= "], ["896", "inter services communication not working via zuul routes", null, "ajayaks", "02/03/17, 06:08:14 AM", "\r\nI am trying to call service A from service B via application name and below is the setup.\r\n\r\n1. Setup Eureka server and register other services and conductor server.\r\n conductor server is registered in eureka services list.\r\n2. Setup zuul gateway and defining routing for conductor like below:- Zuul is running on 1113 port.\r\nusers:\r\n      path: /apis/users/**\r\n      serviceId: users-service\r\n      stripPrefix: false\r\n\r\ntasks:\r\n      path: /apis/tasks/**\r\n      serviceId: tasks-service\r\n      stripPrefix: false\r\n\r\nBoth the services are working fine if i call them via zuul gateway in browser, meaning routing is fine.\r\nhttp://localhost:1113/apis/users\r\nhttp://localhost:1113/apis/tasks\r\n\r\nProblem i am having is its not working user service is calling task service as below:-\r\n\r\nNot working\r\nrestTemplate.getForObject(String.format(\"http://tasks-service/apis/tasks/\") [Not working]\r\n\r\nBelow is working if i use server and port \r\nrestTemplate.getForObject(String.format(\"http://localhost:8380/apis/tasks/\") [working]\r\n\r\n\r\nIts showing the correct name in services listed in eureka and working if i call that routes directly in browser but communication b/w the services is not working.\r\n\r\nPlease suggest.", "This is not the proper forum for spring cloud Netflix =||= Would you please suggest or redirect me for the correct forum. =||= See https://github.com/spring-cloud/spring-cloud-netflix/issues/1666 =||= Thanks @spencergibb  =||= "], ["897", "Scope governator dependencies to reflect actual usage", "Matt Nelson", "mattnelson", "02/03/17, 06:01:56 AM", "Governator was scoped as a compile dependency of eureka-core incorrectly. A few other modules needed it for testing. This fixes consumers from pulling in this dependency transitively when it is not used.", "Thanks @mattnelson  =||= "], ["898", "Create OSSMETADATA", "David Liu", "qiangdavidliu", "02/03/17, 06:03:31 AM", "NaN", "NaN"], ["899", "fix concurrency bug found in getInstancesAsIsFromEureka()", "Tom Cellucci", "tcellucci", "02/03/17, 11:04:40 PM", "NaN", "NaN"], ["900", "Fix potential race conditions tracking features in InstanceInfoReplicator", null, "elandau", "03/16/17, 05:15:54 PM", "NaN", "NaN"], ["901", "How can i do with the security tomcat enviroment?", null, "zyanbingchn", "05/31/17, 07:46:48 AM", "security tomcat enviroment, that is, the tomcat configured as https.\r\nnow, how can i configure to load certification?\r\n\r\nif tomcat is https, eureka application service will failed to register service, the error is:\r\n``2017-02-09 15:04:19,957 ERROR com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient:83 [DiscoveryClient-CacheRefreshExecutor-0] [execute] Request execution error\r\n**com.sun.jersey.api.client.ClientHandlerException: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path** to requested target\r\n\tat com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187)\r\n\tat com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123)\r\n\tat com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27)\r\n\tat com.sun.jersey.api.client.Client.handle(Client.java:652)\r\n``", "Are you using a self-signed certificate? \r\nSince you are using Tomcat, ensure that you have assigned the keystore in the conf/server.xml file. \r\n(https://hutter.io/2016/02/09/java-create-self-signed-ssl-certificates-for-tomcat/)\r\n\r\nNext for the service which is registering to Eureka, it has to add the self-signed certificate to its truststore. If it is a java application, you can run it with -Djavax.net.ssl.trustStore parameter. \r\n\r\nYou can read (https://www.sslshopper.com/article-most-common-java-keytool-keystore-commands.html) to view the basic keytool commands required to create keystore & import certificates to a truststore.  =||= "], ["902", "Multiple eureka clients as docker instances in a single host", null, "sankarbalu", "05/31/17, 07:43:35 AM", "I am trying to setup multiple eureka clients as docker containers in a single VM. \r\n\r\nBy default, with network mode as bridge, eureka exports the container id as host name. To override the same, i added -h $(hostname) to docker run command. This resolved the hostname that is sent by eureka clients on the heartbeat message to eureka server and now the clients are registered with exact host names (say Host1:Port1). \r\n\r\nBut when I try to run a second instance of the same eureka client by triggering another docker container with a different port, the docker instance is up and running without any issues. But instead of registering a new instance on eureka server like Host1:P2, the old instance was overridden and now eureka dashboard only shows Host1:P2. \r\n\r\nIs there a better option to run multiple instances of the same eureka client in a single host and register them in eureka correctly?", "@sankarbalu eureka uniquely identifies a registering client via two keys, the instanceId and the appName. For your clients to be unique, you need to have at least one of these two be different between your clients.\r\n\r\nIt is possible to custom configure the instanceId of a client via config `eureka.instanceId=<some id>` (see https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/appinfo/PropertyBasedInstanceConfigConstants.java#L11). =||= Closing old issue. Please re-open if necessary. =||= "], ["903", "Discover Services in Starting status", "Amit Pandey", "amit2103", "05/31/17, 07:47:01 AM", "Hey,\r\n\r\nWe are trying to discover nodes from Eureka for a service.  I see that I can only see services which are in UP status after I try to get the nodes like :-  List<InstanceInfo> instances = application.getInstances();.\r\n\r\nIs this by design or I need to do something extra to get all nodes, including one which are in Starting status (besides the ones in already UP Status).\r\n\r\nThanks", "Hi @amit2103 by default, this is the behaviour. This can be changed via configuration `eureka. shouldFilterOnlyUpInstances=false`. (See https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/DefaultEurekaClientConfig.java#L392) =||= "], ["904", "Red\\Green Pattern and OUT_OF_SERVICE", null, "mehmetsalgar", "05/30/19, 11:09:55 PM", "Hi,\r\n\r\nactually what I write here would be a feature request or may be there is a way to implements this already and you can tell me.\r\n\r\nI wrote a blog about Microservices and I try to implement there Red\\Green Pattern.\r\n\r\nhttps://mehmetsalgar.wordpress.com/2016/11/05/micro-services-fan-out-transaction-problems-and-solutions-with-spring-bootjboss-and-netflix-eureka/\r\n\r\nMy problem is when I try to install the new version of my Microservices, I try to start in 'OUT_OF_SERVICE' status with the following configuration.\r\n\r\n`eureka:\r\n  instance:\r\n    initialStatus: OUT_OF_SERVICE\r\n    instanceEnabledOnit: false`\r\n\r\nwhich works and my Microservices starts in 'OUT_OF_SERVICE' status then I plan to switch them to 'UP' status with JSon API but I also implemented Health Check to my Microservices (a class implementing 'HealthCheck' interface reporting to Eureka Status of my service), before I can interact with the JSon API, new version of my services are taking to 'UP' status. \r\n\r\nUnfortunately I don't get any information from the 'HealthCheck' interface about the current status of my Microservice in Eureka so I could prevent it that it will go to 'UP' status.\r\n\r\nIs there a way to do us or can I propose to introduce a new status like 'RED_GREEN_DOWN' (as an example, it can be anything) so Health Check mechanism can change and only JSon API can do that?\r\n\r\nI hope this is the correct place to write this, thx for the answers.", "NaN"], ["905", "Instances Renew Problem.", null, "Jaredjin", "05/31/17, 07:47:29 AM", "When I POST /refresh service node, The log show me service status is UP, but eureka server not receive UP log, the service is not exist and not available.\r\nservice log:\r\n`com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...\r\no.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING\r\ncom.netflix.discovery.DiscoveryClient    : Unregistering ...\r\ncom.netflix.discovery.DiscoveryClient    : DiscoveryClient_SERVICE.SMS/10.128.17.115:service.sms:7002 - deregister  status: 200\r\ncom.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient\r\no.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application service.sms with eureka with status DOWN\r\no.s.c.n.e.s.EurekaServiceRegistry        : Registering application service.sms with eureka with status UP`\r\n\r\neureka server log:\r\n`[c.n.e.registry.AbstractInstanceRegistry  : Cancelled instance SERVICE.SMS/10.128.17.115:service.sms:7002 (replication=false)\r\n`\r", "@Jaredjin your logs looks a bit strange, there are both registration and also unregistration logs mixed together. Are you in a shutdown sequence?\r\n\r\nAdditionally, looks like you are using spring cloud netflix, so you might also be able to get help here:\r\nhttps://github.com/spring-cloud/spring-cloud-netflix . =||= Closing old issue. Please re-open if necessary. =||= "], ["906", "disable load balancing?", "Miguel Gonz\u00e1lez", "magg", "05/31/17, 07:47:54 AM", "Hello\r\n\r\nIs there a way to disable load balancing?\r\n\r\nI have a setup where I have an Eureka server, one grpc client microservice (1 AMI) and two grpc servers microservices ( so 2 AMIs). The case in general would having one client and N servers and having eureka provide service discovery. \r\n\r\nI want to hit both servers with the client. But Eureka load balances the request, if I do one request it hits one then the other.\r\n\r\nthanks!\r\n- Miguel", "@magg how are you using loadbalancing? Most native uses of eureka uses the getInstances() -> List api which is not opinionated on loadbalancing. =||= Closing old issue. Please re-open if necessary. =||= "], ["907", "eureka-client-1.4.12 TimedSupervisorTask  : task supervisor rejected the task", "renqiwei", "rqw", "05/30/19, 11:09:55 PM", "Source TimedSupervisorTask.java line 62\r\nNeed to determine whether the executor is shutdown.\r\nSpecific is when using spring cloud eurekaClient.\r\n\r\nexception stack:\r\n`\r\n2017-03-04 11:47:34.485 ERROR 21604 --- [ver-bootstrap-0] c.netflix.discovery.TimedSupervisorTask  : task supervisor rejected the task\r\n\r\njava.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@300f48c6 rejected from java.util.concurrent.ThreadPoolExecutor@3ec8a0b7[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0]\r\n\tat java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047) ~[na:1.8.0_92]\r\n\tat java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823) [na:1.8.0_92]\r\n\tat java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1369) [na:1.8.0_92]\r\n\tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112) ~[na:1.8.0_92]\r\n\tat com.netflix.discovery.TimedSupervisorTask.run(TimedSupervisorTask.java:62) ~[eureka-client-1.4.12.jar:1.4.12]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_92]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_92]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [na:1.8.0_92]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.8.0_92]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_92]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_92]\r\n\tat java.lang.Thread.run(Thread.java:745) [na:1.8.0_92]\r\n`\r\n\r\n\r", "Do I need to set the parameters when I use?\r\n =||= Hi @rqw I believe some fixes for this has gone into the later eureka releases. I see that spring cloud netflix currently has an 1.3.* RC release out that has upgraded to the latest eureka client. =||= Hi @qiangdavidliu ,Thank you for your answer.\r\nI try last version. =||= Same issue here and using the latest from Spring Cloud. I have one Eureka server and two microservices, with one upstream from the other. When I use RestTemplate to call the other microservice, I get the same error referenced by spring-cloud/spring-cloud-netflix#1060 =||= Hi @ericis @rqw this PR (#838) was released around eureka version 1.5.x and changes the log levels from error to warn in the cases of an executor shutdown. Are you still seeing the messages logged at an error level? =||= Same problem as @ericis and no news about the solution, thanks. Only change the log level? =||= @troshko111 pls let us know why this ticket was **closed**. I still see a similar issue in **euraka-client-1.6.2**\r\n**ERROR** - com.netflix.discovery.TimedSupervisorTask- task supervisor rejected the task\r\njava.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@6ec2a9db rejected from java.util.concurrent.ThreadPoolExecutor@dd4a055[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 6101\r\n\r\nWaiting for response. Thanks! =||= @AmarRocks the issue was closed as stale (2yo), if you experience this on the latest version please reopen with a minimal repro, (note that `1.6.2` is a very old version). Hope this makes sense. =||= Occurs from eureka client `1.19.3` of `Greenwish.SR3`, thus eureka client cannot registry any more.\r\n```\r\n2019-10-21 11:31:57.268  WARN [gateway,,,] 1 --- [scoveryClient-0] c.netflix.discovery.TimedSupervisorTask  : task supervisor rejected the task\r\n\r\njava.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@68f9703a rejected from java.util.concurrent.ThreadPoolExecutor@23437745[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 6263]\r\n        at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2063) ~[na:1.8.0_192]\r\n        at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:830) [na:1.8.0_192]\r\n        at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1379) [na:1.8.0_192]\r\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112) ~[na:1.8.0_192]\r\n        at com.netflix.discovery.TimedSupervisorTask.run(TimedSupervisorTask.java:64) ~[eureka-client-1.9.13.jar!/:1.9.13]\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_192]\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_192]\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [na:1.8.0_192]\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.8.0_192]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_192]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_192]\r\n        at java.lang.Thread.run(Thread.java:748) [na:1.8.0_192]\r\n\r\n2019-10-21 11:32:42.068  WARN [gateway,,,] 1 --- [scoveryClient-1] c.netflix.discovery.TimedSupervisorTask  : task supervisor rejected the task\r\n\r\njava.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@12418266 rejected from java.util.concurrent.ThreadPoolExecutor@4fd7df26[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 6256]\r\n        at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2063) ~[na:1.8.0_192]\r\n        at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:830) [na:1.8.0_192]\r\n        at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1379) [na:1.8.0_192]\r\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112) ~[na:1.8.0_192]\r\n        at com.netflix.discovery.TimedSupervisorTask.run(TimedSupervisorTask.java:64) ~[eureka-client-1.9.13.jar!/:1.9.13]\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_192]\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_192]\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [na:1.8.0_192]\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.8.0_192]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_192]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_192]\r\n        at java.lang.Thread.run(Thread.java:748) [na:1.8.0_192]\r\n\r\n2019-10-21 11:32:57.269  WARN [gateway,,,] 1 --- [scoveryClient-0] c.netflix.discovery.TimedSupervisorTask  : task supervisor rejected the task\r\n\r\njava.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@76de42ee rejected from java.util.concurrent.ThreadPoolExecutor@23437745[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 6263]\r\n        at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2063) ~[na:1.8.0_192]\r\n        at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:830) [na:1.8.0_192]\r\n        at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1379) [na:1.8.0_192]\r\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112) ~[na:1.8.0_192]\r\n        at com.netflix.discovery.TimedSupervisorTask.run(TimedSupervisorTask.java:64) ~[eureka-client-1.9.13.jar!/:1.9.13]\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_192]\r\n``` =||= "], ["908", "Overriding status does not replicate to other Eureka servers", null, "mherlund", "03/16/17, 05:44:27 PM", "When running multiple Eureka servers and setting them up as replicas, overridden status messages made to one of the servers does not get replicated to the other servers.\r\n\r\nFor instance, when setting `PUT /eureka/v2/apps/appID/instanceID/status?value=OUT_OF_SERVICE` on one server, the other Eureka server still shows a status of **UP**.\r\n\r\nShould the overriddenstatus value be replicated to all Eureka servers, or would the override need to be sent to all instances?\r\n\r\neureka version 1.4.12", "@mherlund eureka server replication protocol by default does replicate status overrides to all peers. Is this something you saw regularly, or a one off? Thanks. =||= "], ["909", "GraceTime property for Eureka client?", "Tobias Schneider", "derTobsch", "05/31/17, 07:54:10 AM", "I did not found anything about a grace time property when a client should wait until it calls for the first time a eureka server. \r\n\r\nIs there such a property?", "@derTobsch do you mean for registration or data fetch?\r\nFor registration, rather than grace time, we prefer to control the registration state via eureka status.\r\nFor data fetch, we actually want to ensure that data is loaded in to the client at constructor time.\r\n\r\nThanks. =||= Closing old issue. Please reopen is necessary. =||= "], ["910", "the 90s", "Jon Chiang", "bingge1", "03/22/17, 07:35:21 AM", "i hava four services a b c d, register to eureka x , and  consumer y call  x ,to call a b c d .\r\n\r\nthis moment ,i shutdown the service a, the eureka Need 90s to feel the fail.\r\nthis 90s my application is Partially unavailable;\r\n\r\n\r\n\u82f1\u6587\u592a\u5dee\uff0c\u6211\u5199\u6bb5\u4e2d\u6587\uff0c\u6211\u6709\u56db\u53f0\u673a\u5668  a b c d ,\u6ce8\u518c\u5230\u6ce8\u518c\u4e2d\u5fc3 eureka \u201cx\u201d,\u6709\u4e2a\u6d88\u8d39\u8005 y ,\u901a\u8fc7 x \u62ff\u52304\u4e2a\u670d\u52a1\u7684\u5730\u5740\uff0c\u7136\u540e\u6211\u5173\u4e00\u53f0\u673a\u5668a\uff0ceureka \u9700\u898190s\u624d\u80fd\u611f\u77e5\u5230 a \u5df2\u7ecfdown\u4e86\uff0c\u8fd990\u79d2\u6211\u7684\u670d\u52a1\u4e0d\u53ef\u7528\uff0c\u8bf7\u95ee\u600e\u4e48\u7834\u3002", "\u4e3a\u4ec0\u4e48\u6ce8\u518c\u4e00\u4e2a\u670d\u52a1\u8fd9\u4e48\u6162? (Why is it so Slow to Register a Service?)\r\nBeing an instance also involves a periodic heartbeat to the registry (via the client\u2019s serviceUrl) with default duration 30 seconds. A service is not available for discovery by clients until the instance, the server and the client all have the same metadata in their local cache (so it could take 3 heartbeats). You can change the period using eureka.instance.leaseRenewalIntervalInSeconds and this will speed up the process of getting clients connected to other services. In production it\u2019s probably better to stick with the default because there are some computations internally in the server that make assumptions about the lease renewal period.\r\n\r\n\u4f5c\u4e3a\u4e00\u4e2a\u5b9e\u4f8b\u5411\u6ce8\u518c\u4e2d\u5fc3\u8fd8\u5305\u62ec\u4e00\u4e2a\u9ed8\u8ba4\u6301\u7eed30\u79d2\u7684\u5468\u671f\u5fc3\u8df3(\u901a\u8fc7\u5ba2\u6237\u7684serviceUrl)\u3002\u4e00\u4e2a\u670d\u52a1\u5bf9\u4e8e\u5ba2\u6237\u7aef\u7684discovery\u4e0d\u53ef\u7528\u7684\uff0c\u76f4\u5230\u5b9e\u4f8b\u3001\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u5168\u90fd\u62e5\u6709\u76f8\u540c\u7684\u5143\u6570\u636e\u5728\u5b83\u4eec\u7684\u7f13\u5b58\u91cc\u9762\uff08\u8fd9\u53ef\u80fd\u8fd8\u9700\u89813\u6b21\u5fc3\u8df3\uff09\u3002\u4f60\u53ef\u4ee5\u6539\u53d8\u4f7f\u7528eureka.instance.leaseRenewalIntervalInSeconds\u5e76\u4e14\u8fd9\u5c06\u52a0\u5feb\u8fd9\u4e00\u8fdb\u7a0b\u7684\u5ba2\u6237\u7aef\u8fde\u63a5\u5230\u5176\u4ed6\u670d\u52a1\u3002\u5728\u5b9e\u9645\u751f\u4ea7\u4e2d\u575a\u6301\u9ed8\u8ba4\u53ef\u80fd\u662f\u66f4\u597d\u7684\uff0c\u56e0\u4e3a\u6709\u4e00\u4e9b\u5728\u670d\u52a1\u5668\u5185\u90e8\u8ba1\u7b97\u5bf9\u79df\u8d41\u590d\u5174\u65f6\u671f\u505a\u51fa\u5047\u8bbe\u3002 =||= @imsandy are you calling the shutdown method in the client when you shutdown your service? The eureka servers have two ways of removing registered clients:\r\n1. eagerly if a shutdown is received.\r\n2. if a client does not heartbeat for 3 consecutive heartbeats, it is evicted. This case can happen if your service shutdown without calling shutdown on EurekaClient, and leave to a 90s delay. =||= Thanks for Everybody , i add the retry to the application ,is ok =||= @zenger380  @qiangdavidliu \r\n\r\n\u610f\u601d\u662f\u8bf4\u670d\u52a1\u63d0\u4f9b\u65b9\u3001\u670d\u52a1\u8c03\u7528\u65b9\u3001eureka\u670d\u52a1\u4e09\u65b9\u7f13\u5b58\u4e2d\u90fd\u6709\u4e86\u76f8\u540c\u7684\u5143\u6570\u636e\uff08\u5e94\u8be5\u5c31\u662f\u670d\u52a1\u63d0\u4f9b\u65b9\u5730\u5740\u3001\u7aef\u53e3\u53f7\u3001\u53ca\u63a5\u53e3\u5217\u8868\u4fe1\u606f\uff09\uff0c\u624d\u8ba4\u4e3a\u670d\u52a1\u88ab\u6ce8\u518c\u4e86\u5417\uff1f\u4f46\u597d\u50cf\u8fd8\u662f\u6ca1\u6709\u89e3\u91ca\u4e3a\u4ec0\u4e48\u662f3\u6b21\u5fc3\u8df3\uff0c\u8fd8\u6709\u54ea\u4e2a\u9700\u89813\u6b21\u5fc3\u8df3\uff08\u670d\u52a1\u63d0\u4f9b\u65b9\uff1f\u8fd8\u662f\u670d\u52a1\u8c03\u7528\u65b9\uff1f\u8fd8\u662feureka\u6ce8\u518c\u4e2d\u5fc3\u670d\u52a1\uff09 =||= @bingge1 How do you understand this problem?Can you describe it  =||= "], ["911", "Does eureka has a function to unregister a service which is not available(in java application)", "WangChong", "LXChild", "05/31/17, 07:55:07 AM", "as the title", "@LXChild the java client contains a shutdown method that unregisters. This internally translates to an unregister REST call (https://github.com/Netflix/eureka/wiki/Eureka-REST-operations). =||= Closing old issue. Please reopen is necessary. =||= "], ["912", "RAM ressources limitation", "Simon Bilodeau", "applelight", "03/16/17, 07:24:57 PM", "Hi, \r\n\r\nI would like to limit the amount of RAM used by Catalina in Eureka container. I would like to know if there is any limitation (on the \"aggressive\") side I should consider as a minimum amount of RAM so the container would start without any issues.\r\n\r\nI was not able to find any ressources utilisation guideline.\r\n\r\nRegards,\r\n\r\nP.S: Sorry for my poor english writing.\r\n\r\nI would like to change:\r\nCATALINA_OPTS=\"$CATALINA_OPTS -Xmx1024m\"\r\n\r\nto\r\n\r\nCATALINA_OPTS=\"$CATALINA_OPTS -Xmx512m\"\r\n\r\nSame for CPU time... Is there any limit (on the low side) I shouldn't cross ?", "@applelight eureka server's resource requirements do ramp up as the number of connected clients in your environment increases, so it is hard to give you a good low limit. In practice, we've used EC2 m3.xlarge in smaller testing environments. These are 4cpu instances. For memory, I would recommend try to have a couple of GB. =||= Thank you for the answer, on my side, I was able (in a small testing env.) to set RAM and CPU to 1GB ans 1 CPU utilisation without any problem. Just under that seem`s to be problematic. \r\n\r\nThank you again. =||= "], ["913", "Confirmation on Eureka behaviour about the API level detail", "dattamaya", "haripalpatil", "05/30/19, 11:09:55 PM", "Hello\r\nWe have a situation where we wanted to use Eureka service registry and discovery. We are able to use the service discovery and we can able to get the service instance host name detail with following code taken from Spring.io\r\n\r\nThis will return us host detail for the given service but we would like to know what different REST API expose by that service and how we can call that REST API using service registry reference dynamically. Please let us know if any mechanism to find individual REST API from service registry and call those REST API.\r\n\r\n\r\n@Component\r\nclass DiscoveryClientExample implements CommandLineRunner {\r\n\r\n    @Autowired\r\n    private DiscoveryClient discoveryClient;\r\n\r\n    @Override\r\n    public void run(String... strings) throws Exception {\r\n        discoveryClient.getInstances(\"photo-service\").forEach((ServiceInstance s) -> {\r\n            System.out.println(ToStringBuilder.reflectionToString(s));\r\n        });\r\n        discoveryClient.getInstances(\"bookmark-service\").forEach((ServiceInstance s) -> {\r\n            System.out.println(ToStringBuilder.reflectionToString(s));\r\n        });\r\n    }\r\n}\r", "If you are using spring-cloud-netflix, that is the right place to ask questions. Eureka has metadata you could use, but generally, if you ask for \"photo-service\", your client should know how to use it. =||= Thanks,\r\nWe are trying to use  Netflix Eureka as a service registry to register our services on Pivotal Cloud Foundry. Not sure which is correct place to ask this question.\r\n\r\nYes agree Eureka has metadata information but it does not expose the REST API level detail for individual service in metadata. \r\nIt contain detail such as \"registrar_uri\", \"instanceId\", \"zone\" etc those are mostly the service registry detail and not the service level detail.\r\n\r\nThe 'photo-service' is just an example. Yes client should be aware of the service but just looking for option to dynamically identify the service API from registry and call the API, if possible. =||= >  to dynamically identify the service API from registry and call the API, if possible.\r\nI don't think eureka is the right thing for that. =||= Thanks Spencer for confirmation !!\r\n\r\nHi All - Request to please update here, if anyone is aware of any other way/tool to dynamically call API other than eureka on PCF, or else will close this issue in few days. Thanks all in advance. =||= "], ["914", "How to re register back to eureka server if heartbeat fail to send from spring-boot app.", null, "kosurusekhar", "05/30/19, 11:09:55 PM", "We are seeing an issue with one of our spring-boot cloud application, one of our instance failing to send heartbeat some how and eureka server removing this instance from registry. When the instance is trying to update the status with PUT /eureka/v2/apps/appname/instanceid?status=UP&lastDirtyTimestamp=1489548084184 we are seeing 404 http response because we don't have instance with eureka. And this instance is never trying register again. Is there any configuration I need to enable so that it will try to register again with eureka after some retries or errors with heartbeats?\r\n\r\nHere is stack-trace we are seeing when we are getting 404 response.\r\n\r\ncom.sun.jersey.api.client.ClientHandlerException: A message body reader for Java class com.netflix.appinfo.InstanceInfo, and Java type class com.netflix.appinfo.InstanceInfo, and MIME media type text/html; charset=utf-8 was not found\r\n\tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:630) ~[jersey-client-1.19.1.jar!/:1.19.1]\r\n\tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586) ~[jersey-client-1.19.1.jar!/:1.19.1]\r\n\tat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.sendHeartBeat(AbstractJerseyEurekaHttpClient.java:105) ~[eureka-client-1.4.9.jar!/:1.4.9]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.4.9.jar!/:1.4.9]\r\n\tat com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.4.9.jar!/:1.4.9]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.4.9.jar!/:1.4.9]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.4.9.jar!/:1.4.9]\r\n\tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118) ~[eureka-client-1.4.9.jar!/:1.4.9]\r\n\tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79) ~[eureka-client-1.4.9.jar!/:1.4.9]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.4.9.jar!/:1.4.9]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.4.9.jar!/:1.4.9]\r\n\tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:119) [eureka-client-1.4.9.jar!/:1.4.9]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.4.9.jar!/:1.4.9]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.4.9.jar!/:1.4.9]\r\n\tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) [eureka-client-1.4.9.jar!/:1.4.9]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.4.9.jar!/:1.4.9]\r\n\tat com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:832) [eureka-client-1.4.9.jar!/:1.4.9]\r\n\tat com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1396) [eureka-client-1.4.9.jar!/:1.4.9]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_121]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_121]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_121]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_121]\r\n\tat java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]\r\n\r\nPlease let me some pointers.\r\n\r\nThanks in advance.", "Hi @kosurusekhar an you please verify the version numbers of your eureka-client and your deployed eureka servers? Thanks. =||= I am facing the same issue, with same stack trace and error message. Apparently the services keep being registered with Eureka even after the connection failure, but we were not yet able to exclude any data loss because of this error. =||= @qiangdavidliu Thanks for the reply,  is there any compatible issues? We are using Eureka Client 1.4.9 and 1.6.x in some services.  Please let me know what is compatible version of server. \r\n\r\nIf we have compatible issues then it should not register at all right? we are seeing that our services are registering and working for 20-30 days, then we are seeing these kind of heartbeat errors and disconnect with eureka. Once we got into this then we have to reboot the instance to get back normal. Is there any config or something to reconnect automatically after some retries of failure heart beats?\r\nThanks.\r\n\r\n =||= I also see this issue with newer spring clients and old eureka servers.  Seems to be due to 404's returning Content-Type: text/html (not handled) vs Content-Type: application/xml (this is OK).\r\n\r\neg:  from a 1.1.147 & 1.1.159  (note: currently upgrading these - but trying to find a suitable version to step up to without causing impact) - we get responses:\r\n\r\n> GET /eureka/v2/apps/TEST/i-ababababa HTTP/1.1\r\n> Host: ................\r\n> User-Agent: curl/7.51.0\r\n> Accept:application/json\r\n>\r\n< HTTP/1.1 404 Not Found\r\n< Server: Apache-Coyote/1.1\r\n< Content-Type: text/html;charset=utf-8\r\n< Content-Language: en\r\n< Content-Length: 985\r\n\r\nWhich result in the OP's exceptions (and hence - the service will never re-register.  We have to restart the client).\r\n\r\nWhere-as on a 1.6.2 server - we get:\r\n\r\n> GET /eureka/v2/apps/TEST/i-abababababa HTTP/1.1\r\n> Host: ..................\r\n> User-Agent: curl/7.51.0\r\n> Accept: */*\r\n>\r\n< HTTP/1.1 404 Not Found\r\n< Server: Apache-Coyote/1.1\r\n< Vary: Accept-Encoding\r\n< Content-Type: application/xml\r\n< Content-Length: 0\r\n =||= Hmm, let me take a look... =||= Facing the same problem, any news on this issue? =||= What about the issue? =||= we're also facing this issue - any update? =||= Any updates ? =||= eureka client 1.4.6, server 1.1.1 do not have this problem. =||= we're also facing this issue - Edgware.SR2 =||= I think it's a compatibility issue between client and server. Based on their documentation it's always safer to have the servers be on a newer version than clients.\r\n\r\nReference:\r\nhttps://github.com/Netflix/eureka/wiki/Configuring-Eureka#clientserver-version-compatibility =||= We facing the same error. We use Edgware.SR2 as well. Has anyone new Infos?\r\n\r\nI can reproduce the error with our new Release (Update from Dalston.SR5 to Edgware.SR3.) in the Cloud and also Local. \r\n\r\n------\r\nTest One:\r\n- Eureka Server (Edgeware.SR3) \r\n- ServiceA (Edgeware.SR3) \r\n\r\nTest-Steps:\r\n--> Step One: First Start (order is not important): Everything works well. ServiceA register itself at eureka. heartbeat is send.\r\n--> Step Two: Re-Start Eureka. ServiceA can't register again and always gets a 404. \r\n\r\n------\r\nSecond Test (Went back to our last Release). \r\n- Eureka Server (Still Edgeware.SR3 for testing). \r\n- ServiceA back to Dalston.SR5. (spring-cloud-starter-netflix-eureka-client in Version 1.4.0.RELEASE)\r\n- ServiceB (Still with Edgeware.SR3 for negativ Test)\r\n\r\nTest-Steps:\r\n--> Reproduce Step One. Everything works.\r\n-->Reproduce Step Two. After the Restart: ServiceA with Dalston.SR5 can successful register \r\n again. ServiceB with Edgware still faces the problem.\r\n\r\n------\r\n\r\nSo i came to the conclusion that it's a bug or I'm missing a new configuration detail in Edgware? \r\n\r\nIt's super strange, but it looks like we need to downgrade to our last release. \r\n\r\n@ryanjbaxter Maybe you have a hpt tip for us?  =||= This doesnt seem to be a Spring issue, it appears from the comments above that it is a compatibility issue between the Eureka client and server.\r\n\r\n@qiangdavidliu did you ever look into this? =||= Really can't see a difference. I will take a deeper look.  =||= Hi. Apologies for not updating, this issue somehow dropped off our radar. We did take a look at this originally, but was not able to find anything unfortunately. We have not seem these kind of cases internally (though we are not using eureka via spring). \r\n\r\nIn general, the eureka-client logic is such that once a heartbeat request receives an 404, the client will attempt to re-register with the remote server, and this should happen every time a heartbeat fails. The heartbeat themselves will continue to happen at a 30s interval regardless of this success or fail. \r\n\r\nLooking at the eureka dependencies between Dalston.SR5 (eureka-client:1.6.2) and Edgeware.SR3 (eureka-client:1.7.2), these are clients that we still have internally and we have not seen issues with them so it seems unlikely this is a compatibility.\r\n\r\nTo verify, I can try to run a similar test as done by @cptstffn with our internal set up with the above two eureka-client versions and a custom server version at 1.7.2 to match Edgeware. I'll post back with results once I get some time to try that.\r\n\r\n@ryanjbaxter can you verify for me that the versions I have quoted are the correct versions as used by Edgeware.SR5 and Dalston.SR3? Thanks.\r\n =||= I found the problem. It's a fault in our pom configuration. There was a exclusion for jersey-client and apache client4. I really don't know why it's there. I will do some research to understand why they excluded it. Sorry that I didn't saw that earlier. My apologize.  =||= @qiangdavidliu yes those versions are correct. =||= @cptstffn thank you for reporting back your findings, I'm glad to hear that your issue is resolved. To summarize:\r\n1. Per the original issue reported by @kosurusekhar, the answer posted by @goatherder provided an answer. It is possible that eureka server builds from many years ago may have incompatibilities with more modern clients, but we don't believe there are any incompatibilities between servers and clients released in the last 2 years at the least. \r\n2. Per the issue posted by @cptstffn that indicated a potential issue with eureka version between two differing spring cloud releases, this issue is now root caused as due to dependency exclusions on lower level artifacts.\r\n\r\nGiven the above, I am going to resolve this issue unless there are any additional questions remaining? Thanks.\r\n =||= I also met this issue. I did not find anything wrong config with jersey in pom.xml.  Would you help me to fix it please?\r\n\r\nMy issue is randomly happened.\r\n\r\nWhen I stop the eureka server and then  restart the server, the server A can not re-registered success.\r\nThe error follow below here:(It will retry send heart beat intervaly 30 secs by default)\r\n\r\n2018-10-11 10:45:57,198 [DiscoveryClient-HeartbeatExecutor-0] ERROR c.n.d.s.t.d.RedirectingEurekaHttpClient - Request execution error\r\ncom.sun.jersey.api.client.ClientHandlerException: A message body reader for Java class com.netflix.appinfo.InstanceInfo, and Java type class com.netflix.appinfo.InstanceInfo, and MIME media type text/html was not found\r\n        at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:630)\r\n        at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586)\r\n        at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.sendHeartBeat(AbstractJerseyEurekaHttpClient.java:105)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n        at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n        at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118)\r\n        at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:119)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n        at com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:824)\r\n        at com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1393)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:745)\r\n2018-10-11 10:45:57,199 [DiscoveryClient-HeartbeatExecutor-0] WARN  c.n.d.s.t.d.RetryableEurekaHttpClient - Request execution failed with message: A message body reader for Java class com.netflix.appinfo.InstanceInfo, and Java type class com.netflix.appinfo.InstanceInfo, and MIME media type text/html was not found\r\n2018-10-11 10:45:57,199 [DiscoveryClient-HeartbeatExecutor-0] ERROR c.n.d.DiscoveryClient - DiscoveryClient_OSM-ADMIN/10.132.81.36:osm-admin:8082 - was unable to send heartbeat!\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n        at com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:824)\r\n        at com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1393)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:745)\r\n =||= we are also facing similar kind of issue where heartbeat fails continuously and not able to re-register itself. We are on dalston sr1 version. @ryanjbaxter \r\n```\r\n2018-10-22 10:50:38,335 [] DEBUG [DiscoveryClient-HeartbeatExecutor-0]  com.netflix.discovery.provider.DiscoveryJerseyProvider  - Cannot parse request body\r\ncom.fasterxml.jackson.databind.JsonMappingException: Root name 'timestamp' does not match expected ('instance') for type [simple type, class com.netflix.appinfo.InstanceInfo]\r\n at [Source: com.sun.jersey.client.apache4.ApacheHttpClient4Handler$HttpClientResponseInputStream@67ad1f4d; line: 1, column: 2]\r\n\tat com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:148)\r\n\tat com.fasterxml.jackson.databind.ObjectReader._unwrapAndDeserialize(ObjectReader.java:1584)\r\n\tat com.fasterxml.jackson.databind.ObjectReader._bindAndClose(ObjectReader.java:1508)\r\n\tat com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:1102)\r\n\tat com.netflix.discovery.converters.EurekaJacksonCodec.readValue(EurekaJacksonCodec.java:178)\r\n\tat org.springframework.cloud.netflix.eureka.server.CloudJacksonJson.decode(CloudJacksonJson.java:67)\r\n\tat com.netflix.discovery.provider.DiscoveryJerseyProvider.readFrom(DiscoveryJerseyProvider.java:103)\r\n\tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:634)\r\n\tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586)\r\n\tat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.sendHeartBeat(AbstractJerseyEurekaHttpClient.java:105)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n\tat com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n\tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118)\r\n\tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n\tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:119)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n\tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n\tat com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:815)\r\n\tat com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1379)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n2018-10-22 10:50:38,340 [] DEBUG [DiscoveryClient-HeartbeatExecutor-0]  com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient  - Jersey HTTP PUT http://eureka0-P2AG-214210.aws.athenahealth.com/eureka//apps/GATEWAY/Gateway:0b238b0461358c296d6dc20096e44810; statusCode=404\r\n2018-10-22 10:50:38,340 [] ERROR [DiscoveryClient-HeartbeatExecutor-0]  com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient  - Request execution error\r\njavax.ws.rs.WebApplicationException\r\n\tat com.netflix.discovery.provider.DiscoveryJerseyProvider.readFrom(DiscoveryJerseyProvider.java:110)\r\n\tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:634)\r\n\tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586)\r\n\tat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.sendHeartBeat(AbstractJerseyEurekaHttpClient.java:105)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n\tat com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n\tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118)\r\n\tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n\tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:119)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n\tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n\tat com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:815)\r\n\tat com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1379)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n2018-10-22 10:50:38,341 [] WARN  [DiscoveryClient-HeartbeatExecutor-0]  com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient  - Request execution failed with message: null\r\n2018-10-22 10:50:38,341 [] ERROR [DiscoveryClient-HeartbeatExecutor-0]  com.netflix.discovery.DiscoveryClient  - DiscoveryClient_GATEWAY/Gateway:0b238b0461358c296d6dc20096e44810 - was unable to send heartbeat!\r\ncom.netflix.discovery.shared.transport.TransportException: Retry limit reached; giving up on completing the request\r\n\tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:138)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n\tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n\tat com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:815)\r\n\tat com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1379)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n``` =||= @bsushant-athena this repo is for Netflix Eureka not for Spring Cloud Eureka.  If you believe there is a problem with Spring Cloud, please open an issue here https://github.com/spring-cloud/spring-cloud-netflix =||= @bsushant-athena  Not sure your issue whether as same as me.\r\n\r\nMy issue had been fixed. The issue is caused by wrong nginx configuration of eureka url.\r\nOur nginx configuration will encapsulate 500,502 error as 404.\r\nIt works after removing this ngx config for eureka server url.\r\n =||= @youtianhong can you please share your eureka config?\r\n =||= "], ["915", "Enable/Disable instance API question", null, "kirillsablin", "04/27/17, 11:21:46 PM", "Hello,\r\nCould you please explain next situation:\r\n\r\nConsider sequence of api calls \r\n\r\nPUT /eureka/v2/apps/appname/instanceid/status?value=OUT_OF_SERVICE - to temporary remove service out of service\r\n\r\nDELETE /eureka/v2/apps/appname/instanceid/status?value=OUT_OF_SERVICE - to remove previous override\r\n\r\nWill next heartbeat put instance into UP status? Or delete request should contain value=UP to make it happen?  \r\nPUT /eureka/v2/apps/appname/instanceid?status=UP&lastDirtyTimestamp=... - heartbeat \r\n\r\nThank you for your time!\r\n\r\n\r", "Hi @kirillsablin , the next heartbeat will put the instance into either UP or DOWN, depending on what the registered healthcheck to the eureka-client is (if none, it should be UP). =||= "], ["916", "HTTP is harcoded in serviceUrl Creation with DNS", null, "erdog", "05/30/19, 11:09:55 PM", "Hi,\r\n\r\nI'm setting up Eureka replication with HTTPS. I currently have it working by setting the defaultZone equal to  all of the eureka instances (https://peer1.local:8761/eureka,https://peer2.local:8761/eureka). However, this is not what I want. I want to use the DNS TXT record discovery of other Eureka instances, so i don't have to hard code the machine hostnames. Configured like this, Eureka finds the IP addresses from DNS, but it creates service urls with plain http, not https. This is causing the discovery not to work.\r\n\r\nLooking at the code, I see that http is hardcoded in the service url creation. I believe this means that you can only use https, if you hardcode other eureka instances in the defaultZone property.\r\n\r\nhttps://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/endpoint/EndpointUtils.java#L148\r\n\r\nIs there a way to override this, or does this need to be implemented?\r\n\r\nThanks! ", "HI @erdog looks like a code level fix is necessary here to enable https. We welcome any PRs for updates. =||= "], ["917", "Many configure item did not description in eureka-server's spring-configuration-metadata.json?", "Deleted user", "ghost", "04/27/17, 11:23:37 PM", "# jar info\r\nspring-cloud-netflix-eureka-server-1.2.6.RELEASE.jar\r\nspring-configuration-metadata.json\r\n\r\n# description \r\n```\r\n{\r\n      \"name\": \"eureka.instance.registry.default-open-for-traffic-count\",\r\n      \"type\": \"java.lang.Integer\",\r\n      \"description\": \"Value used in determining when leases are cancelled, default to 1 for standalone.\\n Should be set to 0 for peer replicated eurekas\",\r\n      \"sourceType\": \"org.springframework.cloud.netflix.eureka.server.InstanceRegistryProperties\",\r\n      \"defaultValue\": 1\r\n    },\r\n    {\r\n      \"name\": \"eureka.instance.registry.expected-number-of-renews-per-min\",\r\n      \"type\": \"java.lang.Integer\", \r\n      \"sourceType\": \"org.springframework.cloud.netflix.eureka.server.InstanceRegistryProperties\",\r\n      \"defaultValue\": 1\r\n    }\r\n    .....\r\n```\r", "This is not the place for spring cloud Netflix =||= "], ["918", "Using Eureka service as Service discovery in Pivotal cloud foundry web services", "Pradeep Kumar Tippa", "pktippa", "04/27/17, 11:24:34 PM", "I have a free account on Pivotal cloud foundry web services(PWS). I am trying to use Eureka service discovery provided in marketplace. I am able to start the service and able to bind the apps to the service and get the service details in VCAP_SERVICES env variable of apps.\r\n\r\nVCAP_SERVICES: '{\"p-service-registry\":[{\\n  \"credentials\": {\\n    \"uri\": \"https://eureka-cdb95aee-5332-4a30-b92c-b18a81141719.cfapps.io\",\\n    \"client_secret\": \"STHux3jxcItf\",\\n    \"client_id\": \"p-service-registry-403161c8-5ca7-492f-ba0c-b6a3e4ec7bf7\",\\n    \"access_token_uri\": \"https://p-spring-cloud-services.uaa.run.pivotal.io/oauth/token\"\\n  },\\n  \"syslog_drain_url\": null,\\n  \"volume_mounts\": [\\n\\n  ],\\n  \"label\": \"p-service-registry\",\\n  \"provider\": null,\\n  \"plan\": \"standard\",\\n  \"name\": \"service-registry\",\\n  \"tags\": [\\n    \"eureka\",\\n    \"discovery\",\\n    \"registry\",\\n    \"spring-cloud\"\\n  ]\\n}]}'\r\n\r\n\r\nAble to get the authentication token by running the below command as given in https://docs.cloudfoundry.org/api/uaa/#client-credentials-grant\r\n\r\ncurl -k -X POST -H \"application/json\" -H 'Content-Type: application/x-www-form-urlencoded' --data \"grant_type=client_credentials&client_secret=STHu3jxOcItf&client_id=p-service-registry-403161c8-5ca7-492f-ba0c-b6a3e4ec7bf7&response_type=token\" https://p-spring-cloud-services.uaa.run.pivotal.io/oauth/token\r\n\r\nAfter getting the access token when I request the Service discovery api\u2019s given in https://github.com/Netflix/eureka/wiki/Eureka-REST-operations\r\n\r\nIt is giving me 404 for all the API\u2019s. \r", "@pktippa for spring cloud packaging of eureka, please ask questions at https://github.com/spring-cloud/spring-cloud-netflix =||= @pktippa Where you able to get any solution to this ?  =||= I am stuck at the same point. Eureka Server is registered on Pivotal Cloud Foundry and services are registered there but I am not able to find services in the client using @DiscoveryClient from Cloud services. If you were able to solve this issue ,please mention a version of your solution?? =||= "], ["919", "Is there a way to implement the eureka-client in Java EE?", "real_rudi", "realrudi", "05/30/19, 11:09:55 PM", "Hello there\r\n\r\nAfter including the eureka-client dependency in my maven/javaEE project I'm not able to deploy it anymore because of several CDI Exceptions.\r\n\r\nDoes anyone have any experience in writing a JavaEE-Eureka-Client without Spring usage (deployment is on payara 4.1)?\r\n\r\nBest regards\r\nErik", "Hi Erik, \r\n\r\nyes we did this several times. Using Google to produce the client like this: \r\n\r\n @Produces\r\n  public EurekaClient getEurekaClient() {\r\n    if (client == null) {\r\n      synchronized (lock) {\r\n        if (client == null) {\r\n          Injector injector =\r\n              Guice.createInjector(Modules.override(new EurekaModule()).with(new AbstractModule() {\r\n\r\n                /*\r\n                 * Overriding the default inject because using the lokal Config instead of AWS\r\n                 * Config\r\n                 */\r\n\r\n                @Override\r\n                protected void configure() {\r\n\r\n                  bind(EurekaInstanceConfig.class)\r\n                      .toProvider(MyDataCenterInstanceConfigProvider.class).in(Scopes.SINGLETON);\r\n\r\n                  bind(EurekaClientConfig.class).toProvider(DefaultEurekaClientConfigProvider.class)\r\n                      .in(Scopes.SINGLETON);\r\n\r\n                  // this is the self instanceInfo used for registration purposes\r\n                  bind(InstanceInfo.class).toProvider(EurekaConfigBasedInstanceInfoProvider.class)\r\n                      .in(Scopes.SINGLETON);\r\n\r\n                  bind(EurekaClient.class).to(DiscoveryClient.class).in(Scopes.SINGLETON);\r\n\r\n                }\r\n              }));\r\n\r\n          client = injector.getInstance(EurekaClient.class);\r\n          ApplicationInfoManager.getInstance().setInstanceStatus(InstanceStatus.UP);\r\n        }\r\n      }\r\n    }\r\n\r\n    return client;\r\n\r\n  } =||= you need this dependencies: \r\n\r\n<dependency>\r\n\t\t\t<groupId>com.google.inject</groupId>\r\n\t\t\t<artifactId>guice</artifactId>\r\n\t\t\t<version>4.1.0</version>\r\n\t\t</dependency>\r\n\r\n\t\t<dependency>\r\n\t\t\t<groupId>com.google.guava</groupId>\r\n\t\t\t<artifactId>guava</artifactId>\r\n\t\t\t<version>21.0</version>\r\n\t\t</dependency>\r\n\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.apache.httpcomponents</groupId>\r\n\t\t\t<artifactId>httpclient</artifactId>\r\n\t\t\t<version>4.5.2</version>\r\n\t\t</dependency>\r\n\r\n\t\t<dependency>\r\n\t\t\t<groupId>com.netflix.eureka</groupId>\r\n\t\t\t<artifactId>eureka-client</artifactId>\r\n\t\t\t<version>1.6.2</version>\r\n\t\t</dependency> =||= Hi,\r\n\r\nI have the same case. I need to implement a EurekaClient for our JAX-RS rest endpoints. I'm assuming that this is how i would be able to do it as well, is that right?\r\nMay I know why Guice is needed? is it the one that would handle the maintenance/lifecyle of the EurekaClient singleton? What about netflix.governator?\r\nIs there a need to handle the shutting down of EurekaClient singleton anywhere in the jersey?\r\n\r\nBy the way, i tried this and i got a warning that ApplicationInfoManager.getInstance() is already deprecated and the javadocs suggests to use DI.\r\n\r\nMany thanks,\r\nToni\r\n =||= "], ["920", "made NonEc2EurekaClientModuleTest pass at an ec2 instance too", "Erhan Kesken", "ekesken", "04/03/17, 07:09:56 PM", "NaN", "thanks @ekesken  =||= "], ["921", "DiscoveryClientHealthTest is failing in a host with single CPU", "Erhan Kesken", "ekesken", "05/30/19, 11:09:56 PM", "Because of a race condition. This assert:\r\n\r\nhttps://github.com/netflix/eureka/tree/64e5e2ee97c6036d9a2f447bada79d643c985fb6/eureka-client/src/test/java/com/netflix/discovery/DiscoveryClientHealthTest.java#L72\r\n\r\nfails, because this thread:\r\n\r\nhttps://github.com/netflix/eureka/tree/64e5e2ee97c6036d9a2f447bada79d643c985fb6/eureka-client/src/main/java/com/netflix/discovery/InstanceInfoReplicator.java#L47\r\n\r\ntriggers this change:\r\n\r\nhttps://github.com/netflix/eureka/tree/64e5e2ee97c6036d9a2f447bada79d643c985fb6/eureka-client/src/main/java/com/netflix/appinfo/ApplicationInfoManager.java#L213\r\n\r\nwhich causes overriding of the mock value for hostname which is set here:\r\n\r\nhttps://github.com/netflix/eureka/tree/64e5e2ee97c6036d9a2f447bada79d643c985fb6/eureka-test-utils/src/main/java/com/netflix/discovery/junit/resource/DiscoveryClientResource.java#L272\r\n\r\nthis change triggers a status update which changes status from STARTING to UP, which causes test to fail.\r\n\r\nIf there is a single CPU, \"DiscoveryClient-InstanceInfoReplicator-0\" thread always (at least in all my trys) running before \"main\" thread executing the failing assert.\r", "Thanks for the report @ekesken . We'll take a look into this ... =||= Should be fixed in #946 =||= "], ["922", "Improving conditional statement for map", "taekyung", "bistros", "05/31/17, 06:33:17 AM", "remoteRegionUrlsWithName can never null, so change null check condition\r\n\r\nAccording to EurekaServerConfig.java's remoteRegionUrlsWithName comment\r\n  Empty map if no remote region url is defined.\r\n\r\nNow, Always running\r\nhttps://github.com/Netflix/eureka/blob/4f24d9dcf90713b421f6c092fa63e707cbf74df3/eureka-core/src/main/java/com/netflix/eureka/registry/AbstractInstanceRegistry.java#L138-L151", "Thanks for the PR @bistros  =||= "], ["923", "does not aws have private dns now?", "Karthik Ram", "listaction", "04/27/17, 11:25:47 PM", "NaN", "Hi @listaction for AWS features, please refer to AWS documentation. Thanks. =||= "], ["924", "eureka-client : Incorrect jackson-annotations version in POM/Build.gradle", null, "smkb80", "05/08/17, 12:22:27 PM", "Hi Team,\r\n\r\nThe master branch **eureka-client** is dependent on **jackson-annotations** 2,5.4. But during runtime following **NoClassDefFoundError** is thrown. Changing the version of  jackson-annotations to **2.8.3** in my POM fixed the issue. Pls fix it your codebase.\r\n\r\n`\r\nCaused by: java.lang.NoClassDefFoundError: com/fasterxml/jackson/annotation/JsonInclude$Value\r\n\tat com.fasterxml.jackson.databind.cfg.MapperConfig.<clinit>(MapperConfig.java:45)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.<init>(ObjectMapper.java:543)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.<init>(ObjectMapper.java:460)\r\n\tat com.netflix.discovery.converters.EurekaJacksonCodec.<init>(EurekaJacksonCodec.java:111)\r\n\tat com.netflix.discovery.converters.EurekaJacksonCodec.<clinit>(EurekaJacksonCodec.java:92)\r\n\tat com.netflix.discovery.converters.wrappers.CodecWrappers$LegacyJacksonJson.<init>(CodecWrappers.java:285)\r\n\tat com.netflix.discovery.converters.wrappers.CodecWrappers.create(CodecWrappers.java:125)\r\n\tat com.netflix.discovery.converters.wrappers.CodecWrappers.getEncoder(CodecWrappers.java:75)\r\n\tat com.netflix.discovery.converters.wrappers.CodecWrappers.getEncoder(CodecWrappers.java:66)\r\n\tat com.netflix.discovery.provider.DiscoveryJerseyProvider.<init>(DiscoveryJerseyProvider.java:68)\r\n\tat com.netflix.discovery.shared.transport.jersey.EurekaJerseyClientImpl$EurekaJerseyClientBuilder$MyDefaultApacheHttpClient4Config.<init>(EurekaJerseyClientImpl.java:194)\r\n\tat com.netflix.discovery.shared.transport.jersey.EurekaJerseyClientImpl$EurekaJerseyClientBuilder.build(EurekaJerseyClientImpl.java:170)\r\n\tat com.netflix.discovery.shared.transport.jersey.JerseyEurekaHttpClientFactory$JerseyEurekaHttpClientFactoryBuilder.buildLegacy(JerseyEurekaHttpClientFactory.java:197)\r\n\tat com.netflix.discovery.shared.transport.jersey.JerseyEurekaHttpClientFactory$JerseyEurekaHttpClientFactoryBuilder.build(JerseyEurekaHttpClientFactory.java:178)\r\n\tat com.netflix.discovery.shared.transport.jersey.JerseyEurekaHttpClientFactory.create(JerseyEurekaHttpClientFactory.java:135)\r\n\tat com.netflix.discovery.shared.transport.jersey.Jersey1TransportClientFactories.newTransportClientFactory(Jersey1TransportClientFactories.java:48)\r\n\tat com.netflix.discovery.DiscoveryClient.scheduleServerEndpointTask(DiscoveryClient.java:454)\r\n\tat com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:392)\r\n\t... 6 more\r\n`\r\n\r\nRegards,\r\nSameek", "Hi @sameekb do you have other dependencies in you application that bumped jackson version 2.8.3? Jackson have a family of jars that need to be in sync with versions.  =||= Hi @qiangdavidliu,\r\nThere is no other transitive dependency on jackson version 2.8.3. =||= Hi @qiangdavidliu ,\r\n\r\n**eureka-client 1.6.2** got built using  **jackson-annotations 2.5.4** =||= "], ["925", "Maybe support thrift\uff1f", "Dreampie", "Dreampie", "04/27/17, 11:27:47 PM", "NaN", "Hi @Dreampie at this point, we are going some other directions and is unlikely to support thrift unfortunately. =||= "], ["926", "Need Help: Using ServiceCall EIP and camel-ribbon component to discover service from Netflix Eureka Server", null, "smkb80", "04/27/17, 11:30:09 PM", "Dear All, \r\n\r\nI am trying to discover a service (localhost:9999) registered in a Eureka Server running at localhost:8080 using ServiceCall EIP and camel-ribbon component checked out from Github master branch i.e. 2.19.0-SNAPSHOT version. \r\n\r\nFollowing is my eureka-service properties used while registering the service: \r\n\r\n`eureka.name=vertxHttp\r\neureka.vipAddress=http.vertx.net\r\neureka.port=9999 `\r\n\r\nNow, my route to lookup the registered service is: \r\n\r\n`\r\n        StaticServiceDiscovery servers = new StaticServiceDiscovery(); \r\n        servers.addServer(\"localhost\", 8080); \r\n\r\n        RibbonConfiguration configuration = new RibbonConfiguration(); \r\n        RibbonLoadBalancer loadBalancer = new RibbonLoadBalancer(configuration); \r\n\r\n        // configure camel service call \r\n        ServiceCallConfigurationDefinition config = new ServiceCallConfigurationDefinition(); \r\n        config.setLoadBalancer(loadBalancer); \r\n        config.setServiceDiscovery(servers); \r\n\r\n        // register configuration \r\n        getContext().setServiceCallConfiguration(config); \r\n        \r\n        from(\"direct:start\") \r\n        .serviceCall(\"vertxHttp\",\"http:vertxHttp.host:vertxHttp.port\") \r\n        .process(new Processor() { \r\n                        \r\n                        @Override \r\n                        public void process(Exchange exchange) throws Exception { \r\n                                // TODO Auto-generated method stub \r\n                                System.out.println(\"From Route->\"+exchange); \r\n                        } \r\n                }) \r\n        .to(\"mock:result\"); \r\n`\r\n\r\nWhile running the above route in debug mode, the control is not going into Processor.process, so I am unable to check the contents of exchange to see whether ServiceCall is working as expected. \r\n\r\nCouple of questions: \r\n1) Can I use ServiceCall EIP and camel-ribbon component to discover a service registered in Netflix Eureka Server? \r\n\r\n2) If yes, pls help me in getting it working. \r\n\r\nThanks in advance. \r\n\r\nRegards, \r\nSameek Bhaumik", "Hi @sameekb this question is better answered by the maintainers of https://github.com/apache/camel =||= "], ["927", "Enable customize discovery client scheduler thread pool", "Maxim Kirilov", "maximkir", "05/31/17, 06:40:51 AM", "Today's implementation has a hard coded value of 3. While other 2 executors (heartbeat & cache Refresh) can be customized with properties (client.heartbeat.threadPoolSize & client.cacheRefresh.threadPoolSize). \r\nI suggest to add another property: client.scheduler.threadPoolSize for client scheduler core size.", "@maximkir looks like the size of 3 for the top level schedule is a legacy of old client needs, and there really only need to be 2 threads (1 for cache refresh, 1 for heartbeat). The InstanceInfoReplicator function used to share the same pool (hence the size of 3) but that now has its own scheduler.\r\n\r\nAs the actual execution tasks are protected, there should be no need to make the pool size configurable and it should instead be set to 2. Was there some reason you found in your environment that prompted the need to make this pool size configurable? Thanks. =||= No, I just inspected the tread pools that created by the discovery client and their roles. The fixed value catch my eye with comparison to other pools. \r\nA comment that explains the fixed value can be nice for future readers. =||= Thanks, done. =||= "], ["928", "Configure discovery client executor thread pool size", "Maxim Kirilov", "maximkir", "05/31/17, 06:40:41 AM", "related to issue #927", "Hi @maximkir thanks for the PR, please see the comments/questions in the corresponding issue. =||= @maximkir thanks for the PR. Have fixed the client and added comments. =||= "], ["929", "Best practices for Eureka server upgrades", "Jacques-Etienne Beaudet", "jebeaudet", "04/27/17, 11:53:10 PM", "Hi Netflix,\r\n\r\nI'm looking at the best practices to gracefully upgrade Eureka servers without downtime and I have yet to find any information about that. I've ran into issues lately (more on that later) and I want to make sure I'm doing this properly. From my experience, there seems to be 3 ways to update servers (we're using the TXT DNS service urls endpoint resolution and have 2 eureka servers in different zones) : \r\n\r\n### TXT DNS upgrade\r\nI haven't tested this one but I'm guessing it should work. You start by adding a new EIP in the relevant zone's DNS where you're spawning a new Eureka server. You spawn the new server, it grabs the new EIP and eventually, clients will start to send heartbeats to the new server and it will get replication from the old one. \r\n\r\nOnce everything is up and running, remove the old EIP from the zone's DNS, wait for propagation and client service urls refreshes and shutdown the old server. This in theory should be without any error logs but a much longer process since you need to wait DNS propagation and service urls refreshes. It is also hard to assert that every client are aware of the new EIP other than checking the logs. You could also potentially have DNS cache problems.\r\n\r\n### Side by side upgrade\r\nThis is the method we currently use, it involves spawning a new instance with the new version of the server side by side with the old. No modification to the TXT DNS are made. Once the server is up and running and the registry is replicated, the old server is terminated. Its EIP then gets released and grabbed by the new server.\r\n\r\nFrom the moment the EIP is associated to the new instance, you need to wait 10 minutes so that the peer eureka node updater job is executed (method `getPeerEurekaNodesUpdateIntervalMs` in `EurekaServerConfig`, the default is 10 minutes).\r\n\r\nThis works but it creates a lot of noise in the logs since for a while (when the old server is shutting down, you get connect timeouts error logs).\r\n\r\n### In place upgrade\r\nYou shutdown the old server, replace the jar and boot it up again on the same instance. \r\n\r\nThis also generates a lot of error logs.\r\n\r\n### Conclusion\r\nWhat is the prefered way to upgrade Eureka servers without downtime and with assurance that no registry sync occur? I'm fine with some error logs if they're necessary from my end.", "Hi @jebeaudet we internally deploy in a way that is a combination of your last two methods. We terminate the older instance without editing the TXT records (running sub-par) and bring up a new instance that assumes the vacated EIP once it is up.\r\n\r\nThis does generate some connection logs on the other eureka servers (clients have additional logic to mitigate even this) but eureka is designed to be resilient to running sub-par.\r\n\r\nPlease do note that we run a lot more than 2 servers internally. I would recommend at least 3 so when you are deploying, you are never down to just a single live server. =||= Thanks for the quick feedback @qiangdavidliu, this is valuable information to me and many others that will end up here with a google search, I could not find any information about upgrades anywhere. Thanks again! =||= "], ["930", "Issue while upgrading Eureka server", "Jacques-Etienne Beaudet", "jebeaudet", "04/27/17, 11:55:22 PM", "Related to https://github.com/Netflix/eureka/issues/929, I created 2 issues so they're clearly divided, hopefully it's fine with you. \r\n\r\nLast upgrade, we had a small downtime with clients complaining there were no instance of an application in their registry (`Load balancer does not have available server for client: foo`). We're using the \"Side by side upgrade\" mentioned in https://github.com/Netflix/eureka/issues/929. It is the first time we encountered this and I'm trying to trace the issue to understand what happened. There was a misunderstanding in the procedure and the following timeline happened : \r\n\r\n1. Spawn new eureka server\r\n2. When it's up and running, old server is stoped\r\n3. While it's stopping (Still up and receiving heartbeats), the EIP was manually dissasociated in the AWS dashboard\r\n4. New eureka server grabs the released EIP within 1 minute (11:52:35)\r\n5. New eureka server started expiring leases of multiple servers (11:54:36)\r\n6. Old eureka server shutdown completely (11:55:16) \r\n5. Clients encountered exceptions (11:55:45)\r\n\r\nMy hypothesis is that once the new server grabbed the EIP, the old continued to receive heartbeats since clients had the connection opened in their pool and did not receive any exception so they continued to use that live connection. Heartbeats/replication did not occured and this eventually lead to the canceling of leases due to the missing heartbeats (we have the self preservation mode off). Is it plausible from your perpective?\r\n\r\nThanks!\r", "Hi @jebeaudet there are a few potential minor races that can occur when an eureka server has synced but has not assumed an EIP, and what you describe is plausible. There might also be stale registry data in the synced server as while it has not assumed the EIP, it is not receiving up to date replications.\r\n\r\nRe the other issue opened, we do our deployments by going sub-par first to avoid any races. We also run with more servers so when sub-par, we still have plenty of redundancy. The system is designed so that going sub-par temporarily is not an issue (as running in AWS, you can lose an instance at any time). =||= "], ["931", "Fix link rendering in README.md", "Max Johansen", "macsj200", "04/27/17, 11:50:22 PM", "There's a space in between the brackets and parentheses in the readme, which causes the links to not render properly. I've removed the space so the links look like links now.", "Thank you @macsj200  =||= "], ["932", "Veracode Testing identifies Insufficient Entropy issue in eureka client jar", null, "jbaurchn", "04/27/17, 11:48:24 PM", "Veracode has identified 2 issues in the following classes  in eureka-client-1.4.12.jar\r\n\r\nResolverUtils.java 96\r\nSessionedEurekaHttpClient.java 92\r\n\r\nThe issue details are as below.\r\n\r\n**Insufficient Entropy (CWE ID 331)\r\n**Description**\r\nStandard random number generators do not provide a sufficient amount of entropy when used for security purposes.\r\nAttackers can brute force the output of pseudorandom number generators such as rand().\r\n\r\n\r\n\r\n**Recommendations**\r\nIf this random number is used where security is a concern, such as generating a session identifier or cryptographic\r\nkey, use a trusted cryptographic random number generator instead.\r\n\r\nCan you please help  confirm if this indeed an issue which needs to be fixed in code or a false positive from Veracode. If to be fixed, can you also let us know if there is any timeline for fixing it.\r\n\r", "Hi @jbaurchn thank you for the analysis. The usage here is not for security purposes.  =||= "], ["933", "409 Conflict Response does not send the InstanceInfo back to the client", "Jacques-Etienne Beaudet", "jebeaudet", "05/31/17, 11:27:12 PM", "In `InstanceResource`, when renewing a lease and `lastDirtyTimestamp` is not null, the code will return a 409 Conflict to the client in a certain situation. However, `PeerReplicationResource` will not return the `InstanceInfo` in the body of the response unless the status code is 200.\r\n\r\nOn the client side of things, `PeerEurekaNode` needs this `InstanceInfo` to execute the method `syncInstancesIfTimestampDiffers`. Since it's never sent back from the server, this code never gets executed and you get `The replication of task XXX/i-XXX@XXX failed with response code 409` logs until you fix it manually.\r\n\r\nPR submitted.", "Sorry for the amended commits noise :) =||= "], ["934", "Add the InstanceInfo to the response in case of 409 status code", "Jacques-Etienne Beaudet", "jebeaudet", "05/31/17, 11:27:12 PM", "Fixes #933.\r\n\r\nThanks!", "Thanks @jebeaudet, taking a look ... =||= @qiangdavidliu Have you had the chance to give it a look? We're releasing this patch in our production environment soon and I'd sleep better if I had your green thumbs on it :wink:  =||= Hi @jebeaudet apologies for the delayed response. This PR looks sound and makes logical sense, but I want to set up a quick test in our test env to test this out just to verify any potential unintended side effects. I'll let you know soon. =||= @jebeaudet prelim trial seems ok, though there were some weirdness. Will merge this and I'll also set up a config guard for a quick 'undo'. Thanks for the contrib! =||= @qiangdavidliu Did you get a chance to test it enough to remove the failguard of https://github.com/Netflix/eureka/commit/6f3f997d640c32b2d391f6555a5cdaa7cd66e7c0? =||= @qiangdavidliu Any info about that safeguard? Thanks! =||= "], ["935", "update version", "Jacklee", "lqjack", "05/31/17, 06:44:01 AM", "NaN", "Thanks for the PR @lqjack . I am going to close this and update to the latest nebula version. Appreciate the PR though. =||= "], ["936", "The home page of eureka-server is shown as XML format ", "Kent", "kenttanl", "05/12/17, 09:05:50 AM", "Hello eldest brother,\r\n\r\nI met a strange question,  when I visit home page(http://127.0.0.1:1111/), it's not like HTML page, but this:\r\n```XML\r\nThis XML file does not appear to have any style information associated with it. The document tree is shown below.\r\n<com.netflix.eureka.util.StatusInfo>\r\n<generalStats>\r\n<current-memory-usage>440mb (86%)</current-memory-usage>\r\n<num-of-cpus>4</num-of-cpus>\r\n<total-avail-memory>507mb</total-avail-memory>\r\n<environment>test</environment>\r\n<server-uptime>00:04</server-uptime>\r\n</generalStats>\r\n<applicationStats>\r\n<unavailable-replicas>http://localhost:8761/eureka/,</unavailable-replicas>\r\n<available-replicas/>\r\n<registered-replicas>http://localhost:8761/eureka/</registered-replicas>\r\n</applicationStats>\r\n<instanceInfo>\r\n<instanceId>WCMIS208:SmartDataStack-Robot:1111</instanceId>\r\n<hostName>WCMIS208</hostName>\r\n<app>SMARTDATASTACK-ROBOT</app>\r\n<ipAddr>10.16.72.21</ipAddr>\r\n<status>UP</status>\r\n<overriddenstatus>UNKNOWN</overriddenstatus>\r\n<port enabled=\"true\">1111</port>\r\n<securePort enabled=\"false\">443</securePort>\r\n<countryId>1</countryId>\r\n<dataCenterInfo class=\"com.netflix.appinfo.InstanceInfo$DefaultDataCenterInfo\">\r\n<name>MyOwn</name>\r\n</dataCenterInfo>\r\n<leaseInfo>\r\n<renewalIntervalInSecs>30</renewalIntervalInSecs>\r\n<durationInSecs>90</durationInSecs>\r\n<registrationTimestamp>0</registrationTimestamp>\r\n<lastRenewalTimestamp>0</lastRenewalTimestamp>\r\n<evictionTimestamp>0</evictionTimestamp>\r\n<serviceUpTimestamp>0</serviceUpTimestamp>\r\n</leaseInfo>\r\n<metadata class=\"java.util.Collections$EmptyMap\"/>\r\n<homePageUrl>http://WCMIS208:1111/</homePageUrl>\r\n<statusPageUrl>http://WCMIS208:1111/info</statusPageUrl>\r\n<healthCheckUrl>http://WCMIS208:1111/health</healthCheckUrl>\r\n<vipAddress>SmartDataStack-Robot</vipAddress>\r\n<secureVipAddress>SmartDataStack-Robot</secureVipAddress>\r\n<isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\r\n<lastUpdatedTimestamp>1493688759999</lastUpdatedTimestamp>\r\n<lastDirtyTimestamp>1493688760705</lastDirtyTimestamp>\r\n</instanceInfo>\r\n</com.netflix.eureka.util.StatusInfo>\r\n```\r\n\r\nThis is a xml page? and my pom.xml is this:\r\n```xml\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n  <modelVersion>4.0.0</modelVersion>\r\n  <groupId>com.newegg.dba</groupId>\r\n  <artifactId>smartDataStack-robot</artifactId>\r\n  <version>0.0.1-SNAPSHOT</version>\r\n\r\n  <!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-parent -->\r\n  <parent>\r\n    <groupId>org.springframework.boot</groupId>\r\n    <artifactId>spring-boot-starter-parent</artifactId>\r\n    <version>1.5.2.RELEASE</version>\r\n  </parent>\r\n\r\n  <dependencies>\r\n    <dependency>\r\n      <groupId>org.springframework.cloud</groupId>\r\n      <artifactId>spring-cloud-starter-eureka-server</artifactId>\r\n    </dependency>\r\n\r\n    <dependency>\r\n      <groupId>org.springframework.boot</groupId>\r\n      <artifactId>spring-boot-starter-test</artifactId>\r\n      <scope>test</scope>\r\n    </dependency>\r\n\r\n    <dependency>\r\n      <groupId>commons-dbutils</groupId>\r\n      <artifactId>commons-dbutils</artifactId>\r\n      <version>1.6</version>\r\n    </dependency>\r\n  </dependencies>\r\n\r\n  <dependencyManagement>\r\n    <dependencies>\r\n      <dependency>\r\n        <groupId>org.springframework.cloud</groupId>\r\n        <artifactId>spring-cloud-dependencies</artifactId>\r\n        <version>Dalston.RELEASE</version>\r\n        <type>pom</type>\r\n        <scope>import</scope>\r\n      </dependency>\r\n    </dependencies>\r\n  </dependencyManagement>\r\n</project>\r\n```\r\n\r\nAnd application.properties is this:\r\n\r\n```\r\nspring.application.name=SmartDataStack-Robot\r\n\r\nserver.port=1111\r\n\r\neureka.client.registerWithEureka=false\r\neureka.client.fetchRegistry=false\r\neureka.client.waitTimeInMsWhenSyncEmpty=0\r\n```\r\n\r\nAnd Application is this:\r\n```JAVA\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.boot.builder.SpringApplicationBuilder;\r\nimport org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;\r\n\r\n\r\n@EnableEurekaServer\r\n@SpringBootApplication\r\npublic class MainBootApplication {\r\n\t\r\n    public static void main(String[] args) { \r\n        new SpringApplicationBuilder(MainBootApplication.class).web(true).run(args);\r\n    }\r\n\t\r\n}\r\n```\r\n\r\nCan you help me? I very very want to an HTML page,  Thank you very very much", "this should go in the spring-cloud-netflix issue tracker, not here. =||= o....  sorry.... embarrassed....  :laughing: =||= Has been solved, see [https://github.com/spring-cloud/spring-cloud-netflix/issues/1905](https://github.com/spring-cloud/spring-cloud-netflix/issues/1905) =||= the above url showing error page kenttanl =||= SEE THIS [https://github.com/spring-cloud/spring-cloud-netflix/issues/1905](https://github.com/spring-cloud/spring-cloud-netflix/issues/1905) =||= "], ["937", "Eureka with ECS", null, "afilichkin", "05/03/17, 02:48:42 PM", "Hi,\r\nWe are using Eureka with AWS ECS service that can scale docker containers.\r\nIn ECS if you leave out the host port, or specify it as being '0', in your task definition, then the port will be chosen automatically and reported back to the service. After the task is running, describing it should show what port(s) it bound to.\r\n\r\nHow does Eureka can resolve what port to use if we have several EC2 instance. For example Service A from EC2-A try to call Service B from EC2-B. So Eureka can resolve hostname , but cannot identify exposed port\r", "Let me summarize this stuff.\r\nSo, Eureka works fine with AWS ESC if we have static Docker port. We just need expose this port then Eureka can resolve AWS host using AmazonInfo (http://cloud.spring.io/spring-cloud-netflix/spring-cloud-netflix.html#_using_eureka_on_aws)\r\n\r\nBut Eureka doesn\u2019t help you if you want to use ECS autoscalling feature.\r\n\r\nActually, we can use Eureka with ECS(autoscalling) and Docker only with Docker network host (docker run --net=host). But this approach is not good. For Kubernetes it\u2019s OK, because each Docker image is isolated in Pod(some Kubernetes expert mentioned that they are going to remove Eureka, because Kubernetes itself can do all this stuff).\r\n\r\nCurrently, it\u2019s not possible to run Eureka with ECS if you need dynamic Docker port. Amazon ECS agent doesn\u2019t support it yet( https://github.com/aws/amazon-ecs-agent/issues/151)\r\n\r\n =||= We have solved that by enabling the docker rest api on the ecs host. You can then create an introspector that asks the docker daemon on the host for the port mapping and use that info in a custom  Eureka instance config bean. =||= please read article at https://medium.com/@bhanu.pratap/service-discovery-in-spring-cloud-using-netflix-eureka-in-aws-fargate-2c5c294fee5c\r\n\r\n =||= > We have solved that by enabling the docker rest api on the ecs host. You can then create an introspector that asks the docker daemon on the host for the port mapping and use that info in a custom Eureka instance config bean.\r\n\r\n@DirkLachowski can you give an example of this configuration, please?\r\n\r\n =||= @gustoliv Sure, unfortunately it's an internal project on our gitlab so i'm unable to make it public. Will try to sketch the idea.\r\n\r\n### Enabler annotation\r\n\r\n```java\r\n@Retention(value=java.lang.annotation.RetentionPolicy.RUNTIME)\r\n@Target(value={java.lang.annotation.ElementType.TYPE})\r\n@Documented\r\n@Import(EurekaConfig.class)\r\n@Configuration\r\npublic @interface EnableDockerRegistration {\r\n\r\n}\r\n```\r\n\r\n### Eureka Config\r\n\r\n```java\r\n@Configuration\r\npublic class EurekaConfig {\r\n\t\r\n\tprivate final static Log LOG = LogFactory.getLog(EurekaConfig.class);\r\n\t\r\n\t@Bean\r\n\t@Autowired\r\n\t// Bean name is important, see https://github.com/spring-cloud/spring-cloud-config/issues/329\r\n\tpublic EurekaInstanceConfigBean eurekaInstanceConfigBean(InetUtils inetUtils) throws UnknownHostException {\r\n\t\tAmazonInfo info = AmazonInfo.Builder.newBuilder().autoBuild(\"eureka\");\r\n\t\tDockerEurekaInstanceConfigBean config = new DockerEurekaInstanceConfigBean(inetUtils);\r\n\t\tconfig.setDataCenterInfo(info);\r\n\t\tinfo.getMetadata().put(AmazonInfo.MetaDataKey.publicHostname.getName(), info.get(AmazonInfo.MetaDataKey.localIpv4));\r\n\t\tconfig.setHostname(info.get(AmazonInfo.MetaDataKey.localHostname));\r\n\t\tconfig.setIpAddress(info.get(AmazonInfo.MetaDataKey.localIpv4));\r\n\t\t\r\n\t\tContainerIntrospector introspector = new ContainerIntrospector(info.get(AmazonInfo.MetaDataKey.localIpv4));\r\n\t\tInspectContainerResponse container = introspector.inspect(InetAddress.getLocalHost().getHostName());\r\n\t\tPorts ports = container.getNetworkSettings().getPorts();\r\n\t\tMap<ExposedPort, Binding[]> bindings = ports.getBindings();\r\n\t\tBinding[] binding = bindings.get(new ExposedPort(8080));\r\n\t\tif (binding != null && binding.length > 0) {\r\n\t\t\tInteger hostPort = binding[0].getHostPort();\r\n\t\t\tLOG.info(\"Registering host port: \" + hostPort);\r\n\t\t\tconfig.setNonSecurePortForced(hostPort);\r\n\t\t\tconfig.setInstanceId(info.get(AmazonInfo.MetaDataKey.instanceId) + \":\" + hostPort);\r\n\t\t} else {\r\n\t\t\tthrow new IllegalStateException(\"Unable to get mapped port, exiting...\");\r\n\t\t}\r\n\t\t\r\n\t\treturn config;\r\n\t}\r\n}\r\n````\r\n\r\n### Docker config bean\r\n\r\n```java\r\n\r\npublic class DockerEurekaInstanceConfigBean extends EurekaInstanceConfigBean {\r\n\r\n\tprivate final static Log LOG = LogFactory.getLog(DockerEurekaInstanceConfigBean.class); \r\n\t\r\n\tpublic DockerEurekaInstanceConfigBean(InetUtils inetUtils) {\r\n\t\tsuper(inetUtils);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void setNonSecurePort(int nonSecurePort) {\r\n\t\tLOG.info(\"Trying to set nonSecurePort to: \" + nonSecurePort);\r\n\t\tif (super.getNonSecurePort() == 0) {\r\n\t\t\tsuper.setNonSecurePort(nonSecurePort);\r\n\t\t} else {\r\n\t\t\tLOG.info(\"Skiped setting nonSecurePort to: \" + nonSecurePort + \" because it's allready set to: \" + super.getNonSecurePort());\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tpublic void setNonSecurePortForced(int nonSecurePort) {\r\n\t\tsuper.setNonSecurePort(nonSecurePort);\r\n\t}\r\n}\r\n```\r\n\r\n## Introspector\r\n```java\r\npublic  class ContainerIntrospector {\r\n\tprivate final RestTemplate restTemplate = new RestTemplate();\r\n\tprivate final Log LOG = LogFactory.getLog(getClass());\r\n\tprivate final String instanceAddress;\r\n\t\r\n\tpublic ContainerIntrospector(String instanceAddress) {\r\n\t\tLOG.info(\"Creating container introspector for host: \" + instanceAddress);\r\n\t\tthis.instanceAddress = instanceAddress;\r\n\t}\r\n\t\r\n\tprivate String asEndpoint(String entityUri) {\r\n\t\treturn \"http://\" + instanceAddress + \":2375/\" + entityUri;\r\n\t}\r\n\t\r\n\tpublic InspectContainerResponse inspect(String containerId) {\r\n\t\tLOG.info(\"inspecting container: \" + containerId);\r\n\t\treturn restTemplate.getForObject(asEndpoint(\"containers/{id}/json\"), InspectContainerResponse.class, containerId);\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\n\r\nOn top of that you need a bunch of Pojos with json mappings for the docker api responses. We've extracted the relevant part from https://github.com/docker-java/docker-java - we couldn't use it directly because of its jersey dependency but you should get the idea. Pojos are in https://github.com/docker-java/docker-java/tree/master/src/main/java/com/github/dockerjava/api/model\r\n\r\nIf you have assembled all that parts using it in a boot-app is  as simple as:\r\n\r\n```java\r\n\r\n@SpringBootApplication\r\n@ImportResource(\"classpath:/aws.xml\")\r\n@EnableEurekaClient\r\n@EnableDockerRegistration\r\npublic class ApplicationBootstrapper {\r\n\t\r\n\tpublic static void main(String[] args) {\r\n            SpringApplication.run(ApplicationBootstrapper.class, args);\r\n        }\r\n}\r\n\r\n```\r\n\r\nOne thing you maybe want to change is the id the apps register with. We are creating an `<instanceId>:<docker-port>` id. You can change that quite at the end of the `EurekaConfig` bean.\r\n\r\n<img width=\"1326\" alt=\"Bildschirmfoto 2019-07-17 um 17 07 51\" src=\"https://user-images.githubusercontent.com/226266/61387155-dfdf2180-a8b5-11e9-83d1-6144d2997a35.png\">\r\n\r\n\r\nFeel free to reach out to me by mail if you need further infos.\r\n\t =||= @DirkLachowski Thanks a lot man! =||= "], ["938", "set hostname in eureka-client.properties", "real_rudi", "realrudi", "05/30/19, 11:09:56 PM", "Hello\r\n\r\nHow to set the hostname in the eureka-client.properties file?\r\n\r\nThis is my current configuration:\r\n\r\n`...\r\n<application>\r\n<name>ACR-SERVICE</name>\r\n<instance>\r\n<instanceId>pleven2</instanceId>\r\n<hostName>pleven2</hostName>\r\n<app>ACR-SERVICE</app>\r\n<ipAddr>127.0.1.1</ipAddr>\r\n<status>UP</status>\r\n...`\r\n\r\ninstanceId and hostname are set tp pleven2, which is the hostname of the server hosting my eureka service.\r\n\r\nHere is my \r\n\r\neureka-client.properties file\r\n\r\n`eureka.name=acr-service\r\n\r\neureka.vipAddress=acr\r\n\r\neureka.port=8080\r\neureka.securePort=8181\r\neureka.securePort.enabled=true\r\n\r\neureka.hostname=api-v2\r\n\r\neureka.preferSameZone=true\r\neureka.shouldUseDns=false\r\neureka.serviceUrl.default=http://api-v2:8080/eureka/v2/\r\neureka.homePageUrl=https://${eureka.hostname}:${eureka.securePort}/acr-service/v1.0`\r\n\r\nSo, which setting i have to use to set the hostname and the instancId?\r\n\r\nBest Regards\r\nErik", "@erudisch would you mind clarifying your question? When you say 'hostname', are you referring to the hostname of your registering application (including the eureka client), or the remote eureka server(s)? =||= "], ["939", "Unknown Service Getting Registered", null, "smkb80", "05/08/17, 12:27:29 PM", "Hi Team,\r\n\r\nI've a service that calls 3 other services which are registered with Eureka Server. Lets call this one a Composite Service and the ones it calls a set of core services.\r\n\r\nAdditionally the composite service also registers itself with Eureka while coming up using Eureka-Client APIs.But while registering itself a 'UNKNOWN' service is also getting registered. There is multiple log statements from com.netflix.discovery.DiscoveryClient:\r\n\r\n`\r\n[DiscoveryClient-InstanceInfoReplicator-0] INFO com.netflix.discovery.DiscoveryClient - DiscoveryClient_UNKNOWN/LT052806: registering service...\r\n[DiscoveryClient-InstanceInfoReplicator-0] INFO com.netflix.discovery.DiscoveryClient - DiscoveryClient_UNKNOWN/LT052806 - registration status: 204\r\n[DiscoveryClient-InstanceInfoReplicator-0] INFO com.netflix.discovery.DiscoveryClient - DiscoveryClient_UNKNOWN/LT052806: registering service...\r\n[DiscoveryClient-InstanceInfoReplicator-0] INFO com.netflix.discovery.DiscoveryClient - DiscoveryClient_UNKNOWN/LT052806 - registration status: 204\r\n[DiscoveryClient-InstanceInfoReplicator-0] INFO com.netflix.discovery.DiscoveryClient - DiscoveryClient_UNKNOWN/LT052806: registering service...\r\n[DiscoveryClient-InstanceInfoReplicator-0] INFO com.netflix.discovery.DiscoveryClient - DiscoveryClient_UNKNOWN/LT052806 - registration status: 204\r\n[DiscoveryClient-InstanceInfoReplicator-0] INFO com.netflix.discovery.DiscoveryClient - DiscoveryClient_UNKNOWN/LT052806: registering service...\r\n[DiscoveryClient-InstanceInfoReplicator-0] INFO com.netflix.discovery.DiscoveryClient - DiscoveryClient_UNKNOWN/LT052806 - registration status: 204\r\n`\r\n\r\nThe Eureka Admin console reports the status of the Unknown service as 'Starting'.\r\n\r\nThe following are eureka properties:\r\n\r\n`\r\n############################################\r\n# Eureka Properties For Service Registration\r\n############################################\r\neureka.region=default\r\neureka.preferSameZone=true\r\neureka.shouldUseDns=false\r\neureka.serviceUrl.default=http://localhost:8080/eureka/v2/\r\n\r\n#################################################\r\n# Additional Eureka Properties For Service Lookup\r\n#################################################\r\neureka.decoderName=JacksonJson\r\n\r\n`\r\n\r\nAll the above properties are in the same properties file.\r\n\r\nCan anyone please help in getting rid of the Unknown service? \r\nAlso, please revert back in case additional details are required.\r\n\r\nThanks in advance.\r\n\r\nRegards,\r\nSameek", "Setting **eureka.registration.enabled=false** for the composite service stopped an unknown service getting registered. =||= "], ["940", "if one client connect two eureka,how can i set defferent eureka-client.properties", null, "multiplyzero", "05/30/19, 11:09:56 PM", "NaN", "Hi @multiplyzero a client can/should only connect to a single eureka server cluster. Can you clarify your question? Thanks. =||= "], ["941", "how can eureka server cancel  a service when enable enableSelfPreservation", "niuhaipeng", "niuhp", "05/31/17, 07:34:59 AM", "when set eureka.server.enableSelfPreservation=true to eureka server,and a service is really not available(maybe the network is not available or the service process is killed by someone with [kill -9] or [docker stop]),when the service will be unregistered?????", "@niuhp self preservation mode is only activated when a large percentage of services are potentially expiring at the same time (i.e. in a network partitioned scenario). By default, the configured percentage is 15%. It should not activate for single server expirations. The config to set the percentage is dynamically configurable at run time, so if you do run in to self preservation mode and need to end it for a legitimate reason, you can alway temporarily lower the percentage threshold as required. See https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/DefaultEurekaServerConfig.java#L221 =||= "], ["942", "Why would eureka server return isAws false?", "Rob White", "wimnat", "05/31/17, 07:30:34 AM", "I am seeking help in running Eureka server in AWS.\r\n\r\nMy config is currently very simple...\r\n\r\nA springboot application annotated with \\@EnableEurekaServer running on an EC2 instance and configured with `binding-strategy: eip`.  Unfortunately EIP binding is never attempted.\r\n\r\nWhen I run the app I get a message in the log file on start up saying isAws: false but there is no detail as to why it thinks this.  The app then continues to start successfully but without my EIP attachment as expected.\r\n\r\nI have successfully run Eureka in AWS at a previous role I had and I didn't have to configure anything AWS specific.\r\n\r\nThere is a SO question that relates to this here http://stackoverflow.com/questions/43084285/eureka-server-cant-detect-aws but no replies.  I really don't know where to go from here as the log provides no extra detail and I can query the ec2 metadata fine.", "Hi @wimnat this looks related to spring cloud Netflix. I would advise to ask questions at https://github.com/spring-cloud/spring-cloud-netflix =||= Hi @wimnat, did you follow up on this and got an answer?\r\nHope I'm not contaminating this forum =||= @shmulika - i posted an answer on the SO post =||= Hi @wimnat and @qiangdavidliu , I think something is missing in the solution and I think it might still be related to Netflix/eureka original code/compatibility.\r\n\r\nIn order for Spring Netflix Eureka to return isAws true and bind to an EIP it seems to require this bean configured (as seen on several posts e.g. https://github.com/spring-cloud/spring-cloud-netflix/issues/102):\r\n\r\n```  \r\n   @Bean\r\n    public EurekaInstanceConfigBean eurekaInstanceConfigBean(InetUtils inetUtils) {\r\n        EurekaInstanceConfigBean b = new EurekaInstanceConfigBean(inetUtils);\r\n        AmazonInfo info = AmazonInfo.Builder.newBuilder().autoBuild(\"eureka\");\r\n        b.setDataCenterInfo(info);\r\n        return b;\r\n    }\r\n```\r\n\r\nThis seemingly works nicely, isAws=true and the instance binds to the EIP. However, it does not take into consideration that the publicIpv4 address changes and enters a buggy state.\r\nThe instance still remembers the previous publicIpv4 address when checking if EIP is bound:\r\nThe function isEIPBound() at https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/aws/EIPManager.java returns false (because it checks against the previous ipv4 address prior to the eip binding) and causes the registry to be cleared. This happens periodically at whatever interval EIP binding is checked.\r\nIf I restart the instance everythings starts working OK (because the instance has no state of the previous ipv4 adress).\r\n\r\nIf I understand correctly this is the result of the EurekaInstanceConfigBean and the DataCenterInfo being static.\r\n\r\n@wimnat  - did you encounter this also?\r\n@qiangdavidliu - I assume Eureka can be made to detect AWS and learn the IPv4 including changes without this configuration? Or is this not part of the open source project?\r\n\r\nThanks! =||= I did not encounter this issue because I'm using an EIP. EIPs do not change. This is what the documentation states to do. Is there a particular reason you're not using an EIP? =||= Sorry for not being clear enough - I AM using EIPs. But the very first time the instance comes up, the EC2 is still not bound to the EIP (it has some random IPv4 address until Eureka performs the binding to the EIP). \r\nHowever, it is the first time that counts... =||= Of course. A starting instance will not start with a bound EIP. Don't worry\nthough. The EIP will bound before Eureka starts.\n\nOn 18 Jun. 2017 6:38 pm, \"shmulika\" <notifications@github.com> wrote:\n\n> Sorry for not being clear enough - I AM using EIPs. But the very first\n> time the instance comes up, the EC2 is still not bound to the EIP (it has\n> some random IPv4 address until Eureka performs the binding to the EIP).\n> However, it is the first time that counts...\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/Netflix/eureka/issues/942#issuecomment-309264459>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AHFORm-JRxK87hUF0lpfEERFzE2En9Lnks5sFOH-gaJpZM4NbD63>\n> .\n>\n =||= Please have a look at how it behaves on the first run (after once initially binding the EIP):\r\n\r\n```\r\n2017-06-15 14:05:46.528  INFO 1443 --- [ureka-EIPBinder] com.netflix.eureka.aws.EIPManager        : My instance i-07a576cc81e58c0d3 seems to be already associated with the EIP 34.209.218.21\r\n2017-06-15 14:06:46.312  INFO 1443 --- [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 0ms\r\n2017-06-15 14:06:46.529  INFO 1443 --- [ureka-EIPBinder] c.n.e.r.PeerAwareInstanceRegistryImpl    : Got 1 instances from neighboring DS node\r\n2017-06-15 14:06:46.529  INFO 1443 --- [ureka-EIPBinder] c.n.e.r.PeerAwareInstanceRegistryImpl    : Renew threshold is: 1\r\n2017-06-15 14:06:46.529  INFO 1443 --- [ureka-EIPBinder] c.n.e.r.PeerAwareInstanceRegistryImpl    : Changing status to UP\r\n2017-06-15 14:06:46.672  INFO 1443 --- [ureka-EIPBinder] com.netflix.eureka.aws.EIPManager        : My instance i-07a576cc81e58c0d3 seems to be already associated with the EIP 34.209.218.21\r\n2017-06-15 14:07:46.529  INFO 1443 --- [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 0ms\r\n2017-06-15 14:07:46.673  INFO 1443 --- [ureka-EIPBinder] c.n.e.r.PeerAwareInstanceRegistryImpl    : Got 1 instances from neighboring DS node\r\n2017-06-15 14:07:46.673  INFO 1443 --- [ureka-EIPBinder] c.n.e.r.PeerAwareInstanceRegistryImpl    : Renew threshold is: 1\r\n2017-06-15 14:07:46.673  INFO 1443 --- [ureka-EIPBinder] c.n.e.r.PeerAwareInstanceRegistryImpl    : Changing status to UP\r\n2017-06-15 14:07:46.738  INFO 1443 --- [ureka-EIPBinder] com.netflix.eureka.aws.EIPManager        : My instance i-07a576cc81e58c0d3 seems to be already associated with the EIP 34.209.218.21\r\n2017-06-15 14:08:46.674  INFO 1443 --- [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 0ms\r\n2017-06-15 14:08:46.739  INFO 1443 --- [ureka-EIPBinder] c.n.e.r.PeerAwareInstanceRegistryImpl    : Got 1 instances from neighboring DS node\r\n2017-06-15 14:08:46.739  INFO 1443 --- [ureka-EIPBinder] c.n.e.r.PeerAwareInstanceRegistryImpl    : Renew threshold is: 1\r\n2017-06-15 14:08:46.739  INFO 1443 --- [ureka-EIPBinder] c.n.e.r.PeerAwareInstanceRegistryImpl    : Changing status to UP\r\n```\r\n\r\nThis might look OK, but actually everytime this repeats the registry is completely cleared.\r\n\r\nIf I manually restart the Eureka instance (where EIP is already bounded by previous run), the log looks like this:\r\n\r\n```\r\n2017-06-14 11:47:10.019  INFO 4639 --- [ureka-EIPBinder] com.netflix.eureka.aws.EIPManager        : My instance i-0fa10ad77743e213a seems to be already associated with the public ip 34.209.218.21\r\n2017-06-14 11:47:10.025  INFO 4639 --- [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 0ms\r\n2017-06-14 11:48:10.025  INFO 4639 --- [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 0ms\r\n2017-06-14 11:49:10.025  INFO 4639 --- [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 0ms\r\n2017-06-14 11:50:10.025  INFO 4639 --- [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 0ms\r\n2017-06-14 11:51:10.026  INFO 4639 --- [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 0ms\r\n2017-06-14 11:52:10.020  INFO 4639 --- [ureka-EIPBinder] com.netflix.eureka.aws.EIPManager        : My instance i-0fa10ad77743e213a seems to be already associated with the public ip 34.209.218.21\r\n2017-06-14 11:52:10.026  INFO 4639 --- [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 0ms\r\n2017-06-14 11:53:10.026  INFO 4639 --- [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 0ms\r\n2017-06-14 11:54:10.027  INFO 4639 --- [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 0ms\r\n2017-06-14 11:55:10.027  INFO 4639 --- [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 0ms\r\n2017-06-14 11:56:10.027  INFO 4639 --- [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 0ms\r\n2017-06-14 11:57:10.020  INFO 4639 --- [ureka-EIPBinder] com.netflix.eureka.aws.EIPManager        : My instance i-0fa10ad77743e213a seems to be already associated with the public ip 34.209.218.21\r\n```\r\n\r\n(Please don't put any order meaning to the dates, June 14th vs 15th, I've tested it many times over these are just the copy-pastes I've made)\r\n\r\nThe message from EIPBinder looks very similar, by indeed the first one reveals that the instance fails to verify that it's public ip is the same as the desired EIP; but then when trying to re-bind the EIP discovers that it is already bound... =||= Hi,\r\nAfter many Googling I've found a thread dealing with this exact issue:\r\nhttps://github.com/spring-cloud/spring-cloud-netflix/issues/1321\r\nThanks for the assist this far\r\n\r\n =||= "], ["943", "Allow for independent SSL context for EurekaJerseyClient", "Wes", "weswalker125", "05/31/17, 07:11:37 AM", "The builder only allows SSL configuration through system settings, though it can be useful to operate the discovery client on a separate SSL context from the server/system level.  This exposes a method to supply an SSLContext object and use it in the \"createCustomSslCM\" method.", "\ud83d\udc4d  =||= Thanks for the contrib @weswalker125  =||= "], ["944", "Unable to register client to eureka server", null, "divyanagrath", "05/31/17, 07:29:43 AM", "My Eureka server is running, but when I try to run client application I get following error:\r\n\r\n\r\nDiscoveryClient_PRODUCT/172.16.2.67:Product:9090 - was unable to refresh its cache! status = Cannot execute request on any known server\r\n\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111) ~[eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137) ~[eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1017) [eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:931) [eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:441) [eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:304) [eureka-client-1.4.6.jar:1.4.6]\r\n        at org.springframework.cloud.netflix.eureka.CloudEurekaClient.<init>(CloudEurekaClient.java:51) [spring-cloud-netflix-eureka-client-1.1.0.RELEASE.jar:1.1.0.RELEASE]\r\n        at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration.eurekaClient(EurekaClientAutoConfiguration.java:179) [spring-cloud-netflix-eureka-client-1.1.0.RELEASE.jar:1.1.0.RELEASE]\r\n        at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration$$EnhancerBySpringCGLIB$$9785688c.CGLIB$eurekaClient$1(<generated>) [spring-cloud-netflix-eureka-client-1.1.0.RELEASE.jar:1.1.0.RELEASE]\r\n        at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration$$EnhancerBySpringCGLIB$$9785688c$$FastClassBySpringCGLIB$$6bcab8ca.invoke(<generated>) [spring-cloud-netflix-eureka-client-1.1.0.RELEASE.jar:1.1.0.RELEASE]\r\n        at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) [spring-core-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:358) [spring-context-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration$$EnhancerBySpringCGLIB$$9785688c.eurekaClient(<generated>) [spring-cloud-netflix-eureka-client-1.1.0.RELEASE.jar:1.1.0.RELEASE]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]\r\n        at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]\r\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162) [spring-beans-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588) [spring-beans-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1173) [spring-beans-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1067) [spring-beans-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:513) [spring-beans-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483) [spring-beans-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory$2.getObject(AbstractBeanFactory.java:345) [spring-beans-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.cloud.context.scope.GenericScope$BeanLifecycleWrapper.getBean(GenericScope.java:359) [spring-cloud-context-1.1.0.RELEASE.jar:1.1.0.RELEASE]\r\n        at org.springframework.cloud.context.scope.GenericScope.get(GenericScope.java:176) [spring-cloud-context-1.1.0.RELEASE.jar:1.1.0.RELEASE]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:340) [spring-beans-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) [spring-beans-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.aop.target.SimpleBeanTargetSource.getTarget(SimpleBeanTargetSource.java:35) [spring-aop-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:192) [spring-aop-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at com.sun.proxy.$Proxy68.getApplications(Unknown Source) [na:na]\r\n        at org.springframework.cloud.netflix.eureka.EurekaDiscoveryClientConfiguration.maybeInitializeClient(EurekaDiscoveryClientConfiguration.java:120) [spring-cloud-netflix-eureka-client-1.1.0.RELEASE.jar:1.1.0.RELEASE]\r\n        at org.springframework.cloud.netflix.eureka.EurekaDiscoveryClientConfiguration.start(EurekaDiscoveryClientConfiguration.java:97) [spring-cloud-netflix-eureka-client-1.1.0.RELEASE.jar:1.1.0.RELEASE]\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:175) [spring-context-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.access$200(DefaultLifecycleProcessor.java:50) [spring-context-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:348) [spring-context-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:151) [spring-context-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:114) [spring-context-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:879) [spring-context-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.finishRefresh(EmbeddedWebApplicationContext.java:144) [spring-boot-1.5.4.BUILD-SNAPSHOT.jar:1.5.4.BUILD-SNAPSHOT]\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:545) [spring-context-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) [spring-boot-1.5.4.BUILD-SNAPSHOT.jar:1.5.4.BUILD-SNAPSHOT]\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:737) [spring-boot-1.5.4.BUILD-SNAPSHOT.jar:1.5.4.BUILD-SNAPSHOT]\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:370) [spring-boot-1.5.4.BUILD-SNAPSHOT.jar:1.5.4.BUILD-SNAPSHOT]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:314) [spring-boot-1.5.4.BUILD-SNAPSHOT.jar:1.5.4.BUILD-SNAPSHOT]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1162) [spring-boot-1.5.4.BUILD-SNAPSHOT.jar:1.5.4.BUILD-SNAPSHOT]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1151) [spring-boot-1.5.4.BUILD-SNAPSHOT.jar:1.5.4.BUILD-SNAPSHOT]\r\n        at com.example.config.Product.ProductApplication.main(ProductApplication.java:19) [classes/:na]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]\r\n        at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]\r\n        at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) [spring-boot-devtools-1.5.4.BUILD-SNAPSHOT.jar:1.5.4.BUILD-SNAPSHOT]\r\n\r\n2017-05-22 12:59:25.108  WARN 9652 --- [  restartedMain] com.netflix.discovery.DiscoveryClient    : Using default backup registry implementation which does not do anything.\r\n2017-05-22 12:59:25.116  INFO 9652 --- [  restartedMain] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30\r\n2017-05-22 12:59:25.118  INFO 9652 --- [  restartedMain] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4\r\n2017-05-22 12:59:25.159  INFO 9652 --- [  restartedMain] c.n.e.EurekaDiscoveryClientConfiguration : Registering application Product with eureka with status UP\r\n2017-05-22 12:59:25.161  INFO 9652 --- [  restartedMain] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1495438165160, current=UP, previous=STARTING]\r\n2017-05-22 12:59:25.164  INFO 9652 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_PRODUCT/172.16.2.67:Product:9090: registering service...\r\n2017-05-22 12:59:25.315  WARN 9652 --- [nfoReplicator-0] c.n.d.s.t.d.RetryableEurekaHttpClient    : Request execution failure with status code 500; retrying on another server if available\r\n2017-05-22 12:59:25.319  WARN 9652 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_PRODUCT/172.16.2.67:Product:9090 - registration failed Cannot execute request on any known server\r\n\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111) ~[eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) ~[eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) ~[eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) ~[eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:810) ~[eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:103) [eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.InstanceInfoReplicator$1.run(InstanceInfoReplicator.java:87) [eureka-client-1.4.6.jar:1.4.6]\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_121]\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_121]\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [na:1.8.0_121]\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.8.0_121]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_121]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_121]\r\n        at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]\r\n\r\n2017-05-22 12:59:25.321  WARN 9652 --- [nfoReplicator-0] c.n.discovery.InstanceInfoReplicator     : There was a problem with the instance info replicator\r\n\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111) ~[eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) ~[eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) ~[eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) ~[eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:810) ~[eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:103) ~[eureka-client-1.4.6.jar:1.4.6]\r\n        at com.netflix.discovery.InstanceInfoReplicator$1.run(InstanceInfoReplicator.java:87) [eureka-client-1.4.6.jar:1.4.6]\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_121]\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_121]\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [na:1.8.0_121]\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.8.0_121]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_121]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_121]\r\n        at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]", "Hi @divyanagrath this looks related to Spring Cloud Netflix. I would try to ask about it at https://github.com/spring-cloud/spring-cloud-netflix =||= "], ["945", "Eureka REST operations 404 issue", null, "lorgine", "05/30/19, 11:09:56 PM", "hi man,when i use Eureka REST operations, it reports 404 error,and after trying some times,i remove v2 it is ok, so can you update wiki?\r\nhttps://github.com/Netflix/eureka/wiki/Eureka-REST-operations", "Hi @lorgine I'm sure if I understand your issue? The documentation for the REST APIs are still accurate. =||= @qiangdavidliu \r\nFor example:\r\n`Request URL:http://localhost:8761/eureka/apps\r\nRequest Method:GET\r\nStatus Code:200 \r\nRemote Address:[::1]:8761`\r\n\r\n`Request URL:http://localhost:8761/eureka/v2/apps\r\nRequest Method:GET\r\nStatus Code:404 \r\nRemote Address:[::1]:8761` =||= If you are using Spring Cloud, it works without v2 =||= mark =||= mark =||= mark =||= "], ["946", "Update dependencies", "David Liu", "qiangdavidliu", "05/31/17, 11:27:50 PM", "Also contain some test fixes", "NaN"], ["947", "Add a guard to PR #934", "David Liu", "qiangdavidliu", "06/01/17, 08:13:49 PM", "#934\r\n@jebeaudet ", "Thanks for heads up, let me know if you find anything related to it.  =||= @qiangdavidliu Did you encounter any problem with it in the end? Thanks for the feedback =||= "], ["948", "after 90s ,eureka-server dose not kick off client", null, "hao0111", "09/15/17, 10:47:34 PM", "hi,i use spring-cloud with C.version , i  shutdown one of eureka-client service, after 90 seconds,but the eureka-sever console  show the service that has already shutdown!!! whatever i restart eureka-server ,it has the problem same to before,how can i do? please help me,thanks ", "This is not the tracker for spring-cloud. https://github.com/spring-cloud/spring-cloud-netflix =||= sorry,i got it!thank you =||= "], ["949", "add pre registration handler", "David Liu", "qiangdavidliu", "06/01/17, 11:34:47 PM", "NaN", "NaN"], ["950", "update a flaky test", "David Liu", "qiangdavidliu", "06/02/17, 04:52:43 AM", "NaN", "NaN"], ["951", "Starting eureka failed in China AWS because of hard code dns address", "Wang Gang", "wanggang1987", "05/30/19, 11:09:56 PM", "Meeting exception when using eureka in China AWS region :\r\n```\r\n2017-06-02 05:53:44.030 ERROR 24729 --- [      Thread-11] com.netflix.eureka.aws.EIPManager        : Failed to bind elastic IP: 54.222.171.123 to i-030064f46d2e3edfd\r\n\r\ncom.amazonaws.AmazonClientException: Unable to execute HTTP request: ec2.cn-north-1.amazonaws.com\r\n\tat com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:714) ~[aws-java-sdk-core-1.11.18.jar!/:na]\r\n\tat com.amazonaws.http.AmazonHttpClient.doExecute(AmazonHttpClient.java:454) ~[aws-java-sdk-core-1.11.18.jar!/:na]\r\n\tat com.amazonaws.http.AmazonHttpClient.executeWithTimer(AmazonHttpClient.java:416) ~[aws-java-sdk-core-1.11.18.jar!/:na]\r\n\tat com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:365) ~[aws-java-sdk-core-1.11.18.jar!/:na]\r\n\tat com.amazonaws.services.ec2.AmazonEC2Client.doInvoke(AmazonEC2Client.java:12003) ~[aws-java-sdk-ec2-1.11.18.jar!/:na]\r\n\tat com.amazonaws.services.ec2.AmazonEC2Client.invoke(AmazonEC2Client.java:11973) ~[aws-java-sdk-ec2-1.11.18.jar!/:na]\r\n\tat com.amazonaws.services.ec2.AmazonEC2Client.describeAddresses(AmazonEC2Client.java:4716) ~[aws-java-sdk-ec2-1.11.18.jar!/:na]\r\n\tat com.netflix.eureka.aws.EIPManager.bindEIP(EIPManager.java:202) [eureka-core-1.4.12.jar!/:1.4.12]\r\n\tat com.netflix.eureka.aws.EIPManager.handleEIPBinding(EIPManager.java:136) [eureka-core-1.4.12.jar!/:1.4.12]\r\n\tat com.netflix.eureka.aws.EIPManager.start(EIPManager.java:105) [eureka-core-1.4.12.jar!/:1.4.12]\r\n\tat com.netflix.eureka.aws.AwsBinderDelegate.start(AwsBinderDelegate.java:42) [eureka-core-1.4.12.jar!/:1.4.12]\r\n\tat org.springframework.cloud.netflix.eureka.server.EurekaServerBootstrap.initEurekaServerContext(EurekaServerBootstrap.java:145) [spring-cloud-netflix-eureka-server-1.2.4.RELEASE.jar!/:1.2.4.RELEASE]\r\n\tat org.springframework.cloud.netflix.eureka.server.EurekaServerBootstrap.contextInitialized(EurekaServerBootstrap.java:81) [spring-cloud-netflix-eureka-server-1.2.4.RELEASE.jar!/:1.2.4.RELEASE]\r\n\tat org.springframework.cloud.netflix.eureka.server.EurekaServerInitializerConfiguration$1.run(EurekaServerInitializerConfiguration.java:70) [spring-cloud-netflix-eureka-server-1.2.4.RELEASE.jar!/:1.2.4.RELEASE]\r\n\tat java.lang.Thread.run(Thread.java:748) [na:1.8.0_131]\r\nCaused by: java.net.UnknownHostException: ec2.cn-north-1.amazonaws.com\r\n\tat java.net.InetAddress.getAllByName0(InetAddress.java:1280) ~[na:1.8.0_131]\r\n\tat java.net.InetAddress.getAllByName(InetAddress.java:1192) ~[na:1.8.0_131]\r\n\tat java.net.InetAddress.getAllByName(InetAddress.java:1126) ~[na:1.8.0_131]\r\n\tat com.amazonaws.SystemDefaultDnsResolver.resolve(SystemDefaultDnsResolver.java:27) ~[aws-java-sdk-core-1.11.18.jar!/:na]\r\n\tat com.amazonaws.http.DelegatingDnsResolver.resolve(DelegatingDnsResolver.java:38) ~[aws-java-sdk-core-1.11.18.jar!/:na]\r\n\tat org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:111) ~[httpclient-4.5.2.jar!/:4.5.2]\r\n\tat org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353) ~[httpclient-4.5.2.jar!/:4.5.2]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_131]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_131]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_131]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_131]\r\n\tat com.amazonaws.http.conn.ClientConnectionManagerFactory$Handler.invoke(ClientConnectionManagerFactory.java:76) ~[aws-java-sdk-core-1.11.18.jar!/:na]\r\n\tat com.amazonaws.http.conn.$Proxy171.connect(Unknown Source) ~[na:na]\r\n\tat org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380) ~[httpclient-4.5.2.jar!/:4.5.2]\r\n\tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236) ~[httpclient-4.5.2.jar!/:4.5.2]\r\n\tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184) ~[httpclient-4.5.2.jar!/:4.5.2]\r\n\tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184) ~[httpclient-4.5.2.jar!/:4.5.2]\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82) ~[httpclient-4.5.2.jar!/:4.5.2]\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55) ~[httpclient-4.5.2.jar!/:4.5.2]\r\n\tat com.amazonaws.http.apache.client.impl.SdkHttpClient.execute(SdkHttpClient.java:72) ~[aws-java-sdk-core-1.11.18.jar!/:na]\r\n\tat com.amazonaws.http.AmazonHttpClient.executeOneRequest(AmazonHttpClient.java:859) ~[aws-java-sdk-core-1.11.18.jar!/:na]\r\n\tat com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:702) ~[aws-java-sdk-core-1.11.18.jar!/:na]\r\n\t... 14 common frames omitted\r\n```\r\n\r\nAnd i have configuration \r\n```\r\neureka.client.serviceUrl.defaultZone=http://ec2-54-222-171-123.cn-north-1.compute.amazonaws.com.cn:8761/eureka/\r\neureka.client.region=cn-north-1\r\n```\r\n\r\nSee the code in `eureka/eureka-core/src/main/java/com/netflix/eureka/aws/EIPManager.java`\r\nline 408: `ec2Service.setEndpoint(\"ec2.\" + region + \".amazonaws.com\");` . The correct address should be `.amazonaws.com.cn` in China AWS.", "Thanks @wanggang1987 , this would be a bug. =||= "], ["952", "The dependencies cannot be found in ./eureka-server/testlibs/", "uttam anand", "uttamanand", "05/30/19, 11:09:57 PM", "The dependencies cannot be found in ./eureka-server/testlibs/\r\n\r\nDon't see any testlibs folder generated after executing ./gradle clean build", "@uttamanand I'm not sure I understand your question. What do you expect as an output from ./gradlew clean build? =||= "], ["953", "how to deal with the war name when deploy eureka client in tomcat", null, "miaoliqiusi", "05/30/19, 11:09:57 PM", "when we deploy a eureka client web server in tomcat,it's path may be ```hostname:port/project_name/**```\r\n\r\nbut when route by zuul with eureka ```service-id``` , zuul always ignore the ```project_name```\r\n\r\nand how can I config this this ```project_name``` in eureka client or zuul?\r", "NaN"], ["954", "Unnecessary checking of isThisMyUrl", "Fahim Farook", "fahimfarookme", "09/15/17, 11:15:05 PM", "I was debugging some failover scenarios and found that the `if` condition below never becomes true, hence unnecessary.\r\n\r\n```\r\nfor (final PeerEurekaNode node : peerEurekaNodes.getPeerEurekaNodes()) {\r\n       // If the url represents this host, do not replicate to yourself.\r\n       if (peerEurekaNodes.isThisMyUrl(node.getServiceUrl())) {\r\n            continue;\r\n        }\r\n       replicateInstanceActionsToPeers(action, appName, id, info, newStatus, node);\r\n }\r\n```\r\n\r\n[https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/registry/PeerAwareInstanceRegistryImpl.java#L633](https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/registry/PeerAwareInstanceRegistryImpl.java#L633)\r\n\r\nThis is because eureka server never adds itself to peer-node collection. i.e.\r\n[https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/cluster/PeerEurekaNodes.java#L140](https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/cluster/PeerEurekaNodes.java#L140)\r", "#953 Hello @zkwentz  =||= @fahimfarookme that looks to be the case, thanks. This is likely a legacy of some optimisations elsewhere. =||= "], ["955", "Unable to return status to UP after overridden status was set to OUT_OF_SERVICE", "Ryan King", "goatherder", "04/25/18, 05:25:57 PM", "Hi,\r\n\r\nWe're having some trouble understanding the expected behaviour with Eureka and the instance overridden status'.  We'd expect to be able to override a status (ie: set it to OUT_OF_SERVICE - eg: via spinnaker) - and then remove this to return the service to it's original status.\r\n\r\nHowever, this doesn't seem to be what happens from a couple of observations (running eureka server 1.6.2 - and various eureka clients...  mostly spring):\r\n\r\nSetting the status to OUT_OF_SERVICE manually:  curl -XPUT http://eureka_server:8080/eureka/v2/apps/APP/<id>/status?value=OUT_OF_SERVICE\r\n\r\nresults in:\r\n\r\nstatus = OUT_OF_SERVICE\r\noverriddenstatus = OUT_OF_SERVICE\r\n\r\n(lastDirtyTimestamp is also updated)\r\n\r\nThen, removing this status override (as per netflix rest api doc) - curl -v -XDELETE http://eureka_server:8080/eureka/v2/apps/APP/<id>/status\r\n\r\nresults in:\r\n\r\nstatus = UNKNOWN\r\noverriddenstatus = UNKNOWN\r\n\r\nheartbeats continue to come through from the client... which result in a 404 from the server:\r\n\r\nINFO  com.netflix.eureka.registry.AbstractInstanceRegistry:363 [http-apr-8080-exec-14] [renew] Instance status UNKNOWN possibly due to deleted override for instance <id>; re-register required\r\n\r\nAnd the instance DOES try to re-register... BUT - it fails due to the lastDirtyTimestamp in the heartbeat being old:\r\n\r\nWARN  com.netflix.eureka.registry.AbstractInstanceRegistry:211 [http-apr-8080-exec-23] [register] There is an existing lease and the existing lease's dirty timestamp 1496744179917 is greater than the one that is being registered 1496740143467\r\n\r\nSo - the service sits forever trying to heartbeat -> re-register (and it gets a 204 response on the re-register by the way).\r\n\r\n\r\nIs this expected behaviour?  Or is this possibly a configuration issue/client incompatability?\r\n\r\nThe only way to bring the service back up is to issue a:\r\n\r\ncurl -v -XDELETE http://eureka_server:8080/eureka/v2/apps/APP/<id>/status?value=OUT_OF_SERVICE\r\n\r\n(this is what spinnaker does... I guess it looks at the status vs overridden status?) - but this takes a while - I assume the asg rule eventually brings this up.\r\n\r\nOr, to bring the service up immediately, we could also run:\r\n\r\ncurl -v -XDELETE http://eureka_server:8080/eureka/v2/apps/APP/<id>/status?value=UP\r\n\r\nBut this all seems to defeat the purpose of an overridden status.  Unless I'm missing something?\r\n\r\nThanks.\r\n\r\n\r", "Hi @goatherder this is a bug that was fixed in #984  and released in 1.8.1. It will also be back-ported shortly to the 1.6.x branch. =||= In the meantime, using a suggested status value when deleting an override is one way to alleviate the issue. =||= "], ["956", "Documentation Issue: Operations hyperlink 404 ", null, "mike-mcelreath", "09/15/17, 10:59:29 PM", "The \"operations\" symlink on this page: \r\nhttps://github.com/Netflix/eureka/wiki/Understanding-eureka-client-server-communication\r\n\r\nDirects you to a 404 error.", "Hi, can I make correction to this documentation? Please let me know =||= Thanks, fixed. =||= "], ["957", "Documentation: Optimised replication", "Alex", "Lovett1991", "05/30/19, 11:09:57 PM", "Is it possible to have the replication events sent as a pool periodically (or delayed on event)? So that a node will not have to receive the same amount of traffic as the primary.\r\n\r\nThe reason I ask is it would be nice to deploy instances of eureka on very small vm's, I've had a tinker with the eureka client so that it round robins between nodes to split load, but if each node is going to forward the heartbeat immediately then our traffic on the primary node will be the same anyway.", "After looking through source, I have found that eureka does effectively have a delayed event so updates are grouped before being replicated.\r\n\r\nIs it possible to have this documented, as well as what the effects of reducing the number of workers for replication will have? =||= @Lovett1991 thanks for the issue, will look to add documentation on batched replication. =||= "], ["958", "Eureka- Server and Client Communication.", "Harish Kadamudi", "harishkadamudi", "05/30/19, 11:09:57 PM", "\r\nThis is not an Issue, but a question/clarification rather on server-client communication.\r\n\r\nI am running 3 services\r\n\t1. customer service\r\n\t2. order service\r\n\t3. customer-order service, which is an aggregator, pulls result from Customer & Order service\r\n\r\nHave configured Eureka cluster with 3 servers running\r\nAssume, Eureka-1,Eureka-2 & Eureka-3\r\n\r\nAll three of My Eureka servers are up.\r\n\r\nDuring testing, I registered all my services(Customer, Order and Order Services) to only 1 Eureka Server which is Eureka-1.\r\n\r\nObservations:\r\n\t1. All 3 Eureka servers will have Customer, Order and Customer-Order services information in the respective their Dashboards.\r\n\t2. Intentionally, stop Eureka-1(Note: All 3 services are registered with this only).\r\n\t3. When I hit customer-order service, somehow Eureka supplied customer & order instances/registry and I am able to hit customer and order url's.\r\n\r\nQuestion:\r\nEven my services are registered to only one Eureka Instance, how I am able to fetch information from Eureka Cluster.\r\ni was thinking since I am registered with only one Eureka Server, I shouldn't be getting customer & order information from Eureka Server.\r\n\r\nI waited for close to 30 minutes thinking, Eureka will not supply customer & order instances.", "When setup in cluster, somehow Eureka will share registered services information with each other,\r\neven if services are registered with only one Eureka Instance. =||= "], ["959", "Status returns invalid JSON", "Alex", "Lovett1991", "05/30/19, 11:09:57 PM", "When calling the Status endpoint the JSON returned is invalid, I believe it is missing the last '}'\r\n\r\nWas called with the header: Accept Application/JSON\r\n\r\nWhen called without the header a valid xml is returned.", "https://eureka-url/eureka/status\r\nStill returns (with  Accept Application/JSON) HTTP Status: 200 but as body: \r\nExpected ',' instead of ''\r\n\r\nhttps://eureka-url/eureka/apps\r\ninstead is able to return the content as a valid json. \r\n\r\nIs number one a misconfiguration from us or a common problem? \r\n\r\n\r\n =||= "], ["960", "Upgrade XStream to 1.4.10, added tests around CVE-2017-7957", null, "borlafu", "07/17/17, 09:34:28 PM", "Applied http://x-stream.github.io/CVE-2017-7957.html#workarounds and added some tests around it.\r\n\r\nAfter upgrading to 'com.thoughtworks.xstream:xstream:1.4.9' the workaround can be removed.", "Why not upgrade to 1.4.10 instead of putting a workaround in? =||= +1: Makes sense. Had to modify the tests as the exception thrown is different to the one from the workaround.\r\n =||= Thanks @borlafu for the PR. =||= "], ["961", "Spring Boot - Registration not recognized by load balancer", "Jean-Pierre Levac", "brokenjpl", "01/31/18, 10:51:38 PM", "I have a Spring Boot app trying to fetch an instance of a service through Erueka/Ribbon:\r\n\r\n```\t@LoadBalanced\r\n        @Autowired\r\n\tRestTemplate restTemplate;\r\n\r\n\t@RequestMapping(\"/hi\")\r\n\tpublic String hi(@RequestParam(value=\"name\", defaultValue=\"superuser\") String name) {\r\n\t\tAccountRest account = this.restTemplate.getForObject(\"http://AUTHENTICATION-SERVICE/authservice/v1/accounts/userId/\"+name,\r\n\t\t\t\tAccountRest.class);\r\n\t\treturn \"hi, \" + account.getId(); \r\n\t}\r\n```\r\nI am manually registering the \"AUTHENTICATION-SERVICE\", note that this service only needs to register itself, it does not need to query eureka:\r\n```\r\npublic class ServiceDiscoveryManager {\r\n\r\n\tprivate ApplicationInfoManager applicationInfoManager;\r\n\tprivate EurekaClient eurekaClient;\r\n\r\n\tpublic void start() {\r\n\t\tMyDataCenterInstanceConfig instanceConfig = new MyDataCenterInstanceConfig();\r\n\t\tDefaultEurekaClientConfig clientConfig = new DefaultEurekaClientConfig();\r\n\r\n\t\tInstanceInfo instanceInfo = new EurekaConfigBasedInstanceInfoProvider(instanceConfig).get();\r\n\t\tapplicationInfoManager = new ApplicationInfoManager(instanceConfig, instanceInfo);\r\n\t\teurekaClient = new DiscoveryClient(applicationInfoManager, clientConfig);\r\n\t\t\r\n\t\tapplicationInfoManager.getInfo();\r\n\t\teurekaClient.getApplications();\r\n\t\t\r\n\t\tinstanceInfo.setStatus(InstanceStatus.UP);\r\n\t}\r\n\r\n\tpublic void stop() {\r\n\t\teurekaClient.shutdown();\r\n\t}\r\n\r\n}\r\n```\r\nthe authentication-service eureka-client.properties file:\r\n\r\n```\r\neureka.name=AUTHENTICATION-SERVICE\r\neureka.appGroup=AUTHENTICATION-SERVICE\r\neureka.vipAddress=http://localhost:9080\r\neureka.port.enabled=true\r\neureka.port=9080\r\neureka.traffic.enabled=true\r\neureka.preferSameZone=true\r\neureka.serviceUrl.default=http://localhost:8000/eureka/\r\neureka.decoderName=JacksonJson\r\neureka.healthCheckUrl=http://localhost:9080/authservice/health\r\neureka.healthCheckPath=/authservice/health\r\n```\r\n\r\nThe Eureka Dashboard show my authentication service as registered:\r\n\r\n![capture](https://user-images.githubusercontent.com/17048935/27750574-61302f7a-5da6-11e7-94ad-22e57d0cf97b.PNG)\r\n\r\nWhen I try to get an instance of the authentication-service with the load balancer I receive the following exception:\r\n```\r\njava.lang.IllegalStateException: No instances available for AUTHENTICATION-SERVICE\r\n\tat org.springframework.cloud.netflix.ribbon.RibbonLoadBalancerClient.execute(RibbonLoadBalancerClient.java:90) ~[spring-cloud-netflix-core-1.2.5.RELEASE.jar:1.2.5.RELEASE]\r\n```\r\n\r\nI've confirmed that the load balancer is aware of the authentication-service, but the DynamicServerListLoadBalancer has the allServerList property as empty.  \r\n\r\nI've been playing with this for a few hours, wondering if some configuration is invalid. Thanks for any help.\r\n\r", "@brokenjpl this is not the issue tracker for spring-cloud-netflix =||= @spencergibb Thanks for replying. I believe that my issue is with programmatically registering my service to Eureka, specifically with the ServiceDiscoveryManager. If you believe the issue lies with spring-cloud-netflix, then I can close this issue and re-open there. =||= They don't support spring-boot/spring-cloud here =||= If you're still facing this issue, the above comment is correct.  spring-cloud-netflix is the best place to get support.  I'll close this issue, and if you are unable to resolve with spring-cloud-netflix, please feel free to re-open. =||= Hi, I have the same problem , is this a bug? =||= "], ["962", "Dynamic Replication", "Alex", "Lovett1991", "05/30/19, 11:12:10 PM", "#https://github.com/spring-cloud/spring-cloud-netflix/issues/2071\r\n\r\nAs mentioned in the issue above, would there be any issue in modifying code so that eureka nodes can pick up new nodes that are not in the config?", "NaN"], ["963", "Eureka REST operation issues", null, "wangzanmaoge", "05/30/19, 11:12:10 PM", "if i want to register new application instance, how to write the json file/xml file?", "I wrote it like this\uff1a\r\n\r\n{\r\n    \"instance\": {\r\n    \t\"instanceId\":\"192.168.0.102:qrcode-service:8990\",\r\n        \"hostName\": \"192.168.0.102\",\r\n        \"app\": \"QRCODE-SERVICE\",\r\n        \"vipAddress\": \"qrcode-service\",\r\n        \"secureVipAddress\": \"qrcode-service\",\r\n        \"ipAddr\": \"192.168.0.102\",\r\n        \"status\": \"UP\",\r\n        \"port\": {\"$\": \"8990\", \"@enabled\": \"true\"},\r\n        \"securePort\": {\"$\": \"443\", \"@enabled\": \"true\"},\r\n        \"healthCheckUrl\": \"http://192.168.0.102:8990/health\",\r\n        \"statusPageUrl\": \"http://192.168.0.102:8990/info\",\r\n        \"homePageUrl\": \"http://192.168.0.102:8990\",\r\n        \"dataCenterInfo\": {\r\n            \"@class\": \"com.netflix.appinfo.InstanceInfo$DefaultDataCenterInfo\", \r\n            \"name\": \"MyOwn\"\r\n        }\r\n    }\r\n} =||= @flyhero its error:\r\n\r\n{\r\n    \"error\": \"cannot parse request body\"\r\n} =||= you need to change here :  `\"securePort\": {\"$\": \"443\", \"@enabled\": \"false\"}` =||= `\"dataCenterInfo\": {\r\n      \"@class\": \"com.netflix.appinfo.InstanceInfo$DefaultDataCenterInfo\",\r\n      \"name\": \"MyOwn\"\r\n    }`\r\n\r\n\r\nand how to add metadata with json. @flyhero  =||= anyone has solved yet? thanks =||= this works for me\r\n```\r\n{\r\n    \"instance\": {\r\n        \"instanceId\": \"192.168.0.1:plugin-test-aaa-service:80\",\r\n        \"hostName\": \"192.168.0.1\",\r\n        \"app\": \"plugin-test-aaa-service\",\r\n        \"ipAddr\": \"192.168.0.1\",\r\n        \"vipAddress\": \"plugin-test-aaa-service\",\r\n        \"status\": \"UP\",\r\n        \"port\": {\r\n            \"$\": 80,\r\n            \"@enabled\": True,\r\n             \r\n        },\r\n        \"securePort\": {\r\n            \"$\": 443,\r\n            \"@enabled\": False,\r\n             \r\n        },\r\n        \"homePageUrl\": None,\r\n        \"statusPageUrl\": \"http://192.168.0.1:80/plugin-test/aaa-service/hello\",\r\n        \"healthCheckUrl\": None,\r\n        \"dataCenterInfo\": {\r\n            \"@class\": \"com.netflix.appinfo.MyDataCenterInfo\",\r\n            \"name\": \"MyOwn\"\r\n        },\r\n        'leaseInfo': {\r\n            'renewalIntervalInSecs': 15,\r\n            'durationInSecs': 60\r\n        }\r\n    }\r\n}\r\n``` =||= "], ["965", "initial commit", "Tom Cellucci", "tcellucci", "07/19/17, 06:38:44 PM", "1. memory tuning for deserialization\r\n2. java 8", "had some more changes, going to close this PR and resubmit =||= "], ["966", "How to registe many EurekaServer and  discovery many EurekaServer", "dengbin", "fashionfz", "05/30/19, 11:12:10 PM", "How to registe many EurekaServer and  discovery many EurekaServer.  I want to implement classified registration.", "NaN"], ["967", "Where is the allowRedirect used?", "Luke(Jangho Bae)", "jhbae", "05/30/19, 11:12:11 PM", "Unlike what is written in its documentation, it seems that there are no usages of `HTTP_X_DISCOVERY_ALLOW_REDIRECT` except for adding headers in `JerseyEurekaHttpClientFactory` class.\r\n\r\nIf I miss something then please let me know.\r\n\r", "NaN"], ["968", "EIPManager cannot bind EIP ", "Deleted user", "ghost", "07/20/17, 07:31:22 PM", "Bug Report:  I am attempting to run Eureka on AWS Linux (source: ami-a4c7edb2) and the EIP manager is throwing an exception stating that there is insufficient permission to access the specified resource.  This used to work on an older Amazon Linux AMI but when I upgraded to the new source AMI the EIP manager stopped working. I have tried giving the box an admin role but that did not help.  The role I am using is:\r\n{\r\n  \"Version\": \"2012-10-17\",\r\n  \"Statement\": [\r\n    {\r\n      \"Sid\": \"\",\r\n      \"Effect\": \"Allow\",\r\n      \"Action\": [\r\n        \"ec2:DisassociateAddress\",\r\n        \"ec2:DescribeAddresses\",\r\n        \"ec2:AssociateAddress\"\r\n      ],\r\n      \"Resource\": \"*\"\r\n    },\r\n    {\r\n      \"Sid\": \"\",\r\n      \"Effect\": \"Allow\",\r\n      \"Action\": \"autoscaling:DescribeAutoScalingGroups\",\r\n      \"Resource\": \"*\"\r\n    }\r\n  ]\r\n}\r\n\r\nThe exception is:\r\n2017-07-19 12:41:42 ERROR EIPManager:436 - Could not bind to EIP\r\ncom.amazonaws.services.ec2.model.AmazonEC2Exception: You do not have permission to access the specified resource. (Service: AmazonEC2; Status Code: 400; Error Code: AuthFailure; Request ID: a37b071b-7b8a-4bf5-acf4-d1cf9a4bff88)\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleErrorResponse(AmazonHttpClient.java:1579)\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1249)\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1030)\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:742)\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:716)\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:699)\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:667)\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:649)\r\n        at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:513)\r\n        at com.amazonaws.services.ec2.AmazonEC2Client.doInvoke(AmazonEC2Client.java:12175)\r\n        at com.amazonaws.services.ec2.AmazonEC2Client.invoke(AmazonEC2Client.java:12151)\r\n        at com.amazonaws.services.ec2.AmazonEC2Client.associateAddress(AmazonEC2Client.java:609)\r\n        at com.netflix.eureka.aws.EIPManager.bindEIP(EIPManager.java:243)\r\n        at com.netflix.eureka.aws.EIPManager$EIPBindingTask.run(EIPManager.java:434)\r\n        at java.util.TimerThread.mainLoop(Timer.java:555)\r\n        at java.util.TimerThread.run(Timer.java:505)\r\n\r\nAlso I have had problems using a different version of Amazon Linux (source: ami-c58c1dd3) where the EIP manager would work but the Eureka server would not start.  But using the same exact setup with the new source AMI has caused the EIP manager to stop working but the server will start.", "NaN"], ["969", "Misc. fixes", "Deleted user", "ghost", "11/14/17, 09:48:38 PM", "In testing my [SLF4J Helper](http://plugins.netbeans.org/plugin/72557/) plugin for NetBeans IDE, I found a few minor improvements that can be made.", "Rebased to fix the two conflicts. =||= @dtrebbien thanks for the PR, we will take a look at this. =||= Hello David,\n\nThank you for reviewing this pull request.\n\nI am currently traveling.  It might take me several days to make these\nchanges, but I will do so the soonest that I am able.\n\nDaniel\n\nOn Wed, Nov 1, 2017 at 2:34 PM, David Liu <notifications@github.com> wrote:\n\n> *@qiangdavidliu* commented on this pull request.\n>\n> Again thanks for the PR. Some minor nits.\n> ------------------------------\n>\n> In eureka-client/src/main/java/com/netflix/discovery/shared/\n> transport/decorator/RetryableEurekaHttpClient.java\n> <https://github.com/Netflix/eureka/pull/969#discussion_r148342330>:\n>\n> > @@ -126,7 +126,7 @@ public void shutdown() {\n>                  }\n>                  logger.warn(\"Request execution failure with status code {}; retrying on another server if available\", response.getStatusCode());\n>              } catch (Exception e) {\n> -                logger.warn(\"Request execution failed with message: {}\", e.getMessage());  // just log message as the underlying client should log the stacktrace\n> +                logger.warn(\"Request execution failed with message: {}\", e.getMessage(), e);  // just log message as the underlying client should log the stacktrace\n>\n> The full stacktrace is explicitly not logged here (see comment).\n> ------------------------------\n>\n> In eureka-resources/src/main/resources/css/main.css\n> <https://github.com/Netflix/eureka/pull/969#discussion_r148345599>:\n>\n> > @@ -146,7 +146,7 @@ tr.odd {\n>  span.hlist {\n>    padding-right: 10px;\n>    margin-right: 10px;\n> -  #background-color: #ffffcc;\n> +  background-color: #ffffcc;\n>\n> Let's keep the existing background-color please. Can just delete this line.\n> ------------------------------\n>\n> In eureka-client/src/main/java/com/netflix/discovery/DiscoveryClient.java\n> <https://github.com/Netflix/eureka/pull/969#discussion_r148345811>:\n>\n> > @@ -822,7 +820,7 @@ boolean renew() {\n>          EurekaHttpResponse<InstanceInfo> httpResponse;\n>          try {\n>              httpResponse = eurekaTransport.registrationClient.sendHeartBeat(instanceInfo.getAppName(), instanceInfo.getId(), instanceInfo, null);\n> -            logger.debug(\"{} - Heartbeat status: {}\", PREFIX + appPathIdentifier, httpResponse.getStatusCode());\n> +            logger.debug(PREFIX + \"{} - Heartbeat status: {}\", appPathIdentifier, httpResponse.getStatusCode());\n>\n> All the PREFIX + in this class can also be moved to PREFIX +\n> appPathIdentifier\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/Netflix/eureka/pull/969#pullrequestreview-73569824>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAQ6rgOpx6rol3dtGi34nzqjZrPwdaB1ks5syLmqgaJpZM4OgXyf>\n> .\n>\n =||= Also, the latest 5 commits are new to the PR. =||= I have now restored the is*Enabled() checks that guard against wasted computation. =||= Looks good, thanks @dtrebbien . =||= "], ["970", " memory tuning", "Tom Cellucci", "tcellucci", "07/25/17, 05:38:08 PM", "moved to Java 8\r\nextensive changes to jackson deserialization to reduce heap usage", "merging to create a candidate release, v1.8.0-rc.1 =||= "], ["971", "Eureka REST operations not available", "Jean Abraham", "jeanabraham", "02/17/18, 12:54:58 AM", "Hi,\r\n\r\nI have the Eureka server running locally. But, none of the eureka URIs are accessible. Trying the HTTP actions on [this page](https://github.com/Netflix/eureka/wiki/Eureka-REST-operations). \r\n\r\nExample:\r\n`GET http://localhost:8761/eureka/v2/apps`\r\n\r\nIs there any additional configuration I need to enable? Thanks!\r\n\r\nJean", "Try removing the `v2` =||= GET http://localhost:8761/eureka/apps =||= "], ["972", "Is it possible to let eureka keep metadata", null, "hsj1606", "08/04/17, 01:59:22 AM", "If eureka server is down or restart, all the client metadata will lose. And there is no way to get metadata again unless the client update it via REST api. Is it possible to let eureka store the metadata or let client bring metadata in heartbeat request?", "NaN"], ["973", "InstanceInfoReplicator register service after unregistered when shutting down", "Bill Zhang", "jingege", "12/13/17, 12:41:25 AM", "```\r\n20:36:28.856 [Thread-8] INFO   c.netflix.discovery.DiscoveryClient.shutdown 852 - Shutting down DiscoveryClient ...\r\n20:36:28.857 [Thread-8] INFO   c.netflix.discovery.DiscoveryClient.unregister 884 - Unregistering ...\r\n20:36:28.861 [Thread-8] INFO   c.netflix.discovery.DiscoveryClient.unregister 886 - DiscoveryClient_SHOWOFF/10.242.36.20:showoff:19001:0.1.0 - deregister  status: 200\r\n20:36:28.862 [DiscoveryClient-InstanceInfoReplicator-0] INFO   c.netflix.discovery.DiscoveryClient.register 795 - DiscoveryClient_SHOWOFF/10.242.36.20:showoff:19001:0.1.0: registering service...\r\n20:36:28.865 [DiscoveryClient-InstanceInfoReplicator-0] INFO   c.netflix.discovery.DiscoveryClient.register 804 - DiscoveryClient_SHOWOFF/10.242.36.20:showoff:19001:0.1.0 - registration status: 204\r\n20:36:28.867 [Thread-8] INFO   c.netflix.discovery.DiscoveryClient.shutdown 873 - Completed shut down of DiscoveryClient\r\n```\r\n\r\nThread \"Thread-8\" is shutting down discovery client, but thread \"DiscoveryClient-InstanceInfoReplicator-0\" is still scheduling.\r\n\r\nSee the code in com.netflix.discovery.InstanceInfoReplicator.java\r\n\r\n```\r\n    public void stop() {\r\n        scheduler.shutdownNow();\r\n        started.set(false);\r\n    }\r\n```\r\n\r\nin JDK 8, shutdownNow says \"This method does not wait for actively executing tasks to\r\n     * terminate.  Use {@link #awaitTermination awaitTermination} to\r\n     * do that.\"\r\n\r\nShould we change shutdownNow to awaitTermination to avoid this situation?", "PR #974  =||= "], ["974", "Avoid scheduling when DiscoveryClient.shutdown called", "Bill Zhang", "jingege", "12/13/17, 12:41:27 AM", "#973 ", "@jingege thanks for the PR, that makes sense. I believe you still need to call scheduler.shutdown() before blocking on an awaitTermination however. See the last example at the [ExecutorService javadoc](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html). The phased shutdown example in the javadoc seems to be the right way to execute the shutdown, would you mind updating your PR to reflect that?\r\n\r\nAppreciate the PR, thanks.\r\n\r\nCopy pasting the javadoc here for relevance:\r\n```\r\nThe following method shuts down an ExecutorService in two phases, first by calling shutdown to reject incoming tasks, and then calling shutdownNow, if necessary, to cancel any lingering tasks:\r\n \r\n void shutdownAndAwaitTermination(ExecutorService pool) {\r\n   pool.shutdown(); // Disable new tasks from being submitted\r\n   try {\r\n     // Wait a while for existing tasks to terminate\r\n     if (!pool.awaitTermination(60, TimeUnit.SECONDS)) {\r\n       pool.shutdownNow(); // Cancel currently executing tasks\r\n       // Wait a while for tasks to respond to being cancelled\r\n       if (!pool.awaitTermination(60, TimeUnit.SECONDS))\r\n           System.err.println(\"Pool did not terminate\");\r\n     }\r\n   } catch (InterruptedException ie) {\r\n     // (Re-)Cancel if current thread also interrupted\r\n     pool.shutdownNow();\r\n     // Preserve interrupt status\r\n     Thread.currentThread().interrupt();\r\n   }\r\n }\r\n``` =||= @qiangdavidliu Thx for your advice. I updated the PR. =||= @jingege apologies for the late review, I have been away. Some minor comments. =||= @qiangdavidliu - This user has not been active since this pull request.  I created a second pull request based on their work #1023 - Can you review that? =||= @qiangdavidliu Very sorry for not responding this issue so long. I was so busy these days and missed the notification. @abracadv8 Thank you very much for finishing this PR. =||= "], ["975", "Remove checked exceptions from @PostConstruct methods", "Mert Caliskan", "mulderbaba", "04/25/18, 12:29:05 AM", "classes listed as below should remove the checked exceptions from their `@PostConstruct` methods and `@PreDestroy` methods since it fails from deploying eureka-server onto Payara.\r\n```\r\neureka-core/src/main/java/com/netflix/eureka/DefaultEurekaServerContext.java\r\neureka-core/src/main/java/com/netflix/eureka/aws/AwsBinderDelegate.java\r\neureka-core/src/main/java/com/netflix/eureka/aws/EIPManager.java\r\neureka-core/src/main/java/com/netflix/eureka/aws/ElasticNetworkInterfaceBinder.java\r\neureka-core/src/main/java/com/netflix/eureka/aws/Route53Binder.java\r\n```", "NaN"], ["976", "975-Remove-checked-exceptions-from-@PostConstruct-methods", "Mert Caliskan", "mulderbaba", "04/25/18, 12:29:05 AM", "fixes #975 ", "Hi @mulderbaba thanks for the PR, and apologies for the late review. Some minor comments. =||= going to merge this and address the comments in a separate PR. =||= "], ["977", "add travis config option to publish candidate releases to netflix can\u2026", "Taylor Wicksell", "twicksell", "09/12/17, 10:20:40 PM", "\u2026didate repo", "looks good =||= LGTM =||= "], ["978", "EurekaClient getApplication returns null", "Raphael Nascimento", "raphaelln", "02/17/18, 12:54:13 AM", "I have 2 eureka servers running at different ports. My service successfully registered on the second eureka. \r\n\r\nAs far I know, this is correct, only register and after receives the requests will register in another server instances.\r\n\r\n>  \"Once the server starts receiving traffic, all of the operations that is performed on the server is replicated to all of the peer nodes that the server knows about. If an operation fails for some reason, the information is reconciled on the next heartbeat that also gets replicated between servers.\"\r\n\r\nAnd following my application config:\r\n```eureka:\r\n  client: \r\n    serviceUrl:\r\n      defaultZone: http://localhost:8761/eureka/, http://localhost:8762/eureka/\r\n```\r\n\r\nAnd my external client code returns null.\r\n\r\n```\r\n@Autowired\r\nprivate EurekaClient eurekaClient;\r\n   ....\r\n final Application application = eurekaClient.getApplication(\"SERVICE-NAME\");\r\n final InstanceInfo instanceInfo = application.getInstances().get(0);\r\n```\r\n\r\nIf I change the application config to (replace the order of the eureka servers):\r\n\r\n```eureka:\r\n  client: \r\n    serviceUrl:\r\n      defaultZone: http://localhost:8762/eureka/, http://localhost:8761/eureka/\r\n```\r\nThe client code above works, because the eurekaClient only search for applications of the first configured eureka server.\r\n\r\nI've been playing with this for a few hours, wondering if some configuration is invalid. \r\n\r\nThanks for any help.\r", "This isn't the issue tracker for spring cloud netflix. =||= Closing as this is a spring cloud related issue. As an aside, the scenario described shouldn't occur, unless there is some async replication happening. One possibility for this to occur is mismatched server peer configuration where one server is configured to know about the peer, but the other server is not. =||= "], ["979", "Run eureka examples get SocketException: Permission denied on Windows 10", "Zhi Meng", "jackychee", "08/25/17, 04:18:42 PM", "I run the eureka examples on windows 10,  both eureka server and the registered service are ok.\r\nthis is the log of the registered service as follows:\r\n[main] INFO com.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1503675055638, current=UP, previous=STARTING]\r\n[DiscoveryClient-InstanceInfoReplicator-0] INFO com.netflix.discovery.DiscoveryClient - DiscoveryClient_SAMPLEREGISTERINGSERVICE/zhimeng-bd: registering service...\r\nService started and ready to process requests..\r\n\r\nwhen i run the client demo, i got the error as follows:\r\nFound an instance of example service to talk to from eureka: sampleservice.mydomain.net:8001\r\nhealthCheckUrl: http://zhimeng-bd:8001/healthcheck\r\noverride: UNKNOWN\r\nCould not connect to the server :zhimeng-bd at port 8001\r\nConnected to server. Sending a sample request: FOO Fri Aug 25 23:25:16 CST 2017\r\njava.net.SocketException: Socket is not connected\r\n\r\nand i find exception occurred when i use host name as zhimeng-bd, when i use localhost is ok. this makes me confused.", "NaN"], ["980", "Question: The properties are not grabbed.", null, "melisoner2006", "02/17/18, 12:51:45 AM", "Hello, I'm going through the examples under eureka-examples folder and it seems like no matter what I do the eureka-client properties are not being set. My framework is Spark-Java. I already posted my question here:  @https://stackoverflow.com/questions/45921685/how-to-configure-eureka-client-and-service-properties.\r\n\r\nCan someone help?\r\nThanks", "Looks like the question has been address on stackoverflow. Closing this issue. Please reopen if this continues to be an issue. =||= "], ["981", "Eurek tag 1.8.1 build failed with gradle on windows 7", "NicholasLiu", "WillieMatthewLiu", "02/17/18, 12:50:50 AM", "Environment: Winodws7 + JDK8 + Gradle 3.2.1\r\n\r\nOn my computer, run 'gradle build -x test' on Eureka master sucessfully,but when run with same cmd on eureka tag 1.8.1 failed. \r\n\r\nERROR MESSAGE:\r\nD:\\98-Test\\01-Java\\eureka>gradle build -x test\r\nGit repository not found at D:\\98-Test\\01-Java\\eureka -- nebula-release tasks wi\r\nll not be available. Use the git.root Gradle property to specify a different dir\r\nectory.\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* Where:\r\nBuild file 'D:\\98-Test\\01-Java\\eureka\\build.gradle' line: 13\r\n\r\n* What went wrong:\r\nAn exception occurred applying plugin request [id: 'nebula.netflixoss', version:\r\n '3.6.0']\r\n> Failed to apply plugin [id 'nebula.netflixoss']\r\n   > Cannot set property 'defaultVersionStrategy' on null object\r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug\r\noption to get more log output.\r\n\r\nBUILD FAILED\r\n\r\nTotal time: 7.143 secs", "@WillieMatthewLiu This seem specific to nebula, you may be best served to ask the question at https://nebula-plugins.github.io/ =||= i have same error log:\r\n\r\n```log\r\norg.gradle.api.ProjectConfigurationException: A problem occurred configuring root project 'eureka'.\r\n\tat org.gradle.configuration.project.LifecycleProjectEvaluator.addConfigurationFailure(LifecycleProjectEvaluator.java:79)\r\n\tat org.gradle.configuration.project.LifecycleProjectEvaluator.evaluate(LifecycleProjectEvaluator.java:57)\r\n\tat org.gradle.api.internal.project.AbstractProject.evaluate(AbstractProject.java:510)\r\n\tat org.gradle.api.internal.project.AbstractProject.evaluate(AbstractProject.java:90)\r\n\tat org.gradle.execution.TaskPathProjectEvaluator.configureHierarchy(TaskPathProjectEvaluator.java:42)\r\n\tat org.gradle.configuration.DefaultBuildConfigurer.configure(DefaultBuildConfigurer.java:35)\r\n\tat org.gradle.initialization.DefaultGradleLauncher$2.run(DefaultGradleLauncher.java:125)\r\n\tat org.gradle.internal.Factories$1.create(Factories.java:22)\r\n\tat org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\r\n\tat org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:52)\r\n\tat org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:122)\r\n\tat org.gradle.initialization.DefaultGradleLauncher.access$200(DefaultGradleLauncher.java:32)\r\n\tat org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:99)\r\n\tat org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:93)\r\n\tat org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\r\n\tat org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:62)\r\n\tat org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:93)\r\n\tat org.gradle.initialization.DefaultGradleLauncher.getBuildAnalysis(DefaultGradleLauncher.java:87)\r\n\tat org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.configure(InProcessBuildActionExecuter.java:102)\r\n\tat org.gradle.tooling.internal.provider.runner.ClientProvidedBuildActionRunner.run(ClientProvidedBuildActionRunner.java:45)\r\n\tat org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\r\n\tat org.gradle.tooling.internal.provider.runner.SubscribableBuildActionRunner.run(SubscribableBuildActionRunner.java:58)\r\n\tat org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\r\n\tat org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:43)\r\n\tat org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:28)\r\n\tat org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:78)\r\n\tat org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:48)\r\n\tat org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:52)\r\n\tat org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:37)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\r\n\tat org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\r\n\tat org.gradle.util.Swapper.swap(Swapper.java:38)\r\n\tat org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.health.DaemonHealthTracker.execute(DaemonHealthTracker.java:47)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:66)\r\n\tat org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:72)\r\n\tat org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.health.HintGCAfterBuild.execute(HintGCAfterBuild.java:41)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\r\n\tat org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:246)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:54)\r\n\tat org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:40)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: org.gradle.internal.exceptions.LocationAwareException: Build file '/Users/zhuang/Desktop/git-company/eureka/build.gradle' line: 15\r\nError resolving plugin [id: 'nebula.netflixoss', version: '3.6.0']\r\n\tat org.gradle.plugin.use.internal.DefaultPluginRequestApplicator.resolveToFoundResult(DefaultPluginRequestApplicator.java:190)\r\n\tat org.gradle.plugin.use.internal.DefaultPluginRequestApplicator.access$000(DefaultPluginRequestApplicator.java:44)\r\n\tat org.gradle.plugin.use.internal.DefaultPluginRequestApplicator$1.transform(DefaultPluginRequestApplicator.java:67)\r\n\tat org.gradle.plugin.use.internal.DefaultPluginRequestApplicator$1.transform(DefaultPluginRequestApplicator.java:65)\r\n\tat org.gradle.util.CollectionUtils.collect(CollectionUtils.java:160)\r\n\tat org.gradle.util.CollectionUtils.collect(CollectionUtils.java:155)\r\n\tat org.gradle.plugin.use.internal.DefaultPluginRequestApplicator.applyPlugins(DefaultPluginRequestApplicator.java:65)\r\n\tat org.gradle.configuration.DefaultScriptPluginFactory$ScriptPluginImpl.apply(DefaultScriptPluginFactory.java:126)\r\n\tat org.gradle.configuration.project.BuildScriptProcessor.execute(BuildScriptProcessor.java:38)\r\n\tat org.gradle.configuration.project.BuildScriptProcessor.execute(BuildScriptProcessor.java:25)\r\n\tat org.gradle.configuration.project.ConfigureActionsProjectEvaluator.evaluate(ConfigureActionsProjectEvaluator.java:34)\r\n\tat org.gradle.configuration.project.LifecycleProjectEvaluator.evaluate(LifecycleProjectEvaluator.java:55)\r\n\t... 56 more\r\nCaused by: org.gradle.api.GradleException: Error resolving plugin [id: 'nebula.netflixoss', version: '3.6.0']\r\n\t... 68 more\r\nCaused by: org.gradle.api.GradleException: Plugin cannot be resolved from https://plugins.gradle.org/api/gradle because Gradle is running in offline mode\r\n\tat org.gradle.plugin.use.resolve.service.internal.OfflinePluginResolutionServiceClient.queryPluginMetadata(OfflinePluginResolutionServiceClient.java:26)\r\n\tat org.gradle.plugin.use.resolve.service.internal.PersistentCachingPluginResolutionServiceClient$1.create(PersistentCachingPluginResolutionServiceClient.java:60)\r\n\tat org.gradle.plugin.use.resolve.service.internal.PersistentCachingPluginResolutionServiceClient$1.create(PersistentCachingPluginResolutionServiceClient.java:58)\r\n\tat org.gradle.plugin.use.resolve.service.internal.PersistentCachingPluginResolutionServiceClient.fetch(PersistentCachingPluginResolutionServiceClient.java:110)\r\n\tat org.gradle.plugin.use.resolve.service.internal.PersistentCachingPluginResolutionServiceClient.maybeFetch(PersistentCachingPluginResolutionServiceClient.java:103)\r\n\tat org.gradle.plugin.use.resolve.service.internal.PersistentCachingPluginResolutionServiceClient.maybeFetch(PersistentCachingPluginResolutionServiceClient.java:91)\r\n\tat org.gradle.plugin.use.resolve.service.internal.PersistentCachingPluginResolutionServiceClient.queryPluginMetadata(PersistentCachingPluginResolutionServiceClient.java:67)\r\n\tat org.gradle.plugin.use.resolve.service.internal.InMemoryCachingPluginResolutionServiceClient$1.create(InMemoryCachingPluginResolutionServiceClient.java:47)\r\n\tat org.gradle.plugin.use.resolve.service.internal.InMemoryCachingPluginResolutionServiceClient$1.create(InMemoryCachingPluginResolutionServiceClient.java:45)\r\n\tat org.gradle.plugin.use.resolve.service.internal.InMemoryCachingPluginResolutionServiceClient.getResponse(InMemoryCachingPluginResolutionServiceClient.java:76)\r\n\tat org.gradle.plugin.use.resolve.service.internal.InMemoryCachingPluginResolutionServiceClient.queryPluginMetadata(InMemoryCachingPluginResolutionServiceClient.java:42)\r\n\tat org.gradle.plugin.use.resolve.service.internal.DeprecationListeningPluginResolutionServiceClient.queryPluginMetadata(DeprecationListeningPluginResolutionServiceClient.java:48)\r\n\tat org.gradle.plugin.use.resolve.service.internal.PluginResolutionServiceResolver.resolve(PluginResolutionServiceResolver.java:84)\r\n\tat org.gradle.plugin.use.resolve.internal.CompositePluginResolver.resolve(CompositePluginResolver.java:33)\r\n\tat org.gradle.plugin.use.resolve.internal.NotNonCorePluginOnClasspathCheckPluginResolver.resolve(NotNonCorePluginOnClasspathCheckPluginResolver.java:42)\r\n\tat org.gradle.plugin.use.internal.DefaultPluginRequestApplicator.resolveToFoundResult(DefaultPluginRequestApplicator.java:188)\r\n\t... 67 more\r\n\r\n\r\n``` =||= "], ["982", "server in denial of service caused by flooding replication requests from peers", null, "xiazuojie", "02/17/18, 12:49:05 AM", "https://github.com/Netflix/eureka/blob/3677ac7d9114e95b051659b7a6d32cc0b8def36e/eureka-core/src/main/java/com/netflix/eureka/cluster/ReplicationTaskProcessor.java#L56\r\n\r\nWe have an eureka cluster of 8 peers. Under heavy load, peer replication tasks may cause high CPU usage and put peers in denial of service state.\r\n\r\nLet's say we have a certain peer named A.\r\nWhen server A is in high CPU usage and it may fail to respond to replication requests. The other peers will get org.apache.http.conn.ConnectTimeoutException(extends IOException).\r\nisNetworkConnectExceptionserver: the method decides whether it's a network-related issue by checking if it's an IOException. When it's an IOException(TransientError), other peers will retry sending replication request to server A. These retrial tasks will timeout too and be retried indefinitely.\r\nAll these retrial tasks leave server A no time to recover and end in denial of service state.", "here's a relative pull request #1031 =||= Linked PR have been merged and should be released soon. =||= "], ["983", "instanceInfoReplicator start after status change, then RejectedExecutionException", null, "wangwenyao", "02/17/18, 12:48:42 AM", "spring cloud config server\r\n\r\nwhen send /bus/refresh, I found status changed happen before instanceInfoReplicator start\r\npom:\r\n```<dependency>\r\n            <groupId>org.springframework.cloud</groupId>\r\n            <artifactId>spring-cloud-config-server</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.cloud</groupId>\r\n            <artifactId>spring-cloud-starter-eureka</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.cloud</groupId>\r\n            <artifactId>spring-cloud-starter-bus-kafka</artifactId>\r\n        </dependency>\r\n```\r\n\r\ncode in com.netflix.discovery.DiscoveryClient:\r\n\r\n ```\r\n // InstanceInfo replicator\r\n            instanceInfoReplicator = new InstanceInfoReplicator(\r\n                    this,\r\n                    instanceInfo,\r\n                    clientConfig.getInstanceInfoReplicationIntervalSeconds(),\r\n                    2); // burstSize\r\n            statusChangeListener = new ApplicationInfoManager.StatusChangeListener() {\r\n                @Override\r\n                public String getId() {\r\n                    return \"statusChangeListener\";\r\n                }\r\n\r\n                @Override\r\n                public void notify(StatusChangeEvent statusChangeEvent) {\r\n                    if (InstanceStatus.DOWN == statusChangeEvent.getStatus() ||\r\n                            InstanceStatus.DOWN == statusChangeEvent.getPreviousStatus()) {\r\n                        // log at warn level if DOWN was involved\r\n                        logger.warn(\"Saw local status change event {}\", statusChangeEvent);\r\n                    } else {\r\n                        logger.info(\"Saw local status change event {}\", statusChangeEvent);\r\n                    }\r\n                    instanceInfoReplicator.onDemandUpdate();\r\n                }\r\n            };\r\n\r\n            if (clientConfig.shouldOnDemandUpdateStatusChange()) {\r\n                applicationInfoManager.registerStatusChangeListener(statusChangeListener);\r\n            }\r\n\r\n            instanceInfoReplicator.start(clientConfig.getInitialInstanceInfoReplicationIntervalSeconds());\r\n```", "```\r\nhttp-nio-8102-exec-2] INFO  2017-09-12 11:45:17.839 c.n.d.DiscoveryClient[852] - Shutting down DiscoveryClient ...\r\n[http-nio-8102-exec-2] INFO  2017-09-12 11:45:17.840 o.s.c.n.e.InstanceInfoFactory[70] - Setting initial instance status as: STARTING\r\n[http-nio-8102-exec-2] INFO  2017-09-12 11:45:17.841 c.n.d.DiscoveryClient[884] - Unregistering ...\r\n[http-nio-8102-exec-2] INFO  2017-09-12 11:45:17.846 c.n.d.DiscoveryClient[886] - DiscoveryClient_CONFIG-CENTER/xxx.xxx.xxx.xxx:8102 - deregister  status: 200\r\n[http-nio-8102-exec-2] INFO  2017-09-12 11:45:17.848 c.n.d.DiscoveryClient[873] - Completed shut down of DiscoveryClient\r\n[http-nio-8102-exec-2] INFO  2017-09-12 11:45:17.850 c.n.d.DiscoveryClient[344] - Initializing Eureka in region us-east-1\r\n[http-nio-8102-exec-2] INFO  2017-09-12 11:45:17.852 c.n.d.p.DiscoveryJerseyProvider[70] - Using JSON encoding codec LegacyJacksonJson\r\n[http-nio-8102-exec-2] INFO  2017-09-12 11:45:17.852 c.n.d.p.DiscoveryJerseyProvider[71] - Using JSON decoding codec LegacyJacksonJson\r\n[http-nio-8102-exec-2] INFO  2017-09-12 11:45:17.852 c.n.d.p.DiscoveryJerseyProvider[80] - Using XML encoding codec XStreamXml\r\n[http-nio-8102-exec-2] INFO  2017-09-12 11:45:17.852 c.n.d.p.DiscoveryJerseyProvider[81] - Using XML decoding codec XStreamXml\r\n[http-nio-8102-exec-2] INFO  2017-09-12 11:45:17.939 c.n.d.s.r.a.ConfigClusterResolver[43] - Resolving eureka endpoints via configuration\r\n[http-nio-8102-exec-2] INFO  2017-09-12 11:45:17.940 c.n.d.DiscoveryClient[1244] - Starting heartbeat executor: renew interval is: 10\r\n[http-nio-8102-exec-2] INFO  2017-09-12 11:45:17.940 c.n.d.InstanceInfoReplicator[59] - InstanceInfoReplicator onDemand update allowed rate per min is 4\r\n[http-nio-8102-exec-2] INFO  2017-09-12 11:45:17.941 c.n.d.DiscoveryClient[425] - Discovery Client initialized at timestamp 1505187917941 with initial instances count: 0\r\n[DiscoveryClient-InstanceInfoReplicator-0] INFO  2017-09-12 11:45:17.941 c.n.d.DiscoveryClient[795] - DiscoveryClient_CONFIG-CENTER/xxx.xxx.xxx.xxx:8102: registering service...\r\n[DiscoveryClient-InstanceInfoReplicator-0] INFO  2017-09-12 11:45:17.947 c.n.d.DiscoveryClient[804] - DiscoveryClient_CONFIG-CENTER/xxx.xxx.xxx.xxx:8102 - registration status: 204\r\n[http-nio-8102-exec-2] INFO  2017-09-12 11:45:17.949 o.s.c.n.e.s.EurekaServiceRegistry[64] - Unregistering application config-center with eureka with status DOWN\r\n[http-nio-8102-exec-2] INFO  2017-09-12 11:45:17.950 o.s.c.n.e.s.EurekaServiceRegistry[40] - Registering application config-center with eureka with status UP\r\n[http-nio-8102-exec-2] WARN  2017-09-12 11:45:17.950 c.n.d.DiscoveryClient[1277] - Saw local status change event StatusChangeEvent [timestamp=1505187917950, current=UP, previous=DOWN]\r\n[DiscoveryClient-InstanceInfoReplicator-0] INFO  2017-09-12 11:45:17.950 c.n.d.DiscoveryClient[795] - DiscoveryClient_CONFIG-CENTER/xxx.xxx.xxx.xxx:8102: registering service...\r\n[DiscoveryClient-InstanceInfoReplicator-0] INFO  2017-09-12 11:45:17.953 c.n.d.DiscoveryClient[804] - DiscoveryClient_CONFIG-CENTER/xxx.xxx.xxx.xxx:8102 - registration status: 204\r\n[http-nio-8102-exec-2] ERROR 2017-09-12 11:45:18.010 o.a.c.c.C.[.[.[.[dispatcherServlet][181] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@975b946 rejected from java.util.concurrent.ScheduledThreadPoolExecutor@2b6f6092[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 6]] with root cause\r\njava.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@975b946 rejected from java.util.concurrent.ScheduledThreadPoolExecutor@2b6f6092[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 6]\r\n\tat java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2063)\r\n\tat java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:830)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:326)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:533)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor.submit(ScheduledThreadPoolExecutor.java:632)\r\n\tat com.netflix.discovery.InstanceInfoReplicator.onDemandUpdate(InstanceInfoReplicator.java:77)\r\n\tat com.netflix.discovery.DiscoveryClient.registerHealthCheck(DiscoveryClient.java:618)\r\n\tat com.netflix.discovery.DiscoveryClient$$FastClassBySpringCGLIB$$a84c8cb4.invoke(<generated>)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.cloud.context.config.StandardBeanLifecycleDecorator$2.invoke(StandardBeanLifecycleDecorator.java:85)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)\r\n\tat org.springframework.cloud.netflix.eureka.CloudEurekaClient$$EnhancerBySpringCGLIB$$af46ce7b.registerHealthCheck(<generated>)\r\n\tat org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry.register(EurekaServiceRegistry.java:49)\r\n\tat org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration.start(EurekaAutoServiceRegistration.java:73)\r\n\tat org.springframework.cloud.netflix.eureka.EurekaDiscoveryClientConfiguration$EurekaClientConfigurationRefresher.onApplicationEvent(EurekaDiscoveryClientConfiguration.java:79)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:256)\r\n\tat org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:177)\r\n\tat org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:140)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:167)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\r\n\tat org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:393)\r\n\tat org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:347)\r\n\tat org.springframework.cloud.context.scope.refresh.RefreshScope.refreshAll(RefreshScope.java:146)\r\n\tat org.springframework.cloud.context.refresh.ContextRefresher.refresh(ContextRefresher.java:58)\r\n\tat org.springframework.cloud.bus.event.RefreshListener.onApplicationEvent(RefreshListener.java:43)\r\n\tat org.springframework.cloud.bus.event.RefreshListener.onApplicationEvent(RefreshListener.java:30)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:167)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\r\n\tat org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:393)\r\n\tat org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:347)\r\n\tat org.springframework.cloud.bus.endpoint.AbstractBusEndpoint.publish(AbstractBusEndpoint.java:48)\r\n\tat org.springframework.cloud.bus.endpoint.RefreshBusEndpoint.refresh(RefreshBusEndpoint.java:45)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:133)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:97)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:967)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:901)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:872)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:661)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:742)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.boot.web.filter.ApplicationContextHeaderFilter.doFilterInternal(ApplicationContextHeaderFilter.java:55)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.boot.actuate.trace.WebRequestTraceFilter.doFilterInternal(WebRequestTraceFilter.java:110)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:105)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.boot.actuate.autoconfigure.MetricsFilter.doFilterInternal(MetricsFilter.java:106)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:478)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:80)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:799)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1455)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n``` =||= \u6211\u7406\u89e3\u8fd9\u4e2a\u5f02\u5e38\u662f\u7531\u4e8estatusChangeListener \u5df2\u7ecf\u6ce8\u518c\u5e76\u751f\u6548\uff0c\u4f46instanceInfoReplicator\u8fd8\u672a\u542f\u52a8\u9020\u6210\u7684\u3002 =||= Not the issue tracker for spring cloud =||= Closing as this is specific to spring cloud. =||= "], ["984", "Fix Override Status Regression", "David Liu", "qiangdavidliu", "09/13/17, 06:17:37 PM", "Setting and deleting the override status on an eureka server has a regression due to the `lastDirtyTimestamp` being updated by the server in response to the set and delete, which can in turn lead to client update/registers potentially being ignored due to the timestamp being ahead on the server compared to client local.", "What version does this affect (where was the regression)? =||= Unfortunately it was a while ago at release 1.4.11 (triggered due to PR #822, but not because of this PR). This issue mainly affects server side status override removals that does not specify a suggested status. The behaviour then will be:\r\n1. server side status is updated to UNKNOWN (with an updated dirty timestamp) and will force a re-registration from the client\r\n2. the client re-registers with an InstanceInfo that potentially has an older dirty timestamp.\r\n3. the server will disregard the re-registration and keep on using its local copy (the effect of PR #822), leading to an unchanged status of UNKNOWN (until the client refreshes at some point with an even later timestamp) =||= OK. Wondering if you could patch the Java 7 version as well as master. =||= Sure thing. Once we've validated this fix, I'll cut a patch based on release 1.7.0 (last pre java8 release) =||= @spencergibb here's the diff (https://github.com/Netflix/eureka/compare/v1.7.0...v1.7.x). I'll cut 1.7.1 release this afternoon. =||= v1.7.1 is released with this fix on the 1.7.x branch. =||= "], ["985", "check call success/failure before unsetting isDirty", "David Liu", "qiangdavidliu", "09/18/17, 05:43:07 PM", "NaN", "NaN"], ["986", "Add catch for potential exceptions", "David Liu", "qiangdavidliu", "09/18/17, 09:32:05 PM", "NaN", "NaN"], ["987", "Eureka can store just API information?", "Inki Hwang", "fisache", "09/19/17, 09:38:56 AM", "Hi.\r\nI'm using eureka with Netflix OSS such as zuul, ribbon etc in spring cloud.\r\nI will use zuul for API Gateway.\r\nSo, need to store API info such as url, header, payload..\r\nI understood that eureka can store service info or endpoint in sidecar if non-jvm.\r\nCould I use eureka or sidecar like API info storage?\r\nThx :)", "I think it is my mistake..\r\nI will refernce to https://dzone.com/articles/spring-cloud-sidecar\r\nhaha.. :) =||= "], ["988", "Services deployed on kubernetes and registered with Eureka are not discoverable  ", "Arunesh Kumar Dubey", "focode", "02/16/18, 06:18:21 PM", "Services deployed on kubernetes are getting registered with Eureka. However the home page URL (Service Endpoint) of the service points to the service POD name which is not an actual host, this results in Unknown host exception when forwarding request via Zuul.\r", "It is a typical problem. My solution is: you can use NodePort in kubernetes service yaml. And in Dockerfile you can pass \"--eureka.instance.nonSecurePort\" and \"--eureka.instance.ip-address\" to your service   =||= @wangpenghit2155 I don't understand what you mean... =||= Eureka client allows for customization of several parameters that may be able to help address this issue. I believe the solution outlined by @wangpenghit2155 executes an override of the (auto-discovered) system ip and port that is used for registration. Another potential way to address this is to set the override for the absolute url of the homepage: https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/appinfo/EurekaInstanceConfig.java#L293\r\n\r\nClosing this issue for now. Please reopen if neither of the above solutions work. =||= It is not woking for me =||= Its not working for me too.\r\n\r\nAs described in the kubernetes manual it should be possible to setup deployments/pods such way, that the (by k8 generated) pod name is registered at the kubernetes DNS (coredns)  so we are able to nslookup by podname additionally to lookup by service name (using the cluster ip)\r\nhttps://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pods\r\n\r\nWe tried to setup the deployment.yaml in different way, but never succeeded so far in the results that is described in the docs, that shall allow a nslookup to be resolved from pod  A for Pod B real IP using\r\npod-ip-address.my-namespace.pod.cluster.local \r\n\r\nor (what is even more wished)\r\n\r\npod-name.my-namespace.pod.cluster.local \r\n\r\n\r\nLike the doc says,  clusterIP: None and we tried with hostname set (or even not set and being generated by kubernetes itself\r\n\r\nWe verified the test runs using nslookup while ssh on console of Pod A.\r\n\r\nWith no approach there was ever a DNS resolution possible in Pod A   using B.dev.pod.cluster.local (or just B ) where the podname of B was a generated one which what listed in in k8 pod description and on POD B /etc/hosts  file.\r\n\r\n =||= We got it working by adding the System Property -Deureka.instance.preferIpAddress=true in our startup =||= "], ["989", "Add a config to control whether explicit unregister should happen on client shutdown", "David Liu", "qiangdavidliu", "09/21/17, 08:51:01 PM", "NaN", "NaN"], ["990", "Eureka-client always returns overridden: UNKNOWN, even though the value is set to something else", "Jon Anders Sollien", "jasollien", "02/16/18, 06:14:14 PM", "I regularly output this line in my java code from the instance (java eureka-client v1.8.1)\r\n\r\nlogger.info(\"overridden: \" + ApplicationInfoManager.getInstance().getInfo().getOverriddenStatus().name());\r\n\r\nThis always prints UNKNOWN.\r\n\r\nApplicationInfoManager.getInstance().getInfo().getStatus().name() however, seems to work as expected\r\n\r\nBy looking at the JSON data however, this looks fine:\r\n\r\n![image](https://user-images.githubusercontent.com/3275463/30854408-cce28dee-a2b1-11e7-811a-3c5987c7a916.png)\r\n\r\nI tried attaching your source code, and set a breakpoint in setOverriddenStatus. And here it is always the correct status, except from first time, when it is UNKNWON.\r\n\r\npublic Builder setOverriddenStatus(InstanceStatus status) {\r\n            result.overriddenstatus = status;\r\n            return this;\r\n        }\r", "I somehow got it working by using: \r\nDiscoveryManager.getInstance().getLookupService().getInstancesById(instanceInfo.getInstanceId()).get(0).getOverriddenStatus(), but it does not look nice\r\n\r\nUpdate: DiscoveryManager.getInstance().getLookupService().getApplication(info.getAppName()).getByInstanceId(info.getInstanceId()).getOverriddenStatus() also works =||= @jasollien looks like you have resolved your issue. Closing this issue. Please re open if you need. =||= "], ["991", "eureka", "jamen", "javanan", "02/16/18, 06:10:53 PM", "org.springframework.beans.factory.BeanCreationNotAllowedException: Error creating bean with name 'eurekaAutoServiceRegistration': Singleton bean creation not allowed while singletons of this factory are in destruction (Do not request a bean from a BeanFactory in a destroy method implementation!)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:216)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1081)\r\n\tat org.springframework.context.event.ApplicationListenerMethodAdapter.getTargetBean(ApplicationListenerMethodAdapter.java:280)\r\n\tat org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:250)\r\n\tat org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:174)\r\n\tat org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:137)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:167)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\r\n\tat org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:383)\r\n\tat org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:389)\r\n\tat org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:337)\r\n\tat org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:994)\r\n\tat org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:961)\r\n\tat org.springframework.cloud.context.named.NamedContextFactory.destroy(NamedContextFactory.java:76)\r\n\tat org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:272)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:578)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:554)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:961)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:523)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:968)\r\n\tat org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1033)\r\n\tat org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1009)\r\n\tat org.springframework.context.support.AbstractApplicationContext$2.run(AbstractApplicationContext.java:928)\r", "Hi @javanan this look specific to the spring cloud integration with eureka (this original project does not make use of spring). I would advice that you redirect your queries there (https://github.com/spring-cloud/spring-cloud-netflix). Thanks. =||= "], ["992", "The project started very slowly", "jamen", "javanan", "02/16/18, 06:09:56 PM", "2017-09-27 15:00:22.677  INFO [taichi-sys-personnel-service,,,] 11500 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService  'taskScheduler'\r\n2017-09-27 15:01:29.578  WARN [taichi-sys-personnel-service,,,] 11500 --- [           main] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.\r\n2017-09-27 15:01:29.578  INFO [taichi-sys-personnel-service,,,] 11500 --- [           main] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.\r\n2017-09-27 15:01:30.734  INFO [taichi-sys-personnel-service,,,] 11500 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService \r\n2017-09-27 15:01:32.439  INFO [taichi-sys-personnel-service,,,] 11500 --- [           main] o.s.i.codec.kryo.CompositeKryoRegistrar  : configured Kryo registration [40, java.io.File] with serializer org.springframework.integration.codec.kryo.FileSerializer\r\n2017-09-27 15:01:33.337  INFO [taichi-sys-personnel-service,,,] 11500 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : jolokia: No access restrictor found, access to any MBean is allowed\r\n2017-09-27 15:01:33.342  INFO [taichi-sys-personnel-service,,,] 11500 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : jolokia: jolokia:type=Config is already registered. Adding it with jolokia:type=Config,uuid=6beed861-53e2-4a73-8482-9ecf2869c71e, but you should revise your setup in order to either use a qualifier or ensure, that only a single agent gets registered (otherwise history functionality might not work)\r\n2017-09-27 15:01:33.342  INFO [taichi-sys-personnel-service,,,] 11500 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : jolokia: Cannot register (legacy) MBean handler for config store with name jmx4perl:type=Config since it already exists. This is the case if another agent has been already started within the same JVM. The registration is skipped.\r\n2017-09-27 15:01:33.342  INFO [taichi-sys-personnel-service,,,] 11500 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : jolokia: Jolokia Discovery MBean registration is skipped because there is already one registered.\r\n2017-09-27 15:01:33.472  INFO [taichi-sys-personnel-service,,,] 11500 --- [           main] o.s.c.support.DefaultLifecycleProcessor  : Starting beans in phase -2147482648\r\n2017-09-27 15:01:33.764  INFO [taichi-sys-personnel-service,,,] 11500 --- [           ", "Hi @javanan your stack trace look related to the spring cloud integration with eureka. I would suggest that you redirect this question there. Thanks. =||= "], ["993", "Closing connections idle longer than 30000 SECONDS", null, "angheladrianclaudiu", "02/16/18, 06:08:55 PM", "Hi,\r\n\r\nThis cleaning is causing problems while microservices are interacting with each other.\r\n\r\nHow can it be fixed?\r\n\r\nI am using eureka-client 1.6.2, spring cloud Dalston.SR3 and Spring Boot 1.5.7.\r\n\r\n```2017-09-28 14:05:00.136 DEBUG 5 \u2014 [t-Conn-Cleaner2] c.n.d.shared.MonitoredConnectionManager : Closing connections idle longer than 30000 SECONDS\r\n2017-09-28 14:05:00.136 DEBUG 5 \u2014 [t-Conn-Cleaner2] c.n.d.shared.NamedConnectionPool : Closing connections idle longer than 30000 SECONDS\r\n2017-09-28 14:05:00.142 DEBUG 5 \u2014 [t-Conn-Cleaner2] c.n.d.shared.MonitoredConnectionManager : Closing connections idle longer than -1 SECONDS\r\n2017-09-28 14:05:00.142 DEBUG 5 \u2014 [t-Conn-Cleaner2] c.n.d.shared.NamedConnectionPool : Closing connections idle longer than 0 SECONDS\r\n2017-09-28 14:05:00.142 DEBUG 5 \u2014 [t-Conn-Cleaner2] c.n.d.shared.NamedConnectionPool : Closing connection last used @ Thu Sep 28 14:04:30 GMT 2017\r\n2017-09-28 14:05:00.142 DEBUG 5 \u2014 [t-Conn-Cleaner2] c.n.d.shared.NamedConnectionPool : Deleting connection [{}->http://eureka-server:<port>][null]\r\n2017-09-28 14:05:00.142 DEBUG 5 \u2014 [t-Conn-Cleaner2] c.n.d.shared.NamedConnectionPool : Closing connection last used @ Thu Sep 28 14:04:30 GMT 2017\r\n2017-09-28 14:05:00.142 DEBUG 5 \u2014 [t-Conn-Cleaner2] c.n.d.shared.NamedConnectionPool : Deleting connection [{}->http://eureka-server:<port>][null]\r\n```\r\n\r\nOne of the issues that is causing: https://github.com/spring-projects/spring-security-oauth/issues/1176\r\n\r\nThanks,\r\nAdrian", "@angheladrianclaudiu the configuration `eureka.eurekaserver.connectionIdleTimeoutInSeconds` should allow you to configure a longer timeout if desired. This configuration is the native eureka config key and may be mapped to a slightly different name in spring cloud. It should be easily findable in the spring cloud documentation. Thanks. =||= "], ["994", "Fix a race condition in the server remoteRegionRegistry", "David Liu", "qiangdavidliu", "10/03/17, 07:32:25 PM", "Also updated some default server configs to do with connect and read timeouts to be more reasonable.", "NaN"], ["995", "API changes report for Eureka Client", "Andrey P.", "lvc", "02/16/18, 12:50:21 AM", "Hi,\r\n\r\nI'd like to share my results on API changes analysis of the library: https://abi-laboratory.pro/java/tracker/timeline/eureka-client/\r\n\r\nThe report is generated by the https://github.com/lvc/japi-compliance-checker tool for jars found at http://central.maven.org/maven2/com/netflix/eureka/eureka-client/ according to https://wiki.eclipse.org/Evolving_Java-based_APIs_2.\r\n\r\nThank you.\r\n\r\n![eureka-client-2](https://user-images.githubusercontent.com/1517837/31162706-a551c4b6-a8e7-11e7-8298-e6340547aed1.png)\r\n![eureka-client-1](https://user-images.githubusercontent.com/1517837/31162707-a5539f2a-a8e7-11e7-9474-7243bf250be5.png)\r", "Hi @lvc Thank you for the information, this look quite interesting. Appreciate the report. =||= "], ["996", "Move TimedSupervisorTask logs to debug level as they are already measured by metrics.", "David Liu", "qiangdavidliu", "10/04/17, 09:00:27 PM", "NaN", "NaN"], ["997", " Add ability to fail fast in DiscoveryClient construction if an initial registration attempt fails", "David Liu", "qiangdavidliu", "10/09/17, 09:12:04 PM", "NaN", "NaN"], ["998", "Why is the retry 3 times?", "saga", "holy12345", "12/27/17, 10:15:19 AM", "In this class RetryableEurekaHttpClient, why this variable DEFAULT_NUMBER_OF_RETRIES is 3?\r\nIn my application.properties like this : \r\neureka.client.service.url.defaultZone=http://localhost:8761/eureka,http://localhost:8763/eureka,http://localhost:8764/eureka,http://localhost:8762/eureka.\r\nif http://localhost:8761/eureka\u3001http://localhost:8763/eureka\u3001http://localhost:8764/eureka is down\uff0cbut http://localhost:8762/eureka is up, the client can not fetch information from up eureka server(http://localhost:8762/eureka).", "NaN"], ["999", "JerseyEurekaHttpClientFactory cleaner's connectionIdleTimeout", "\u828b\u9053\u6e90\u7801", "YunaiV", "02/16/18, 12:49:05 AM", "I found `JerseyEurekaHttpClientFactoryBuilder#buildLegacy(...)` source code like this:\r\n\r\n```Java\r\nprivate JerseyEurekaHttpClientFactory buildLegacy(Map<String, String> additionalHeaders, boolean systemSSL) {\r\n    // .... \r\n    return new JerseyEurekaHttpClientFactory(jerseyClient, additionalHeaders);\r\n}\r\n```\r\n\r\nAnd `JerseyEurekaHttpClientFactory` source code like this:\r\n\r\n```Java\r\n@Deprecated\r\npublic JerseyEurekaHttpClientFactory(EurekaJerseyClient jerseyClient, Map<String, String> additionalHeaders) {\r\n      this(jerseyClient, null, -1, additionalHeaders);\r\n }\r\n\r\nprivate JerseyEurekaHttpClientFactory(EurekaJerseyClient jerseyClient,\r\n                                          ApacheHttpClient4 apacheClient,\r\n                                          long connectionIdleTimeout,\r\n                                          Map<String, String> additionalHeaders) {\r\n        this.jerseyClient = jerseyClient;\r\n        this.apacheClient = jerseyClient != null ? jerseyClient.getClient() : apacheClient;\r\n        this.additionalHeaders = additionalHeaders;\r\n        this.cleaner = new ApacheHttpClientConnectionCleaner(this.apacheClient, connectionIdleTimeout);\r\n }\r\n```\r\n\r\n* so `connectionIdleTimeout = -1` \uff0cIs There a problem with that \uff1f\uff1f\uff1f\r\n\r\n\r", "@qiangdavidliu thx =||= Hi @YunaiV yes, this is handled by the underlying apache http client. Thanks for the issue. =||= "], ["1000", "FreeMarker template error (DEBUG mode; use RETHROW in production!)", "Igor Bljahhin", "igorbljahhin", "02/16/18, 12:46:37 AM", "Suddenly our instance of Eureka gives this error message:\r\n\r\n![image](https://user-images.githubusercontent.com/1252230/31772585-db180512-b4e8-11e7-842c-ac99034b3305.png)\r\n\r\nNothing was changed on our side. What should I do to fix this issue?", "I discovered the source of the issue. It happened when I connected to same Eureka two instances of my app: one was deployed in Amazon and second was started locally on my computer. =||= Hi @igorbljahhin it looks like you have resolved your own issue? Please reopen if you have any more questions. Thanks. =||= > I discovered the source of the issue. It happened when I connected to same Eureka two instances of my app: one was deployed in Amazon and second was started locally on my computer.\r\n\r\ncan You help me find a way to fix this issue? tks =||= "], ["1001", "Support configuration of custom SSLContext/HostnameVerifier", "Matt Nelson", "mattnelson", "10/27/17, 08:59:19 PM", "Implementation of #816 \r\n\r\nSupports configuration of custom SSLContext/HostnameVerifier for jersey1/jersey2 implementations.", "@qiangdavidliu @twicksell Could I get a review on this? =||= @mattnelson we'll take a look. Thanks for the PR. =||= "], ["1002", "registred service within Eureka with UNKNOWN name", "Sofiane Mekhaba", "mekhaba", "02/16/18, 12:45:57 AM", "Hi to all, \r\nreally I have problem with registering services within eureka. I have application web tha tregistred well in eureka and this service can consume other services but, the others can't do it.\r\nIn the console I have this message : \r\n\r\n`**DiscoveryClient_UNKNOWN/activegps-web-app: registering service..**.`\r\nSo, the configuration file in application.properties is like that : \r\n\r\n```\r\nspring.application.name=activegps-web-app\r\n\r\neureka.client.serviceUrl.defaultZone=http://eureka-master:8761/eureka/, http://eureka-slave:8761/eureka/\r\neureka.client.healthcheck.enabled=true\r\neureka.client.register-with-eureka=true \r\neureka.client.fetch-registry= true\r\n\r\neureka.instance.prefer-ip-address=false\r\neureka.instance.instance-id=activegps-web-app\r\neureka.instance.nonSecurePort=8080\r\neureka.instance.statusPageUrlPath=/webclient\r\neureka.instance.hostname=activegps-web-app\r\n\r\n```\r\nthe pom file is \r\n\r\n```\r\n<dependency>\r\n\t\t\t<groupId>org.springframework.cloud</groupId>\r\n\t\t\t<artifactId>spring-cloud-starter-eureka</artifactId>\r\n\r\n\t\t</dependency>\r\n\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.springframework.boot</groupId>\r\n\t\t\t<artifactId>spring-boot-starter-actuator</artifactId>\r\n\t\t</dependency>\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.springframework.cloud</groupId>\r\n\t\t\t<artifactId>spring-cloud-starter-feign</artifactId>\t\t\t\r\n\t\t</dependency>\r\n\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.springframework</groupId>\r\n\t\t\t<artifactId>spring-web</artifactId>\r\n\t\t</dependency>\r\n\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.springframework</groupId>\r\n\t\t\t<artifactId>spring-webmvc</artifactId>\r\n\t\t</dependency>\r\n```\r\nthe BOM management used is  \r\n\r\n\r\n```\r\n<dependencyManagement>\r\n\t\t<dependencies>\r\n\t\t\t<dependency>\r\n\t\t\t\t<groupId>org.springframework.cloud</groupId>\r\n\t\t\t\t<artifactId>spring-cloud-dependencies</artifactId>\r\n\t\t\t\t<version>Brixton.SR7</version>\r\n\t\t\t\t<type>pom</type>\r\n\t\t\t\t<scope>import</scope>\r\n\t\t\t</dependency>\r\n\t\t</dependencies>\r\n\t</dependencyManagement>\r\n```\r\nCan you please give some way to fixe this problem.", "Hi @mekhaba unfortunately your issue look very specific to spring cloud, and I am not able to provide you much help here. I believe the spring cloud public documentation is quite detailed, and they are also active and helpful at https://github.com/spring-cloud/spring-cloud-netflix.\r\n\r\nThanks. =||= "], ["1003", "Prevent \"null\" url server url prefix", "Geunwoo Shin", "encyphered", "04/25/18, 12:30:38 AM", "When set `shouldUseDns` as true with null `eurekaServer.context`, `EndpointUtils#getServiceUrlsFromDNS` appends \"null\" string to service url postfix.\r\n\r\ne.g. http://ec2-10-0-0-1.ap-northeast-2.compute.amazonaws.com/null/\r\n\r\nFixed this.", "Merging this and addressing the PR comment in a separate PR. =||= "], ["1004", "do these kind of fallbacks make sense? - eurekaServer.port and port", "Od\u00edn del R\u00edo", "odin-delrio", "05/30/19, 11:12:11 PM", "Hi,\r\nI've been recently playing with eureka configs and I encountered myself searching for a strange error with the ports configuration... at the end of the day, it was my fault, I was using `eureka.port` instead of `eureka.eurekaServer.port` for telling my service where eureka server was listening.\r\nThe thing is that eureka has defined fallbacks for both ports to use the other one if one is missing...\r\ndoes this makes sense? why if no eureka server port is defined the fallback is the service port?\r\n\r\nhttps://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/PropertyBasedClientConfigConstants.java#-L45-L46\r\n\r\n![image](https://user-images.githubusercontent.com/9112748/31937115-cf623f5c-b8b3-11e7-9379-de73e3e7b1a5.png)\r\n\r\n![image](https://user-images.githubusercontent.com/9112748/31937163-ec4be7bc-b8b3-11e7-9e93-7d6c413ae2a7.png)\r\n\r\n\r\nI think that a proper error message will be more helpful...\r\nCurrent behaviour allows projects with wrong config to luckily work if eureka and the service are listening on the same port... dealing in wrong assumptions to the developers.\r\n\r\nwhat do you think?", "Hi @odin-delrio thank you for raising the issue. I believe these exists for backward compatibility reasons only. If you think a more clear message should be present, we'd love a PR. Thanks again. =||= "], ["1005", "Update REST docs for UP'ing an instance", "Pedro Barbosa", "jpedro", "02/16/18, 12:38:51 AM", "The REST docs (https://github.com/Netflix/eureka/wiki/Eureka-REST-operations) are wrong regarding UP'ing an instance.\r\n\r\nThey say use a `DELETE` method but should be a `PUT` instead:\r\n\r\n```\r\nPut instance back into service (remove override) | DELETE/eureka/v2/apps/appID/instanceID/status?value=UP (The value=UP is optional, it is used as a suggestion for the fallback status due to removal of the override)\r\n```", "@jpedro the documentation is correct, however the wording is misleading. I have updated the documentation to \"`Move` instance back into service\". Thanks for the issue. =||= "], ["1006", "Eureka Java client heartbeat is failing intermittently ", "Sushant Borse", "bsushant-athena", "01/31/18, 10:42:56 PM", "**Getting this error :**\r\n```\r\nDiscoveryJerseyProvider   : Cannot parse request body\r\n\r\ncom.fasterxml.jackson.databind.JsonMappingException: Root name 'timestamp' does not match expected ('instance') for type [simple type, class com.netflix.appinfo.InstanceInfo]\r\n```\r\n\r\n**and after that** \r\n```\r\nRedirectingEurekaHttpClient  : Request execution error\r\n\r\njavax.ws.rs.WebApplicationException: HTTP 400 Bad Request\r\n```\r\n\r\nSpring Boot: 1.4.1\r\nSpring Cloud Netflix: 1.2.4.RELEAS\r\nPlease help me resolve this error.", "```\r\n2017-10-31 07:22:42.264 DEBUG 1 --- [tbeatExecutor-0] org.apache.http.wire                     :  << \"{\"timestamp\":1509434562261,\"status\":404,\"error\":\"Not Found\",\"message\":\"Not Found\",\"path\":\"//eureka/apps/SIMPLE-JAVA-CLIENT/simple-java-client:8761:0efbd711f98af82c198a1a6156cc1fce\"}\"\r\n2017-10-31 07:22:42.264 DEBUG 1 --- [tbeatExecutor-0] c.n.d.shared.MonitoredConnectionManager  : Released connection is reusable.\r\n2017-10-31 07:22:42.264 DEBUG 1 --- [tbeatExecutor-0] c.n.d.shared.NamedConnectionPool         : Releasing connection [{}->http://localhost:18888][null]\r\n2017-10-31 07:22:42.264 DEBUG 1 --- [tbeatExecutor-0] c.n.d.shared.NamedConnectionPool         : Pooling connection [{}->http://localhost:18888][null]; keep alive indefinitely\r\n2017-10-31 07:22:42.264 DEBUG 1 --- [tbeatExecutor-0] c.n.d.shared.NamedConnectionPool         : Notifying no-one, there are no waiting threads\r\n2017-10-31 07:22:42.264 DEBUG 1 --- [tbeatExecutor-0] c.n.d.provider.DiscoveryJerseyProvider   : Cannot parse request body\r\n```\r\n\r\n```\r\ncom.fasterxml.jackson.databind.JsonMappingException: Root name 'timestamp' does not match expected ('instance') for type [simple type, class com.netflix.appinfo.InstanceInfo]\r\n at [Source: com.sun.jersey.client.apache4.ApacheHttpClient4Handler$HttpClientResponseInputStream@561b2cdd; line: 1, column: 2]\r\n\tat com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:261) ~[jackson-databind-2.8.3.jar!/:2.8.3]\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.reportMappingException(DeserializationContext.java:1234) ~[jackson-databind-2.8.3.jar!/:2.8.3]\r\n\tat com.fasterxml.jackson.databind.ObjectReader._unwrapAndDeserialize(ObjectReader.java:1690) ~[jackson-databind-2.8.3.jar!/:2.8.3]\r\n\tat com.fasterxml.jackson.databind.ObjectReader._bindAndClose(ObjectReader.java:1620) ~[jackson-databind-2.8.3.jar!/:2.8.3]\r\n\tat com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:1183) ~[jackson-databind-2.8.3.jar!/:2.8.3]\r\n\tat com.netflix.discovery.converters.EurekaJacksonCodec.readValue(EurekaJacksonCodec.java:178) ~[eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat com.netflix.discovery.converters.wrappers.CodecWrappers$LegacyJacksonJson.decode(CodecWrappers.java:314) ~[eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat com.netflix.discovery.provider.DiscoveryJerseyProvider.readFrom(DiscoveryJerseyProvider.java:103) ~[eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:634) [jersey-client-1.19.1.jar!/:1.19.1]\r\n\tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586) [jersey-client-1.19.1.jar!/:1.19.1]\r\n\tat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.sendHeartBeat(AbstractJerseyEurekaHttpClient.java:105) [eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) [eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118) [eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79) [eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:119) [eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) [eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:815) [eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1379) [eureka-client-1.6.2.jar!/:1.6.2]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_141]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_141]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_141]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_141]\r\n\tat java.lang.Thread.run(Thread.java:748) [na:1.8.0_141]\r\n```\r\n\r\n`2017-10-31 07:22:42.265 DEBUG 1 --- [tbeatExecutor-0] n.d.s.t.j.AbstractJerseyEurekaHttpClient : Jersey HTTP PUT http://localhost:18888/public/eureka//apps/SIMPLE-JAVA-CLIENT/simple-java-client:8761:0efbd711f98af82c198a1a6156cc1fce; statusCode=404` =||= We aren\u2019t ready very keen in supporting older versions. And chance you can update to Dalston and Boot 1.5? =||= Also there\u2019s a double // in your eureka url. Could be a normalization problem. =||= @dsyer are you talking about the client or the server side version ? \r\n =||= Both. But the error is from the client isn't it? =||= on server side it is not possible to update.\r\ncurrently server side sprint boot :1.4.3 and cloud is Camden.SR4.\r\n\r\nYes the error is from client =||= Well how about updating the client? And fixing the double //? =||= @dsyer I updated the client i.e. spring boot: 1.5.1 and spring cloud: 1.3.5 , but still after 4-5 hours the clients disconnects and in the logs I see same error. \r\nAlso with that double // it worked for 4-5 hours.  =||= Don't know then. Seems like it must be an environment issue. What kind of connection does the client have to eureka? Is there a proxy? More than one? =||= yes, we have a proxy which is the marathon lb. =||= I would be looking there for clues then. Something started messing with your traffic. Also look at the logs and /trace from the eureka server. =||= Thanks @dsyer  \r\nSo the same error occurs on server side as well(which is occurring on client side). But later we changed the eureka server instances from 3 to 1 and now the client is not failing. \r\nDo you know what can be the possible reasons for this ? Also one more thing we have noticed is that even though now the instances are only 1 , when we see the /eureka/apps/ the eureka server instance gets deregistered immediately . \r\ne.g. after restarting the server I could see the eureka server registered as \"Gateway\" on /eureka/apps endpoint but after sometime it disappears. \r\ncan you please provide your thoughts on this as well? Is this something with the instance replicator? =||= As soon as I start my server I see some connection refused error and then this below one:\r\n```\r\n2017-11-13 23:37:56.763  WARN 85576 --- [nfoReplicator-0] c.n.discovery.InstanceInfoReplicator     : There was a problem with the instance info replicator\r\n\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n\tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111) ~[eureka-client-1.4.12.jar!/:1.4.12]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) ~[eureka-client-1.4.12.jar!/:1.4.12]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) ~[eureka-client-1.4.12.jar!/:1.4.12]\r\n\tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.4.12.jar!/:1.4.12]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) ~[eureka-client-1.4.12.jar!/:1.4.12]\r\n\tat com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:815) ~[eureka-client-1.4.12.jar!/:1.4.12]\r\n\tat com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:104) ~[eureka-client-1.4.12.jar!/:1.4.12]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_111]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_111]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [na:1.8.0_111]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.8.0_111]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_111]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_111]\r\n\tat java.lang.Thread.run(Thread.java:745) [na:1.8.0_111]\r\n``` =||= Ok so we moved to peer awareness mode to solve this problem and also updated to dalston sr1 \r\n:cheers =||= Thanks for letting us know you've resolved your issue! =||= After restarting an eureka instance, it fails to re-register and we are again getting similar kind of error. Can somebody look into this?\r\n\r\n```\r\ndev_gateway_zuul | com.fasterxml.jackson.databind.JsonMappingException: Root name 'timestamp' does not match expected ('instance') for type [simple type, class com.netflix.appinfo.InstanceInfo]\r\ndev_gateway_zuul |  at [Source: com.sun.jersey.client.apache4.ApacheHttpClient4Handler$HttpClientResponseInputStream@7c628fbd; line: 1, column: 2]\r\ndev_gateway_zuul | \tat com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:148)\r\ndev_gateway_zuul | \tat com.fasterxml.jackson.databind.ObjectReader._unwrapAndDeserialize(ObjectReader.java:1584)\r\ndev_gateway_zuul | \tat com.fasterxml.jackson.databind.ObjectReader._bindAndClose(ObjectReader.java:1508)\r\ndev_gateway_zuul | \tat com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:1102)\r\ndev_gateway_zuul | \tat com.netflix.discovery.converters.EurekaJacksonCodec.readValue(EurekaJacksonCodec.java:178)\r\ndev_gateway_zuul | \tat org.springframework.cloud.netflix.eureka.server.CloudJacksonJson.decode(CloudJacksonJson.java:67)\r\ndev_gateway_zuul | \tat com.netflix.discovery.provider.DiscoveryJerseyProvider.readFrom(DiscoveryJerseyProvider.java:103)\r\ndev_gateway_zuul | \tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:634)\r\ndev_gateway_zuul | \tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.sendHeartBeat(AbstractJerseyEurekaHttpClient.java:105)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:119)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\ndev_gateway_zuul | \tat com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:815)\r\ndev_gateway_zuul | \tat com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1379)\r\ndev_gateway_zuul | \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\ndev_gateway_zuul | \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\ndev_gateway_zuul | \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\ndev_gateway_zuul | \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\ndev_gateway_zuul | \tat java.lang.Thread.run(Thread.java:748)\r\ndev_gateway_zuul | 2018-10-24 01:26:20,196 [] DEBUG [DiscoveryClient-HeartbeatExecutor-0]  com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient  - Jersey HTTP PUT http://zuulgateway:80/eureka//apps/GATEWAY/Gateway:c9c4a1bccab0e51d7d4f7a78e440e0b1; statusCode=404\r\ndev_gateway_zuul | 2018-10-24 01:26:20,197 [] ERROR [DiscoveryClient-HeartbeatExecutor-0]  com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient  - Request execution error\r\ndev_gateway_zuul | javax.ws.rs.WebApplicationException\r\ndev_gateway_zuul | \tat com.netflix.discovery.provider.DiscoveryJerseyProvider.readFrom(DiscoveryJerseyProvider.java:110)\r\ndev_gateway_zuul | \tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:634)\r\ndev_gateway_zuul | \tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.sendHeartBeat(AbstractJerseyEurekaHttpClient.java:105)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:119)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\ndev_gateway_zuul | \tat com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:815)\r\ndev_gateway_zuul | \tat com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1379)\r\ndev_gateway_zuul | \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\ndev_gateway_zuul | \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\ndev_gateway_zuul | \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\ndev_gateway_zuul | \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\ndev_gateway_zuul | \tat java.lang.Thread.run(Thread.java:748)\r\ndev_gateway_zuul | 2018-10-24 01:26:20,197 [] WARN  [DiscoveryClient-HeartbeatExecutor-0]  com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient  - Request execution failed with message: null\r\ndev_gateway_zuul | 2018-10-24 01:26:20,197 [] ERROR [DiscoveryClient-HeartbeatExecutor-0]  com.netflix.discovery.DiscoveryClient  - DiscoveryClient_GATEWAY/Gateway:c9c4a1bccab0e51d7d4f7a78e440e0b1 - was unable to send heartbeat!\r\ndev_gateway_zuul | com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\ndev_gateway_zuul | \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\ndev_gateway_zuul | \tat com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:815)\r\ndev_gateway_zuul | \tat com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1379)\r\ndev_gateway_zuul | \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\ndev_gateway_zuul | \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\ndev_gateway_zuul | \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\ndev_gateway_zuul | \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\ndev_gateway_zuul | \tat java.lang.Thread.run(Thread.java:748)\r\ndev_gateway_zuul | 2018-10-24 01:26:20,393 [] DEBUG [PollingServerListUpdater-0]  com.netflix.loadbalancer.DynamicServerListLoadBalancer  - List of Servers for gatewaysupport obtained from Discovery client: [nodegateway:nodegateway:GATEWAYSUPPORT:3000]\r\ndev_gateway_zuul | 2018-10-24 01:26:20,393 [] DEBUG [PollingServerListUpdater-0]  com.netflix.loadbalancer.ZoneAffinityServerListFilter  - Determining if zone affinity should be enabled with given server list: [nodegateway:nodegateway:GATEWAYSUPPORT:3000]\r\ndev_gateway_zuul | 2018-10-24 01:26:20,393 [] DEBUG [PollingServerListUpdater-0]  com.netflix.loadbalancer.ZoneAffinityServerListFilter  - zoneAffinity is overriden. blackOutServerPercentage: 0.0, activeReqeustsPerServer: 0.0, availableServers: 1\r\n```\r\n@dsyer \r\nI tried to write a filter where I'll pass empty body response but the filter is not triggering . =||= This issue was closed 9 months ago. If you are running the latest versions your symptoms may look similar, but it seems unlikely to be the same cause. Can you show how to reproduce the issue? It looks like the eureka server is down/broken/refusing connections. =||= We are using spring-cloud dalston sr1 version. I've a jar file but not sure how to share. \r\nIn my local testing I run the java jar file , once the self registration is done I disconnect the internet for 5 min then brings back the internet but then the renew calls fails.\r\nBelow is my mvn dependency:tree:::\r\n```\r\n[INFO] --- maven-dependency-plugin:2.10:tree (default-cli) @ gateway-run ---\r\n[INFO] com.abb.platform:gateway-run:jar:0.0.1-SNAPSHOT\r\n[INFO] +- com.abb.platform:gateway-endpoint:jar:0.0.1-SNAPSHOT:compile\r\n[INFO] |  +- com.abb.platform:platform-configuration:jar:1.2.0-SNAPSHOT:compile\r\n[INFO] |  |  +- org.cfg4j:cfg4j-consul:jar:4.4.0:compile\r\n[INFO] |  |  |  +- com.orbitz.consul:consul-client:jar:0.10.1:compile\r\n[INFO] |  |  |  |  +- javax.ws.rs:javax.ws.rs-api:jar:2.0.1:compile\r\n[INFO] |  |  |  |  +- javax.annotation:javax.annotation-api:jar:1.2:compile\r\n[INFO] |  |  |  |  +- org.immutables:value:jar:2.1.12:compile\r\n[INFO] |  |  |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-guava:jar:2.6.3:compile\r\n[INFO] |  |  |  |  +- com.fasterxml.jackson.jaxrs:jackson-jaxrs-base:jar:2.6.3:compile\r\n[INFO] |  |  |  |  \\- com.fasterxml.jackson.jaxrs:jackson-jaxrs-json-provider:jar:2.6.3:compile\r\n[INFO] |  |  |  +- org.apache.cxf:cxf-rt-transports-http-hc:jar:3.1.6:compile\r\n[INFO] |  |  |  |  +- org.apache.cxf:cxf-core:jar:3.1.6:compile\r\n[INFO] |  |  |  |  |  \\- org.apache.ws.xmlschema:xmlschema-core:jar:2.2.1:compile\r\n[INFO] |  |  |  |  +- org.apache.cxf:cxf-rt-transports-http:jar:3.1.6:compile\r\n[INFO] |  |  |  |  +- org.apache.httpcomponents:httpcore-nio:jar:4.4.4:compile\r\n[INFO] |  |  |  |  \\- org.apache.httpcomponents:httpasyncclient:jar:4.1.1:compile\r\n[INFO] |  |  |  \\- org.apache.cxf:cxf-rt-rs-client:jar:3.1.6:compile\r\n[INFO] |  |  |     \\- org.apache.cxf:cxf-rt-frontend-jaxrs:jar:3.1.6:compile\r\n[INFO] |  |  \\- org.cfg4j:cfg4j-git:jar:4.4.0:compile\r\n[INFO] |  |     \\- org.eclipse.jgit:org.eclipse.jgit:jar:4.3.0.201604071810-r:compile\r\n[INFO] |  |        +- com.jcraft:jsch:jar:0.1.53:compile\r\n[INFO] |  |        \\- com.googlecode.javaewah:JavaEWAH:jar:0.7.9:compile\r\n[INFO] |  +- com.abb.platform:foundation-services-core:jar:1.0.0-SNAPSHOT:compile\r\n[INFO] |  |  +- org.bitbucket.b_c:jose4j:jar:0.5.2:compile\r\n[INFO] |  |  +- com.google.guava:guava:jar:18.0:compile\r\n[INFO] |  |  +- commons-codec:commons-codec:jar:1.9:compile\r\n[INFO] |  |  +- com.fasterxml.jackson.core:jackson-core:jar:2.6.6:compile\r\n[INFO] |  |  \\- com.fasterxml.jackson.core:jackson-annotations:jar:2.6.6:compile\r\n[INFO] |  +- com.netflix.netflix-commons:netflix-commons-util:jar:0.1.1:compile\r\n[INFO] |  +- org.springframework.cloud:spring-cloud-starter-eureka-server:jar:1.3.1.RELEASE:compile\r\n[INFO] |  |  +- org.springframework.cloud:spring-cloud-starter:jar:1.2.2.RELEASE:compile\r\n[INFO] |  |  |  +- org.springframework.boot:spring-boot-starter:jar:1.5.3.RELEASE:compile\r\n[INFO] |  |  |  +- org.springframework.cloud:spring-cloud-context:jar:1.2.2.RELEASE:compile\r\n[INFO] |  |  |  |  \\- org.springframework.security:spring-security-crypto:jar:4.2.2.RELEASE:compile\r\n[INFO] |  |  |  +- org.springframework.cloud:spring-cloud-commons:jar:1.2.2.RELEASE:compile\r\n[INFO] |  |  |  \\- org.springframework.security:spring-security-rsa:jar:1.0.3.RELEASE:compile\r\n[INFO] |  |  |     \\- org.bouncycastle:bcpkix-jdk15on:jar:1.55:compile\r\n[INFO] |  |  |        \\- org.bouncycastle:bcprov-jdk15on:jar:1.55:compile\r\n[INFO] |  |  +- org.springframework.cloud:spring-cloud-netflix-eureka-server:jar:1.3.1.RELEASE:compile\r\n[INFO] |  |  |  +- org.springframework.boot:spring-boot-starter-freemarker:jar:1.5.3.RELEASE:compile\r\n[INFO] |  |  |  |  +- org.freemarker:freemarker:jar:2.3.26-incubating:compile\r\n[INFO] |  |  |  |  \\- org.springframework:spring-context-support:jar:4.3.8.RELEASE:compile\r\n[INFO] |  |  |  +- org.springframework.cloud:spring-cloud-netflix-eureka-client:jar:1.3.1.RELEASE:compile\r\n[INFO] |  |  |  +- com.netflix.eureka:eureka-client:jar:1.6.2:compile\r\n[INFO] |  |  |  |  +- org.codehaus.jettison:jettison:jar:1.3.7:runtime\r\n[INFO] |  |  |  |  |  \\- stax:stax-api:jar:1.0.1:runtime\r\n[INFO] |  |  |  |  +- com.netflix.netflix-commons:netflix-eventbus:jar:0.3.0:runtime\r\n[INFO] |  |  |  |  |  +- com.netflix.netflix-commons:netflix-infix:jar:0.3.0:runtime\r\n[INFO] |  |  |  |  |  |  +- commons-jxpath:commons-jxpath:jar:1.3:runtime\r\n[INFO] |  |  |  |  |  |  \\- org.antlr:antlr-runtime:jar:3.4:runtime\r\n[INFO] |  |  |  |  |  |     +- org.antlr:stringtemplate:jar:3.2.1:runtime\r\n[INFO] |  |  |  |  |  |     \\- antlr:antlr:jar:2.7.7:runtime\r\n[INFO] |  |  |  |  |  \\- org.apache.commons:commons-math:jar:2.2:runtime\r\n[INFO] |  |  |  |  +- com.sun.jersey:jersey-client:jar:1.19.1:runtime\r\n[INFO] |  |  |  |  +- com.sun.jersey.contribs:jersey-apache-client4:jar:1.19.1:runtime\r\n[INFO] |  |  |  |  \\- com.google.inject:guice:jar:4.1.0:runtime\r\n[INFO] |  |  |  |     \\- aopalliance:aopalliance:jar:1.0:runtime\r\n[INFO] |  |  |  +- com.netflix.eureka:eureka-core:jar:1.6.2:compile\r\n[INFO] |  |  |  |  \\- org.codehaus.woodstox:woodstox-core-asl:jar:4.4.1:compile\r\n[INFO] |  |  |  |     \\- javax.xml.stream:stax-api:jar:1.0-2:compile\r\n[INFO] |  |  |  +- com.netflix.archaius:archaius-core:jar:0.7.4:compile\r\n[INFO] |  |  |  |  \\- com.google.code.findbugs:jsr305:jar:3.0.1:runtime\r\n[INFO] |  |  |  +- javax.inject:javax.inject:jar:1:compile\r\n[INFO] |  |  |  +- com.fasterxml.jackson.dataformat:jackson-dataformat-xml:jar:2.8.8:compile\r\n[INFO] |  |  |  |  +- com.fasterxml.jackson.module:jackson-module-jaxb-annotations:jar:2.8.8:compile\r\n[INFO] |  |  |  |  +- org.codehaus.woodstox:stax2-api:jar:3.1.4:compile\r\n[INFO] |  |  |  |  \\- com.fasterxml.woodstox:woodstox-core:jar:5.0.3:compile\r\n[INFO] |  |  |  \\- com.thoughtworks.xstream:xstream:jar:1.4.9:compile\r\n[INFO] |  |  |     +- xmlpull:xmlpull:jar:1.1.3.1:compile\r\n[INFO] |  |  |     \\- xpp3:xpp3_min:jar:1.1.4c:compile\r\n[INFO] |  |  +- org.springframework.cloud:spring-cloud-starter-archaius:jar:1.3.1.RELEASE:compile\r\n[INFO] |  |  |  \\- commons-configuration:commons-configuration:jar:1.8:compile\r\n[INFO] |  |  |     \\- commons-lang:commons-lang:jar:2.6:compile\r\n[INFO] |  |  +- org.springframework.cloud:spring-cloud-starter-ribbon:jar:1.3.1.RELEASE:compile\r\n[INFO] |  |  |  +- com.netflix.ribbon:ribbon:jar:2.2.2:compile\r\n[INFO] |  |  |  |  +- com.netflix.ribbon:ribbon-transport:jar:2.2.2:runtime\r\n[INFO] |  |  |  |  |  +- io.reactivex:rxnetty-contexts:jar:0.4.9:runtime\r\n[INFO] |  |  |  |  |  \\- io.reactivex:rxnetty-servo:jar:0.4.9:runtime\r\n[INFO] |  |  |  |  \\- io.reactivex:rxnetty:jar:0.4.9:runtime\r\n[INFO] |  |  |  |     +- io.netty:netty-codec-http:jar:4.0.27.Final:runtime\r\n[INFO] |  |  |  |     |  +- io.netty:netty-codec:jar:4.0.27.Final:runtime\r\n[INFO] |  |  |  |     |  \\- io.netty:netty-handler:jar:4.0.27.Final:runtime\r\n[INFO] |  |  |  |     \\- io.netty:netty-transport-native-epoll:jar:4.0.27.Final:runtime\r\n[INFO] |  |  |  |        +- io.netty:netty-common:jar:4.0.27.Final:runtime\r\n[INFO] |  |  |  |        +- io.netty:netty-buffer:jar:4.0.27.Final:runtime\r\n[INFO] |  |  |  |        \\- io.netty:netty-transport:jar:4.0.27.Final:runtime\r\n[INFO] |  |  |  +- com.netflix.ribbon:ribbon-core:jar:2.2.2:compile\r\n[INFO] |  |  |  +- com.netflix.ribbon:ribbon-httpclient:jar:2.2.2:compile\r\n[INFO] |  |  |  |  \\- commons-collections:commons-collections:jar:3.2.1:runtime\r\n[INFO] |  |  |  +- com.netflix.ribbon:ribbon-loadbalancer:jar:2.2.2:compile\r\n[INFO] |  |  |  |  \\- com.netflix.netflix-commons:netflix-statistics:jar:0.1.1:runtime\r\n[INFO] |  |  |  \\- io.reactivex:rxjava:jar:1.1.10:compile\r\n[INFO] |  |  \\- com.netflix.ribbon:ribbon-eureka:jar:2.2.2:compile\r\n[INFO] |  +- org.springframework.cloud:spring-cloud-starter-zuul:jar:1.3.1.RELEASE:compile\r\n[INFO] |  |  +- org.springframework.boot:spring-boot-starter-web:jar:1.5.3.RELEASE:compile\r\n[INFO] |  |  |  +- org.springframework.boot:spring-boot-starter-tomcat:jar:1.5.3.RELEASE:compile\r\n[INFO] |  |  |  |  +- org.apache.tomcat.embed:tomcat-embed-core:jar:8.5.14:compile\r\n[INFO] |  |  |  |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:8.5.14:compile\r\n[INFO] |  |  |  |  \\- org.apache.tomcat.embed:tomcat-embed-websocket:jar:8.5.14:compile\r\n[INFO] |  |  |  +- org.hibernate:hibernate-validator:jar:5.3.5.Final:compile\r\n[INFO] |  |  |  |  +- javax.validation:validation-api:jar:1.1.0.Final:compile\r\n[INFO] |  |  |  |  \\- org.jboss.logging:jboss-logging:jar:3.3.0.Final:compile\r\n[INFO] |  |  |  \\- org.springframework:spring-webmvc:jar:4.3.8.RELEASE:compile\r\n[INFO] |  |  +- org.springframework.boot:spring-boot-starter-actuator:jar:1.5.3.RELEASE:compile\r\n[INFO] |  |  |  \\- org.springframework.boot:spring-boot-actuator:jar:1.5.3.RELEASE:compile\r\n[INFO] |  |  \\- com.netflix.zuul:zuul-core:jar:1.3.0:compile\r\n[INFO] |  |     \\- com.netflix.servo:servo-core:jar:0.7.2:compile\r\n[INFO] |  +- org.springframework.boot:spring-boot-starter-log4j2:jar:1.5.9.RELEASE:compile\r\n[INFO] |  |  +- org.apache.logging.log4j:log4j-slf4j-impl:jar:2.7:compile\r\n[INFO] |  |  +- org.apache.logging.log4j:log4j-api:jar:2.7:compile\r\n[INFO] |  |  \\- org.apache.logging.log4j:log4j-core:jar:2.7:compile\r\n[INFO] |  +- org.springframework.cloud:spring-cloud-starter-hystrix-dashboard:jar:1.3.1.RELEASE:compile\r\n[INFO] |  |  \\- org.springframework.cloud:spring-cloud-netflix-hystrix-dashboard:jar:1.3.1.RELEASE:compile\r\n[INFO] |  |     +- org.webjars:jquery:jar:2.1.1:compile\r\n[INFO] |  |     \\- org.webjars:d3js:jar:3.4.11:compile\r\n[INFO] |  +- org.springframework.cloud:spring-cloud-starter-hystrix:jar:1.3.1.RELEASE:compile\r\n[INFO] |  |  +- org.springframework.cloud:spring-cloud-netflix-core:jar:1.3.1.RELEASE:compile\r\n[INFO] |  |  |  +- org.springframework.boot:spring-boot:jar:1.5.3.RELEASE:compile\r\n[INFO] |  |  |  \\- org.springframework.boot:spring-boot-autoconfigure:jar:1.5.3.RELEASE:compile\r\n[INFO] |  |  +- com.netflix.hystrix:hystrix-core:jar:1.5.12:compile\r\n[INFO] |  |  |  \\- org.hdrhistogram:HdrHistogram:jar:2.1.9:compile\r\n[INFO] |  |  +- com.netflix.hystrix:hystrix-metrics-event-stream:jar:1.5.12:compile\r\n[INFO] |  |  |  \\- com.netflix.hystrix:hystrix-serialization:jar:1.5.12:runtime\r\n[INFO] |  |  |     \\- com.fasterxml.jackson.module:jackson-module-afterburner:jar:2.7.5:runtime\r\n[INFO] |  |  \\- com.netflix.hystrix:hystrix-javanica:jar:1.5.12:compile\r\n[INFO] |  |     \\- org.ow2.asm:asm:jar:5.0.4:runtime\r\n[INFO] |  +- org.springframework.cloud:spring-cloud-starter-turbine:jar:1.3.1.RELEASE:compile\r\n[INFO] |  |  +- org.springframework.cloud:spring-cloud-starter-eureka:jar:1.3.1.RELEASE:compile\r\n[INFO] |  |  +- org.springframework.cloud:spring-cloud-netflix-turbine:jar:1.3.1.RELEASE:compile\r\n[INFO] |  |  \\- com.netflix.turbine:turbine-core:jar:1.0.0:compile\r\n[INFO] |  |     +- org.codehaus.jackson:jackson-mapper-asl:jar:1.9.2:compile\r\n[INFO] |  |     \\- org.codehaus.jackson:jackson-core-asl:jar:1.9.2:compile\r\n[INFO] |  +- de.ahus1.prometheus.hystrix:prometheus-hystrix:jar:3.4.0:compile\r\n[INFO] |  +- io.springfox:springfox-swagger2:jar:2.5.0:compile\r\n[INFO] |  |  +- io.swagger:swagger-annotations:jar:1.5.9:compile\r\n[INFO] |  |  +- io.swagger:swagger-models:jar:1.5.9:compile\r\n[INFO] |  |  +- io.springfox:springfox-spi:jar:2.5.0:compile\r\n[INFO] |  |  |  \\- io.springfox:springfox-core:jar:2.5.0:compile\r\n[INFO] |  |  +- io.springfox:springfox-schema:jar:2.5.0:compile\r\n[INFO] |  |  +- io.springfox:springfox-spring-web:jar:2.5.0:compile\r\n[INFO] |  |  +- com.fasterxml:classmate:jar:1.3.1:compile\r\n[INFO] |  |  +- org.springframework.plugin:spring-plugin-core:jar:1.2.0.RELEASE:compile\r\n[INFO] |  |  +- org.springframework.plugin:spring-plugin-metadata:jar:1.2.0.RELEASE:compile\r\n[INFO] |  |  \\- org.mapstruct:mapstruct:jar:1.0.0.Final:compile\r\n[INFO] |  \\- io.springfox:springfox-swagger-ui:jar:2.5.0:compile\r\n[INFO] +- com.abb.platform:messaging-runtime-swagger:jar:1.0.0-SNAPSHOT:compile\r\n[INFO] |  +- org.cfg4j:cfg4j-core:jar:4.4.0:compile\r\n[INFO] |  |  +- org.json:json:jar:20160212:compile\r\n[INFO] |  |  +- io.dropwizard.metrics:metrics-core:jar:3.1.2:compile\r\n[INFO] |  |  +- com.github.drapostolos:type-parser:jar:0.5.0:compile\r\n[INFO] |  |  \\- org.yaml:snakeyaml:jar:1.17:compile\r\n[INFO] |  +- org.springframework:spring-web:jar:4.3.8.RELEASE:compile\r\n[INFO] |  |  +- org.springframework:spring-aop:jar:4.3.8.RELEASE:compile\r\n[INFO] |  |  +- org.springframework:spring-beans:jar:4.3.8.RELEASE:compile\r\n[INFO] |  |  \\- org.springframework:spring-context:jar:4.3.8.RELEASE:compile\r\n[INFO] |  |     \\- org.springframework:spring-expression:jar:4.3.8.RELEASE:compile\r\n[INFO] |  \\- commons-io:commons-io:jar:2.2:compile\r\n[INFO] +- com.sun.jersey:jersey-servlet:jar:1.11:compile\r\n[INFO] +- com.sun.jersey:jersey-server:jar:1.11:compile\r\n[INFO] |  +- asm:asm:jar:3.1:compile\r\n[INFO] |  \\- com.sun.jersey:jersey-core:jar:1.11:compile\r\n[INFO] +- org.mockito:mockito-core:jar:1.10.19:test\r\n[INFO] |  \\- org.objenesis:objenesis:jar:2.1:test\r\n[INFO] +- org.hamcrest:hamcrest-core:jar:1.3:test\r\n[INFO] +- org.hamcrest:hamcrest-library:jar:1.3:test\r\n[INFO] +- org.springframework:spring-test:jar:4.3.8.RELEASE:test\r\n[INFO] |  \\- org.springframework:spring-core:jar:4.3.8.RELEASE:compile\r\n[INFO] |     \\- commons-logging:commons-logging:jar:1.2:compile\r\n[INFO] +- org.powermock:powermock-module-junit4:jar:1.6.5:test\r\n[INFO] |  \\- org.powermock:powermock-module-junit4-common:jar:1.6.5:test\r\n[INFO] |     +- org.powermock:powermock-core:jar:1.6.5:test\r\n[INFO] |     |  \\- org.javassist:javassist:jar:3.20.0-GA:test\r\n[INFO] |     \\- org.powermock:powermock-reflect:jar:1.6.5:test\r\n[INFO] +- org.powermock:powermock-api-mockito:jar:1.6.5:test\r\n[INFO] |  \\- org.powermock:powermock-api-mockito-common:jar:1.6.5:test\r\n[INFO] |     \\- org.powermock:powermock-api-support:jar:1.6.5:test\r\n[INFO] +- junit:junit:jar:4.12:test\r\n[INFO] +- io.prometheus:simpleclient_spring_boot:jar:0.2.0:compile\r\n[INFO] |  +- io.prometheus:simpleclient:jar:0.2.0:compile\r\n[INFO] |  +- io.prometheus:simpleclient_common:jar:0.2.0:compile\r\n[INFO] |  +- io.prometheus:simpleclient_spring_web:jar:0.2.0:compile\r\n[INFO] |  |  \\- org.aspectj:aspectjweaver:jar:1.8.6:compile\r\n[INFO] |  \\- org.apache.commons:commons-lang3:jar:3.4:compile\r\n[INFO] +- io.prometheus:simpleclient_hotspot:jar:0.2.0:compile\r\n[INFO] +- io.prometheus:simpleclient_servlet:jar:0.2.0:compile\r\n[INFO] +- org.slf4j:slf4j-jdk14:jar:1.7.5:compile\r\n[INFO] +- org.springframework.boot:spring-boot-starter-log4j:jar:1.3.8.RELEASE:compile\r\n[INFO] |  +- org.slf4j:jul-to-slf4j:jar:1.7.21:compile\r\n[INFO] |  +- org.slf4j:slf4j-log4j12:jar:1.7.5:compile\r\n[INFO] |  \\- log4j:log4j:jar:1.2.17:compile\r\n[INFO] +- com.google.code.gson:gson:jar:2.8.5:compile\r\n[INFO] +- com.amazonaws:aws-java-sdk-s3:jar:1.11.370:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-kms:jar:1.11.370:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-core:jar:1.11.370:compile\r\n[INFO] |  |  +- org.apache.httpcomponents:httpclient:jar:4.5.5:compile\r\n[INFO] |  |  |  \\- org.apache.httpcomponents:httpcore:jar:4.4.9:compile\r\n[INFO] |  |  +- software.amazon.ion:ion-java:jar:1.0.2:compile\r\n[INFO] |  |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.6.6:compile\r\n[INFO] |  |  +- com.fasterxml.jackson.dataformat:jackson-dataformat-cbor:jar:2.6.7:compile\r\n[INFO] |  |  \\- joda-time:joda-time:jar:2.8.1:compile\r\n[INFO] |  \\- com.amazonaws:jmespath-java:jar:1.11.370:compile\r\n[INFO] +- com.amazonaws:aws-java-sdk-sts:jar:1.11.370:compile\r\n[INFO] +- org.slf4j:slf4j-api:jar:1.7.5:compile\r\n[INFO] +- org.slf4j:jcl-over-slf4j:jar:1.7.5:compile\r\n[INFO] +- log4j:apache-log4j-extras:jar:1.2.17:compile\r\n[INFO] +- javax.ws.rs:jsr311-api:jar:1.1.1:provided\r\n[INFO] \\- org.projectlombok:lombok:jar:1.16.10:compile\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time: 8.168 s\r\n[INFO] Finished at: 2018-10-26T06:36:01+05:30\r\n[INFO] Final Memory: 33M/345M\r\n[INFO]\r\n```   =||= Dalston.SR1 is not the latest release. We have Finchley.SR2 now. =||= after adding static zuul routes, this issue is fixed. :cheers  =||= > after adding static zuul routes, this issue is fixed. :cheers\r\n\r\nhow did you fixed the issue? I have the same issue with Spring Cloud Greenwich SR1  now =||= The issue was happening if the eureka server url is incorrect - Pls reverify if you have \"/eureka\" at the end - \r\nhttp://127.0.0.1:8761/${servletcontextpath}/eureka =||= i am getting  below error when i start my server can someone have look  on  it ?\r\n2019-05-30 16:48:08.123  INFO 20020 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_EMPLOYEESERVICE/PW7AM2XDH403587.r1-core.r1.aig.net:EmployeeService:8085: registering service...\r\n2019-05-30 16:48:10.129 ERROR 20020 --- [nfoReplicator-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error. endpoint=DefaultEndpoint{ serviceUrl='http://localhost:8761/eureka/}\r\n\r\ncom.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused: connect\r\n\tat com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187) ~[jersey-apache-client4-1.19.1.jar:1.19.1]\r\n\tat com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123) ~[jersey-client-1.19.1.jar:1.19.1]\r\n\tat com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.sun.jersey.api.client.Client.handle(Client.java:652) ~[jersey-client-1.19.1.jar:1.19.1]\r\n\tat com.sun.jersey.api.client.WebResource.handle(WebResource.java:682) ~[jersey-client-1.19.1.jar:1.19.1]\r\n\tat com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74) ~[jersey-client-1.19.1.jar:1.19.1]\r\n\tat com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:570) ~[jersey-client-1.19.1.jar:1.19.1]\r\n\tat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.register(AbstractJerseyEurekaHttpClient.java:56) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:829) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:121) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_211]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_211]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [na:1.8.0_211]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.8.0_211]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_211]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_211]\r\n\tat java.lang.Thread.run(Thread.java:748) [na:1.8.0_211]\r\nCaused by: java.net.ConnectException: Connection refused: connect\r\n\tat java.net.DualStackPlainSocketImpl.waitForConnect(Native Method) ~[na:1.8.0_211]\r\n\tat java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85) ~[na:1.8.0_211]\r\n\tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_211]\r\n\tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_211]\r\n\tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_211]\r\n\tat java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172) ~[na:1.8.0_211]\r\n\tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_211]\r\n\tat java.net.Socket.connect(Socket.java:589) ~[na:1.8.0_211]\r\n\tat org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121) ~[httpclient-4.5.6.jar:4.5.6]\r\n\tat org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180) ~[httpclient-4.5.6.jar:4.5.6]\r\n\tat org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144) ~[httpclient-4.5.6.jar:4.5.6]\r\n\tat org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134) ~[httpclient-4.5.6.jar:4.5.6]\r\n\tat org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610) ~[httpclient-4.5.6.jar:4.5.6]\r\n\tat org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445) ~[httpclient-4.5.6.jar:4.5.6]\r\n\tat org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835) ~[httpclient-4.5.6.jar:4.5.6]\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:118) ~[httpclient-4.5.6.jar:4.5.6]\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.6.jar:4.5.6]\r\n\tat com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173) ~[jersey-apache-client4-1.19.1.jar:1.19.1]\r\n\t... 29 common frames omitted\r\n\r\n2019-05-30 16:48:10.129  WARN 20020 --- [nfoReplicator-0] c.n.d.s.t.d.RetryableEurekaHttpClient    : Request execution failed with message: java.net.ConnectException: Connection refused: connect\r\n2019-05-30 16:48:10.129  WARN 20020 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_EMPLOYEESERVICE/PW7AM2XDH403587.r1-core.r1.aig.net:EmployeeService:8085 - registration failed Cannot execute request on any known server\r\n\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n =||= "], ["1007", "Can I register new Eureka Server in defaultzones at RunTime?", "Lucas Henrique Marques Cruz", "LucasHCruz", "02/16/18, 12:35:18 AM", "I already have Eureka Servers UP.\r\n\r\nSo.. \r\n\r\nCan I start a new Eureka Server and the server self register as an aditional default zone?\r\n\r\n```\r\neureka:\r\n  client:\r\n    serviceUrl:\r\n      defaultZone: serverA, serverB <== Add ServerC in runtime\r\n```\r", "@LucasHCruz eureka *should* be able to handle that change dynamically, however since the configuration is proxied via springboot, I would double check with springboot that these are dynamically updatable. Thanks. =||= "], ["1008", "Unavailable-replicas", null, "jwarder", "02/16/18, 12:35:53 AM", "I was wondering if someone could shed some light on why my Eureka cluster is showing unavailable-replicas even though it does appear to be replicating. The environment I am running is on a single Windows host using Spring Boot.\r\n\r\n**Spring Cloud Version**: Dalston.SR4\r\n**Spring Boot Version**: 1.5.6.RELEASE\r\n\r\napplication.yml:\r\n\r\n```\r\nspring:\r\n  profiles: peer1\r\nserver:\r\n  port: 8761\r\neureka:\r\n  instance:\r\n    hostname: peer1\r\n    appname: peer1\r\n  client:\r\n    registerWithEureka: true\r\n    fetchRegistry: true\r\n    serviceUrl:\r\n      defaultZone: http://peer2:8762/eureka/\r\n\r\n---\r\nspring:\r\n  profiles: peer2\r\nserver:\r\n  port: 8762\r\neureka:\r\n  instance:\r\n    hostname: peer2  \r\n    appname: peer2 \r\n  client:\r\n    registerWithEureka: true\r\n    fetchRegistry: true\r\n    serviceUrl:\r\n      defaultZone: http://peer1:8761/eureka/\r\n```\r\n![image](https://user-images.githubusercontent.com/4456200/32230764-c8bc94ca-be4b-11e7-824e-12fa98fda39a.png)\r\n\r\nAs you can see from this image the registered-replica with peer2 is http://peer1:8761/eureka however this replica is showing as unavailable.\r\n\r\nI have also added the following entries into the hosts file:\r\n\r\n`\t127.0.0.1\t\tpeer1 peer2\r\n`\r\n\r\nFollowing another post I debugged com.netflix.eureka.util.StatusUtil.isReplicaAvailable method which returns false as the replica hostname is not the same as the instance hostname. I can't for the life of me work out why this is required? Debug below\r\n\r\n![image](https://user-images.githubusercontent.com/4456200/32230978-47268ec4-be4c-11e7-9f3a-7c396cf3cb52.png)\r\n\r\nI have spent quite some time going though other peoples suggestions but I'm pretty stuck with it now.", "I also encounter this issue, do you have new discovery now? =||= +1 =||= +1 =||= Hi @jwarder this is specific to springboot. Can you see if this documentation offers more clarity: http://cloud.spring.io/spring-cloud-static/spring-cloud.html#_peer_awareness.\r\n\r\nThanks. =||= Hi, I know this issue is already closed but I noticed that the problem you had was actually related to the property `eureka.instance.appname`, and not really related to spring boot. If you want to make the cluster work, you need to use **the same application name in both profiles**. \r\n\r\nI went through a lot of tricky issues as well, so I decided to write [a blog post and a sample project](https://thepracticaldeveloper.com/2018/03/18/spring-boot-service-discovery-eureka) to try to clarify the configuration to others. I hope it helps! =||= Thanks for your reply @mechero. But even with `eureka.instance.appname` set, the problem is still visible in the UI. The replicas do synchronize with eachother but they are not recognized as `available-replicas`. =||= @GhaTMA, I got it working with [a similar scenario](https://github.com/mechero/spring-boot-eureka), and with the replica listed as `available-replicas`, so there might be something else that is wrong in the configuration (or the setup). \r\n\r\nMy conclusions about how the logic behind Available/Unavailable replica works:\r\n* The`StatusUtil` class (check [this line](https://github.com/Netflix/eureka/blob/v1.8.6/eureka-core/src/main/java/com/netflix/eureka/util/StatusUtil.java#L75)) retrieves all instances that are registered in Eureka **with the same name** as the running instance (which are the running instance and the peer).\r\n* It then picks the one which is located at the specified `serviceUrl`. Since you need to register each instance on the peer, it picks the peer instance. \r\n\r\nYou can debug those specific lines and check if you really got two instances or just one, and then check if URLs match or not. \r\n\r\nI also included Docker configuration [in the example](https://github.com/mechero/spring-boot-eureka), so feel free to give it a try since it should work out of the box with the sample code (no need to change hostnames).  =||= @mechero: Thanks for the extensive explanation! \r\nI will look deeper into this. =||= Had the same issue as reported by OP while running 3 Eureka's in a cluster via docker-compose. Issue was resolved through setting `eureka.instance.preferIpAddress: false.`\r\n\r\nPerhaps this relates to the `eureka.client.serviceUrl.defaultZone ` containing an explicit host name (no ip address, but explictly eureka-a, eureka-b) in my docker-compose configuration: for example `eureka.client.serviceUrl.defaultZone: http://eureka-a:18671/eureka,http://eureka-b:18672/eureka` passed on as environment vars to the Eureka instance ('eureka-c' in this case). =||= ```yaml\r\neureka.instance.hostname=${spring.cloud.client.hostname} #using hostname\r\neureka.instance.prefer-ip-address=false\r\n``` =||= "], ["1009", "Add default impl to two interface methods introduced recently", "David Liu", "qiangdavidliu", "11/01/17, 06:27:02 PM", "NaN", "NaN"], ["1010", "catch potential exceptions around EurekaEventListener notify", "David Liu", "qiangdavidliu", "11/08/17, 01:00:39 AM", "NaN", "NaN"], ["1011", "Conflicting property name definitions: 'lastRenewalTimestamp'", null, "karlwanghn", "02/16/18, 12:22:09 AM", "when i deploy a war eureka app to weblogic,problems happend.\r\n\r\nCaused by: java.lang.IllegalStateException: Conflicting property name definitions: 'lastRenewalTimestamp' (for [method com.netflix.appinfo.LeaseInfo#getRenewalTimestamp(0 params)]) vs 'renewalTimestamp' (for [parameter #4, annotations: {interface com.fasterxml.jackson.annotation.JsonProperty=@com.fasterxml.jackson.annotation.JsonProperty(value=renewalTimestamp, required=false)}])\r\n\tat com.fasterxml.jackson.databind.introspect.POJOPropertyBuilder.findRenamed(POJOPropertyBuilder.java:694) ~[com.fasterxml.jackson.core.jackson-databind.jar:2.3.2]\r\n\tat com.fasterxml.jackson.databind.introspect.POJOPropertyBuilder.findNewName(POJOPropertyBuilder.java:673) ~[com.fasterxml.jackson.core.jackson-databind.jar:2.3.2]\r\n\tat com.fasterxml.jackson.databind.introspect.POJOPropertiesCollector._renameProperties(POJOPropertiesCollector.java:682) ~[com.fasterxml.jackson.core.jackson-databind.jar:2.3.2]\r\n\tat com.fasterxml.jackson.databind.introspect.POJOPropertiesCollector.collect(POJOPropertiesCollector.java:242) ~[com.fasterxml.jackson.core.jackson-databind.jar:2.3.2]\r\n\tat com.fasterxml.jackson.databind.introspect.BasicClassIntrospector.collectProperties(BasicClassIntrospector.java:142) ~[com.fasterxml.jackson.core.jackson-databind.jar:2.3.2]\r\n\tat com.fasterxml.jackson.databind.introspect.BasicClassIntrospector.forSerialization(BasicClassIntrospector.java:68) ~[com.fasterxml.jackson.core.jackson-databind.jar:2.3.2]\r\n\tat com.fasterxml.jackson.databind.introspect.BasicClassIntrospector.forSerialization(BasicClassIntrospector.java:11) ~[com.fasterxml.jackson.core.jackson-databind.jar:2.3.2]\r\n\tat com.fasterxml.jackson.databind.SerializationConfig.introspect(SerializationConfig.java:530) ~[com.fasterxml.jackson.core.jackson-databind.jar:2.3.2]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializerFactory.createSerializer(BeanSerializerFactory.java:133) ~[com.fasterxml.jackson.core.jackson-databind.jar:2.3.2]\r\n\tat com.fasterxml.jackson.databind.SerializerProvider._createUntypedSerializer(SerializerProvider.java:1077) ~[com.fasterxml.jackson.core.jackson-databind.jar:2.3.2]\r\n\tat com.fasterxml.jackson.databind.SerializerProvider._createAndCacheUntypedSerializer(SerializerProvider.java:1037) ~[com.fasterxml.jackson.core.jackson-databind.jar:2.3.2]\r\n\tat com.fasterxml.jackson.databind.SerializerProvider.findValueSerializer(SerializerProvider.java:445) ~[com.fasterxml.jackson.core.jackson-databind.jar:2.3.2]\r\n\tat com.fasterxml.jackson.databind.SerializerProvider.findTypedValueSerializer(SerializerProvider.java:599) ~[com.fasterxml.jackson.core.jackson-databind.jar:2.3.2]\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:93) ~[com.fasterxml.jackson.core.jackson-databind.jar:2.3.2]\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.writeValue(ObjectMapper.java:1837) ~[com.fasterxml.jackson.core.jackson-databind.jar:2.3.2]\r\n\tat com.fasterxml.jackson.core.base.GeneratorBase.writeObject(GeneratorBase.java:261) ~[com.fasterxml.jackson.core.jackson-core.jar:2.3.2]\r\n\tat com.fasterxml.jackson.core.JsonGenerator.writeObjectField(JsonGenerator.java:1312) ~[com.fasterxml.jackson.core.jackson-core.jar:2.3.2]\r\n\tat com.netflix.discovery.converters.EurekaJacksonCodec$InstanceInfoSerializer.serialize(EurekaJacksonCodec.java:358) ~[eureka-client-1.6.2.jar:1.6.2]\r\n\tat com.netflix.discovery.converters.EurekaJacksonCodec$InstanceInfoSerializer.serialize(EurekaJacksonCodec.java:316) ~[eureka-client-1.6.2.jar:1.6.2]\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:237) ~[com.fasterxml.jackson.core.jackson-databind.jar:2.3.2]\r\n\t... 48 common frames omitted\r", "Hi @karlwanghn you might need to update to a version of jackson that is greater than 2.3.2. Eureka currently comes with a jackson dependency of 2.8.7. =||= "], ["1012", "retryableClientQuarantineRefreshPercentage parameter should increase the verification", "saga", "holy12345", "12/12/17, 05:04:51 AM", "I was studying eureka client registered to eureka server, that there is a place in the source code can be improved\u3002\r\nAn eureka client looks for an eureka server by setting the eureka.client.service-url.defaultZone band,In my case, my properties file reads as follows:\r\n\r\n```groovy\r\nserver.port=8081\r\neureka.client.service-url.defaultZone=http://localhost:8082,http://localhost:8083,http://localhost:8084,http://localhost:8085\r\neureka.client.transport.retryableClientQuarantineRefreshPercentage=10\r\n```\r\n\r\nI know by learning the source, when eureka client starts, it will register its own information to eureka server,Specific source code is as follows RetryableEurekaHttpClient.java\r\n```java\r\n@Override\r\nprotected <R> EurekaHttpResponse<R> execute(RequestExecutor<R> requestExecutor) {\r\n    List<EurekaEndpoint> candidateHosts = null;\r\n    int endpointIdx = 0;\r\n    for (int retry = 0; retry < numberOfRetries; retry++) {\r\n        EurekaHttpClient currentHttpClient = delegate.get();\r\n        EurekaEndpoint currentEndpoint = null;\r\n        if (currentHttpClient == null) {\r\n            if (candidateHosts == null) {\r\n                candidateHosts = getHostCandidates();\r\n                if (candidateHosts.isEmpty()) {\r\n                    throw new TransportException(\"There is no known eureka server; cluster server list is empty\");\r\n                }\r\n            }\r\n            if (endpointIdx >= candidateHosts.size()) {\r\n                throw new TransportException(\"Cannot execute request on any known server\");\r\n            }\r\n\r\n            currentEndpoint = candidateHosts.get(endpointIdx++);\r\n            currentHttpClient = clientFactory.newClient(currentEndpoint);\r\n        }\r\n\r\n        try {\r\n            EurekaHttpResponse<R> response = requestExecutor.execute(currentHttpClient);\r\n            if (serverStatusEvaluator.accept(response.getStatusCode(), requestExecutor.getRequestType())) {\r\n                delegate.set(currentHttpClient);\r\n                if (retry > 0) {\r\n                    logger.info(\"Request execution succeeded on retry #{}\", retry);\r\n                }\r\n                return response;\r\n            }\r\n            logger.warn(\"Request execution failure with status code {}; retrying on another server if available\", response.getStatusCode());\r\n        } catch (Exception e) {\r\n            logger.warn(\"Request execution failed with message: {}\", e.getMessage());  // just log message as the underlying client should log the stacktrace\r\n        }\r\n\r\n        // Connection error or 5xx from the server that must be retried on another server\r\n        delegate.compareAndSet(currentHttpClient, null);\r\n        if (currentEndpoint != null) {\r\n            quarantineSet.add(currentEndpoint);\r\n        }\r\n    }\r\n    throw new TransportException(\"Retry limit reached; giving up on completing the request\");\r\n}\r\n```\r\nThe `getHostCandidates ()` method in `RetryableEurekaHttpClient.java` is getting the eureka server address to connect to this time\r\n`transportConfig.getRetryableClientQuarantineRefreshPercentage()`This parameter is configurable, as I did with the properties above (configured in the example above is 10)\r\n\r\nThen the problem is coming\uff1a\r\n\r\nThe first candidateHosts size is 3, the content is\r\n\r\n//localhost:8082,http://localhost:8083,http://localhost:8084\r\n\r\nAssuming all three eureka server services are not available.\r\n\r\nThe second time through the background tasks to re-enter the methodquarantineSet size is 3 and candidateHosts size is 1, the content is//localhost:8085.\r\n\r\nAssuming // localhost: 8085 is not available at this time.\r\n\r\nThen the third time according to the original logic should be (quarantineSet.size ()> = threshold) logic, but as eureka.client.transport.retryableClientQuarantineRefreshPercentage = 10 this parameter is set to a large, so this logic is not executed, this time candidateHosts The value of 0, since then eureka server is good, the eureka client will not be registered.\r\n\r\nMy solution is to modify the`getHostCandidates()` method\uff1a\r\n```java\r\nprivate List<EurekaEndpoint> getHostCandidates() {\r\n    List<EurekaEndpoint> candidateHosts = clusterResolver.getClusterEndpoints();\r\n    quarantineSet.retainAll(candidateHosts);\r\n\r\n    // If enough hosts are bad, we have no choice but start over again\r\n    int threshold = (int) (candidateHosts.size() * transportConfig.getRetryableClientQuarantineRefreshPercentage());\r\n    \r\n    \r\n    /*********Where I improve start************/\r\n    if (threshold > candidateHosts.size()) {\r\n  \tthreshold = candidateHosts.size();\r\n    }\r\n    /**********Where I improve end**********/\r\n\r\n    if (quarantineSet.isEmpty()) {\r\n        // no-op\r\n    } else if (quarantineSet.size() >= threshold) {\r\n        logger.debug(\"Clearing quarantined list of size {}\", quarantineSet.size());\r\n        quarantineSet.clear();\r\n    } else {\r\n        List<EurekaEndpoint> remainingHosts = new ArrayList<>(candidateHosts.size());\r\n        for (EurekaEndpoint endpoint : candidateHosts) {\r\n            if (!quarantineSet.contains(endpoint)) {\r\n                remainingHosts.add(endpoint);\r\n            }\r\n        }\r\n        candidateHosts = remainingHosts;\r\n    }\r\n\r\n    return candidateHosts;\r\n}\r\n```\r\nThe above is my confusion and given the solution, do you think so. If you also agree, I would like to submit a pr for improvement, finally thank you for your answer : ) ", "NaN"], ["1013", "The getHostCandidates method improves", "saga", "holy12345", "11/28/17, 10:09:49 PM", "Prevent retryableClientQuarantineRefreshPercentage from being greater than 1, causing Eureka Client to not register with Eureka Server\u3002\r\n\r\nCorresponding issues for https://github.com/Netflix/eureka/issues/1012", "Thanks @holy12345 . =||= @qiangdavidliu Thank you, may I ask which version of eureka can see this fix. Best wishes\uff01 =||= Hi @holy12345 we are probably going to look at some of the other outstanding PRs before a new release. This PR only adds a guard against misconfiguration (i.e. when the config value is specified incorrectly as > 1), and can be addressed for now by appropriately setting the config. Is there an urgent need for a release? Thanks. =||= @qiangdavidliu Thank you very much for your reply : )\r\nNot very urgent, but I'm worried that the user does not know the meaning of this parameter (the official document did not say.) If the value is greater than 1 may lead to some problems with the production.\r\nIn addition, I submitted two PRs(#1021 #1020), please check, if there is no problem, hope to merge it. \r\nFinally, I would like to ask you, can you give me your email address\uff1f\r\nbest wishes:) =||= "], ["1014", "NullPointerException Discovery WorkerThread Error 100% CPU", null, "Harmoney-RogerParkinson", "02/16/18, 12:22:36 AM", "Running eureka 1.4.6 on an AWS m3.xlarge. It is packaged into a docker image and run with ECS, possibly not relevant though. Every few hours is throws this error:\r\n\r\n>  java.lang.NullPointerException: null\r\n> at com.netflix.eureka.util.batcher.TaskExecutors$TaskExecutorMetrics.registerExpiryTimes(TaskExecutors.java:135)\r\n> at com.netflix.eureka.util.batcher.TaskExecutors$BatchWorkerRunnable.run(TaskExecutors.java:184)\r\n> at java.lang.Thread.run(Thread.java:748)\r\n> WARN  c.n.e.util.batcher.TaskExecutors Discovery WorkerThread error\r\n\r\nAt which point the CPU usage of that machine takes a step up from about 2.5% to 10% or 25%. A few hours later (the interval seems to be random) it does it again and eventually is running at 100%. At that point we start seeing timeouts in our logs, heartbeat requests timing out.\r\n\r\nWe run two Eureka instances, and they each have a dedicated server, so no other services are running on those servers. The other services (on other servers) are reasonably happy, they get the odd timeout on their heartbeats but they continue to handle requests and route them etc, which is pretty cool, but the errors and CPU saturation on the Eureka servers is a worry.\r\n\r\nIt looks like there's a loop in Eureka that, once it hits the NPE keeps looping in a thread, hence the incremental jumps in CPU. Has anyone seen this before? I searched, seems to be not a known problem. Thanks for any help.", "@Harmoney-RogerParkinson apologies for taking so long to take a look at this, I have submitted a PR for the fix: #1033 .\r\n\r\nFrom the stack trace I suspect is is some race condition to do with checking the isShutdown flag that results in a null `holder` which then NPEs when metrics are computed from it. =||= Merged and will be released in the next release (should be soon) =||= "], ["1015", "Updating jersey-apache-client4 ", "ameni", "ammy1999", "06/11/19, 10:20:48 PM", "Hello, \r\nI have a vulnerability  jersey-apache-client4-1.19.1.jar , CVE-2006-0550 , Severity: High( using dependency check ) \r\n\r\n> `+- org.springframework.cloud:spring-cloud-starter-eureka:jar:1.3.0.RELEASE:compile\r\n[INFO] |  +- org.springframework.cloud:spring-cloud-netflix-eureka-client:jar:1.3.0.RELEASE:compile\r\n[INFO] |  +- com.netflix.eureka:eureka-client:jar:1.6.2:compile\r\n[INFO] |  |  +- org.codehaus.jettison:jettison:jar:1.3.7:runtime\r\n[INFO] |  |  |  \\- stax:stax-api:jar:1.0.1:runtime\r\n[INFO] |  |  +- com.netflix.netflix-commons:netflix-eventbus:jar:0.3.0:runtime\r\n[INFO] |  |  |  +- com.netflix.netflix-commons:netflix-infix:jar:0.3.0:runtime\r\n[INFO] |  |  |  |  +- commons-jxpath:commons-jxpath:jar:1.3:runtime\r\n[INFO] |  |  |  |  \\- org.antlr:antlr-runtime:jar:3.4:runtime\r\n[INFO] |  |  |  |     +- org.antlr:stringtemplate:jar:3.2.1:runtime\r\n[INFO] |  |  |  |     \\- antlr:antlr:jar:2.7.7:runtime\r\n[INFO] |  |  |  \\- org.apache.commons:commons-math:jar:2.2:runtime\r\n[INFO] |  |  +- javax.ws.rs:jsr311-api:jar:1.1.1:runtime\r\n[INFO] |  |  +- com.sun.jersey:jersey-core:jar:1.19.1:runtime\r\n[INFO] |  |  +- com.sun.jersey:jersey-client:jar:1.19.1:runtime\r\n[INFO] |  |  +- com.sun.jersey.contribs:jersey-apache-client4:jar:1.19.1:runtime\r\n[INFO] |  |  +- org.apache.httpcomponents:httpclient:jar:4.5.3:runtime\r\n[INFO] |  |  |  \\- org.apache.httpcomponents:httpcore:jar:4.4.6:runtime\r\n[INFO] |  |  \\- com.google.inject:guice:jar:4.1.0:runtime\r\n\r\n\r\njersey-apache-client4 is a dependency of com.netflix.eureka:eureka-client. Any upgrades to that library??\r", "Hi I am not able to see any relation to jersey-apache-client4 from reading the CVE documentation:\r\nhttps://nvd.nist.gov/vuln/detail/CVE-2006-0550. Can you please elaborate? Thanks. =||= Hi David, I think the person above is referring to the fact Eureka uses\u00a0jersey-apache-client4 v1.19.1 which is a high severity vulnerability according to NVD (see usages https://mvnrepository.com/artifact/com.sun.jersey.contribs/jersey-apache-client4/1.19.1/usages). Are there any plans to update the\u00a0jersey-apache-client4\u00a0version in a later release of Eureka? If not, is it compatible with later versions of jersey?\r\n\r\n =||= This is a 2006 (!) report and it's not even clear if it's applicable (Oracle allegedly patched it), `v1.x` tops at `1.19.4 ` which is no different in this regard, all things considered I don't believe there's anything to do. Having said that, we would not be opposed to accepting a PR upgrading to a different major version of the client, but please open a separate issue to discuss the strategy should you decide to contribute.\r\n\r\nHope this makes sense. =||= "], ["1016", "euraka-server dashboard not working", "xuzhijing", "jimxu1982", "04/23/18, 11:30:58 PM", "\r\n<com.netflix.eureka.util.StatusInfo>\r\n  <generalStats>\r\n    <environment>test</environment>\r\n    <num-of-cpus>4</num-of-cpus>\r\n    <total-avail-memory>368mb</total-avail-memory>\r\n    <current-memory-usage>203mb (55%)</current-memory-usage>\r\n    <server-uptime>00:04</server-uptime>\r\n  </generalStats>\r\n  <applicationStats>\r\n    <registered-replicas></registered-replicas>\r\n    <available-replicas></available-replicas>\r\n    <unavailable-replicas></unavailable-replicas>\r\n  </applicationStats>\r\n  <instanceInfo>\r\n    <instanceId>XUZHIJING:eureka-server:8761</instanceId>\r\n    <hostName>localhost</hostName>\r\n    <app>EUREKA-SERVER</app>\r\n    <ipAddr>10.118.86.189</ipAddr>\r\n    <status>UP</status>\r\n    <overriddenstatus>UNKNOWN</overriddenstatus>\r\n    <port enabled=\"true\">8761</port>\r\n    <securePort enabled=\"false\">443</securePort>\r\n    <countryId>1</countryId>\r\n    <dataCenterInfo class=\"com.netflix.appinfo.InstanceInfo$DefaultDataCenterInfo\">\r\n      <name>MyOwn</name>\r\n    </dataCenterInfo>\r\n    <leaseInfo>\r\n      <renewalIntervalInSecs>30</renewalIntervalInSecs>\r\n      <durationInSecs>90</durationInSecs>\r\n      <registrationTimestamp>0</registrationTimestamp>\r\n      <lastRenewalTimestamp>0</lastRenewalTimestamp>\r\n      <evictionTimestamp>0</evictionTimestamp>\r\n      <serviceUpTimestamp>0</serviceUpTimestamp>\r\n    </leaseInfo>\r\n    <metadata class=\"java.util.Collections$EmptyMap\"/>\r\n    <homePageUrl>http://localhost:8761/</homePageUrl>\r\n    <statusPageUrl>http://localhost:8761/info</statusPageUrl>\r\n    <healthCheckUrl>http://localhost:8761/health</healthCheckUrl>\r\n    <vipAddress>eureka-server</vipAddress>\r\n    <secureVipAddress>eureka-server</secureVipAddress>\r\n    <isCoordinatingDiscoveryServer>false</isCoordinatingDiscoveryServer>\r\n    <lastUpdatedTimestamp>1511512774606</lastUpdatedTimestamp>\r\n    <lastDirtyTimestamp>1511512775037</lastDirtyTimestamp>\r\n  </instanceInfo>\r\n</com.netflix.eureka.util.StatusInfo>", "Hi, can you please add some additional details to describe your issue? Thanks =||= "], ["1017", "Increase the catch exception code", "saga", "holy12345", "11/28/17, 10:12:52 PM", "Increase the catch exception code to ensure that when the exception occurs can be friendly to return to the client side", "@qiangdavidliu Hello, hope to pass this pr, the best wishes =||= Thanks @holy12345  =||= "], ["1019", "Confused about the ReadWriteLock within AbstractInstanceRegistry", "\u5e72\u8d27\u6ee1\u6ee1\u5f20\u54c8\u5e0c", "HashZhang", "11/28/17, 04:23:45 AM", "Why Read lock is used in update operations (such as register, renew and etc.) while the write lock is used in read operations(such as getDelta, getApps)\r\n\r\nSo confused about it and the write lock may cause the efficiency problem", "I got it.TKS~ =||= "], ["1020", "Modify updateRenewalThreshold method", "saga", "holy12345", "04/26/18, 07:14:06 AM", "Hello, According to my understanding eureka deletes the client that did not send the heartbeat  by `AbstractInstanceRegistry#evict () `method.However, `numberOfRenewsPerMinThreshold` and `expectedNumberOfRenewsPerMin` are not updated immediately. Update these two parameters is carried out in a regular task. The specific code of this task is as follows\uff1a\r\n` PeerAwareInstanceRegistryImpl#updateRenewalThreshold()` \r\n\r\n```\r\n    private void updateRenewalThreshold() {\r\n        try {\r\n            Applications apps = eurekaClient.getApplications();\r\n            int count = 0;\r\n            for (Application app : apps.getRegisteredApplications()) {\r\n                for (InstanceInfo instance : app.getInstances()) {\r\n                    if (this.isRegisterable(instance)) {\r\n                        ++count;\r\n                    }\r\n                }\r\n            }\r\n            synchronized (lock) {\r\n                // Update threshold only if the threshold is greater than the\r\n                // current expected threshold of if the self preservation is disabled.\r\n                if ((count * 2) > (serverConfig.getRenewalPercentThreshold() * numberOfRenewsPerMinThreshold)\r\n                        || (!this.isSelfPreservationModeEnabled())) {\r\n                    this.expectedNumberOfRenewsPerMin = count * 2;\r\n                    this.numberOfRenewsPerMinThreshold = (int) ((count * 2) * serverConfig.getRenewalPercentThreshold());\r\n                }\r\n            }\r\n            logger.info(\"Current renewal threshold is : {}\", numberOfRenewsPerMinThreshold);\r\n        } catch (Throwable e) {\r\n            logger.error(\"Cannot update renewal threshold\", e);\r\n        }\r\n    }\r\n```\r\n\r\nAccording to my understanding, the logic of this method is this:\r\nFirst, get the number of instances registered in Eureka Server. \r\nThen make a decision to decide whether to update `numberOfRenewsPerMinThreshold` and `expectedNumberOfRenewsPerMin`.\r\nThen the problem is coming:\r\nThe first if expression` (count * 2)> (serverConfig.getRenewalPercentThreshold () * numberOfRenewsPerMinThreshold)` I think it is not accurate\u3002\r\nBecause I understand every 15 minutes will recalculate the threshold, if at this time the number of registered instances did not reduce to 85% of the last time registered instance, it will recalculate\u3002because `numberOfRenewsPerMinThreshold = expectedNumberOfRenewsPerMin * serverConfig.getRenewalPercentThreshold ()` so the above judgment is equivalent to ` (count * 2)> (serverConfig.getRenewalPercentThreshold () * serverConfig.getRenewalPercentThreshold () * expectedNumberOfRenewsPerMin)`this is not right\u3002\r\nshould be `serverConfig.getRenewalPercentThreshold () * expectedNumberOfRenewsPerMin`\uff0cso I submitted a PR, hoping to solve this problem. Maybe my understanding is wrong, I hope you can answer me. Thank you very much, best wishes", "@qiangdavidliu Hello, look forward to your reply, thank you very much, best wishes\uff01 =||= @qiangdavidliu Hello, can you review this PR? Thank you, best wishes \uff1a) =||= @qiangdavidliu  ping... =||= @holy12345 thanks for the PR, you logic seems sound and there does seem to be an error in the code. Before I merge in your fix however, I'd appreciate it if you added a unit test that assert and validate the expected behaviour? Thanks. =||= Hello @qiangdavidliu \r\nThank you for your answer, probably because my English is not very good and did not express clearly. Please forgive me if you have caused any confusion.\r\nNow I re-answer the following(Reference eureka official document sentence):\r\n`If any time, the renewals falls below the percent configured for that value (below 85% within 15 mins), the server stops expiring instances to protect the current instance registry information.`\r\nThis sentence has two main points:\r\n\r\n- Whether to open the self-preservation mechanism (If not then in any case be updated)\r\n\r\n- Currently, the number of Eureka Clients with normal heartbeat accounts for more than 85% of Eureka Server's total storage\r\n\r\nThe code to accomplish the above two key points is as follows:\r\n```\r\n         if ((count * 2) > (serverConfig.getRenewalPercentThreshold() * numberOfRenewsPerMinThreshold)\r\n                    || (!this.isSelfPreservationModeEnabled())) {\r\n                this.expectedNumberOfRenewsPerMin = count * 2;\r\n                this.numberOfRenewsPerMinThreshold = (int) ((count * 2) * serverConfig.getRenewalPercentThreshold());\r\n        }\r\n```\r\nMy understanding is as follows:\r\nIf you turn off self-preservation, these two parameters are updated under any circumstances.\r\nIf we open the self-preservation, then only if  the number of Eureka Clients with normal heartbeat accounts for more than 85% of Eureka Server's total storage will be updated.\r\nWhat I think is the problem is the formula in the code `(count * 2) > (serverConfig.getRenewalPercentThreshold() * numberOfRenewsPerMinThreshold)`\r\nIn my opinion it should be  `(count * 2) > (serverConfig.getRenewalPercentThreshold() * expectedNumberOfRenewsPerMin)`\r\n\r\nMaybe my understanding is not correct, I hope you can help me. Any one of your answers are a great encouragement to me, thanks again\r\n =||= Hi @holy12345 I do think your logic sounds correct. I would however appreciate if you added some unit tests in your PR to explicitly check for and verify the appropriate behaviour with the change. Thanks. =||= Hi @qiangdavidliu \r\nThank you for your reply, thank you very much.\r\nI will try to validate my logic by adding test code because the update is done in a thread and I currently have no idea how to test it(These days I have been looking for ways  but unfortunately did not find) .but do not worry I'm trying to figure out how to solve this problem =||= Hi @qiangdavidliu \r\nFirst of all, I'm sorry. I've been very busy before and I haven't updated this question.I think I'll close it f and when I think of a solution, I'll reopen it.\r\nThanks again : ) =||= @holy12345 no worries, thanks. =||= "], ["1021", "Use a more elegant way to judge", "saga", "holy12345", "12/18/17, 06:32:46 PM", "Use `list.isEmpty ()` instead of `list.size>0` to make it more elegant.", "Hi, we'd like to move away from using author tags as these can get confusing w.r.t. maintenance down the track. Otherwise, the PR looks good. Thanks. =||= @qiangdavidliu Okay, I removed it as you suggested. I apologize for the troubles caused to you. Thank you =||= No problem, thanks for the PR. =||= "], ["1022", "Set up xstream security framework", "David Liu", "qiangdavidliu", "12/12/17, 09:52:55 PM", "NaN", "NaN"], ["1023", "Avoid scheduling when DiscoveryClient.shutdown called (fix for #973)", "Chase Diem", "abracadv8", "12/13/17, 12:41:25 AM", "Based off code cleanup comments for pull #974, this should fix #973.\r\n\r\n`awaitTermination` should block until the  DOWN replication thread is completed before finishing shutdown/registration.  This should prevent race conditions between registration:DOWN and de-register.", "@abracadv8 thanks. Looks good. =||= "], ["1024", "Eureka : Connection Refused when we set eureka.client.register-with-eureka=true", null, "basiths", "02/15/18, 09:11:53 PM", "Hi, \r\n\r\nI need to setup the Eureka with high availability (2 nodes). Can you please have a look at the below configuration and let me know if this enables the replication and high availability for eureka.\r\n\r\neureka-application.properties from node1:\r\n\r\nspring.profiles=hostname01.corp.com\r\nserver.address=hostname01.corp.com\r\n\r\neureka.environment=test\r\neureka.datacenter=dc\r\neureka.name=eureka\r\nserver.contextPath=/eureka\r\nspring.application.name=eureka-service\r\n\r\neureka.server.registry-sync-retry-wait-ms=500\r\neureka.server.registry-sync-retries=3\r\neureka.server.a-sgcache-expiry-timeout-ms=60000\r\neureka.server.eviction-interval-timer-in-ms=30000\r\neureka.server.peer-eureka-nodes-update-interval-ms=15000\r\neureka.server.renewal-threshold-update-interval-ms=300000\r\neureka.server.enableSelfPreservation=true\r\n\r\neureka.client.healthcheck.enabled=true\r\neureka.client.prefer-same-zone-eureka=true\r\neureka.client.serviceUrl.defaultZone=http://hostname01.corp.com/eureka/eureka/\r\neureka.client.register-with-eureka=true\r\neureka.client.fetch-registry=true\r\n\r\nendpoints.shutdown.sensitive=false\r\nendpoints.shutdown.enabled=true\r\n\r\neureka.instance.appname=${spring.application.name}\r\neureka.instance.preferIpAddress=false\r\nendpoints.health.sensitive=false\r\nspring.cloud.config.discovery.enabled=true\r\n\r\neureka-application.properties from node2:\r\n\r\nspring.profiles=hostname02.corp.com\r\nserver.address=hostname02.corp.com\r\n\r\neureka.environment=test\r\neureka.datacenter=dc\r\neureka.name=eureka\r\nserver.contextPath=/eureka\r\nspring.application.name=eureka-service\r\n\r\neureka.server.registry-sync-retry-wait-ms=500\r\neureka.server.registry-sync-retries=3\r\neureka.server.a-sgcache-expiry-timeout-ms=60000\r\neureka.server.eviction-interval-timer-in-ms=30000\r\neureka.server.peer-eureka-nodes-update-interval-ms=15000\r\neureka.server.renewal-threshold-update-interval-ms=300000\r\neureka.server.enableSelfPreservation=true\r\n\r\neureka.client.healthcheck.enabled=true\r\neureka.client.prefer-same-zone-eureka=true\r\neureka.client.serviceUrl.defaultZone=http://hostname02.corp.com/eureka/eureka/\r\neureka.client.register-with-eureka=true\r\neureka.client.fetch-registry=true\r\n\r\nendpoints.shutdown.sensitive=false\r\nendpoints.shutdown.enabled=true\r\n\r\neureka.instance.appname=${spring.application.name}\r\neureka.instance.preferIpAddress=false\r\nendpoints.health.sensitive=false\r\nspring.cloud.config.discovery.enabled=true\r\n\r\n\r\nQuestions : \r\ni) If I use eureka.client.serviceUrl.defaultZone=http://hostname02.corp.com/eureka/eureka/ in node1, while starting the instance, its giving connection refused then connecting it after some time. Can we fix this behavior.\r\n\r\nii) If I use eureka.instance.hostName=hostname01.corp.com parameter in node1, the DS replication is not working.\r\n\r\niii) The eureka portal is not displaying the available-replicas. Because Instances currently registered with Eureka\" is registering the client as \"hostname02\" instead of \"hostname02.corp.com\". Is there a option to fix this.\r\n\r\niv) If I set eureka.client.fetch-registry=true, during the startup its throwing the connection refused exception.\r\n\r\n2017-12-15 22:52:12.254  WARN 27995 --- [           main] c.n.d.s.t.d.RetryableEurekaHttpClient    : Request execution failure\r\n2017-12-15 22:52:12.256 ERROR 27995 --- [           main] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_EUREKA-SERVICE/hostname01:eureka-service:10080 - was unable to refresh its cache! status = Cannot execute request on any known server\r\n\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111) ~[eureka-client-1.4.12.jar!/:1.4.12]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.4.12.jar!/:1.4.12]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137) ~[eureka-client-1.4.12.jar!/:1.4.12]\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.4.12.jar!/:1.4.12]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.4.12.jar!/:1.4.12]\r\n        at com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1030) [eureka-client-1.4.12.jar!/:1.4.12]\r\n        at com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:944) [eureka-client-1.4.12.jar!/:1.4.12]\r\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:444) [eureka-client-1.4.12.jar!/:1.4.12]\r\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:304) [eureka-client-1.4.12.jar!/:1.4.12]\r\n\r\n\r\nCan you please help me to fix this issues.", "Hi @basiths please check to see if this document help to address your questions:\r\nhttp://cloud.spring.io/spring-cloud-static/spring-cloud.html#_peer_awareness\r\n\r\nThanks. =||= "], ["1025", "com.netflix.discovery.InstanceInfoReplicator.onDemandUpdate() thow RejectedExecutionException", null, "riyueshiwang", "01/30/18, 06:50:20 PM", "hi, i am using `com.netflix.eureka:eureka-client:1.6.2.jar` within spring cloud.  when the method `org.springframework.cloud.context.scope.refresh.RefreshScope.refreshAll()` was invoked, the following exception occurred.\r\n i guessed that the method `com.netflix.discovery.InstanceInfoReplicator.start(int initialDelayMs)` had not been invoked before the method `com.netflix.discovery.InstanceInfoReplicator.onDemandUpdate()` did.\r\nwas it all right\uff1f\r\n\r\n`2017-12-19 16:08:42.090 ERROR [lego-config,,,] 16808 --- [Apollo-Config-1] c.c.f.apollo.internals.AbstractConfig    : Failed to invoke config change listener com.iqiyi.solar.config.client.CloudConfig$1\r\n\r\njava.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@2bc7b30e rejected from java.util.concurrent.ScheduledThreadPoolExecutor@31c8bd8b[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 4]\r\n\tat java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2063)\r\n\tat java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:830)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:326)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:533)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor.submit(ScheduledThreadPoolExecutor.java:632)\r\n\tat com.netflix.discovery.InstanceInfoReplicator.onDemandUpdate(InstanceInfoReplicator.java:77)\r\n\tat com.netflix.discovery.DiscoveryClient.registerHealthCheck(DiscoveryClient.java:618)\r\n\tat com.netflix.discovery.DiscoveryClient$$FastClassBySpringCGLIB$$a84c8cb4.invoke(<generated>)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.cloud.context.config.StandardBeanLifecycleDecorator$2.invoke(StandardBeanLifecycleDecorator.java:85)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)\r\n\tat org.springframework.cloud.netflix.eureka.CloudEurekaClient$$EnhancerBySpringCGLIB$$903db4cd.registerHealthCheck(<generated>)\r\n\tat org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry.register(EurekaServiceRegistry.java:49)\r\n\tat org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration.start(EurekaAutoServiceRegistration.java:73)\r\n\tat org.springframework.cloud.netflix.eureka.EurekaDiscoveryClientConfiguration$EurekaClientConfigurationRefresher.onApplicationEvent(EurekaDiscoveryClientConfiguration.java:79)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:256)\r\n\tat org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:177)\r\n\tat org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:140)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:167)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\r\n\tat org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:393)\r\n\tat org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:347)\r\n\tat org.springframework.cloud.context.scope.refresh.RefreshScope.refreshAll(RefreshScope.java:146)\r\n\tat com.iqiyi.lego.config.IqiyiConfigConfiguration.onApplicationConfigChange(IqiyiConfigConfiguration.java:30)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:216)\r\n\tat com.iqiyi.solar.config.client.spring.annotation.CloudConfigAnnotationProcessor$1.onChange(CloudConfigAnnotationProcessor.java:70)\r\n\tat com.iqiyi.solar.config.client.CloudConfig$1.onChange(CloudConfig.java:202)\r\n\tat com.ctrip.framework.apollo.internals.AbstractConfig$2.run(AbstractConfig.java:404)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)`", "NaN"], ["1026", "Get dataCenterInfo when need it && fix typo", "Panmax", "Panmax", "01/30/18, 06:51:43 PM", "NaN", "Thanks for the contribution @Panmax  =||= "], ["1027", "Clent Event listener from eureka server.", "Anton Mushin", "ex00", "02/16/18, 12:55:00 PM", "Hi.\r\nI have issue: \r\nOn eureka client site I have logic is related with some services. This logic have same actions for different services - get url to service from eureka and call rest endpoint a service.\r\n\r\nAnd I would want to know about other new connected service to eureka server via events is coming from server. Is it possible?", "Hi @ex00 the java eureka client provides an event interface `eurekaClient.registerEventListener` that allows you to listen to eureka update events. Under the hood, the client/server communication is still poll based however. =||= Hi @qiangdavidliu \r\nThanks for you reply! Do you talk about EurekaEvent?\r\nI woluld like register listener for events about register new application in server. Wich implementation of EurekaEvent I could use for it?\r\n\r\n =||= Hi, you might want to take a look at [CacheRefreshedEvent](https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/CacheRefreshedEvent.java), which is generated each time the client receives an update. If you want to look into specifics however, you'll have to implement that logic when the event is triggered. =||= I changed logic of my application and this issue is not actual already. Thaks for help! =||= "], ["1029", "Verify if scheduler is active before submit new task", "Tomasz Juchniewicz", "tjuchniewicz", "01/30/18, 06:50:20 PM", "Fixes gh-1025.", "Looks good, thanks for the contribution @tjuchniewicz  =||= "], ["1030", "Add an EurekaInstanceInfoFactory abstraction to the creation of the initial internal InstanceInfo", "David Liu", "qiangdavidliu", "02/08/18, 08:43:05 PM", "NaN", "Would you be willing to add support for the non-DI `initComponent` flows as well?\r\n\r\nhttps://github.com/Netflix/eureka/blob/v1.8.6/eureka-client/src/main/java/com/netflix/discovery/DiscoveryManager.java#L77 =||= @mattnelson good catch, let me do that. =||= @mattnelson this work was for some internal refactoring that we needed. However after doing some testing the PR as it stands does not quite work for us and I will probably close this. Is this something you are interested in, or something you need? =||= @qiangdavidliu I don't need it, only wanted to make sure that the other init flows were covered. =||= "], ["1031", "prevent replication flood caused by socket read time out leads to some node CPU 100%", null, "skyesx", "02/12/18, 08:53:18 PM", "when the instance become more then 3k,the batch replicated operation become easier to timeout.\r\nbecause the replication request sender will retry the replication soon,it leads to a flood.\r\nWhen it's happend,it appears to some eureka node ocupied 100% CPU and stucked.\r\nThis commit will help reduce the sympton,and write a clear log message to help debug.\r\n\r\nBy the way , i suggest to allow user to config the Congestion and TransientError retry delay time", "@skyesx thanks for the PR, this looks quite reasonable. Out of curiosity is this something that you have ran into in a deployed setup? =||= It didn't happen in our product environment.But it had  happen in our stress and develop environment.It's going to happen when 2K or more instances are registed in stress environment.In our develop environment , it happened once,  with nearly 1k instances, it last for a period of time, and then it recovered automatically . =||= Thanks @skyesx  =||= "], ["1032", "Broken link to 'EurekaServerConfig' section from 'Configuring Eureka' Wiki section", "Victor M.", "Victoremepunto", "02/15/18, 09:04:36 PM", "The link to EurekaServerConfig javadoc is broken, drops 404 => http://netflix.github.io/eureka/javadoc/eureka-core/com/netflix/eureka/EurekaServerConfig.html\r\n\r\nThe source link is in the main page of the section 'Configuring Eureka' of the Wiki.\r\n \r\nI think is the same issue described in the already closed #775 ", "Hi @Victoremepunto we don't maintain the javadoc html for eureka at that url any more unfortunately. The javadocs are still present on the interface and I have updated the link from the wiki page to point to that. =||= "], ["1033", "fix potential NPE for issue #1014", "David Liu", "qiangdavidliu", "02/15/18, 11:34:33 PM", "fix for #1014 ", "NaN"], ["1034", "probation list or vetting time for registering instances", null, "SyCode7", "04/23/18, 11:30:02 PM", "Hi, I searched without success for a feature that permits Eureka server to add an instance to temporary network until the end of some dort of check e.g verification test. The idea is not to reject the request, assign the instance temporary metadata e.g. port, host that allows for inspection/verification while not yet registered. Instance may be registered if it passes those test and assigned to correct/productive metadata. \r\n\r\nI am experimenting with the setting the instance status as `STARTING `. for example \r\n`info.setStatus(com.netflix.appinfo.InstanceInfo.InstanceStatus.STARTING);`\r\nWill there be a better solution ?", "@SyCode7 I'm not sure I 100% understand your request, but I don't think we have anything in mind to support your exact request. What we do with our server framework internally, is that all applications start up in the STARTING state, and once ready, their UP/DOWN status is tied to the application's healthcheck state. This should offer similar functionality to what you request I think? =||= "], ["1035", "gradle build error ,nebula.netflixoss error", null, "lovelivestyle1102", "05/30/19, 11:12:11 PM", "I use Gradle to build the Eureka but failed, when I download the source.\r\norg.gradle.api.ProjectConfigurationException: A problem occurred configuring root project 'eureka'.\r\n\tat org.gradle.configuration.project.LifecycleProjectEvaluator.addConfigurationFailure(LifecycleProjectEvaluator.java:79)\r\n\tat org.gradle.configuration.project.LifecycleProjectEvaluator.evaluate(LifecycleProjectEvaluator.java:57)\r\n\tat org.gradle.api.internal.project.AbstractProject.evaluate(AbstractProject.java:540)\r\n\tat org.gradle.api.internal.project.AbstractProject.evaluate(AbstractProject.java:93)\r\n\tat org.gradle.execution.TaskPathProjectEvaluator.configureHierarchy(TaskPathProjectEvaluator.java:42)\r\n\tat org.gradle.configuration.DefaultBuildConfigurer.configure(DefaultBuildConfigurer.java:35)\r\n\tat org.gradle.initialization.DefaultGradleLauncher$2.run(DefaultGradleLauncher.java:124)\r\n\tat org.gradle.internal.Factories$1.create(Factories.java:22)\r\n\tat org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:91)\r\n\tat org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:53)\r\n\tat org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:121)\r\n\tat org.gradle.initialization.DefaultGradleLauncher.access$200(DefaultGradleLauncher.java:32)\r\n\tat org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:98)\r\n\tat org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:92)\r\n\tat org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:91)\r\n\tat org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:63)\r\n\tat org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:92)\r\n\tat org.gradle.initialization.DefaultGradleLauncher.getBuildAnalysis(DefaultGradleLauncher.java:88)\r\n\tat org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.configure(InProcessBuildActionExecuter.java:107)\r\n\tat org.gradle.tooling.internal.provider.runner.ClientProvidedBuildActionRunner.run(ClientProvidedBuildActionRunner.java:45)\r\n\tat org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\r\n\tat org.gradle.tooling.internal.provider.runner.SubscribableBuildActionRunner.run(SubscribableBuildActionRunner.java:58)\r\n\tat org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\r\n\tat org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:48)\r\n\tat org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:30)\r\n\tat org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:81)\r\n\tat org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:46)\r\n\tat org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:52)\r\n\tat org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:37)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\r\n\tat org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\r\n\tat org.gradle.util.Swapper.swap(Swapper.java:38)\r\n\tat org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.health.DaemonHealthTracker.execute(DaemonHealthTracker.java:47)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:60)\r\n\tat org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:72)\r\n\tat org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.health.HintGCAfterBuild.execute(HintGCAfterBuild.java:41)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\r\n\tat org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:237)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:54)\r\n\tat org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:40)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: org.gradle.internal.exceptions.LocationAwareException: Build file 'E:\\eclipse-space\\git_space\\eureka-master\\build.gradle' line: 10\r\nAn exception occurred applying plugin request [id: 'nebula.netflixoss', version: '3.6.0']\r\n\tat org.gradle.plugin.use.internal.DefaultPluginRequestApplicator.applyPlugin(DefaultPluginRequestApplicator.java:219)\r\n\tat org.gradle.plugin.use.internal.DefaultPluginRequestApplicator.applyPlugins(DefaultPluginRequestApplicator.java:168)\r\n\tat org.gradle.configuration.DefaultScriptPluginFactory$ScriptPluginImpl.apply(DefaultScriptPluginFactory.java:157)\r\n\tat org.gradle.configuration.project.BuildScriptProcessor.execute(BuildScriptProcessor.java:38)\r\n\tat org.gradle.configuration.project.BuildScriptProcessor.execute(BuildScriptProcessor.java:25)\r\n\tat org.gradle.configuration.project.ConfigureActionsProjectEvaluator.evaluate(ConfigureActionsProjectEvaluator.java:34)\r\n\tat org.gradle.configuration.project.LifecycleProjectEvaluator.evaluate(LifecycleProjectEvaluator.java:55)\r\n\t... 56 more\r\nCaused by: org.gradle.api.plugins.InvalidPluginException: An exception occurred applying plugin request [id: 'nebula.netflixoss', version: '3.6.0']\r\n\tat org.gradle.plugin.use.internal.DefaultPluginRequestApplicator.applyPlugin(DefaultPluginRequestApplicator.java:216)\r\n\t... 62 more\r\nCaused by: org.gradle.api.internal.plugins.PluginApplicationException: Failed to apply plugin [id 'nebula.netflixoss']\r\n\tat org.gradle.api.internal.plugins.DefaultPluginManager.doApply(DefaultPluginManager.java:153)\r\n\tat org.gradle.api.internal.plugins.DefaultPluginManager.apply(DefaultPluginManager.java:112)\r\n\tat org.gradle.plugin.use.internal.DefaultPluginRequestApplicator$5.run(DefaultPluginRequestApplicator.java:170)\r\n\tat org.gradle.plugin.use.internal.DefaultPluginRequestApplicator.applyPlugin(DefaultPluginRequestApplicator.java:204)\r\n\t... 62 more\r\nCaused by: java.lang.NullPointerException: Cannot set property 'defaultVersionStrategy' on null object\r\n\tat org.codehaus.groovy.runtime.NullObject.setProperty(NullObject.java:80)\r\n\tat org.codehaus.groovy.runtime.InvokerHelper.setProperty(InvokerHelper.java:195)\r\n\tat groovy.lang.Closure.setPropertyTryThese(Closure.java:396)\r\n\tat groovy.lang.Closure.setPropertyOwnerFirst(Closure.java:385)\r\n\tat groovy.lang.Closure.setPropertyDelegateFirst(Closure.java:380)\r\n\tat groovy.lang.Closure.setProperty(Closure.java:362)\r\n\tat org.codehaus.groovy.runtime.ScriptBytecodeAdapter.setGroovyObjectProperty(ScriptBytecodeAdapter.java:532)\r\n\tat nebula.plugin.netflixossproject.NetflixOssProjectPlugin$_apply_closure1.doCall(NetflixOssProjectPlugin.groovy:55)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:483)\r\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:93)\r\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:325)\r\n\tat org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:294)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1019)\r\n\tat groovy.lang.Closure.call(Closure.java:426)\r\n\tat groovy.lang.Closure.call(Closure.java:442)\r\n\tat org.codehaus.groovy.runtime.DefaultGroovyMethods.with(DefaultGroovyMethods.java:241)\r\n\tat org.codehaus.groovy.runtime.NullObject.with(NullObject.java:70)\r\n\tat org.codehaus.groovy.runtime.NullObject$with.call(Unknown Source)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)\r\n\tat org.codehaus.groovy.runtime.callsite.NullCallSite.call(NullCallSite.java:35)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)\r\n\tat org.codehaus.groovy.runtime.NullObject$with.call(Unknown Source)\r\n\tat nebula.plugin.netflixossproject.NetflixOssProjectPlugin.apply(NetflixOssProjectPlugin.groovy:54)\r\n\tat nebula.plugin.netflixossproject.NetflixOssProjectPlugin.apply(NetflixOssProjectPlugin.groovy)\r\n\tat org.gradle.api.internal.plugins.ImperativeOnlyPluginApplicator.applyImperative(ImperativeOnlyPluginApplicator.java:35)\r\n\tat org.gradle.api.internal.plugins.RuleBasedPluginApplicator.applyImperative(RuleBasedPluginApplicator.java:43)\r\n\tat org.gradle.api.internal.plugins.DefaultPluginManager.doApply(DefaultPluginManager.java:137)\r\n\t... 65 more\r", "Hi @lovelivestyle1102 are you still running into this error? Thanks. =||= Try the latest version of nebula.netflixoss.\r\nhttps://plugins.gradle.org/plugin/nebula.netflixoss =||= "], ["1036", "Jersey2ReplicationClient is not ready for error responses with body", "Mikhail Gromov", "mgtriffid", "05/30/19, 11:12:11 PM", "**Preconditions:**\r\nCluster of custom Eureka servers using eureka-core 1.1.131 (dropwizard-based). And resource `/peerreplication/batch` is not registered on those servers, so fallback to one-by-one task is required for replication to work.\r\n**What I do:**\r\nAdd updated Eureka server to the cluster. New server has version 1.8.6 of Eureka libraries and uses Jersey 2 client. And `/peerreplication/batch` resource is registered this time.\r\n**What I expect:**\r\nReplication from old Eureka to new Eureka works because there is replication resource\r\nReplication from new Eureka to old Eureka works because though there is no replication resource on old Eureka, new Eureka performs fallback to one-by-one replication\r\n**What I get instead:**\r\nReplication from old Eureka to new Eureka works because there is replication resource\r\nReplication from new Eureka to old Eureka doesn't work and I see an exception:\r\n```\r\njavax.ws.rs.ProcessingException: Error closing message content input stream.\r\nat org.glassfish.jersey.message.internal.EntityInputStream.close(EntityInputStream.java:161)\r\nat org.glassfish.jersey.message.internal.InboundMessageContext$EntityContent.close(InboundMessageContext.java:156)\r\nat org.glassfish.jersey.message.internal.InboundMessageContext.close(InboundMessageContext.java:939)\r\nat org.glassfish.jersey.client.InboundJaxrsResponse.close(InboundJaxrsResponse.java:167)\r\nat com.netflix.eureka.transport.Jersey2ReplicationClient.submitBatchUpdates(Jersey2ReplicationClient.java:124)\r\nat com.netflix.eureka.cluster.ReplicationTaskProcessor.process(ReplicationTaskProcessor.java:72)\r\nat com.netflix.eureka.util.batcher.TaskExecutors$BatchWorkerRunnable.run(TaskExecutors.java:187)\r\nat java.lang.Thread.run(Thread.java:748)\r\nCaused by: org.apache.http.ConnectionClosedException: Premature end of Content-Length delimited message body (expected: 196; received: 0\r\nat org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:180)\r\nat org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:200)\r\nat org.apache.http.impl.io.ContentLengthInputStream.close(ContentLengthInputStream.java:103)\r\nat org.apache.http.impl.execchain.ResponseEntityProxy.streamClosed(ResponseEntityProxy.java:140)\r\nat org.apache.http.conn.EofSensorInputStream.checkClose(EofSensorInputStream.java:228)\r\nat org.apache.http.conn.EofSensorInputStream.close(EofSensorInputStream.java:174)\r\nat java.io.BufferedInputStream.close(BufferedInputStream.java:483)\r\nat java.io.FilterInputStream.close(FilterInputStream.java:181)\r\nat org.glassfish.jersey.apache.connector.ApacheConnector$3.close(ApacheConnector.java:644)\r\nat java.io.FilterInputStream.close(FilterInputStream.java:181)\r\nat org.glassfish.jersey.apache.connector.ApacheConnector$HttpClientResponseInputStream.close(ApacheConnector.java:621)\r\nat org.glassfish.jersey.message.internal.EntityInputStream.close(EntityInputStream.java:158)\r\n... 7 common frames omitted\r\n```\r\n\r\nFirst, a quick question: could you please tell, is there actually a fallback from batched to one-by-one replication in Eureka 1.8.6? I couldn't find it in code, though definitely saw it in older versions, like 1.1.126.\r\n\r\nSecond, looks like Jersey2ReplicationClient is not ready to 404 with body. In that case when we call `response.close()` in line 124 https://github.com/Netflix/eureka/blob/master/eureka-core-jersey2/src/main/java/com/netflix/eureka/transport/Jersey2ReplicationClient.java#L124 , Jersey issue https://github.com/jersey/jersey/issues/3486 arises, and exception is being rethrown from `finally` block. Because `if (!isSuccess(response))`, we don't consume body. I understand that having peer Eureka which returns error with body is quite an unusual case, but maybe it is worth caring. But not sure yet how.\r\nAnd even if there is a fallback to one-by-one replication, it will unlikely work, because when exception is thrown from `finally`, code is usually not ready to handle it.\r\n\r\n// cc @NZvereff", "Anything about this? =||= Hi is this the same problem as the (more general) issue described at #1039? =||= "], ["1037", "Too many threads created for DiscoveryClient", "Fahim Farook", "fahimfarookme", "05/30/19, 11:12:11 PM", "We observed that too many threads created with the name `DiscoveryClient`. PFB the thread counts created for running around 27 microservice instances (eureka clients) in a managed server.\r\n\r\n|Thread Name|Count|\r\n|---|---|\r\n|DiscoveryClient-%d | 84|\r\n|DiscoveryClient-CacheRefreshExecutor-%d | 28|\r\n|DiscoveryClient-HeartbeatExecutor-%d | 27|\r\n|DiscoveryClient-InstanceInfoReplicator-%d | 27|\r\n\r\nI have defined the `maximumPoolSize` for `HeartbeatExecutor` and `CacheRefreshExecutor` as 2, however they were created only 1 per microservice instance.\r\n\r\n1. Even though the [pool size of DiscoveryClient scheduler is 2](https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/DiscoveryClient.java#L373), it was always resulted in 3  DiscoveryClient threads per discovery client. I couldn't find any other reference to DiscoveryClient  executor as well.\r\n\r\n2. From an initial analysis looks like it's possible to get rid of `DiscoveryClient` threads if `DiscoveryClient-CacheRefreshExecutor` and `DiscoveryClient-HeartbeatExecutor` are defined as `ScheduledThreadPoolExecutor` (rather than `ThreadPoolExecutor`). i.e. similar to the approach followed for `InstanceInfoReplicator`. ", "+1 =||= @fahimfarookme thanks for the data, we will take a look at this. =||= "], ["1038", "i cont inject EurekaJerseyClient bean into  DiscoveryClient.java#L270", "yangxinzhao", "YangGuang001", "04/23/18, 11:24:57 PM", "https://github.com/Netflix/eureka/blob/3a744ee88274e70324958bc996b33c29f16a872d/eureka-client/src/main/java/com/netflix/discovery/DiscoveryClient.java#L270\r\n\r\n```java\r\n@Configuration\r\npublic class EurekaJerseyClientAdapter\r\n{\r\n    @Bean\r\n    @ConditionalOnMissingBean\r\n    public EurekaJerseyClient eurekaJerseyClient()\r\n    {\r\n        EurekaJerseyClientImpl.EurekaJerseyClientBuilder builder = new\r\n        EurekaJerseyClientImpl.EurekaJerseyClientBuilder()\r\n                .withClientName(\"server\")\r\n                .withMaxConnectionsPerHost(256)\r\n                .withTrustStoreFile(\"client.truststore\",\"123456\");\r\n        return builder.build();\r\n    }\r\n}\r\n```\r\nin my springboot project:\r\ncom.itmuch.cloud.study\r\ncom.itmuch.cloud.study.ConsumerMovieApplication\r\ncom.itmuch.cloud.study.EurekaJerseyClientAdapter\r\n\r\ni cont inject EurekaJerseyClient bean into  DiscoveryClient.java#L270\r\nso it used to init com.netflix.discovery.shared.transport.jersey.EurekaJerseyClientImpl.EurekaJerseyClientBuilder.MyDefaultApacheHttpClient4Config#createDefaultSslCM, but i dont want it.", "@YangGuang001 this seem more related to spring boot integration with eureka. Please try at https://github.com/spring-cloud/spring-cloud-netflix. Thanks. =||= "], ["1039", "Was replication protocol changed in 2015?", "Mikhail Gromov", "mgtriffid", "05/30/19, 11:12:11 PM", "Hi guys,\r\nI'm trying to migrate from Eureka 1.1.131 to 1.8.6. And unfortunately I can't afford downtime, so I must be able to upgrade environment gradually.\r\nRecently I noticed strange thing in logs of Eureka 1.1.131. I see stacktrace:\r\n```\r\nError handling a request: 48e5d4dd0150af4d\r\n! com.thoughtworks.xstream.mapper.CannotResolveClassException: replicationList\r\n! at com.thoughtworks.xstream.mapper.DefaultMapper.realClass(DefaultMapper.java:56)\r\n! at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\r\n! at com.thoughtworks.xstream.mapper.DynamicProxyMapper.realClass(DynamicProxyMapper.java:55)\r\n! at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\r\n! at com.thoughtworks.xstream.mapper.PackageAliasingMapper.realClass(PackageAliasingMapper.java:88)\r\n! at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\r\n! at com.thoughtworks.xstream.mapper.ClassAliasingMapper.realClass(ClassAliasingMapper.java:79)\r\n! at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\r\n! at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\r\n! at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\r\n! at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\r\n! at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\r\n! at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\r\n! at com.thoughtworks.xstream.mapper.ArrayMapper.realClass(ArrayMapper.java:74)\r\n! at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\r\n! at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\r\n! at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\r\n! at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\r\n! at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\r\n! at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\r\n! at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\r\n! at com.thoughtworks.xstream.mapper.CachingMapper.realClass(CachingMapper.java:45)\r\n! at com.thoughtworks.xstream.core.util.HierarchicalStreams.readClassType(HierarchicalStreams.java:29)\r\n! at com.thoughtworks.xstream.core.TreeUnmarshaller.start(TreeUnmarshaller.java:133)\r\n! at com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.unmarshal(AbstractTreeMarshallingStrategy.java:32)\r\n! at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1052)\r\n! at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1036)\r\n! at com.thoughtworks.xstream.XStream.fromXML(XStream.java:921)\r\n! at com.netflix.discovery.converters.EntityBodyConverter.read(EntityBodyConverter.java:57)\r\n! at com.netflix.discovery.provider.DiscoveryJerseyProvider.readFrom(DiscoveryJerseyProvider.java:94)\r\n! at com.sun.jersey.spi.container.ContainerRequest.getEntity(ContainerRequest.java:488)\r\n! at com.sun.jersey.server.impl.model.method.dispatch.EntityParamDispatchProvider$EntityInjectable.getValue(EntityParamDispatchProvider.java:123)\r\n! at com.sun.jersey.server.impl.inject.InjectableValuesProvider.getInjectableValues(InjectableValuesProvider.java:46)\r\n! at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$EntityParamInInvoker.getParams(AbstractResourceMethodDispatchProvider.java:153)\r\n! at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:203)\r\n! at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)\r\n! at com.yammer.dropwizard.jersey.OptionalResourceMethodDispatchAdapter$OptionalRequestDispatcher.dispatch(OptionalResourceMethodDispatchAdapter.java:37)\r\n! at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)\r\n! at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\r\n! at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)\r\n! at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\r\n! at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)\r\n! at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1511)\r\n! at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1442)\r\n! at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1391)\r\n! at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1381)\r\n! at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)\r\n! at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)\r\n! at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)\r\n! at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)\r\n! at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:669)\r\n! at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1448)\r\n! at com.netflix.eureka.StatusFilter.doFilter(StatusFilter.java:68)\r\n! at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1419)\r\n! at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:66)\r\n! at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118)\r\n! at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113)\r\n! at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1419)\r\n! at com.yammer.dropwizard.servlets.ThreadNameFilter.doFilter(ThreadNameFilter.java:29)\r\n! at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1419)\r\n! at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455)\r\n! at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1075)\r\n! at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:384)\r\n! at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1009)\r\n! at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)\r\n! at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)\r\n! at com.yammer.metrics.jetty.InstrumentedHandler.handle(InstrumentedHandler.java:200)\r\n! at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)\r\n! at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)\r\n! at org.eclipse.jetty.server.Server.handle(Server.java:368)\r\n! at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489)\r\n! at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53)\r\n! at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:953)\r\n! at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:1014)\r\n! at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:953)\r\n! at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:240)\r\n! at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)\r\n! at org.eclipse.jetty.server.nio.BlockingChannelConnector$BlockingChannelEndPoint.run(BlockingChannelConnector.java:298)\r\n! at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\r\n! at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)\r\n! at java.lang.Thread.run(Thread.java:748)\r\n```\r\nLooking at code of 1.1.131, I see the following:\r\n```java\r\n    @Serializer(\"com.netflix.discovery.converters.EntityBodyConverter\")\r\n    @XStreamAlias(\"repllist\")\r\n    public static class ReplicationList {\r\n        private List<PeerEurekaNode.ReplicationInstance> replicationList = new ArrayList<PeerEurekaNode.ReplicationInstance>();\r\n      \r\n        public void addReplicationInstance(PeerEurekaNode.ReplicationInstance instance) {\r\n            replicationList.add(instance);\r\n        }\r\n        \r\n        public List<PeerEurekaNode.ReplicationInstance> getList() {\r\n            return this.replicationList;\r\n        }\r\n    }\r\n```\r\nAnd searching code of Eureka 1.8.6 for \"repllist\" gives me nothing.\r\nCould you please tell, does it mean that replication protocol was changed and new Eureka cannot push batch replication to old one? Maybe there is some known workaround? I tried to search for \"XStream\" among Github issues, but couldn't find anything related.\r\nI see replication was refactored significanlty in commits 1fcd932bfb3f1dfab7abe6396150e1bbaaeb1d68 and b2766563f4b103f2f3f134a65a846d8caa7dbfae, and \"repllist\" disappeared from code after first of them. But refactoring was quite large, and I couldn't track down if there is some way to migrate gradually.\r\n\r\nDesperately hope on your kind help.\r\n\r\nBest wishes,\r\nMikhail.\r\n//cc @NZvereff, @pparth", "@mgtriffid there were some changes a long time ago, if I remember, at least some of the changes involve moving to Jackson for json ser/deser and was probably around version 1.1.159. \r\n\r\nIn general, for server updates, we try not to introduce breaking changes between immediate minor versions. One thing you can try to upgrade your server, is to upgrade one minor version at a time (e.g. 1.1.x -> 1.2.x -> 1.3.x etc). =||= "], ["1040", "Request execution error com.sun.jersey.api.client.ClientHandlerException: A message body reader for Java class", null, "LionsWang", "05/30/19, 11:12:12 PM", "[ERROR] [DiscoveryClient-HeartbeatExecutor-0] [com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient(91)] - Request execution error\r\ncom.sun.jersey.api.client.ClientHandlerException: A message body reader for Java class com.netflix.appinfo.InstanceInfo, and Java type class com.netflix.appinfo.InstanceInfo, and MIME media type text/html was not found\r\nat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:630) ~[jersey-client-1.19.1.jar!/:1.19.1]\r\nat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586) ~[jersey-client-1.19.1.jar!/:1.19.1]\r\nat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.sendHeartBeat(AbstractJerseyEurekaHttpClient.java:105) ~[eureka-client-1.7.0.jar!/:1.7.0]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) ~[eureka-client-1.7.0.jar!/:1.7.0]\r\nat com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.7.0.jar!/:1.7.0]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) ~[eureka-client-1.7.0.jar!/:1.7.0]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) ~[eureka-client-1.7.0.jar!/:1.7.0]\r\nat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:89) ~[eureka-client-1.7.0.jar!/:1.7.0]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) ~[eureka-client-1.7.0.jar!/:1.7.0]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) ~[eureka-client-1.7.0.jar!/:1.7.0]\r\nat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:119) ~[eureka-client-1.7.0.jar!/:1.7.0]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) ~[eureka-client-1.7.0.jar!/:1.7.0]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) ~[eureka-client-1.7.0.jar!/:1.7.0]\r\nat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.7.0.jar!/:1.7.0]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) ~[eureka-client-1.7.0.jar!/:1.7.0]\r\nat com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:824) ~[eureka-client-1.7.0.jar!/:1.7.0]\r\nat com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1388) ~[eureka-client-1.7.0.jar!/:1.7.0]\r\nat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:1.8.0_144]\r\nat java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_144]\r\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_144]\r\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_144]\r\nat java.lang.Thread.run(Thread.java:748) [?:1.8.0_144]", "spring cloud version:Edgware.SR2 =||= @wangzhenhua-bijie what version of the server are you running with? =||= Any news? =||= I also met this issue. Why did you close it? Do you have anything updates? Thanks a lot. =||= I'm facing the same issue. Any updates? thanks =||= > I'm facing the same issue. Any updates? thanks\r\n\r\nMy issue had been fixed. The issue is caused by wrong nginx configuration of eureka url.\r\nOur nginx configuration will encapsulate 500,502 error as 404.\r\nIt works fine after removing this ngx config for eureka server url.\r\n\r\nYou can refer to  my question https://github.com/Netflix/eureka/issues/1130 =||= "], ["1041", "duplicated create Eureka-JerseyClient-Con-Cleaner task and remove all JerseyClient-Connection", null, "chendurex", "04/25/18, 12:06:02 AM", "version\uff1aeureka-client is 1.8.6\r\n\r\n**duplicated Eureka-JerseyClient-Con-Cleaner task bug description**:when create Eureka-JerseyClient-Con-Cleaner task at com.netflix.discovery.shared.transport.jersey.JerseyEurekaHttpClientFactory class and buildLegacy method. (the code like bellow)the method created two cleaner task ,one at EurekaJerseyClient jerseyClient = clientBuilder.build(), and other at new JerseyEurekaHttpClientFactory(jerseyClient, additionalHeaders);\r\n\r\n```\r\nprivate JerseyEurekaHttpClientFactory buildLegacy(Map<String, String> additionalHeaders, boolean systemSSL) {\r\n            EurekaJerseyClientBuilder clientBuilder = new EurekaJerseyClientBuilder()\r\n                    .withClientName(clientName)\r\n                    .withUserAgent(\"Java-EurekaClient\")\r\n                    .withConnectionTimeout(connectionTimeout)\r\n                    .withReadTimeout(readTimeout)\r\n                    .withMaxConnectionsPerHost(maxConnectionsPerHost)\r\n                    .withMaxTotalConnections(maxTotalConnections)\r\n                    .withConnectionIdleTimeout((int) connectionIdleTimeout)\r\n                    .withEncoderWrapper(encoderWrapper)\r\n                    .withDecoderWrapper(decoderWrapper);\r\n\r\n            if (systemSSL) {\r\n                clientBuilder.withSystemSSLConfiguration();\r\n            } else if (sslContext != null) {\r\n                clientBuilder.withCustomSSL(sslContext);\r\n            }\r\n            \r\n            if (hostnameVerifier != null) {\r\n                clientBuilder.withHostnameVerifier(hostnameVerifier);\r\n            }\r\n\r\n            EurekaJerseyClient jerseyClient = clientBuilder.build();\r\n            ApacheHttpClient4 discoveryApacheClient = jerseyClient.getClient();\r\n            addFilters(discoveryApacheClient);\r\n\r\n            return new JerseyEurekaHttpClientFactory(jerseyClient, additionalHeaders);\r\n        }\r\n```\r\n\r\n**remove all JerseyClient-Connection bug description**:like above bug description,the new JerseyEurekaHttpClientFactory(jerseyClient, additionalHeaders); should add connectionIdleTimeout param,but actually not,and then remove all JerseyClient-Connection when Eureka-JerseyClient-Con-Cleaner task begin running,the cleaner log like bellow:\r\n```\r\n2018-03-09 10:00:12.095,[thread]:[Eureka-JerseyClient-Conn-Cleaner2],[level]:DEBUG,[class]:com.netflix.discovery.shared.MonitoredConnectionManager.closeIdleConnections 332 - Closing connections idle longer than -1 SECONDS\r\n```", "@chendurex thank you for the report, this does look to be the case. We will take a look at this.  =||= "], ["1042", "spring cloud eureka change default status-page-url-path to /actuator/info?", "dragontree101", "dragontree101", "03/14/18, 01:27:56 AM", "in spring boot 2, actuator endpoint is `/actuator/info`, but default eureka default is\r\n```\r\neureka:\r\n  instance:\r\n    status-page-url-path: /info\r\n```\r\n\r\ni think in spring cloud release in `Finchley` version, eureka should change default to `/actuator/info`, yestoday i have question to `spring-cloud` gitter.\r", "Not the spring cloud Netflix repository =||= ok, i issue to spring cloud netfilx, close this issue =||= "], ["1043", "[Question] What happens when Eureka instance skips a heartbeat against a Eureka server with self preservation turned off?", "Narendra Choudhary Legha", "narenchoudhary", "04/23/18, 11:04:39 PM", "I asked this question on [stackoverflow](https://stackoverflow.com/questions/49128990/what-happens-when-eureka-instance-skips-a-heartbeat-against-a-eureka-server-with). Didn't get much attention (even earned tumbleweed badge). Even added bounty. Still no response. Now posting here.\r\n\r\n--- \r\n\r\nConsider this set-up:\r\n* Eureka server with self preservation mode disabled i.e. enableSelfPreservation: false\r\n* 2 Eureka instances each for 2 services (say service#1 and service#2). Total 4 instances.\r\nAnd one of the instances (say srv#1inst#1, an instance of service#1) sent a heartbeat, but it did not reach the Eureka server.\r\n\r\nAFAIK, following actions take place in sequence on Server side:\r\n\r\n* ServerStep1: Server observes that a particular instance has missed a heartbeat.\r\n* ServerStep2: Server marks the instance for eviction.\r\n* ServerStep3: Server's eviction scheduler (which runs periodically) evicts the instance from registry.\r\n\r\nNow on instance (srv#1inst#1) side:\r\n\r\n* InstanceStep1: It skips a heartbeat.\r\n* InstanceStep2: It realizes heartbeat did not reach Eureka Server. It retries with exponential back-off.  \r\n\r\nAFAIK, the eviction and registration do not happen immediately. Eureka server runs separate scheduler for both tasks periodically.\r\n\r\nI have some questions related to this process:\r\n\r\n* Are the sequences correct? If not, what did I miss?\r\n* Is the assumption about eviction and registration scheduler correct?\r\n*  An instance of service#2 requests fresh registry copy from server right after ServerStep2.\r\n    * Will srv#1inst#1 be in the fresh registry copy, because it has not been evicted yet?\r\n        * If yes, will srv#1inst#1 be marked UP or DOWN?\r\n* The retry request from InstanceStep2 of srv#1inst#1 reaches server right after ServerStep2.\r\n    * Will there be an immediate change in registry?\r\n    * How that will affect the response to instance of service#2's request for fresh registry? How will it affect the eviction scheduler?", "Hi @narenchoudhary before I answer the questions specifically, here's some high level information regarding heartbeats and evictions (based on default configs):\r\n1. instances are only evicted if they miss 3 consecutive heartbeats\r\n2. (most) heartbeats do not retry, they are best effort every 30s. The only time a heartbeat will retry is that if there is a threadlevel error on the heartbeating thread (i.e. Timeout or RejectedExecution), but this should be very rare.\r\n\r\n let me try to answer your questions:\r\n- Are the sequences correct? If not, what did I miss?\r\n```\r\n A: The sequences are correct, with the above clarifications\r\n```\r\n- Is the assumption about eviction and registration scheduler correct?\r\n ```\r\nA: The eviction is handled by an internal scheduler. \r\n    The registration is processed by the handler thread for the registration request.\r\n```\r\n- An instance of service#2 requests fresh registry copy from server right after ServerStep2.\r\n  - Will srv#1inst#1 be in the fresh registry copy, because it has not been evicted yet?\r\n    - If yes, will srv#1inst#1 be marked UP or DOWN?\r\n```\r\nA: There are a few things here:\r\n  1. until the instance is actually evicted, it will be part of the result\r\n  2. eviction does not involve changing the instance's status, it merely removes the instance\r\n     from the registry\r\n  3. the server holds 30s caches of the state of the world, and it is this cache that's returned. \r\n     So the exact result as seem by the client, in an eviction scenario, still depends on when it\r\n     falls within the cache's update cycle.\r\n```\r\n- The retry request from InstanceStep2 of srv#1inst#1 reaches server right after ServerStep2.\r\n  - Will there be an immediate change in registry?\r\n  - How that will affect the response to instance of service#2's request for fresh registry? How will it affect the eviction scheduler?\r\n```\r\nA: again a few things:\r\n  1. When the actual eviction happen, we check each evictee's time to see if it is eligible to be evicted. \r\n     If an instance is able to renew its heartbeats before this event, then it is no longer a target for eviction.\r\n  2. The 3 events in question (evaluation of eviction eligibility at eviction time, updating the\r\n     heartbeat status of an instance, generation of the result to be returned to the read operations)\r\n     all happen asynchronously and their result will depend on the evaluation of the above\r\n     described criteria at execution time.\r\n```\r\nPlease let me know if you still have more questions. =||= "], ["1044", "Verify is scheduler is active before submit", "David Liu", "qiangdavidliu", "03/21/18, 06:20:49 PM", "Fixes gh-1025.\r\n\r\n(cherry-picked from master branch as the fork branch has been deleted)", "@ryanjbaxter =||= "], ["1045", "Eureka in high-available mode throws couple of exceptions when they come up", "Deleted user", "ghost", "04/23/18, 10:38:40 PM", "I make it a spring-boot app and enable it as a service-discovery server with Spring-Cloud-Eureka-Server. My purpose is to make it be high-available in 2 instances on 2 different servers. I do it with configuration things and they work well regarding see and sync data. My issue is they always have exceptions in the log in starting phase of apps that said me:\r\n\r\n> ReplicationTaskProcessor - Network level connection to peer 10.1.69.110; retrying after delay com.sun.jersey.api.client.ClientHandlerException: org.apache.http.conn.ConnectTimeoutException: Connect to 10.2.69.72:12050 timed out\r\n\r\nMy configuration is:\r\n\r\n> eureka.instance.hostname=10.1.50.114\r\n> eureka.client.register-with-eureka=true\r\n> eureka.client.fetch-registry=true\r\n> eureka.client.eureka-connection-idle-timeout-seconds=60\r\n> eureka.client.serviceUrl.defaultZone=10.1.69.110:8761/eureka/\r\n\r\nAfter 2 instances come up and see each other, I don't have them (exceptions). I think it should have some configurable items that mention to Eureka please wait for another instance based on millisecond in the startup phase.", "Hi @thinksky-sourcecode thank you for raising the issue. As you correctly state, the errors are transient at start up when multiple servers are being bootstrapped. Since the servers know a priori the hostnames of all of its peers (via config), and there is no guarantee on the order of server start up, it is somewhat difficult to know whether a server should avoid the exceptions at start up. If you have any good suggests, we welcome any PRs. Thanks. =||= Hi @qiangdavidliu ,I also encountered this exception. After the eureka cluster has been running for a while, this error is reported from time to time. It is estimated that it will be reported once in three hours. I pinged the server ip, ttl is about 64ms. Do you know what is going on here? =||= "], ["1046", "Spectator instead of Servo (deprecated) ?", "Ravi Kancherla", "ravikancherla", "05/30/19, 11:12:12 PM", "As Servo is deprecated and no longer maintained, any plan on using spectator instead of servo library ? I still see there are references to Servo in ThresholdLevelsMetric.java\r\n\r\nI am not using Servo anyway. If there is a way to disable Servo instead, that works for me too. I am currently having a blocker due to the usage of Servo\r\n\r\nhttps://github.com/Netflix/servo/issues/443\r", "@ravikancherla thanks for raising this issue. I followed your links and it looks like you have made a PR against servo that resolves this issue. Are you able to pin forward your servo version and achieve your goals?\r\n\r\nWe will look at updating the eureka dependency versions on servo to the latest soon.\r\n\r\n(On the matter of moving to spectator, that is something we wanted to look at but unfortunately is not at the top of our priorities at the moment). =||= "], ["1047", "[Question] How does eureka client failover?", "MJ", "mengjiann", "04/05/18, 01:40:00 AM", "Referring to the \"Eureka Failover\" section in the page: https://github.com/Netflix/eureka/wiki/Deploying-Eureka-Servers-in-EC2, it mentions that \"eureka clients automatically failover to other nodes in the cluster.\"\r\n\r\nAnd also in the \"Assigning EIPs using Service Urls\" section, it mentions \"The Eureka clients similarly try to find a Eureka server co-located in the same zone and if they do not find any, they fail over to the Eureka servers in the other zones.\"\r\n\r\nJust curious on how the eureka client is able to identify Eureka server located in the same zone? Is there another configuration for it? or it is done automatically internally?", "https://cloud.spring.io/spring-cloud-netflix/multi/multi__service_discovery_eureka_clients.html#_zones =||= @mengjiann the eureka client implementation have an internal resolver concept where it reads data about the eureka servers (via the standard eureka api) which is then used for failovers. You can take a look at this class for the actual implementation:\r\nhttps://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/shared/transport/decorator/RetryableEurekaHttpClient.java =||= Thanks. I will read on the references. =||= "], ["1048", "Eureka and Zuul outdated", null, "rashad-farajullayev", "04/23/18, 10:15:10 PM", " Spring Cloud uses Netflix API for Microservices architecture. Some people claim the Netflix tools are outdated and Netflix doesn't work on it any more. \r\n\r\n1. Rumors say Netflix is currently working on quite another alternative to replace at least Eureka and Zuul. Is that true? \r\n2. Should we currently switch to something else while it is not too late?\r\n3. When will the new version be released approximately? \r\n4. Will new version be included in Spring Cloud? \r\n5. If we today go with these API staff do we have to worry about their deprecation in the coming years?\r\n\r\nThanks for attention", "I don't work on either and so may not have full context. At first glance these questions seem to pertain more to Zuul than Eureka.\r\n\r\n> Rumors say Netflix is currently working on quite another alternative to replace at least Eureka and Zuul. Is that true?\r\n\r\nI'm guessing this was in reference to the new version of Zuul. A 2.x version that was released a few months ago. There are some blog posts and presentations linked off the readme:\r\n\r\nhttps://github.com/Netflix/zuul/blob/2.1/README.md\r\n\r\n> Will new version be included in Spring Cloud?\r\n\r\nFor Zuul 2 specifically, see: Netflix/zuul#298. =||= As @brharrington mentioned Zuul 2 has recently been released, see the link to the github issue above. More info on getting started here: https://github.com/Netflix/zuul/wiki/Getting-Started-2.0\r\n\r\nAFAIK, Spring Cloud is not going to use Zuul 2 but you'll have to confirm with them.\r\n\r\nI'm not sure what rumors you're referring to but both Zuul (specifically version 2) and Eureka are core products for Netflix and almost all traffic that comes in touches both. =||= To comment on this specifically for eureka, we are not moving away or deprecating eureka any time soon. Internally, we do have some extensions (e.g. a readonly replica tier) that we use, but these are extensions and not replacements for the existing system.\r\n\r\nThe open source future for our internal extensions are as yet uncertain, however if there are any active movement on that front, we will involve Spring Cloud in the discussion. =||= "], ["1049", "the Domain Name Resolution is wrong, there will be get a extra \u201c", null, "wangwenyao", "04/23/18, 10:11:03 PM", "when i user useDnsForFetchingServiceUrls\uff0ci found the problem, the Domain Name Resolution is wrong, there will be get a extra \u201c.  i think the problem of code is here.\r\n`   \r\n     String txtRecord = null;\r\n        if (attr != null) {\r\n            txtRecord = attr.get().toString();\r\n        }\r\n\r\n        Set<String> cnamesSet = new TreeSet<String>();\r\n        if (txtRecord == null || txtRecord.trim().isEmpty()) {\r\n            return cnamesSet;\r\n        }\r\n        String[] cnames = txtRecord.split(\" \");\r\n`", "![image](https://user-images.githubusercontent.com/19568152/38462848-c68b7f08-3b1f-11e8-9792-fd0b615425df.png)\r\n =||= @wangwenyao I think your issue is similar to #1053. This has been resolved in merged PR #1054. =||= "], ["1050", "Eureka client registration fails when registering to a secure server", "Bangic", "Bangic", "04/10/18, 01:43:35 AM", "I am using Spring Boot 2.0 and I have an Eureka server and and Eureka client. It is working fine. Here are the property files:\r\n\r\nServer:\r\n\r\nserver.port=8082\r\neureka.instance.hostname=localhost\r\neureka.client.register-with-eureka=false\r\neureka.client.fetch-registry=false\r\n\r\nClient:\r\n\r\nserver.port=8083\r\neureka.client.region = default\r\neureka.client.registryFetchIntervalSeconds = 5\r\neureka.client.serviceUrl.defaultZone=http://localhost:8082/eureka/\r\n\r\nNow, I try to secure my Eureka server, I add the spring-boot-starter-security dependency and I change the property files:\r\n\r\nServer:\r\n\r\nserver.port=8082\r\n\r\nspring.security.basic.enabled=true\r\nspring.security.user.name=eureka-user\r\nspring.security.user.password=eureka-pass\r\n\r\neureka.instance.hostname=localhost\r\n\r\neureka.client.register-with-eureka=false\r\neureka.client.fetch-registry=false\r\nClient:\r\n\r\nserver.port=8083\r\neureka.client.region = default\r\neureka.client.registryFetchIntervalSeconds = 5\r\neureka.client.serviceUrl.defaultZone=http://eureka-user:eureka-pass@localhost:8082/eureka/\r\nAfter these changes when I start the server and client the client throws this error:\r\n\r\ncom.netflix.discovery.DiscoveryClient    : DiscoveryClient_UNKNOWN/localhost:8083 - registration failed Cannot execute request on any known server\r", "Hey there,\r\n\r\nHave you check this - https://github.com/spring-cloud/spring-cloud-netflix/issues/2754 ? =||= This is not the spring cloud Netflix issue tracker =||= @beastovest thanks! it's works =||= @spencergibb  thanks!  =||= "], ["1051", "overriddenstatus changed to overriddenStatus breaks json parsing", "Ryan Baxter", "ryanjbaxter", "05/30/19, 11:12:12 PM", "In Spring Cloud we give the option for Eureka clients to not use Jersey and instead use a Spring `RestTemplate` as their HTTP client.  We noticed that when this change is made and we use Eureka Server 1.8.7 that the client can no longer parse the JSON response into an `InstanceInfo` class.  The reason seems to be a change in the case of the `overriddenstatus` property to `overriddenStatus`.  The variable in `InstanceInfo` is still `overriddenstatus`.  Looks like the change was made in this commit https://github.com/Netflix/eureka/commit/939957124a8f055c7d343d67d0842ae06cf59530#diff-1e0de94c9faa44a518abe30d94744178L63", "The same problem does not show up when you look at the XML response =||= @ryanjbaxter that you for reporting this, this indeed looks to be an issue. I will take a look at making a fix for this. =||= @ryanjbaxter version 1.8.8 released with the fix. =||= Awesome thanks, I will bump the version in Spring Cloud Netflix. =||= @ryanjbaxter Is this added in `Finchley.RC1`, because I am still facing issue with mentioned release. =||= Nevermind, `Finchley.RC1` still uses 1.8.8 =||= @qiangdavidliu We are using Eureka 1.9 but I can still reproduce this =||= Our non-jersey implementation doesn't use the Jackson codec do we still see the error =||= "], ["1052", "fix for issue #1051", "David Liu", "qiangdavidliu", "04/09/18, 09:45:23 PM", "NaN", "I guess I didn't pay enough attention to this since this doesn't actually fix our issue since the case we have is when we don't use jersey and therefore the Eureka codec. =||= https://github.com/spring-cloud/spring-cloud-netflix/issues/2756 =||= "], ["1053", "Dns resolver not compatible txt format \"host1 host2 host3\"", "Jacey New", "moxnet", "04/23/18, 09:49:55 PM", "https://github.com/Netflix/eureka/wiki/Deploying-Eureka-Servers-in-EC2\r\nif more than one hostname per zone, space delimit, for example txt value:\r\n\r\n> \"host1\" \"host2\"\r\n\r\n**but some dns provider only support:**\r\n> \"host1 host2\"\r\n\r\nand split the value by space to:\r\n> [\"\\\\\"host1\", \"host2\\\\\"\"]\r\n\r\nthen, make request to \r\n> http://\"host1\r\n\r\nso, got a exception:\r\n> java.lang.IllegalArgumentException: Illegal character in authority at index 7: http://\"eureka-2.eureka.springcloud.svc.cluster.local:8761/eureka", "Thanks @moxnet have merged in your PR. =||= "], ["1054", "update: compatible txt value format: \"host1 host2 host3\"", "Jacey New", "moxnet", "04/23/18, 09:49:55 PM", "fix #1053 \r\n\r\nRemove the opening and closing quotes when the TXT dns record as format:\r\n> \"host1 host2 host3\"\r\n\r\nto compatible with aws route53 format:\r\n>\"host1\" \"host2\" \"host3\"\r\n\r\n(this format will remove quotes before the return of call dirContext.getAttributes(...))", "Thanks @moxnet  =||= "], ["1055", " Virtual host like rabbitmq", "PhilZhang", "zjh-coder", "05/30/19, 11:12:12 PM", "I have some experience on using rabbitmq and I'm a newer on eureka. I think one of its most interesting feature on rabbitmq is virtual host. With this feature, our team can share one mq server when developing on personal pc.\r\nI think service discovery service like eureka is also a kind of middleware or infrastructure just like rabbitmq, so is it reasonable and possible to add this feature on eureka?", "@zjh-coder do you mean to add support for advertising rabbitmq brokers via eureka?  =||= "], ["1056", "Eureka proxy setting is not working", "Luan Louis", "LuanLouis", "04/23/18, 09:42:52 PM", "I want to intercept http messages between eureka clients and eureka servers,  and I add corresponding proxy settings in application.properties file like this:\r\n```\r\neureka.client.proxy-host=127.0.0.1\r\neureka.client.proxy-port=8001\r\n```\r\nBUT the proxy settings value have't  be set to EurekaJerseyClientBuilder instance. I failed to intercept the http messges between eureka instance.\r\nso I dive into source code , found that proxy settings is missing  in JerseyEurekaHttpClientFactory.buildLegacy() method:\r\n\r\n```\r\n@Override\r\n        public JerseyEurekaHttpClientFactory build() {\r\n            Map<String, String> additionalHeaders = new HashMap<>();\r\n            if (allowRedirect) {\r\n                additionalHeaders.put(HTTP_X_DISCOVERY_ALLOW_REDIRECT, \"true\");\r\n            }\r\n            if (EurekaAccept.compact == eurekaAccept) {\r\n                additionalHeaders.put(EurekaAccept.HTTP_X_EUREKA_ACCEPT, eurekaAccept.name());\r\n            }\r\n\r\n            if (experimental) {\r\n                return buildExperimental(additionalHeaders);\r\n            }\r\n            return buildLegacy(additionalHeaders, systemSSL);\r\n        }\r\n\r\n        private JerseyEurekaHttpClientFactory buildLegacy(Map<String, String> additionalHeaders, boolean systemSSL) {\r\n            EurekaJerseyClientBuilder clientBuilder = new EurekaJerseyClientBuilder()\r\n                    .withClientName(clientName)\r\n                    .withUserAgent(\"Java-EurekaClient\")\r\n                    .withConnectionTimeout(connectionTimeout)\r\n                    .withReadTimeout(readTimeout)\r\n                    .withMaxConnectionsPerHost(maxConnectionsPerHost)\r\n                    .withMaxTotalConnections(maxTotalConnections)\r\n                    .withConnectionIdleTimeout((int) connectionIdleTimeout)\r\n                    .withEncoderWrapper(encoderWrapper)\r\n                    .withDecoderWrapper(decoderWrapper);\r\n                    **_// proxy settings is lost here_**\r\n\r\n            if (systemSSL) {\r\n                clientBuilder.withSystemSSLConfiguration();\r\n            } else if (sslContext != null) {\r\n                clientBuilder.withCustomSSL(sslContext);\r\n            }\r\n            \r\n            if (hostnameVerifier != null) {\r\n                clientBuilder.withHostnameVerifier(hostnameVerifier);\r\n            }\r\n\r\n            EurekaJerseyClient jerseyClient = clientBuilder.build();\r\n            ApacheHttpClient4 discoveryApacheClient = jerseyClient.getClient();\r\n            addFilters(discoveryApacheClient);\r\n\r\n            return new JerseyEurekaHttpClientFactory(jerseyClient, additionalHeaders);\r\n        }\r\n\r\n        private JerseyEurekaHttpClientFactory buildExperimental(Map<String, String> additionalHeaders) {\r\n            ThreadSafeClientConnManager cm = createConnectionManager();\r\n            ClientConfig clientConfig = new DefaultApacheHttpClient4Config();\r\n\r\n            if (proxyHost != null) {\r\n                addProxyConfiguration(clientConfig);\r\n            }\r\n\r\n            DiscoveryJerseyProvider discoveryJerseyProvider = new DiscoveryJerseyProvider(encoderWrapper, decoderWrapper);\r\n            clientConfig.getSingletons().add(discoveryJerseyProvider);\r\n\r\n            // Common properties to all clients\r\n            cm.setDefaultMaxPerRoute(maxConnectionsPerHost);\r\n            cm.setMaxTotal(maxTotalConnections);\r\n            clientConfig.getProperties().put(ApacheHttpClient4Config.PROPERTY_CONNECTION_MANAGER, cm);\r\n\r\n            String fullUserAgentName = (userAgent == null ? clientName : userAgent) + \"/v\" + buildVersion();\r\n            clientConfig.getProperties().put(CoreProtocolPNames.USER_AGENT, fullUserAgentName);\r\n\r\n            // To pin a client to specific server in case redirect happens, we handle redirects directly\r\n            // (see DiscoveryClient.makeRemoteCall methods).\r\n            clientConfig.getProperties().put(ClientConfig.PROPERTY_FOLLOW_REDIRECTS, Boolean.FALSE);\r\n            clientConfig.getProperties().put(ClientPNames.HANDLE_REDIRECTS, Boolean.FALSE);\r\n\r\n            ApacheHttpClient4 apacheClient = ApacheHttpClient4.create(clientConfig);\r\n            addFilters(apacheClient);\r\n\r\n            return new JerseyEurekaHttpClientFactory(apacheClient, connectionIdleTimeout, additionalHeaders);\r\n        }\r\n\r\n```\r\nPls check\r", "Thanks @LuanLouis . Your PR is merged. =||= "], ["1057", "bugfixing: Eureka Proxy Setting is not working", "Luan Louis", "LuanLouis", "04/23/18, 09:42:27 PM", "   Eureka proxy settings is not working because of EurekaJerseyClientBuilder instance have no chance to set proxy settings during it's lifecycle.\r\n\r\nrelated issue: #1056 ", "@LuanLouis thanks for the fix. =||= "], ["1058", "Fix issue #1041", "David Liu", "qiangdavidliu", "04/24/18, 11:57:00 PM", "NaN", "NaN"], ["1059", "update dependencies", "David Liu", "qiangdavidliu", "04/25/18, 12:27:59 AM", "NaN", "NaN"], ["1060", "address dangling PR comments for PRs #976 and #1003", "David Liu", "qiangdavidliu", "04/25/18, 05:14:50 PM", "address dangling PR comments for PRs #976 and #1003", "NaN"], ["1061", "Clients not able to register with eureka server", null, "arpanagr", "04/28/18, 05:00:21 PM", "\r\nThis is the error I am getting:\r\n\r\n```\r\n2018-04-28 22:05:08.372 ERROR 2664 --- [tbeatExecutor-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error\r\n\r\ncom.sun.jersey.api.client.ClientHandlerException: A message body reader for Java class com.netflix.appinfo.InstanceInfo, and Java type class com.netflix.appinfo.InstanceInfo, and MIME media type text/html; charset=utf-8 was not found\r\n        at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:630) ~[jersey-client-1.19.1.jar:1.19.1]\r\n        at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586) ~[jersey-client-1.19.1.jar:1.19.1]\r\n        at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.sendHeartBeat(AbstractJerseyEurekaHttpClient.java:105) ~[eureka-client-1.6.2.jar:1.6.2]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.6.2.jar:1.6.2]\r\n        at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.6.2.jar:1.6.2]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.6.2.jar:1.6.2]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.6.2.jar:1.6.2]\r\n        at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118) ~[eureka-client-1.6.2.jar:1.6.2]\r\n        at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79) ~[eureka-client-1.6.2.jar:1.6.2]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.6.2.jar:1.6.2]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.6.2.jar:1.6.2]\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:119) [eureka-client-1.6.2.jar:1.6.2]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.6.2.jar:1.6.2]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.6.2.jar:1.6.2]\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) [eureka-client-1.6.2.jar:1.6.2]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.6.2.jar:1.6.2]\r\n        at com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:815) [eureka-client-1.6.2.jar:1.6.2]\r\n        at com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1379) [eureka-client-1.6.2.jar:1.6.2]\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_171]\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_171]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_171]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_171]\r\n        at java.lang.Thread.run(Thread.java:748) [na:1.8.0_171]\r\n```\r\n\r\nI searched for this error on internet and one reason mentioned was mismatch in eureka-client and server version. Mine is 1.6.2 for both client and server.", "It got resolved somehow after doing a restart. Not sure what was wrong though. But closing it for the moment. =||= @arpanagr Is there any other solution ? If there are many services registered in eureka server, we can not demand all services of client to restart,this is a very bad way. =||= "], ["1062", "FTBFS", null, "coretemp", "05/30/19, 11:12:12 PM", "I expected the documented command to work, but it doesn't. \r\n\r\n```\r\n./gradlew clean build --stacktrace                                                                                                                                                                                                                           \r\n                                                                                                                                                                                                                                                             \r\nFAILURE: Build failed with an exception.                                                                                                                                                                                                                     \r\n                                                                                                                                                                                                                                                             \r\n* What went wrong:                                                                                                                                                                                                                                           \r\nFailed to load native library 'libnative-platform.so' for Linux amd64.                                                                                                                                                                                       \r\n                                                                                                                                                                                                                                                             \r\n* Try:                                                                                                                                                                                                                                                       \r\nRun with --info or --debug option to get more log output.                                                                                                                                                                                                    \r\n                                                                                                                                                                                                                                                             \r\n* Exception is:                                                                                                                                                                                                                                              \r\nnet.rubygrapefruit.platform.NativeException: Failed to load native library 'libnative-platform.so' for Linux amd64.                                                                                                                                          \r\n        at net.rubygrapefruit.platform.internal.NativeLibraryLoader.load(NativeLibraryLoader.java:49)                                                                                                                                                        \r\n        at net.rubygrapefruit.platform.Native.init(Native.java:55)                                                                                                                                                                                           \r\n        at org.gradle.internal.nativeintegration.services.NativeServices.initialize(NativeServices.java:74)                                                                                                                                                  \r\n        at org.gradle.internal.nativeintegration.services.NativeServices.initialize(NativeServices.java:60)                                                                                                                                                  \r\n        at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:203)                                                                                                                                           \r\n        at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:169)                                                                           \r\n        at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:33)                                                                                        \r\n        at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:22)                                                                                        \r\n        at org.gradle.launcher.Main.doAction(Main.java:33)                                                                                                                                                                                                   \r\n        at org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:45)                                                                                                                                                                                  \r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)                                                                                                                                                                                       \r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)                                                                                                                                                                     \r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)                                                                                                                                                             \r\n        at java.lang.reflect.Method.invoke(Method.java:498)                                                                                                                                                                                                  \r\n        at org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:54)                                                                                                                                                                \r\n        at org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:35)                                                                                                                                                                      \r\n        at org.gradle.launcher.GradleMain.main(GradleMain.java:23)                                                                                                                                                                                           \r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)                                                                                                                                                                                       \r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)                                                                                                                                                                     \r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)                                                                                                                                                             \r\n        at java.lang.reflect.Method.invoke(Method.java:498)                                                                                                                                                                                                  \r\n        at org.gradle.wrapper.BootstrapMainStarter.start(BootstrapMainStarter.java:30)                                                                                                                                                                       \r\n        at org.gradle.wrapper.WrapperExecutor.execute(WrapperExecutor.java:129)                                                                                                                                                                              \r\n        at org.gradle.wrapper.GradleWrapperMain.main(GradleWrapperMain.java:61)                                                                                                                                                                              \r\nCaused by: java.lang.UnsatisfiedLinkError: /home/coretemp/.gradle/native/19/linux-amd64/libnative-platform.so: libstdc++.so.6: cannot open shared object file: No such file or directory                                                                          \r\n        at java.lang.ClassLoader$NativeLibrary.load(Native Method)\r\n        at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1941)\r\n        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1824)\r\n        at java.lang.Runtime.load0(Runtime.java:809)\r\n        at java.lang.System.load(System.java:1086)\r\n        at net.rubygrapefruit.platform.internal.NativeLibraryLoader.load(NativeLibraryLoader.java:45)\r\n        ... 23 more\r\n```\r\n\r\nDetails:\r\nOperating System: NixOS 18.03.", "NaN"], ["1063", "How do you forcefully refresh Eureka client cache?", "Vidura Nanayakkara", "vidurananayakkara", "05/30/19, 11:12:12 PM", "I have the requirement of refreshing the Eureka client cache forcefully. The reason for this is that,\r\nAssuming I have a service registered to Eureka with name \"A\" and the \"A\"s information is outdated, I do not want to stay until Eureka automatically refreshes its cache.\r\n\r\nHow do I refresh the Eureka client cache forcefully? ", "Hi @vidurananayakkara \r\nAFAIK Eureka have two cache, so which one you want refresh? In default eureka use two cache, one is `guava` cache the other is `Map`\r\nIn normal like this\r\n\r\n```\r\nClient --- > mapCache ---> guave cache\r\n```\r\n\r\n =||= "], ["1064", "getting java.lang.NoClassDefFoundError: javax/ws/rs/ext/FactoryFinder during heartbeat check", null, "vikrantch-hk", "05/30/19, 11:12:13 PM", "I have used exureka-samples code to create a eureka-client, getting below exception during heartbeat check \r\n\r\n```\r\n[ERROR] [] (03 May 2018 17:58:43) (DiscoveryClient.java:972) - DiscoveryClient_UNKNOWN/HK-107-APP - was unable to refresh its cache! status = javax/ws/rs/ext/FactoryFinder\r\n[ INFO] [] (03 May 2018 17:58:52) (DiscoveryClient.java:826) - DiscoveryClient_UNKNOWN/HK-107-APP: registering service...\r\n[ WARN] [] (03 May 2018 17:58:52) (InstanceInfoReplicator.java:125) - There was a problem with the instance info replicator\r\njava.lang.NoClassDefFoundError: javax/ws/rs/ext/FactoryFinder\r\n        at javax.ws.rs.ext.RuntimeDelegate.findDelegate(RuntimeDelegate.java:135)\r\n        at javax.ws.rs.ext.RuntimeDelegate.getInstance(RuntimeDelegate.java:120)\r\n        at javax.ws.rs.core.UriBuilder.newInstance(UriBuilder.java:95)\r\n        at javax.ws.rs.core.UriBuilder.fromUri(UriBuilder.java:106)\r\n        at com.sun.jersey.api.client.WebResource.getUriBuilder(WebResource.java:118)\r\n        at com.sun.jersey.api.client.WebResource.path(WebResource.java:396)\r\n        at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.register(AbstractJerseyEurekaHttpClient.java:50)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\r\n        at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\r\n```\r\n\r\nI have included below dependencies in pom\r\n\r\n```\r\n<dependency>\r\n\t\t\t<groupId>com.netflix.eureka</groupId>\r\n\t\t\t<artifactId>eureka-client</artifactId>\r\n\t\t\t<version>1.9.0</version>\r\n\t\t\t</dependency>\r\n\t\t<!-- https://mvnrepository.com/artifact/com.netflix.governator/governator -->\r\n\t\t<dependency>\r\n\t\t\t<groupId>com.netflix.governator</groupId>\r\n\t\t\t<artifactId>governator</artifactId>\r\n\t\t\t<version>1.17.5</version>\r\n\t\t</dependency>\r\n\t\t<dependency>\r\n      <groupId>com.netflix.archaius</groupId>\r\n      <artifactId>archaius-core</artifactId>\r\n      <version>0.7.6</version>\r\n    </dependency>\r\n    <dependency>\r\n      <groupId>javax.ws.rs</groupId>\r\n      <artifactId>jsr311-api</artifactId>\r\n      <version>1.1.1</version>\r\n    </dependency>\r\n    <dependency>\r\n      <groupId>com.netflix.servo</groupId>\r\n      <artifactId>servo-core</artifactId>\r\n      <version>0.12.21</version>\r\n    </dependency>\r\n\t\t\t\r\n```\r\n\r\nPlease let me know if I am missing some thing.", "Do you have the following dependency?\r\n\r\n```xml\r\n<dependency>\r\n    <groupId>javax.ws.rs</groupId>\r\n    <artifactId>javax.ws.rs-api</artifactId>\r\n    <version>2.1</version>\r\n</dependency>\r\n``` =||= @marcosbarbero I have added this dependency as well but still getting same error =||= @marcosbarbero I was debugging the code and found that exception is being thrown from AbstractJerseyEurekaHttpClient at WebResource webResource = jerseyClient.resource(serviceUrl).path(urlPath); in below method\r\n```\r\n private EurekaHttpResponse<Applications> getApplicationsInternal(String urlPath, String[] regions) {\r\n        ClientResponse response = null;\r\n        String regionsParamValue = null;\r\n        try {\r\n            WebResource webResource = jerseyClient.resource(serviceUrl).path(urlPath);\r\n            if (regions != null && regions.length > 0) {\r\n                regionsParamValue = StringUtil.join(regions);\r\n                webResource = webResource.queryParam(\"regions\", regionsParamValue);\r\n            }\r\n``` =||= can you share some code/sample project? I would like to see it. =||= \r\n\r\n\r\n\r\n\r\n```\r\npackage com.hk.web.listener;\r\n\r\nimport com.netflix.appinfo.InstanceInfo;\r\nimport com.netflix.appinfo.MyDataCenterInstanceConfig;\r\nimport com.netflix.discovery.DefaultEurekaClientConfig;\r\nimport com.netflix.discovery.DiscoveryManager;\r\n\r\n\r\npublic class EurekaClient {\r\n\r\n    public void registerClient() {\r\n\r\n        String vipAddress = \"NLPService\";\r\n\r\n        InstanceInfo nextServerInfo = null;\r\n        try {\r\n            DiscoveryManager.getInstance().initComponent(new MyDataCenterInstanceConfig(), new DefaultEurekaClientConfig());\r\n            nextServerInfo = EurekaConfiguration.getEurekaClient().getNextServerFromEureka(vipAddress, false);\r\n        } catch (Exception e) {\r\n            System.err.println(\"Cannot get an instance of example service to talk to from eureka\");\r\n            //System.exit(-1);\r\n        }\r\n\r\n        try {\r\n            Thread.sleep(2000);\r\n        } catch (InterruptedException e) {\r\n            // Nothing\r\n        }\r\n\r\n        // Now we change our status to UP\r\n        System.out.println(\"Done sleeping, now changing status to UP\");\r\n        DiscoveryManager.getInstance().getEurekaClient().getApplicationInfoManager().setInstanceStatus(InstanceInfo.InstanceStatus.UP);\r\n\r\n        System.out.println(\"Found an instance of example service to talk to from eureka: \"\r\n                + nextServerInfo.getVIPAddress() + \":\" + nextServerInfo.getPort());\r\n\r\n        String serviceBaseURL = \"http://\"+ nextServerInfo.getHostName()\r\n                +\":\"+nextServerInfo.getPort();\r\n\r\n\r\n        String nlpServiceURL = serviceBaseURL +\"/nlp\";\r\n\r\n       /* RestTemplate restTemplate = new RestTemplate();\r\n\r\n        NLPInputToBeTransformed input = new NLPInputToBeTransformed();\r\n        input.setInputText(\" Test Input \");\r\n\r\n\r\n        NLPResponse nlpResponse = restTemplate.postForObject\r\n                (nlpServiceURL, input, NLPResponse.class, new HashMap<>());*/\r\n\r\n        //System.out.println( \" Service Response  \" + nlpResponse.getTags());\r\n\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n\r\n```\r\npackage com.hk.web.listener;\r\n\r\nimport com.netflix.appinfo.ApplicationInfoManager;\r\nimport com.netflix.appinfo.EurekaInstanceConfig;\r\nimport com.netflix.appinfo.InstanceInfo;\r\nimport com.netflix.appinfo.MyDataCenterInstanceConfig;\r\nimport com.netflix.appinfo.providers.EurekaConfigBasedInstanceInfoProvider;\r\nimport com.netflix.discovery.DefaultEurekaClientConfig;\r\nimport com.netflix.discovery.DiscoveryClient;\r\nimport com.netflix.discovery.EurekaClientConfig;\r\n\r\n/**\r\n * Created by dhruv on 30/4/18.\r\n */\r\npublic class EurekaConfiguration {\r\n\r\n\r\n        public static ApplicationInfoManager applicationInfoManager;\r\n    public static com.netflix.discovery.EurekaClient eurekaClient;\r\n\r\n        private static synchronized ApplicationInfoManager initializeApplicationInfoManager(\r\n                EurekaInstanceConfig instanceConfig) {\r\n            if (applicationInfoManager == null) {\r\n                InstanceInfo instanceInfo = new EurekaConfigBasedInstanceInfoProvider(instanceConfig).get();\r\n                applicationInfoManager = new ApplicationInfoManager(instanceConfig, instanceInfo);\r\n            }\r\n\r\n            return applicationInfoManager;\r\n        }\r\n\r\n        private static synchronized com.netflix.discovery.EurekaClient initializeEurekaClient(ApplicationInfoManager applicationInfoManager,\r\n                                                                                              EurekaClientConfig clientConfig) {\r\n            if (eurekaClient == null) {\r\n                eurekaClient = new DiscoveryClient(applicationInfoManager, clientConfig);\r\n            }\r\n\r\n            return eurekaClient;\r\n        }\r\n\r\n        public static com.netflix.discovery.EurekaClient getEurekaClient()\r\n        {\r\n            ApplicationInfoManager applicationInfoManager = initializeApplicationInfoManager(new MyDataCenterInstanceConfig());\r\n            com.netflix.discovery.EurekaClient client = initializeEurekaClient(applicationInfoManager, new DefaultEurekaClientConfig());\r\n            return eurekaClient;\r\n        }\r\n}\r\n\r\n\r\n```\r\n\r\n```\r\npublic class HKStartupListener implements ServletContextListener {\r\n\r\n  Logger logger = LoggerFactory.getLogger(HKStartupListener.class);\r\n\r\n  private AppCacheService appCacheService;\r\n//  private LoadPropertyService loadPropertyService;\r\n\r\n  public HKStartupListener() {\r\n  }\r\n\r\n  public void contextInitialized(ServletContextEvent event) {\r\n    System.out.println(\"================  STARTING EDGE  ==================\");\r\n\r\n    logger.info(\".........  START CACHING  .........\");\r\n    AppConstants.contextPath = event.getServletContext().getContextPath();\r\n    AppConstants.appBasePath = event.getServletContext().getRealPath(\"/\");\r\n\r\n    logger.info(\".........  Reloading Memory Cache  .........\");\r\n    getAppCacheService().reloadAll();\r\n\r\n    String runCronJobs = System.getProperty(EnvConstants.RUN_CRON_JOBS);\r\n    logger.info(\".........  RUN CRON: \" + runCronJobs + \"  .........\");\r\n\r\n    if (StringUtils.isNotBlank(runCronJobs) && Boolean.parseBoolean(runCronJobs)) {\r\n      new EdgeScheduleManager().startup();\r\n    }\r\n\r\n    new EdgeScheduleManager().startupAll();\r\n    new EurekaClient().registerClient();\r\n  }\r\n```\r\n\r\ncomplete pom dependencies\r\n\r\n```\r\n<dependencies>\r\n\t<!-- netflix starts -->\r\n\t<dependency>\r\n\t\t<groupId>com.sun.jersey</groupId>\r\n\t\t<artifactId>jersey-client</artifactId>\r\n\t\t<version>1.12</version>\r\n\t</dependency>\r\n\t<dependency>\r\n\t\t<groupId>com.netflix.eureka</groupId>\r\n\t\t<artifactId>eureka-client</artifactId>\r\n\t\t<version>1.6.2</version>\r\n\t\t<exclusions>\r\n\t\t\t<exclusion>\r\n\t\t\t\t<groupId>javax.ws.rs</groupId>\r\n\t\t\t\t<artifactId>jsr311-api</artifactId>\r\n\t\t\t</exclusion>\r\n\t\t</exclusions>\r\n\t</dependency>\r\n\t<!-- https://mvnrepository.com/artifact/com.netflix.governator/governator -->\r\n\t<dependency>\r\n\t\t<groupId>com.netflix.governator</groupId>\r\n\t\t<artifactId>governator</artifactId>\r\n\t\t<version>1.17.5</version>\r\n\t</dependency>\r\n\t<dependency>\r\n\t\t<groupId>com.netflix.archaius</groupId>\r\n\t\t<artifactId>archaius-core</artifactId>\r\n\t\t<version>0.7.6</version>\r\n\t</dependency>\r\n\t<!-- <dependency> <groupId>javax.ws.rs</groupId> <artifactId>jsr311-api</artifactId> \r\n\t\t<version>1.1.1</version> </dependency> -->\r\n\t<dependency>\r\n\t\t<groupId>com.netflix.servo</groupId>\r\n\t\t<artifactId>servo-core</artifactId>\r\n\t\t<version>0.12.21</version>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- netflix ends -->\r\n\r\n\t<dependency>\r\n\t\t<groupId>com.fasterxml.jackson.core</groupId>\r\n\t\t<artifactId>jackson-databind</artifactId>\r\n\t\t<version>2.9.4</version>\r\n\t</dependency>\r\n\t<dependency>\r\n\t\t<groupId>com.fasterxml.jackson.core</groupId>\r\n\t\t<artifactId>jackson-annotations</artifactId>\r\n\t\t<version>2.9.4</version>\r\n\t</dependency>\r\n\t<dependency>\r\n\t\t<groupId>com.fasterxml.jackson.core</groupId>\r\n\t\t<artifactId>jackson-core</artifactId>\r\n\t\t<version>2.9.4</version>\r\n\t</dependency>\r\n\r\n\r\n\r\n\t<dependency>\r\n\t\t<groupId>com.hk</groupId>\r\n\t\t<artifactId>HKBridgeClient</artifactId>\r\n\t\t<version>1.2</version>\r\n\t</dependency>\r\n\r\n\t<dependency>\r\n\t\t<groupId>com.hk</groupId>\r\n\t\t<artifactId>HKJms</artifactId>\r\n\t\t<version>2.0</version>\r\n\t</dependency>\r\n\r\n\t<dependency>\r\n\t\t<groupId>com.hk</groupId>\r\n\t\t<artifactId>securePay</artifactId>\r\n\t\t<version>1.48-SNAPSHOT</version>\r\n\t</dependency>\r\n\r\n\t<!--<dependency> <groupId>com.hk</groupId> <artifactId>producer</artifactId> \r\n\t\t<version>5.0-SNAPSHOT</version> </dependency> -->\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.json/json -->\r\n\t<dependency>\r\n\t\t<groupId>org.json</groupId>\r\n\t\t<artifactId>json</artifactId>\r\n\t\t<version>20070829</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.activemq/activemq-core -->\r\n\t<dependency>\r\n\t\t<groupId>org.apache.activemq</groupId>\r\n\t\t<artifactId>activemq-core</artifactId>\r\n\t\t<version>5.7.0</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.activemq/activemq-pool -->\r\n\t<dependency>\r\n\t\t<groupId>org.apache.activemq</groupId>\r\n\t\t<artifactId>activemq-pool</artifactId>\r\n\t\t<version>5.7.0</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/javax.enterprise.concurrent/javax.enterprise.concurrent-api -->\r\n\t<dependency>\r\n\t\t<groupId>javax.enterprise.concurrent</groupId>\r\n\t\t<artifactId>javax.enterprise.concurrent-api</artifactId>\r\n\t\t<version>1.0</version>\r\n\t\t<scope>provided</scope>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api -->\r\n\t<dependency>\r\n\t\t<groupId>javax.servlet</groupId>\r\n\t\t<artifactId>javax.servlet-api</artifactId>\r\n\t\t<version>3.1.0</version>\r\n\t\t<scope>provided</scope>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/com.hazelcast/hazelcast -->\r\n\t<dependency>\r\n\t\t<groupId>com.hazelcast</groupId>\r\n\t\t<artifactId>hazelcast</artifactId>\r\n\t\t<version>3.8.3</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/com.hazelcast/hazelcast-client -->\r\n\t<dependency>\r\n\t\t<groupId>com.hazelcast</groupId>\r\n\t\t<artifactId>hazelcast-client</artifactId>\r\n\t\t<version>3.8.3</version>\r\n\t</dependency>\r\n\r\n\t<dependency>\r\n\t\t<groupId>io.connecto</groupId>\r\n\t\t<artifactId>connecto-java</artifactId>\r\n\t\t<version>0.9.4</version>\r\n\t</dependency>\r\n\t<!-- https://mvnrepository.com/artifact/com.contentful.java/java-sdk -->\r\n\t<dependency>\r\n\t\t<groupId>com.contentful.java</groupId>\r\n\t\t<artifactId>java-sdk</artifactId>\r\n\t\t<version>2.0.0</version>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/com.amazon`/aws-java-sdk -->\r\n\t<dependency>\r\n\t\t<groupId>com.amazonaws</groupId>\r\n\t\t<artifactId>aws-java-sdk</artifactId>\r\n\t\t<version>1.11.73</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/backport-util-concurrent/backport-util-concurrent -->\r\n\t<dependency>\r\n\t\t<groupId>backport-util-concurrent</groupId>\r\n\t\t<artifactId>backport-util-concurrent</artifactId>\r\n\t\t<version>3.0</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/com.google.api-client/google-api-client -->\r\n\t<dependency>\r\n\t\t<groupId>com.google.api-client</groupId>\r\n\t\t<artifactId>google-api-client</artifactId>\r\n\t\t<version>1.20.0</version>\r\n\t\t<exclusions>\r\n\t\t\t<exclusion>\r\n\t\t\t\t<groupId>com.google.guava</groupId>\r\n\t\t\t\t<artifactId>guava-jdk5</artifactId>\r\n\t\t\t</exclusion>\r\n\t\t</exclusions>\r\n\t</dependency>\r\n\t<!-- https://mvnrepository.com/artifact/com.google.api-client/google-api-client-gson -->\r\n\t<dependency>\r\n\t\t<groupId>com.google.api-client</groupId>\r\n\t\t<artifactId>google-api-client-gson</artifactId>\r\n\t\t<version>1.23.0</version>\r\n\t</dependency>\r\n\t<!-- https://mvnrepository.com/artifact/com.google.http-client/google-http-client -->\r\n\t<dependency>\r\n\t\t<groupId>com.google.http-client</groupId>\r\n\t\t<artifactId>google-http-client</artifactId>\r\n\t\t<version>1.20.0</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/com.google.code.gson/gson -->\r\n\t<dependency>\r\n\t\t<groupId>com.google.code.gson</groupId>\r\n\t\t<artifactId>gson</artifactId>\r\n\t\t<version>2.2.4</version>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/javax.servlet.jsp/jsp-api -->\r\n\t<dependency>\r\n\t\t<groupId>javax.servlet.jsp</groupId>\r\n\t\t<artifactId>jsp-api</artifactId>\r\n\t\t<version>2.2</version>\r\n\t\t<scope>provided</scope>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.aspectj/aspectjrt -->\r\n\t<dependency>\r\n\t\t<groupId>org.aspectj</groupId>\r\n\t\t<artifactId>aspectjrt</artifactId>\r\n\t\t<version>1.8.10</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver -->\r\n\t<dependency>\r\n\t\t<groupId>org.aspectj</groupId>\r\n\t\t<artifactId>aspectjweaver</artifactId>\r\n\t\t<version>1.8.10</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/commons-codec/commons-codec -->\r\n\t<dependency>\r\n\t\t<groupId>commons-codec</groupId>\r\n\t\t<artifactId>commons-codec</artifactId>\r\n\t\t<version>1.10</version>\r\n\t</dependency>\r\n\t<!-- https://mvnrepository.com/artifact/commons-logging/commons-logging -->\r\n\t<dependency>\r\n\t\t<groupId>commons-logging</groupId>\r\n\t\t<artifactId>commons-logging</artifactId>\r\n\t\t<version>1.2</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.httpcomponents/httpclient -->\r\n\t<dependency>\r\n\t\t<groupId>org.apache.httpcomponents</groupId>\r\n\t\t<artifactId>httpclient</artifactId>\r\n\t\t<version>4.5.3</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/software.amazon.ion/ion-java -->\r\n\t<dependency>\r\n\t\t<groupId>software.amazon.ion</groupId>\r\n\t\t<artifactId>ion-java</artifactId>\r\n\t\t<version>1.0.1</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.dataformat/jackson-dataformat-cbor -->\r\n\t<dependency>\r\n\t\t<groupId>com.fasterxml.jackson.dataformat</groupId>\r\n\t\t<artifactId>jackson-dataformat-cbor</artifactId>\r\n\t\t<version>2.6.6</version>\r\n\t</dependency>\r\n\t<!-- https://mvnrepository.com/artifact/com.amazonaws/jmespath-java -->\r\n\t<dependency>\r\n\t\t<groupId>com.amazonaws</groupId>\r\n\t\t<artifactId>jmespath-java</artifactId>\r\n\t\t<version>1.11.203</version>\r\n\t\t<exclusions>\r\n\t\t\t<exclusion>\r\n\t\t\t\t<groupId>com.fasterxml.jackson.core</groupId>\r\n\t\t\t\t<artifactId>jackson-databind</artifactId>\r\n\t\t\t</exclusion>\r\n\t\t</exclusions>\r\n\t</dependency>\r\n\t<!-- https://mvnrepository.com/artifact/joda-time/joda-time -->\r\n\t<dependency>\r\n\t\t<groupId>joda-time</groupId>\r\n\t\t<artifactId>joda-time</artifactId>\r\n\t\t<version>2.9.9</version>\r\n\t</dependency>\r\n\t<!-- https://mvnrepository.com/artifact/org.springframework/spring-beans -->\r\n\t<dependency>\r\n\t\t<groupId>org.springframework</groupId>\r\n\t\t<artifactId>spring-beans</artifactId>\r\n\t\t<version>${spring.version}</version>\r\n\t</dependency>\r\n\t<!-- https://mvnrepository.com/artifact/org.springframework/spring-context -->\r\n\t<dependency>\r\n\t\t<groupId>org.springframework</groupId>\r\n\t\t<artifactId>spring-context</artifactId>\r\n\t\t<version>${spring.version}</version>\r\n\t</dependency>\r\n\t<!-- https://mvnrepository.com/artifact/org.springframework/spring-core -->\r\n\t<dependency>\r\n\t\t<groupId>org.springframework</groupId>\r\n\t\t<artifactId>spring-core</artifactId>\r\n\t\t<version>${spring.version}</version>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.springframework/spring-aop -->\r\n\t<dependency>\r\n\t\t<groupId>org.springframework</groupId>\r\n\t\t<artifactId>spring-aop</artifactId>\r\n\t\t<version>${spring.version}</version>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.springframework/spring-jms -->\r\n\t<dependency>\r\n\t\t<groupId>org.springframework</groupId>\r\n\t\t<artifactId>spring-jms</artifactId>\r\n\t\t<version>${spring.version}</version>\r\n\t</dependency>\r\n\r\n\t<!-- ************* ********* *************** -->\r\n\r\n\r\n\t<!-- ************* barcode *************** -->\r\n\t<!-- https://mvnrepository.com/artifact/net.sf.barcode4j/barcode4j -->\r\n\t<dependency>\r\n\t\t<groupId>net.sf.barcode4j</groupId>\r\n\t\t<artifactId>barcode4j</artifactId>\r\n\t\t<version>2.1</version>\r\n\t</dependency>\r\n\r\n\t<!-- ************* ********* *************** -->\r\n\r\n\r\n\t<!-- ************* citrus *************** -->\r\n\r\n\t<!-- https://mvnrepository.com/artifact/cryptix/cryptix -->\r\n\t<dependency>\r\n\t\t<groupId>cryptix</groupId>\r\n\t\t<artifactId>cryptix</artifactId>\r\n\t\t<version>3.2.0</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/jboss/jnet -->\r\n\t<dependency>\r\n\t\t<groupId>jboss</groupId>\r\n\t\t<artifactId>jnet</artifactId>\r\n\t\t<version>3.2.1</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.jglobus/jsse -->\r\n\t<dependency>\r\n\t\t<groupId>org.jglobus</groupId>\r\n\t\t<artifactId>jsse</artifactId>\r\n\t\t<version>2.1.0</version>\r\n\t</dependency>\r\n\r\n\t<!-- ************* ********* *************** -->\r\n\r\n\r\n\r\n\t<!-- ************* commons *************** -->\r\n\r\n\t<!-- https://mvnrepository.com/artifact/commons-beanutils/commons-beanutils -->\r\n\t<dependency>\r\n\t\t<groupId>commons-beanutils</groupId>\r\n\t\t<artifactId>commons-beanutils</artifactId>\r\n\t\t<version>1.9.3</version>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/commons-collections/commons-collections -->\r\n\t<dependency>\r\n\t\t<groupId>commons-collections</groupId>\r\n\t\t<artifactId>commons-collections</artifactId>\r\n\t\t<version>3.2.2</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.commons/commons-dbcp2 -->\r\n\t<dependency>\r\n\t\t<groupId>org.apache.commons</groupId>\r\n\t\t<artifactId>commons-dbcp2</artifactId>\r\n\t\t<version>2.0.1</version>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.commons/commons-email -->\r\n\t<dependency>\r\n\t\t<groupId>org.apache.commons</groupId>\r\n\t\t<artifactId>commons-email</artifactId>\r\n\t\t<version>1.5</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload -->\r\n\t<dependency>\r\n\t\t<groupId>commons-fileupload</groupId>\r\n\t\t<artifactId>commons-fileupload</artifactId>\r\n\t\t<version>1.3.3</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/commons-httpclient/commons-httpclient -->\r\n\t<dependency>\r\n\t\t<groupId>commons-httpclient</groupId>\r\n\t\t<artifactId>commons-httpclient</artifactId>\r\n\t\t<version>3.1</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/commons-io/commons-io -->\r\n\t<dependency>\r\n\t\t<groupId>commons-io</groupId>\r\n\t\t<artifactId>commons-io</artifactId>\r\n\t\t<version>2.5</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/commons-lang/commons-lang -->\r\n\t<dependency>\r\n\t\t<groupId>commons-lang</groupId>\r\n\t\t<artifactId>commons-lang</artifactId>\r\n\t\t<version>2.6</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/commons-pool/commons-pool -->\r\n\t<dependency>\r\n\t\t<groupId>commons-pool</groupId>\r\n\t\t<artifactId>commons-pool</artifactId>\r\n\t\t<version>1.6</version>\r\n\t</dependency>\r\n\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/com.restfb/restfb -->\r\n\t<dependency>\r\n\t\t<groupId>com.restfb</groupId>\r\n\t\t<artifactId>restfb</artifactId>\r\n\t\t<version>1.45.0</version>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- ************* ********* *************** -->\r\n\r\n\r\n\r\n\t<!-- ************* freemarker *************** -->\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.freemarker/freemarker -->\r\n\t<dependency>\r\n\t\t<groupId>org.freemarker</groupId>\r\n\t\t<artifactId>freemarker</artifactId>\r\n\t\t<version>2.3.23</version>\r\n\t</dependency>\r\n\r\n\t<!-- ************* ********* *************** -->\r\n\r\n\r\n\r\n\t<!-- ************* http *************** -->\r\n\r\n\t<!-- https://mvnrepository.com/artifact/com.google.guava/guava -->\r\n\t<dependency>\r\n\t\t<groupId>com.google.guava</groupId>\r\n\t\t<artifactId>guava</artifactId>\r\n\t\t<version>15.0</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/com.ning/async-http-client -->\r\n\t<dependency>\r\n\t\t<groupId>com.ning</groupId>\r\n\t\t<artifactId>async-http-client</artifactId>\r\n\t\t<version>1.9.40</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.httpcomponents/httpcore-nio -->\r\n\t<dependency>\r\n\t\t<groupId>org.apache.httpcomponents</groupId>\r\n\t\t<artifactId>httpcore-nio</artifactId>\r\n\t\t<version>4.4.7</version>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- ************* ********* *************** -->\r\n\r\n\r\n\r\n\t<!-- ************* infispan *************** -->\r\n\r\n\t<!-- local -->\r\n\t<dependency>\r\n\t\t<groupId>org.infinispan</groupId>\r\n\t\t<artifactId>infinispan-core</artifactId>\r\n\t\t<version>5</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.jboss.logging/jboss-logging -->\r\n\t<dependency>\r\n\t\t<groupId>org.jboss.logging</groupId>\r\n\t\t<artifactId>jboss-logging</artifactId>\r\n\t\t<version>3.3.1.Final</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.jboss.marshalling/jboss-marshalling -->\r\n\t<dependency>\r\n\t\t<groupId>org.jboss.marshalling</groupId>\r\n\t\t<artifactId>jboss-marshalling</artifactId>\r\n\t\t<version>1.3.11.GA</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.jboss.marshalling/jboss-marshalling-river -->\r\n\t<dependency>\r\n\t\t<groupId>org.jboss.marshalling</groupId>\r\n\t\t<artifactId>jboss-marshalling-river</artifactId>\r\n\t\t<version>1.3.11.GA</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.jboss.spec.javax.transaction/jboss-transaction-api_1.1_spec -->\r\n\t<dependency>\r\n\t\t<groupId>org.jboss.spec.javax.transaction</groupId>\r\n\t\t<artifactId>jboss-transaction-api_1.1_spec</artifactId>\r\n\t\t<version>1.0.1.Final</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/net.jcip/jcip-annotations -->\r\n\t<dependency>\r\n\t\t<groupId>net.jcip</groupId>\r\n\t\t<artifactId>jcip-annotations</artifactId>\r\n\t\t<version>1.0</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.jgroups/jgroups -->\r\n\t<dependency>\r\n\t\t<groupId>org.jgroups</groupId>\r\n\t\t<artifactId>jgroups</artifactId>\r\n\t\t<version>3.0.11.Final</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/log4j/log4j -->\r\n\t<dependency>\r\n\t\t<groupId>log4j</groupId>\r\n\t\t<artifactId>log4j</artifactId>\r\n\t\t<version>1.2.13</version>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.osgi/org.osgi.core -->\r\n\t<dependency>\r\n\t\t<groupId>org.osgi</groupId>\r\n\t\t<artifactId>org.osgi.core</artifactId>\r\n\t\t<version>6.0.0</version>\r\n\t\t<scope>provided</scope>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.rhq.helpers/rhq-pluginAnnotations -->\r\n\t<dependency>\r\n\t\t<groupId>org.rhq.helpers</groupId>\r\n\t\t<artifactId>rhq-pluginAnnotations</artifactId>\r\n\t\t<version>3.0.4</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.codehaus.woodstox/stax2-api -->\r\n\t<dependency>\r\n\t\t<groupId>org.codehaus.woodstox</groupId>\r\n\t\t<artifactId>stax2-api</artifactId>\r\n\t\t<version>3.1.1</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.codehaus.woodstox/woodstox-core-asl -->\r\n\t<dependency>\r\n\t\t<groupId>org.codehaus.woodstox</groupId>\r\n\t\t<artifactId>woodstox-core-asl</artifactId>\r\n\t\t<version>4.4.1</version>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- ************* ********* *************** -->\r\n\r\n\r\n\r\n\t<!-- ************* intellij *************** -->\r\n\r\n\t<!-- https://mvnrepository.com/artifact/com.intellij/annotations -->\r\n\t<dependency>\r\n\t\t<groupId>com.intellij</groupId>\r\n\t\t<artifactId>annotations</artifactId>\r\n\t\t<version>12.0</version>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- ************* ********* *************** -->\r\n\r\n\r\n\r\n\t<!-- ************* itext *************** -->\r\n\r\n\t<!-- https://mvnrepository.com/artifact/com.lowagie/itext -->\r\n\t<dependency>\r\n\t\t<groupId>com.lowagie</groupId>\r\n\t\t<artifactId>itext</artifactId>\r\n\t\t<version>4.2.2</version>\r\n\t\t<type>pom</type>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- ************* ********* *************** -->\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.lucene/lucene-analyzers -->\r\n\t<!-- <dependency> <groupId>org.apache.lucene</groupId> <artifactId>lucene-analyzers</artifactId> \r\n\t\t<version>3.6.2</version> </dependency> -->\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.lucene/lucene-core -->\r\n\t<dependency>\r\n\t\t<groupId>org.apache.lucene</groupId>\r\n\t\t<artifactId>lucene-core</artifactId>\r\n\t\t<version>${lucene.version}</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.lucene/lucene-highlighter -->\r\n\t<dependency>\r\n\t\t<groupId>org.apache.lucene</groupId>\r\n\t\t<artifactId>lucene-highlighter</artifactId>\r\n\t\t<version>${lucene.version}</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.lucene/lucene-memory -->\r\n\t<dependency>\r\n\t\t<groupId>org.apache.lucene</groupId>\r\n\t\t<artifactId>lucene-memory</artifactId>\r\n\t\t<version>4.10.3</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.lucene/lucene-queries -->\r\n\t<dependency>\r\n\t\t<groupId>org.apache.lucene</groupId>\r\n\t\t<artifactId>lucene-queries</artifactId>\r\n\t\t<version>${lucene.version}</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.xerial.snappy/snappy-java -->\r\n\t<dependency>\r\n\t\t<groupId>org.xerial.snappy</groupId>\r\n\t\t<artifactId>snappy-java</artifactId>\r\n\t\t<version>1.1.4</version>\r\n\t</dependency>\r\n\r\n\t<!-- ************* ********* *************** -->\r\n\r\n\r\n\r\n\t<!-- ************* json *************** -->\r\n\r\n\t<!-- https://mvnrepository.com/artifact/net.sf.ezmorph/ezmorph -->\r\n\t<dependency>\r\n\t\t<groupId>net.sf.ezmorph</groupId>\r\n\t\t<artifactId>ezmorph</artifactId>\r\n\t\t<version>1.0.6</version>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/net.sf.json-lib/json-lib -->\r\n\t<dependency>\r\n\t\t<groupId>net.sf.json-lib</groupId>\r\n\t\t<artifactId>json-lib</artifactId>\r\n\t\t<version>2.3</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple -->\r\n\t<dependency>\r\n\t\t<groupId>com.googlecode.json-simple</groupId>\r\n\t\t<artifactId>json-simple</artifactId>\r\n\t\t<version>1.1.1</version>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- ************* ********* *************** -->\r\n\r\n\r\n\r\n\t<!-- ************* logger *************** -->\r\n\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api -->\r\n\t<dependency>\r\n\t\t<groupId>org.slf4j</groupId>\r\n\t\t<artifactId>slf4j-api</artifactId>\r\n\t\t<version>1.5.10</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-log4j12 -->\r\n\t<dependency>\r\n\t\t<groupId>org.slf4j</groupId>\r\n\t\t<artifactId>slf4j-log4j12</artifactId>\r\n\t\t<version>1.5.10</version>\r\n\t</dependency>\r\n\r\n\t<!-- ************* ********* *************** -->\r\n\r\n\r\n\r\n\t<!-- ************* mysql *************** -->\r\n\r\n\t<!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java -->\r\n\t<dependency>\r\n\t\t<groupId>mysql</groupId>\r\n\t\t<artifactId>mysql-connector-java</artifactId>\r\n\t\t<version>6.0.6</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.tomcat/tomcat-jdbc -->\r\n\t<dependency>\r\n\t\t<groupId>org.apache.tomcat</groupId>\r\n\t\t<artifactId>tomcat-jdbc</artifactId>\r\n\t\t<version>8.5.21</version>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.codehaus.jackson/jackson-jaxrs -->\r\n\t<dependency>\r\n\t\t<groupId>org.codehaus.jackson</groupId>\r\n\t\t<artifactId>jackson-jaxrs</artifactId>\r\n\t\t<version>1.9.12</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.jboss.resteasy/jaxrs-api -->\r\n\t<dependency>\r\n\t\t<groupId>org.jboss.resteasy</groupId>\r\n\t\t<artifactId>jaxrs-api</artifactId>\r\n\t\t<version>3.0.12.Final</version>\r\n\t</dependency>\r\n\t<dependency>\r\n\t\t<groupId>javax.ws.rs</groupId>\r\n\t\t<artifactId>javax.ws.rs-api</artifactId>\r\n\t\t<version>2.1</version>\r\n\t</dependency>\r\n\t<!-- https://mvnrepository.com/artifact/org.jboss.resteasy/resteasy-guice -->\r\n\t<dependency>\r\n\t\t<groupId>org.jboss.resteasy</groupId>\r\n\t\t<artifactId>resteasy-guice</artifactId>\r\n\t\t<version>3.0.9.Final</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.jboss.resteasy/resteasy-jackson-provider -->\r\n\t<dependency>\r\n\t\t<groupId>org.jboss.resteasy</groupId>\r\n\t\t<artifactId>resteasy-jackson-provider</artifactId>\r\n\t\t<version>3.0.9.Final</version>\r\n\t\t<exclusions>\r\n\t\t\t<exclusion>\r\n\t\t\t\t<groupId>org.codehaus.jackson</groupId>\r\n\t\t\t\t<artifactId>jackson-xc</artifactId>\r\n\t\t\t</exclusion>\r\n\t\t</exclusions>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.jboss.resteasy/resteasy-jaxrs -->\r\n\t<dependency>\r\n\t\t<groupId>org.jboss.resteasy</groupId>\r\n\t\t<artifactId>resteasy-jaxrs</artifactId>\r\n\t\t<version>3.0.9.Final</version>\r\n\t\t<!-- <exclusions> <exclusion> <groupId>org.jboss.resteasy</groupId> <artifactId>jaxrs-api</artifactId> \r\n\t\t\t</exclusion> </exclusions> -->\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.jboss.resteasy/resteasy-multipart-provider -->\r\n\t<dependency>\r\n\t\t<groupId>org.jboss.resteasy</groupId>\r\n\t\t<artifactId>resteasy-multipart-provider</artifactId>\r\n\t\t<version>3.0.9.Final</version>\r\n\t\t<exclusions>\r\n\t\t\t<exclusion>\r\n\t\t\t\t<groupId>org.jboss.resteasy</groupId>\r\n\t\t\t\t<artifactId>resteasy-client</artifactId>\r\n\t\t\t</exclusion>\r\n\t\t</exclusions>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.jboss.resteasy/resteasy-spring -->\r\n\t<dependency>\r\n\t\t<groupId>org.jboss.resteasy</groupId>\r\n\t\t<artifactId>resteasy-spring</artifactId>\r\n\t\t<version>3.0.9.Final</version>\r\n\t\t<exclusions>\r\n\t\t\t<exclusion>\r\n\t\t\t\t<groupId>org.jboss.resteasy</groupId>\r\n\t\t\t\t<artifactId>resteasy-jettison-provider</artifactId>\r\n\t\t\t</exclusion>\r\n\t\t\t<exclusion>\r\n\t\t\t\t<groupId>org.jboss.resteasy</groupId>\r\n\t\t\t\t<artifactId>jaxrs-api</artifactId>\r\n\t\t\t</exclusion>\r\n\t\t</exclusions>\r\n\t</dependency>\r\n\r\n\t<!-- ************* ********* *************** -->\r\n\r\n\t<!-- https://mvnrepository.com/artifact/javax.servlet/jstl -->\r\n\t<dependency>\r\n\t\t<groupId>javax.servlet</groupId>\r\n\t\t<artifactId>jstl</artifactId>\r\n\t\t<version>1.2</version>\r\n\t</dependency>\r\n\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.commons/commons-lang3 -->\r\n\t<dependency>\r\n\t\t<groupId>org.apache.commons</groupId>\r\n\t\t<artifactId>commons-lang3</artifactId>\r\n\t\t<version>3.6</version>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/dom4j/dom4j -->\r\n\t<dependency>\r\n\t\t<groupId>dom4j</groupId>\r\n\t\t<artifactId>dom4j</artifactId>\r\n\t\t<version>1.6.1</version>\r\n\t</dependency>\r\n\r\n\t<!-- &lt;!&ndash; https://mvnrepository.com/artifact/org.hibernate/hibernate-annotations \r\n\t\t&ndash;&gt; <dependency> <groupId>org.hibernate</groupId> <artifactId>hibernate-annotations</artifactId> \r\n\t\t<version>3.5.6-Final</version> </dependency> -->\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-core -->\r\n\t<dependency>\r\n\t\t<groupId>org.hibernate</groupId>\r\n\t\t<artifactId>hibernate-core</artifactId>\r\n\t\t<version>4.3.11.Final</version>\r\n\t</dependency>\r\n\r\n\r\n\r\n\t<!-- ************* ********* *************** -->\r\n\r\n\r\n\r\n\t<!-- ************* hibernate *************** -->\r\n\r\n\t<!-- https://mvnrepository.com/artifact/net.sourceforge.stripes/stripes -->\r\n\t<dependency>\r\n\t\t<groupId>net.sourceforge.stripes</groupId>\r\n\t\t<artifactId>stripes</artifactId>\r\n\t\t<version>1.5.7</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.openjpa/openjpa -->\r\n\t<dependency>\r\n\t\t<groupId>org.apache.openjpa</groupId>\r\n\t\t<artifactId>openjpa</artifactId>\r\n\t\t<version>2.4.2</version>\r\n\t\t<exclusions>\r\n\t\t\t<exclusion>\r\n\t\t\t\t<groupId>org.apache.geronimo.specs</groupId>\r\n\t\t\t\t<artifactId>geronimo-jpa_2.0_spec</artifactId>\r\n\t\t\t</exclusion>\r\n\t\t</exclusions>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.springframework/spring-dao -->\r\n\t<!-- <dependency> <groupId>org.springframework</groupId> <artifactId>spring-dao</artifactId> \r\n\t\t<version>2.0.8</version> </dependency> -->\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.springframework/spring-orm -->\r\n\t<dependency>\r\n\t\t<groupId>org.springframework</groupId>\r\n\t\t<artifactId>spring-orm</artifactId>\r\n\t\t<version>${spring.version}</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.shiro/shiro-all -->\r\n\t<dependency>\r\n\t\t<groupId>shiro</groupId>\r\n\t\t<artifactId>shiro-all</artifactId>\r\n\t\t<version>1.0-incubating-SNAPSHOT</version>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.springframework/spring-web -->\r\n\t<dependency>\r\n\t\t<groupId>org.springframework</groupId>\r\n\t\t<artifactId>spring-web</artifactId>\r\n\t\t<version>${spring.version}</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.sanselan/sanselan -->\r\n\t<dependency>\r\n\t\t<groupId>org.apache.sanselan</groupId>\r\n\t\t<artifactId>sanselan</artifactId>\r\n\t\t<version>0.97-incubator</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/com.sun.media/jai-codec -->\r\n\t<dependency>\r\n\t\t<groupId>com.sun.media</groupId>\r\n\t\t<artifactId>jai-codec</artifactId>\r\n\t\t<version>1.1.3</version>\r\n\t</dependency>\r\n\r\n\t<!-- Local -->\r\n\t<dependency>\r\n\t\t<groupId>com.sun.media</groupId>\r\n\t\t<artifactId>jai_imageio</artifactId>\r\n\t\t<version>1.1</version>\r\n\t</dependency>\r\n\r\n\t<!-- local -->\r\n\t<dependency>\r\n\t\t<groupId>javax.media</groupId>\r\n\t\t<artifactId>jai_core</artifactId>\r\n\t\t<version>1.1.3</version>\r\n\t</dependency>\r\n\r\n\t<!-- local -->\r\n\t<dependency>\r\n\t\t<groupId>thirdparty</groupId>\r\n\t\t<artifactId>mediautil</artifactId>\r\n\t\t<version>1.0</version>\r\n\t</dependency>\r\n\r\n\t<!-- &lt;!&ndash; https://mvnrepository.com/artifact/org.apache.shiro/shiro-web \r\n\t\t&ndash;&gt; <dependency> <groupId>org.apache.shiro</groupId> <artifactId>shiro-web</artifactId> \r\n\t\t<version>1.4.0</version> </dependency> -->\r\n\r\n\t<!-- https://mvnrepository.com/artifact/concurrent/concurrent -->\r\n\t<dependency>\r\n\t\t<groupId>concurrent</groupId>\r\n\t\t<artifactId>concurrent</artifactId>\r\n\t\t<version>1.3.4</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.mindrot/jbcrypt -->\r\n\t<dependency>\r\n\t\t<groupId>org.mindrot</groupId>\r\n\t\t<artifactId>jbcrypt</artifactId>\r\n\t\t<version>0.4</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.poi/poi -->\r\n\t<dependency>\r\n\t\t<groupId>org.apache.poi</groupId>\r\n\t\t<artifactId>poi</artifactId>\r\n\t\t<version>3.17</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/net.spy/spymemcached -->\r\n\t<dependency>\r\n\t\t<groupId>net.spy</groupId>\r\n\t\t<artifactId>spymemcached</artifactId>\r\n\t\t<version>2.12.3</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/javax.interceptor/javax.interceptor-api -->\r\n\t<dependency>\r\n\t\t<groupId>javax.interceptor</groupId>\r\n\t\t<artifactId>javax.interceptor-api</artifactId>\r\n\t\t<version>1.2.1</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/com.tinify/tinify -->\r\n\t<dependency>\r\n\t\t<groupId>com.tinify</groupId>\r\n\t\t<artifactId>tinify</artifactId>\r\n\t\t<version>1.5.1</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/net.java.dev.jets3t/jets3t -->\r\n\t<dependency>\r\n\t\t<groupId>net.java.dev.jets3t</groupId>\r\n\t\t<artifactId>jets3t</artifactId>\r\n\t\t<version>0.9.4</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.jsoup/jsoup -->\r\n\t<dependency>\r\n\t\t<groupId>org.jsoup</groupId>\r\n\t\t<artifactId>jsoup</artifactId>\r\n\t\t<version>1.7.2</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.elasticsearch/elasticsearch -->\r\n\t<dependency>\r\n\t\t<groupId>org.elasticsearch</groupId>\r\n\t\t<artifactId>elasticsearch</artifactId>\r\n\t\t<version>6.1.1</version>\r\n\t</dependency>\r\n\t<!-- https://mvnrepository.com/artifact/org.elasticsearch.client/transport -->\r\n\t<dependency>\r\n\t\t<groupId>org.elasticsearch.client</groupId>\r\n\t\t<artifactId>transport</artifactId>\r\n\t\t<version>6.1.1</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/com.itextpdf/itextpdf -->\r\n\t<dependency>\r\n\t\t<groupId>com.itextpdf</groupId>\r\n\t\t<artifactId>itextpdf</artifactId>\r\n\t\t<version>5.2.1</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/com.lowagie/itext -->\r\n\t<dependency>\r\n\t\t<groupId>com.lowagie</groupId>\r\n\t\t<artifactId>itext</artifactId>\r\n\t\t<version>1.4.8</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.xhtmlrenderer/core-renderer -->\r\n\t<dependency>\r\n\t\t<groupId>org.xhtmlrenderer</groupId>\r\n\t\t<artifactId>core-renderer</artifactId>\r\n\t\t<version>R8pre2</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/de.congrace/exp4j -->\r\n\t<dependency>\r\n\t\t<groupId>de.congrace</groupId>\r\n\t\t<artifactId>exp4j</artifactId>\r\n\t\t<version>0.3.11</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/com.mchange/c3p0 -->\r\n\t<dependency>\r\n\t\t<groupId>com.mchange</groupId>\r\n\t\t<artifactId>c3p0</artifactId>\r\n\t\t<version>0.9.5.2</version>\r\n\t</dependency>\r\n\r\n\t<!-- Local -->\r\n\t<dependency>\r\n\t\t<groupId>thirdparty</groupId>\r\n\t\t<artifactId>lzstring4j</artifactId>\r\n\t\t<version>unknown</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.codehaus.groovy/groovy-all -->\r\n\t<dependency>\r\n\t\t<groupId>org.codehaus.groovy</groupId>\r\n\t\t<artifactId>groovy-all</artifactId>\r\n\t\t<version>2.4.12</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/javax.servlet.jsp/jsp-api -->\r\n\t<dependency>\r\n\t\t<groupId>javax.servlet.jsp</groupId>\r\n\t\t<artifactId>jsp-api</artifactId>\r\n\t\t<version>2.2</version>\r\n\t\t<scope>provided</scope>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/jfree/jcommon -->\r\n\t<dependency>\r\n\t\t<groupId>jfree</groupId>\r\n\t\t<artifactId>jcommon</artifactId>\r\n\t\t<version>1.0.16</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/bsh/bsh -->\r\n\t<dependency>\r\n\t\t<groupId>bsh</groupId>\r\n\t\t<artifactId>bsh</artifactId>\r\n\t\t<version>1.3.0</version>\r\n\t</dependency>\r\n\r\n\t<!-- local -->\r\n\t<dependency>\r\n\t\t<groupId>org.stripesstuff</groupId>\r\n\t\t<artifactId>stripesstuff</artifactId>\r\n\t\t<version>0.1</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-resources-plugin -->\r\n\t<dependency>\r\n\t\t<groupId>org.apache.maven.plugins</groupId>\r\n\t\t<artifactId>maven-resources-plugin</artifactId>\r\n\t\t<version>3.0.2</version>\r\n\t</dependency>\r\n\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-war-plugin -->\r\n\t<dependency>\r\n\t\t<groupId>org.apache.maven.plugins</groupId>\r\n\t\t<artifactId>maven-war-plugin</artifactId>\r\n\t\t<version>3.2.0</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.mongodb/mongo-java-driver -->\r\n\t<dependency>\r\n\t\t<groupId>org.mongodb</groupId>\r\n\t\t<artifactId>mongo-java-driver</artifactId>\r\n\t\t<version>3.3.0</version>\r\n\t</dependency>\r\n\r\n\t<!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-mongodb -->\r\n\t<dependency>\r\n\t\t<groupId>org.springframework.data</groupId>\r\n\t\t<artifactId>spring-data-mongodb</artifactId>\r\n\t\t<version>1.9.2.RELEASE</version>\r\n\t\t<exclusions>\r\n\t\t\t<exclusion>\r\n\t\t\t\t<groupId>org.slf4j</groupId>\r\n\t\t\t\t<artifactId>jcl-over-slf4j</artifactId>\r\n\t\t\t</exclusion>\r\n\t\t</exclusions>\r\n\t</dependency>\r\n\r\n\r\n\r\n</dependencies>\r\n```\r\n\r\nIs some dependency version mismatch possible here =||= maybe a `mvn dependency:tree`? =||= ```\r\n[INFO]\r\n[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ HKEdge ---\r\n[WARNING] The artifact com.lowagie:itext:pom:4.2.2 has been relocated to com.itextpdf:itextpdf:pom:5.5.6\r\n[INFO] HKEdge:HKEdge:war:0.0.1-SNAPSHOT\r\n[INFO] +- com.netflix.eureka:eureka-client:jar:1.6.2:compile\r\n[INFO] |  +- org.codehaus.jettison:jettison:jar:1.3.7:runtime\r\n[INFO] |  |  \\- stax:stax-api:jar:1.0.1:runtime\r\n[INFO] |  +- com.netflix.netflix-commons:netflix-eventbus:jar:0.3.0:runtime\r\n[INFO] |  |  +- com.netflix.netflix-commons:netflix-infix:jar:0.3.0:runtime\r\n[INFO] |  |  |  +- commons-jxpath:commons-jxpath:jar:1.3:runtime\r\n[INFO] |  |  |  +- javax.servlet:servlet-api:jar:2.5:runtime\r\n[INFO] |  |  |  \\- org.antlr:antlr-runtime:jar:3.4:runtime\r\n[INFO] |  |  |     \\- org.antlr:stringtemplate:jar:3.2.1:runtime\r\n[INFO] |  |  \\- org.apache.commons:commons-math:jar:2.2:runtime\r\n[INFO] |  +- com.thoughtworks.xstream:xstream:jar:1.4.9:compile\r\n[INFO] |  |  +- xmlpull:xmlpull:jar:1.1.3.1:compile\r\n[INFO] |  |  \\- xpp3:xpp3_min:jar:1.1.4c:compile\r\n[INFO] |  +- com.sun.jersey:jersey-core:jar:1.19.1:runtime\r\n[INFO] |  +- com.sun.jersey:jersey-client:jar:1.19.1:runtime\r\n[INFO] |  +- com.sun.jersey.contribs:jersey-apache-client4:jar:1.19.1:runtime\r\n[INFO] |  \\- com.google.inject:guice:jar:4.1.0:compile\r\n[INFO] |     +- javax.inject:javax.inject:jar:1:compile\r\n[INFO] |     \\- aopalliance:aopalliance:jar:1.0:compile\r\n[INFO] +- com.netflix.governator:governator:jar:1.17.5:compile\r\n[INFO] |  +- com.netflix.governator:governator-api:jar:1.17.5:compile\r\n[INFO] |  +- com.netflix.governator:governator-core:jar:1.17.5:compile\r\n[INFO] |  |  +- com.google.inject.extensions:guice-multibindings:jar:4.1.0:compile\r\n[INFO] |  |  \\- com.google.inject.extensions:guice-grapher:jar:4.1.0:compile\r\n[INFO] |  |     \\- com.google.inject.extensions:guice-assistedinject:jar:4.1.0:compile\r\n[INFO] |  \\- org.ow2.asm:asm:jar:5.0.4:compile\r\n[INFO] +- com.netflix.archaius:archaius-core:jar:0.7.6:compile\r\n[INFO] |  +- com.google.code.findbugs:jsr305:jar:3.0.1:compile\r\n[INFO] |  \\- commons-configuration:commons-configuration:jar:1.8:runtime\r\n[INFO] +- com.netflix.servo:servo-core:jar:0.12.21:compile\r\n[INFO] +- com.fasterxml.jackson.core:jackson-databind:jar:2.9.4:compile\r\n[INFO] +- com.fasterxml.jackson.core:jackson-annotations:jar:2.9.4:compile\r\n[INFO] +- com.fasterxml.jackson.core:jackson-core:jar:2.9.4:compile\r\n[INFO] +- com.hk:HKBridgeClient:jar:1.2:compile\r\n[INFO] +- com.hk:HKJms:jar:2.0:compile\r\n[INFO] +- com.hk:securePay:jar:1.48-SNAPSHOT:compile\r\n[INFO] +- org.json:json:jar:20070829:compile\r\n[INFO] +- org.apache.activemq:activemq-core:jar:5.7.0:compile\r\n[INFO] |  +- org.apache.geronimo.specs:geronimo-jms_1.1_spec:jar:1.1.1:compile\r\n[INFO] |  +- org.apache.activemq:kahadb:jar:5.7.0:compile\r\n[INFO] |  +- org.apache.activemq.protobuf:activemq-protobuf:jar:1.1:compile\r\n[INFO] |  +- org.fusesource.mqtt-client:mqtt-client:jar:1.3:compile\r\n[INFO] |  |  +- org.fusesource.hawtdispatch:hawtdispatch-transport:jar:1.11:compile\r\n[INFO] |  |  |  \\- org.fusesource.hawtdispatch:hawtdispatch:jar:1.11:compile\r\n[INFO] |  |  \\- org.fusesource.hawtbuf:hawtbuf:jar:1.9:compile\r\n[INFO] |  +- org.apache.geronimo.specs:geronimo-j2ee-management_1.1_spec:jar:1.0.1:compile\r\n[INFO] |  +- commons-net:commons-net:jar:3.1:compile\r\n[INFO] |  \\- org.jasypt:jasypt:jar:1.9.0:compile\r\n[INFO] +- org.apache.activemq:activemq-pool:jar:5.7.0:compile\r\n[INFO] |  \\- org.apache.geronimo.specs:geronimo-jta_1.0.1B_spec:jar:1.0.1:compile\r\n[INFO] +- javax.enterprise.concurrent:javax.enterprise.concurrent-api:jar:1.0:provided\r\n[INFO] +- javax.servlet:javax.servlet-api:jar:3.1.0:provided\r\n[INFO] +- com.hazelcast:hazelcast:jar:3.8.3:compile\r\n[INFO] +- com.hazelcast:hazelcast-client:jar:3.8.3:compile\r\n[INFO] +- io.connecto:connecto-java:jar:0.9.4:compile\r\n[INFO] +- com.contentful.java:java-sdk:jar:2.0.0:compile\r\n[INFO] |  +- com.squareup.retrofit:retrofit:jar:1.8.0:compile\r\n[INFO] |  \\- io.reactivex:rxjava:jar:1.0.0:compile\r\n[INFO] +- com.amazonaws:aws-java-sdk:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-pinpoint:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-xray:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-opsworkscm:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-support:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-simpledb:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-servicecatalog:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-servermigration:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-simpleworkflow:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-storagegateway:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-route53:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-s3:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-importexport:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-sts:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-sqs:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-rds:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-redshift:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-elasticbeanstalk:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-glacier:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-iam:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-datapipeline:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-elasticloadbalancing:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-elasticloadbalancingv2:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-emr:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-elasticache:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-elastictranscoder:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-ec2:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-dynamodb:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-sns:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-budgets:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cloudtrail:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cloudwatch:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-logs:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-events:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cognitoidentity:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cognitosync:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-directconnect:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cloudformation:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cloudfront:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-kinesis:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-opsworks:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-ses:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-autoscaling:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cloudsearch:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cloudwatchmetrics:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-codedeploy:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-codepipeline:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-kms:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-config:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-lambda:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-ecs:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-ecr:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cloudhsm:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-ssm:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-workspaces:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-machinelearning:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-directory:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-efs:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-codecommit:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-devicefarm:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-elasticsearch:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-waf:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-marketplacecommerceanalytics:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-inspector:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-iot:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-api-gateway:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-acm:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-gamelift:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-dms:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-marketplacemeteringservice:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cognitoidp:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-discovery:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-applicationautoscaling:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-snowball:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-rekognition:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-polly:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-lightsail:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-stepfunctions:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-health:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-codebuild:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-appstream:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-shield:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-batch:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-core:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-models:jar:1.11.73:compile\r\n[INFO] |  \\- com.amazonaws:aws-java-sdk-swf-libraries:jar:1.11.22:compile\r\n[INFO] +- backport-util-concurrent:backport-util-concurrent:jar:3.0:compile\r\n[INFO] +- com.google.api-client:google-api-client:jar:1.20.0:compile\r\n[INFO] |  +- com.google.oauth-client:google-oauth-client:jar:1.20.0:compile\r\n[INFO] |  \\- com.google.http-client:google-http-client-jackson2:jar:1.20.0:compile\r\n[INFO] +- com.google.api-client:google-api-client-gson:jar:1.23.0:compile\r\n[INFO] |  \\- com.google.http-client:google-http-client-gson:jar:1.23.0:compile\r\n[INFO] +- com.google.http-client:google-http-client:jar:1.20.0:compile\r\n[INFO] +- com.google.code.gson:gson:jar:2.2.4:compile\r\n[INFO] +- javax.servlet.jsp:jsp-api:jar:2.2:provided\r\n[INFO] +- org.aspectj:aspectjrt:jar:1.8.10:compile\r\n[INFO] +- org.aspectj:aspectjweaver:jar:1.8.10:compile\r\n[INFO] +- commons-codec:commons-codec:jar:1.10:compile\r\n[INFO] +- commons-logging:commons-logging:jar:1.2:compile\r\n[INFO] +- org.apache.httpcomponents:httpclient:jar:4.5.3:compile\r\n[INFO] |  \\- org.apache.httpcomponents:httpcore:jar:4.4.6:compile\r\n[INFO] +- software.amazon.ion:ion-java:jar:1.0.1:compile\r\n[INFO] +- com.fasterxml.jackson.dataformat:jackson-dataformat-cbor:jar:2.6.6:compile\r\n[INFO] +- com.amazonaws:jmespath-java:jar:1.11.203:compile\r\n[INFO] +- joda-time:joda-time:jar:2.9.9:compile\r\n[INFO] +- org.springframework:spring-beans:jar:4.3.11.RELEASE:compile\r\n[INFO] +- org.springframework:spring-context:jar:4.3.11.RELEASE:compile\r\n[INFO] |  \\- org.springframework:spring-expression:jar:4.3.11.RELEASE:compile\r\n[INFO] +- org.springframework:spring-core:jar:4.3.11.RELEASE:compile\r\n[INFO] +- org.springframework:spring-aop:jar:4.3.11.RELEASE:compile\r\n[INFO] +- org.springframework:spring-jms:jar:4.3.11.RELEASE:compile\r\n[INFO] |  +- org.springframework:spring-messaging:jar:4.3.11.RELEASE:compile\r\n[INFO] |  \\- org.springframework:spring-tx:jar:4.3.11.RELEASE:compile\r\n[INFO] +- net.sf.barcode4j:barcode4j:jar:2.1:compile\r\n[INFO] |  +- avalon-framework:avalon-framework-impl:jar:4.2.0:compile\r\n[INFO] |  +- commons-cli:commons-cli:jar:1.0:compile\r\n[INFO] |  \\- org.apache.ant:ant:jar:1.7.1:compile\r\n[INFO] |     \\- org.apache.ant:ant-launcher:jar:1.7.1:compile\r\n[INFO] +- cryptix:cryptix:jar:3.2.0:compile\r\n[INFO] +- jboss:jnet:jar:3.2.1:compile\r\n[INFO] +- org.jglobus:jsse:jar:2.1.0:compile\r\n[INFO] |  \\- org.jglobus:ssl-proxies:jar:2.1.0:compile\r\n[INFO] +- commons-beanutils:commons-beanutils:jar:1.9.3:compile\r\n[INFO] +- commons-collections:commons-collections:jar:3.2.2:compile\r\n[INFO] +- org.apache.commons:commons-dbcp2:jar:2.0.1:compile\r\n[INFO] |  \\- org.apache.commons:commons-pool2:jar:2.2:compile\r\n[INFO] +- org.apache.commons:commons-email:jar:1.5:compile\r\n[INFO] |  \\- com.sun.mail:javax.mail:jar:1.5.6:compile\r\n[INFO] +- commons-fileupload:commons-fileupload:jar:1.3.3:compile\r\n[INFO] +- commons-httpclient:commons-httpclient:jar:3.1:compile\r\n[INFO] +- commons-io:commons-io:jar:2.5:compile\r\n[INFO] +- commons-lang:commons-lang:jar:2.6:compile\r\n[INFO] +- commons-pool:commons-pool:jar:1.6:compile\r\n[INFO] +- com.restfb:restfb:jar:1.45.0:compile\r\n[INFO] +- org.freemarker:freemarker:jar:2.3.23:compile\r\n[INFO] +- com.google.guava:guava:jar:15.0:compile\r\n[INFO] +- com.ning:async-http-client:jar:1.9.40:compile\r\n[INFO] |  \\- io.netty:netty:jar:3.10.6.Final:compile\r\n[INFO] +- org.apache.httpcomponents:httpcore-nio:jar:4.4.7:compile\r\n[INFO] +- org.infinispan:infinispan-core:jar:5:compile\r\n[INFO] +- org.jboss.logging:jboss-logging:jar:3.3.1.Final:compile\r\n[INFO] +- org.jboss.marshalling:jboss-marshalling:jar:1.3.11.GA:compile\r\n[INFO] +- org.jboss.marshalling:jboss-marshalling-river:jar:1.3.11.GA:compile\r\n[INFO] +- org.jboss.spec.javax.transaction:jboss-transaction-api_1.1_spec:jar:1.0.1.Final:compile\r\n[INFO] +- net.jcip:jcip-annotations:jar:1.0:compile\r\n[INFO] +- org.jgroups:jgroups:jar:3.0.11.Final:compile\r\n[INFO] +- log4j:log4j:jar:1.2.13:compile\r\n[INFO] +- org.osgi:org.osgi.core:jar:6.0.0:provided\r\n[INFO] +- org.rhq.helpers:rhq-pluginAnnotations:jar:3.0.4:compile\r\n[INFO] +- org.codehaus.woodstox:stax2-api:jar:3.1.1:compile\r\n[INFO] |  \\- javax.xml.stream:stax-api:jar:1.0-2:compile\r\n[INFO] +- org.codehaus.woodstox:woodstox-core-asl:jar:4.4.1:compile\r\n[INFO] +- com.intellij:annotations:jar:12.0:compile\r\n[INFO] +- com.itextpdf:itextpdf:pom:5.5.6:compile\r\n[INFO] +- org.apache.lucene:lucene-core:jar:7.1.0:compile\r\n[INFO] +- org.apache.lucene:lucene-highlighter:jar:7.1.0:compile\r\n[INFO] |  +- org.apache.lucene:lucene-analyzers-common:jar:7.1.0:compile\r\n[INFO] |  \\- org.apache.lucene:lucene-join:jar:7.1.0:compile\r\n[INFO] +- org.apache.lucene:lucene-memory:jar:4.10.3:compile\r\n[INFO] +- org.apache.lucene:lucene-queries:jar:7.1.0:compile\r\n[INFO] +- org.xerial.snappy:snappy-java:jar:1.1.4:compile\r\n[INFO] +- net.sf.ezmorph:ezmorph:jar:1.0.6:compile\r\n[INFO] +- net.sf.json-lib:json-lib:jar:2.3:compile\r\n[INFO] +- com.googlecode.json-simple:json-simple:jar:1.1.1:compile\r\n[INFO] |  \\- junit:junit:jar:4.10:compile\r\n[INFO] |     \\- org.hamcrest:hamcrest-core:jar:1.1:compile\r\n[INFO] +- org.slf4j:slf4j-api:jar:1.5.10:compile\r\n[INFO] +- org.slf4j:slf4j-log4j12:jar:1.5.10:compile\r\n[INFO] +- mysql:mysql-connector-java:jar:6.0.6:compile\r\n[INFO] +- org.apache.tomcat:tomcat-jdbc:jar:8.5.21:compile\r\n[INFO] |  \\- org.apache.tomcat:tomcat-juli:jar:8.5.21:compile\r\n[INFO] +- org.codehaus.jackson:jackson-jaxrs:jar:1.9.12:compile\r\n[INFO] |  +- org.codehaus.jackson:jackson-core-asl:jar:1.9.12:compile\r\n[INFO] |  \\- org.codehaus.jackson:jackson-mapper-asl:jar:1.9.12:compile\r\n[INFO] +- org.jboss.resteasy:resteasy-guice:jar:3.0.9.Final:compile\r\n[INFO] |  \\- javax.annotation:jsr250-api:jar:1.0:compile\r\n[INFO] +- org.jboss.resteasy:resteasy-jackson-provider:jar:3.0.9.Final:compile\r\n[INFO] +- org.jboss.resteasy:resteasy-jaxrs:jar:3.0.9.Final:compile\r\n[INFO] |  +- org.jboss.resteasy:jaxrs-api:jar:3.0.9.Final:compile\r\n[INFO] |  +- org.jboss.spec.javax.annotation:jboss-annotations-api_1.1_spec:jar:1.0.1.Final:compile\r\n[INFO] |  \\- javax.activation:activation:jar:1.1:compile\r\n[INFO] +- org.jboss.resteasy:resteasy-multipart-provider:jar:3.0.9.Final:compile\r\n[INFO] |  +- org.jboss.resteasy:resteasy-jaxb-provider:jar:3.0.9.Final:compile\r\n[INFO] |  |  \\- com.sun.xml.bind:jaxb-impl:jar:2.2.7:compile\r\n[INFO] |  |     +- com.sun.xml.bind:jaxb-core:jar:2.2.7:compile\r\n[INFO] |  |     |  +- javax.xml.bind:jaxb-api:jar:2.2.7:compile\r\n[INFO] |  |     |  \\- com.sun.istack:istack-commons-runtime:jar:2.16:compile\r\n[INFO] |  |     \\- com.sun.xml.fastinfoset:FastInfoset:jar:1.2.12:compile\r\n[INFO] |  |        \\- javax.xml.bind:jsr173_api:jar:1.0:compile\r\n[INFO] |  +- javax.mail:mail:jar:1.5.0-b01:compile\r\n[INFO] |  \\- org.apache.james:apache-mime4j:jar:0.6:compile\r\n[INFO] +- org.jboss.resteasy:resteasy-spring:jar:3.0.9.Final:compile\r\n[INFO] +- javax.servlet:jstl:jar:1.2:compile\r\n[INFO] +- org.apache.commons:commons-lang3:jar:3.6:compile\r\n[INFO] +- dom4j:dom4j:jar:1.6.1:compile\r\n[INFO] |  \\- xml-apis:xml-apis:jar:1.0.b2:compile\r\n[INFO] +- org.hibernate:hibernate-core:jar:4.3.11.Final:compile\r\n[INFO] |  +- org.jboss.logging:jboss-logging-annotations:jar:1.2.0.Beta1:compile\r\n[INFO] |  +- org.jboss.spec.javax.transaction:jboss-transaction-api_1.2_spec:jar:1.0.0.Final:compile\r\n[INFO] |  +- org.hibernate.common:hibernate-commons-annotations:jar:4.0.5.Final:compile\r\n[INFO] |  +- org.hibernate.javax.persistence:hibernate-jpa-2.1-api:jar:1.0.0.Final:compile\r\n[INFO] |  +- org.javassist:javassist:jar:3.18.1-GA:compile\r\n[INFO] |  +- antlr:antlr:jar:2.7.7:compile\r\n[INFO] |  \\- org.jboss:jandex:jar:1.1.0.Final:compile\r\n[INFO] +- net.sourceforge.stripes:stripes:jar:1.5.7:compile\r\n[INFO] +- org.apache.openjpa:openjpa:jar:2.4.2:compile\r\n[INFO] |  +- net.sourceforge.serp:serp:jar:1.15.1:compile\r\n[INFO] |  +- org.apache.geronimo.specs:geronimo-jta_1.1_spec:jar:1.1.1:compile\r\n[INFO] |  \\- org.apache.xbean:xbean-asm5-shaded:jar:3.17:compile\r\n[INFO] +- org.springframework:spring-orm:jar:4.3.11.RELEASE:compile\r\n[INFO] |  \\- org.springframework:spring-jdbc:jar:4.3.11.RELEASE:compile\r\n[INFO] +- shiro:shiro-all:jar:1.0-incubating-SNAPSHOT:compile\r\n[INFO] +- org.springframework:spring-web:jar:4.3.11.RELEASE:compile\r\n[INFO] +- org.apache.sanselan:sanselan:jar:0.97-incubator:compile\r\n[INFO] +- com.sun.media:jai-codec:jar:1.1.3:compile\r\n[INFO] |  \\- javax.media:jai-core:jar:1.1.3:compile\r\n[INFO] +- com.sun.media:jai_imageio:jar:1.1:compile\r\n[INFO] +- javax.media:jai_core:jar:1.1.3:compile\r\n[INFO] +- thirdparty:mediautil:jar:1.0:compile\r\n[INFO] +- concurrent:concurrent:jar:1.3.4:compile\r\n[INFO] +- org.mindrot:jbcrypt:jar:0.4:compile\r\n[INFO] +- org.apache.poi:poi:jar:3.17:compile\r\n[INFO] |  \\- org.apache.commons:commons-collections4:jar:4.1:compile\r\n[INFO] +- net.spy:spymemcached:jar:2.12.3:compile\r\n[INFO] +- javax.interceptor:javax.interceptor-api:jar:1.2.1:compile\r\n[INFO] +- com.tinify:tinify:jar:1.5.1:compile\r\n[INFO] |  \\- com.squareup.okhttp3:okhttp:jar:3.8.1:compile\r\n[INFO] |     \\- com.squareup.okio:okio:jar:1.13.0:compile\r\n[INFO] +- net.java.dev.jets3t:jets3t:jar:0.9.4:compile\r\n[INFO] |  +- org.bouncycastle:bcprov-jdk15on:jar:1.52:compile\r\n[INFO] |  \\- com.jamesmurty.utils:java-xmlbuilder:jar:1.1:compile\r\n[INFO] |     \\- net.iharder:base64:jar:2.3.8:compile\r\n[INFO] +- org.jsoup:jsoup:jar:1.7.2:compile\r\n[INFO] +- org.elasticsearch:elasticsearch:jar:6.1.1:compile\r\n[INFO] |  +- org.apache.lucene:lucene-backward-codecs:jar:7.1.0:compile\r\n[INFO] |  +- org.apache.lucene:lucene-grouping:jar:7.1.0:compile\r\n[INFO] |  +- org.apache.lucene:lucene-misc:jar:7.1.0:compile\r\n[INFO] |  +- org.apache.lucene:lucene-queryparser:jar:7.1.0:compile\r\n[INFO] |  +- org.apache.lucene:lucene-sandbox:jar:7.1.0:compile\r\n[INFO] |  +- org.apache.lucene:lucene-spatial:jar:7.1.0:compile\r\n[INFO] |  +- org.apache.lucene:lucene-spatial-extras:jar:7.1.0:compile\r\n[INFO] |  +- org.apache.lucene:lucene-spatial3d:jar:7.1.0:compile\r\n[INFO] |  +- org.apache.lucene:lucene-suggest:jar:7.1.0:compile\r\n[INFO] |  +- org.elasticsearch:securesm:jar:1.2:compile\r\n[INFO] |  +- org.elasticsearch:elasticsearch-cli:jar:6.1.1:compile\r\n[INFO] |  |  \\- net.sf.jopt-simple:jopt-simple:jar:5.0.2:compile\r\n[INFO] |  +- com.carrotsearch:hppc:jar:0.7.1:compile\r\n[INFO] |  +- org.yaml:snakeyaml:jar:1.17:compile\r\n[INFO] |  +- com.fasterxml.jackson.dataformat:jackson-dataformat-smile:jar:2.8.10:compile\r\n[INFO] |  +- com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:jar:2.8.10:compile\r\n[INFO] |  +- com.tdunning:t-digest:jar:3.0:compile\r\n[INFO] |  +- org.hdrhistogram:HdrHistogram:jar:2.1.9:compile\r\n[INFO] |  +- org.apache.logging.log4j:log4j-api:jar:2.9.1:compile\r\n[INFO] |  \\- org.elasticsearch:jna:jar:4.4.0-1:compile\r\n[INFO] +- org.elasticsearch.client:transport:jar:6.1.1:compile\r\n[INFO] |  +- org.elasticsearch.plugin:transport-netty4-client:jar:6.1.1:compile\r\n[INFO] |  |  +- io.netty:netty-buffer:jar:4.1.13.Final:compile\r\n[INFO] |  |  +- io.netty:netty-codec:jar:4.1.13.Final:compile\r\n[INFO] |  |  +- io.netty:netty-codec-http:jar:4.1.13.Final:compile\r\n[INFO] |  |  +- io.netty:netty-common:jar:4.1.13.Final:compile\r\n[INFO] |  |  +- io.netty:netty-handler:jar:4.1.13.Final:compile\r\n[INFO] |  |  +- io.netty:netty-resolver:jar:4.1.13.Final:compile\r\n[INFO] |  |  \\- io.netty:netty-transport:jar:4.1.13.Final:compile\r\n[INFO] |  +- org.elasticsearch.plugin:reindex-client:jar:6.1.1:compile\r\n[INFO] |  |  \\- org.elasticsearch.client:elasticsearch-rest-client:jar:6.1.1:compile\r\n[INFO] |  |     \\- org.apache.httpcomponents:httpasyncclient:jar:4.1.2:compile\r\n[INFO] |  +- org.elasticsearch.plugin:lang-mustache-client:jar:6.1.1:compile\r\n[INFO] |  |  \\- com.github.spullara.mustache.java:compiler:jar:0.9.3:compile\r\n[INFO] |  +- org.elasticsearch.plugin:percolator-client:jar:6.1.1:compile\r\n[INFO] |  \\- org.elasticsearch.plugin:parent-join-client:jar:6.1.1:compile\r\n[INFO] +- com.itextpdf:itextpdf:jar:5.2.1:compile\r\n[INFO] +- com.lowagie:itext:jar:1.4.8:compile\r\n[INFO] +- org.xhtmlrenderer:core-renderer:jar:R8pre2:compile\r\n[INFO] +- de.congrace:exp4j:jar:0.3.11:compile\r\n[INFO] +- com.mchange:c3p0:jar:0.9.5.2:compile\r\n[INFO] |  \\- com.mchange:mchange-commons-java:jar:0.2.11:compile\r\n[INFO] +- thirdparty:lzstring4j:jar:unknown:compile\r\n[INFO] +- org.codehaus.groovy:groovy-all:jar:2.4.12:compile\r\n[INFO] +- jfree:jcommon:jar:1.0.16:compile\r\n[INFO] +- bsh:bsh:jar:1.3.0:compile\r\n[INFO] +- org.stripesstuff:stripesstuff:jar:0.1:compile\r\n[INFO] +- org.apache.maven.plugins:maven-resources-plugin:jar:3.0.2:compile\r\n[INFO] |  +- org.apache.maven:maven-plugin-api:jar:3.0:compile\r\n[INFO] |  |  +- org.apache.maven:maven-artifact:jar:3.0:compile\r\n[INFO] |  |  \\- org.sonatype.sisu:sisu-inject-plexus:jar:1.4.2:compile\r\n[INFO] |  |     \\- org.sonatype.sisu:sisu-inject-bean:jar:1.4.2:compile\r\n[INFO] |  |        \\- org.sonatype.sisu:sisu-guice:jar:noaop:2.1.7:compile\r\n[INFO] |  +- org.apache.maven:maven-core:jar:3.0:compile\r\n[INFO] |  |  +- org.apache.maven:maven-settings:jar:3.0:compile\r\n[INFO] |  |  +- org.apache.maven:maven-settings-builder:jar:3.0:compile\r\n[INFO] |  |  +- org.apache.maven:maven-repository-metadata:jar:3.0:compile\r\n[INFO] |  |  +- org.apache.maven:maven-model-builder:jar:3.0:compile\r\n[INFO] |  |  +- org.apache.maven:maven-aether-provider:jar:3.0:runtime\r\n[INFO] |  |  +- org.sonatype.aether:aether-impl:jar:1.7:compile\r\n[INFO] |  |  |  \\- org.sonatype.aether:aether-spi:jar:1.7:compile\r\n[INFO] |  |  +- org.sonatype.aether:aether-api:jar:1.7:compile\r\n[INFO] |  |  +- org.sonatype.aether:aether-util:jar:1.7:compile\r\n[INFO] |  |  +- org.codehaus.plexus:plexus-classworlds:jar:2.2.3:compile\r\n[INFO] |  |  +- org.codehaus.plexus:plexus-component-annotations:jar:1.5.5:compile\r\n[INFO] |  |  \\- org.sonatype.plexus:plexus-sec-dispatcher:jar:1.3:compile\r\n[INFO] |  |     \\- org.sonatype.plexus:plexus-cipher:jar:1.4:compile\r\n[INFO] |  +- org.apache.maven:maven-model:jar:3.0:compile\r\n[INFO] |  +- org.codehaus.plexus:plexus-utils:jar:3.0.24:compile\r\n[INFO] |  +- org.apache.maven.shared:maven-filtering:jar:3.1.1:compile\r\n[INFO] |  |  +- org.apache.maven.shared:maven-shared-utils:jar:3.0.0:compile\r\n[INFO] |  |  \\- org.sonatype.plexus:plexus-build-api:jar:0.0.7:compile\r\n[INFO] |  \\- org.codehaus.plexus:plexus-interpolation:jar:1.24:compile\r\n[INFO] +- org.apache.maven.plugins:maven-war-plugin:jar:3.2.0:compile\r\n[INFO] |  +- org.apache.maven:maven-archiver:jar:3.2.0:compile\r\n[INFO] |  +- org.codehaus.plexus:plexus-archiver:jar:3.5:compile\r\n[INFO] |  |  +- org.codehaus.plexus:plexus-io:jar:3.0.0:compile\r\n[INFO] |  |  +- org.apache.commons:commons-compress:jar:1.14:compile\r\n[INFO] |  |  +- org.iq80.snappy:snappy:jar:0.4:compile\r\n[INFO] |  |  \\- org.tukaani:xz:jar:1.6:runtime\r\n[INFO] |  \\- org.apache.maven.shared:maven-mapping:jar:3.0.0:compile\r\n[INFO] +- org.mongodb:mongo-java-driver:jar:3.3.0:compile\r\n[INFO] +- org.springframework.data:spring-data-mongodb:jar:1.9.2.RELEASE:compile\r\n[INFO] |  \\- org.springframework.data:spring-data-commons:jar:1.12.2.RELEASE:compile\r\n[INFO] \\- hk.kinesis.producer:kinesis-config:jar:0.0.1-SNAPSHOT:compile\r\n[INFO]    +- com.amazonaws:amazon-kinesis-client:jar:1.9.0:compile\r\n[INFO]    |  \\- com.google.protobuf:protobuf-java:jar:2.6.1:compile\r\n[INFO]    \\- com.amazonaws:amazon-kinesis-producer:jar:0.12.8:compile\r\n[INFO] ------------------------------------------------------------------------\r\n\r\n``` =||= based on this output your project doesn't seem to have `javax.ws.rs-api` at all. =||= sorry my mistake I added javax.ws.rs-api dependency today after your suggestion and took dependency tree output from yesterday. Below is dependency tree output now \r\n\r\n```\r\n[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ HKEdge ---\r\n[WARNING] The artifact com.lowagie:itext:pom:4.2.2 has been relocated to com.itextpdf:itextpdf:pom:5.5.6\r\n[INFO] HKEdge:HKEdge:war:0.0.1-SNAPSHOT\r\n[INFO] +- com.sun.jersey:jersey-client:jar:1.12:compile\r\n[INFO] |  \\- com.sun.jersey:jersey-core:jar:1.12:compile\r\n[INFO] +- com.netflix.eureka:eureka-client:jar:1.6.2:compile\r\n[INFO] |  +- org.codehaus.jettison:jettison:jar:1.3.7:runtime\r\n[INFO] |  |  \\- stax:stax-api:jar:1.0.1:runtime\r\n[INFO] |  +- com.netflix.netflix-commons:netflix-eventbus:jar:0.3.0:runtime\r\n[INFO] |  |  +- com.netflix.netflix-commons:netflix-infix:jar:0.3.0:runtime\r\n[INFO] |  |  |  +- commons-jxpath:commons-jxpath:jar:1.3:runtime\r\n[INFO] |  |  |  +- javax.servlet:servlet-api:jar:2.5:runtime\r\n[INFO] |  |  |  \\- org.antlr:antlr-runtime:jar:3.4:runtime\r\n[INFO] |  |  |     \\- org.antlr:stringtemplate:jar:3.2.1:runtime\r\n[INFO] |  |  \\- org.apache.commons:commons-math:jar:2.2:runtime\r\n[INFO] |  +- com.thoughtworks.xstream:xstream:jar:1.4.9:compile\r\n[INFO] |  |  +- xmlpull:xmlpull:jar:1.1.3.1:compile\r\n[INFO] |  |  \\- xpp3:xpp3_min:jar:1.1.4c:compile\r\n[INFO] |  +- com.sun.jersey.contribs:jersey-apache-client4:jar:1.19.1:runtime\r\n[INFO] |  \\- com.google.inject:guice:jar:4.1.0:compile\r\n[INFO] |     +- javax.inject:javax.inject:jar:1:compile\r\n[INFO] |     \\- aopalliance:aopalliance:jar:1.0:compile\r\n[INFO] +- com.netflix.governator:governator:jar:1.17.5:compile\r\n[INFO] |  +- com.netflix.governator:governator-api:jar:1.17.5:compile\r\n[INFO] |  +- com.netflix.governator:governator-core:jar:1.17.5:compile\r\n[INFO] |  |  +- com.google.inject.extensions:guice-multibindings:jar:4.1.0:compile\r\n[INFO] |  |  \\- com.google.inject.extensions:guice-grapher:jar:4.1.0:compile\r\n[INFO] |  |     \\- com.google.inject.extensions:guice-assistedinject:jar:4.1.0:compile\r\n[INFO] |  \\- org.ow2.asm:asm:jar:5.0.4:compile\r\n[INFO] +- com.netflix.archaius:archaius-core:jar:0.7.6:compile\r\n[INFO] |  +- com.google.code.findbugs:jsr305:jar:3.0.1:compile\r\n[INFO] |  \\- commons-configuration:commons-configuration:jar:1.8:runtime\r\n[INFO] +- com.netflix.servo:servo-core:jar:0.12.21:compile\r\n[INFO] +- com.fasterxml.jackson.core:jackson-databind:jar:2.9.4:compile\r\n[INFO] +- com.fasterxml.jackson.core:jackson-annotations:jar:2.9.4:compile\r\n[INFO] +- com.fasterxml.jackson.core:jackson-core:jar:2.9.4:compile\r\n[INFO] +- com.hk:HKBridgeClient:jar:1.2:compile\r\n[INFO] +- com.hk:HKJms:jar:2.0:compile\r\n[INFO] +- com.hk:securePay:jar:1.48-SNAPSHOT:compile\r\n[INFO] +- org.json:json:jar:20070829:compile\r\n[INFO] +- org.apache.activemq:activemq-core:jar:5.7.0:compile\r\n[INFO] |  +- org.apache.geronimo.specs:geronimo-jms_1.1_spec:jar:1.1.1:compile\r\n[INFO] |  +- org.apache.activemq:kahadb:jar:5.7.0:compile\r\n[INFO] |  +- org.apache.activemq.protobuf:activemq-protobuf:jar:1.1:compile\r\n[INFO] |  +- org.fusesource.mqtt-client:mqtt-client:jar:1.3:compile\r\n[INFO] |  |  +- org.fusesource.hawtdispatch:hawtdispatch-transport:jar:1.11:compile\r\n[INFO] |  |  |  \\- org.fusesource.hawtdispatch:hawtdispatch:jar:1.11:compile\r\n[INFO] |  |  \\- org.fusesource.hawtbuf:hawtbuf:jar:1.9:compile\r\n[INFO] |  +- org.apache.geronimo.specs:geronimo-j2ee-management_1.1_spec:jar:1.0.1:compile\r\n[INFO] |  +- commons-net:commons-net:jar:3.1:compile\r\n[INFO] |  \\- org.jasypt:jasypt:jar:1.9.0:compile\r\n[INFO] +- org.apache.activemq:activemq-pool:jar:5.7.0:compile\r\n[INFO] |  \\- org.apache.geronimo.specs:geronimo-jta_1.0.1B_spec:jar:1.0.1:compile\r\n[INFO] +- javax.enterprise.concurrent:javax.enterprise.concurrent-api:jar:1.0:provided\r\n[INFO] +- javax.servlet:javax.servlet-api:jar:3.1.0:provided\r\n[INFO] +- com.hazelcast:hazelcast:jar:3.8.3:compile\r\n[INFO] +- com.hazelcast:hazelcast-client:jar:3.8.3:compile\r\n[INFO] +- io.connecto:connecto-java:jar:0.9.4:compile\r\n[INFO] +- com.contentful.java:java-sdk:jar:2.0.0:compile\r\n[INFO] |  +- com.squareup.retrofit:retrofit:jar:1.8.0:compile\r\n[INFO] |  \\- io.reactivex:rxjava:jar:1.0.0:compile\r\n[INFO] +- com.amazonaws:aws-java-sdk:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-pinpoint:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-xray:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-opsworkscm:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-support:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-simpledb:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-servicecatalog:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-servermigration:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-simpleworkflow:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-storagegateway:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-route53:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-s3:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-importexport:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-sts:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-sqs:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-rds:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-redshift:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-elasticbeanstalk:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-glacier:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-iam:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-datapipeline:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-elasticloadbalancing:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-elasticloadbalancingv2:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-emr:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-elasticache:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-elastictranscoder:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-ec2:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-dynamodb:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-sns:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-budgets:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cloudtrail:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cloudwatch:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-logs:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-events:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cognitoidentity:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cognitosync:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-directconnect:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cloudformation:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cloudfront:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-kinesis:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-opsworks:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-ses:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-autoscaling:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cloudsearch:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cloudwatchmetrics:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-codedeploy:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-codepipeline:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-kms:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-config:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-lambda:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-ecs:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-ecr:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cloudhsm:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-ssm:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-workspaces:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-machinelearning:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-directory:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-efs:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-codecommit:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-devicefarm:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-elasticsearch:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-waf:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-marketplacecommerceanalytics:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-inspector:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-iot:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-api-gateway:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-acm:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-gamelift:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-dms:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-marketplacemeteringservice:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-cognitoidp:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-discovery:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-applicationautoscaling:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-snowball:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-rekognition:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-polly:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-lightsail:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-stepfunctions:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-health:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-codebuild:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-appstream:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-shield:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-batch:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-core:jar:1.11.73:compile\r\n[INFO] |  +- com.amazonaws:aws-java-sdk-models:jar:1.11.73:compile\r\n[INFO] |  \\- com.amazonaws:aws-java-sdk-swf-libraries:jar:1.11.22:compile\r\n[INFO] +- backport-util-concurrent:backport-util-concurrent:jar:3.0:compile\r\n[INFO] +- com.google.api-client:google-api-client:jar:1.20.0:compile\r\n[INFO] |  +- com.google.oauth-client:google-oauth-client:jar:1.20.0:compile\r\n[INFO] |  \\- com.google.http-client:google-http-client-jackson2:jar:1.20.0:compile\r\n[INFO] +- com.google.api-client:google-api-client-gson:jar:1.23.0:compile\r\n[INFO] |  \\- com.google.http-client:google-http-client-gson:jar:1.23.0:compile\r\n[INFO] +- com.google.http-client:google-http-client:jar:1.20.0:compile\r\n[INFO] +- com.google.code.gson:gson:jar:2.2.4:compile\r\n[INFO] +- javax.servlet.jsp:jsp-api:jar:2.2:provided\r\n[INFO] +- org.aspectj:aspectjrt:jar:1.8.10:compile\r\n[INFO] +- org.aspectj:aspectjweaver:jar:1.8.10:compile\r\n[INFO] +- commons-codec:commons-codec:jar:1.10:compile\r\n[INFO] +- commons-logging:commons-logging:jar:1.2:compile\r\n[INFO] +- org.apache.httpcomponents:httpclient:jar:4.5.3:compile\r\n[INFO] |  \\- org.apache.httpcomponents:httpcore:jar:4.4.6:compile\r\n[INFO] +- software.amazon.ion:ion-java:jar:1.0.1:compile\r\n[INFO] +- com.fasterxml.jackson.dataformat:jackson-dataformat-cbor:jar:2.6.6:compile\r\n[INFO] +- com.amazonaws:jmespath-java:jar:1.11.203:compile\r\n[INFO] +- joda-time:joda-time:jar:2.9.9:compile\r\n[INFO] +- org.springframework:spring-beans:jar:4.3.11.RELEASE:compile\r\n[INFO] +- org.springframework:spring-context:jar:4.3.11.RELEASE:compile\r\n[INFO] |  \\- org.springframework:spring-expression:jar:4.3.11.RELEASE:compile\r\n[INFO] +- org.springframework:spring-core:jar:4.3.11.RELEASE:compile\r\n[INFO] +- org.springframework:spring-aop:jar:4.3.11.RELEASE:compile\r\n[INFO] +- org.springframework:spring-jms:jar:4.3.11.RELEASE:compile\r\n[INFO] |  +- org.springframework:spring-messaging:jar:4.3.11.RELEASE:compile\r\n[INFO] |  \\- org.springframework:spring-tx:jar:4.3.11.RELEASE:compile\r\n[INFO] +- net.sf.barcode4j:barcode4j:jar:2.1:compile\r\n[INFO] |  +- avalon-framework:avalon-framework-impl:jar:4.2.0:compile\r\n[INFO] |  +- commons-cli:commons-cli:jar:1.0:compile\r\n[INFO] |  \\- org.apache.ant:ant:jar:1.7.1:compile\r\n[INFO] |     \\- org.apache.ant:ant-launcher:jar:1.7.1:compile\r\n[INFO] +- cryptix:cryptix:jar:3.2.0:compile\r\n[INFO] +- jboss:jnet:jar:3.2.1:compile\r\n[INFO] +- org.jglobus:jsse:jar:2.1.0:compile\r\n[INFO] |  \\- org.jglobus:ssl-proxies:jar:2.1.0:compile\r\n[INFO] +- commons-beanutils:commons-beanutils:jar:1.9.3:compile\r\n[INFO] +- commons-collections:commons-collections:jar:3.2.2:compile\r\n[INFO] +- org.apache.commons:commons-dbcp2:jar:2.0.1:compile\r\n[INFO] |  \\- org.apache.commons:commons-pool2:jar:2.2:compile\r\n[INFO] +- org.apache.commons:commons-email:jar:1.5:compile\r\n[INFO] |  \\- com.sun.mail:javax.mail:jar:1.5.6:compile\r\n[INFO] +- commons-fileupload:commons-fileupload:jar:1.3.3:compile\r\n[INFO] +- commons-httpclient:commons-httpclient:jar:3.1:compile\r\n[INFO] +- commons-io:commons-io:jar:2.5:compile\r\n[INFO] +- commons-lang:commons-lang:jar:2.6:compile\r\n[INFO] +- commons-pool:commons-pool:jar:1.6:compile\r\n[INFO] +- com.restfb:restfb:jar:1.45.0:compile\r\n[INFO] +- org.freemarker:freemarker:jar:2.3.23:compile\r\n[INFO] +- com.google.guava:guava:jar:15.0:compile\r\n[INFO] +- com.ning:async-http-client:jar:1.9.40:compile\r\n[INFO] |  \\- io.netty:netty:jar:3.10.6.Final:compile\r\n[INFO] +- org.apache.httpcomponents:httpcore-nio:jar:4.4.7:compile\r\n[INFO] +- org.infinispan:infinispan-core:jar:5:compile\r\n[INFO] +- org.jboss.logging:jboss-logging:jar:3.3.1.Final:compile\r\n[INFO] +- org.jboss.marshalling:jboss-marshalling:jar:1.3.11.GA:compile\r\n[INFO] +- org.jboss.marshalling:jboss-marshalling-river:jar:1.3.11.GA:compile\r\n[INFO] +- org.jboss.spec.javax.transaction:jboss-transaction-api_1.1_spec:jar:1.0.1.Final:compile\r\n[INFO] +- net.jcip:jcip-annotations:jar:1.0:compile\r\n[INFO] +- org.jgroups:jgroups:jar:3.0.11.Final:compile\r\n[INFO] +- log4j:log4j:jar:1.2.13:compile\r\n[INFO] +- org.osgi:org.osgi.core:jar:6.0.0:provided\r\n[INFO] +- org.rhq.helpers:rhq-pluginAnnotations:jar:3.0.4:compile\r\n[INFO] +- org.codehaus.woodstox:stax2-api:jar:3.1.1:compile\r\n[INFO] |  \\- javax.xml.stream:stax-api:jar:1.0-2:compile\r\n[INFO] +- org.codehaus.woodstox:woodstox-core-asl:jar:4.4.1:compile\r\n[INFO] +- com.intellij:annotations:jar:12.0:compile\r\n[INFO] +- com.itextpdf:itextpdf:pom:5.5.6:compile\r\n[INFO] +- org.apache.lucene:lucene-core:jar:7.1.0:compile\r\n[INFO] +- org.apache.lucene:lucene-highlighter:jar:7.1.0:compile\r\n[INFO] |  +- org.apache.lucene:lucene-analyzers-common:jar:7.1.0:compile\r\n[INFO] |  \\- org.apache.lucene:lucene-join:jar:7.1.0:compile\r\n[INFO] +- org.apache.lucene:lucene-memory:jar:4.10.3:compile\r\n[INFO] +- org.apache.lucene:lucene-queries:jar:7.1.0:compile\r\n[INFO] +- org.xerial.snappy:snappy-java:jar:1.1.4:compile\r\n[INFO] +- net.sf.ezmorph:ezmorph:jar:1.0.6:compile\r\n[INFO] +- net.sf.json-lib:json-lib:jar:2.3:compile\r\n[INFO] +- com.googlecode.json-simple:json-simple:jar:1.1.1:compile\r\n[INFO] |  \\- junit:junit:jar:4.10:compile\r\n[INFO] |     \\- org.hamcrest:hamcrest-core:jar:1.1:compile\r\n[INFO] +- org.slf4j:slf4j-api:jar:1.5.10:compile\r\n[INFO] +- org.slf4j:slf4j-log4j12:jar:1.5.10:compile\r\n[INFO] +- mysql:mysql-connector-java:jar:6.0.6:compile\r\n[INFO] +- org.apache.tomcat:tomcat-jdbc:jar:8.5.21:compile\r\n[INFO] |  \\- org.apache.tomcat:tomcat-juli:jar:8.5.21:compile\r\n[INFO] +- org.codehaus.jackson:jackson-jaxrs:jar:1.9.12:compile\r\n[INFO] |  +- org.codehaus.jackson:jackson-core-asl:jar:1.9.12:compile\r\n[INFO] |  \\- org.codehaus.jackson:jackson-mapper-asl:jar:1.9.12:compile\r\n[INFO] +- org.jboss.resteasy:jaxrs-api:jar:3.0.12.Final:compile\r\n[INFO] +- javax.ws.rs:javax.ws.rs-api:jar:2.1:compile\r\n[INFO] +- org.jboss.resteasy:resteasy-guice:jar:3.0.9.Final:compile\r\n[INFO] |  \\- javax.annotation:jsr250-api:jar:1.0:compile\r\n[INFO] +- org.jboss.resteasy:resteasy-jackson-provider:jar:3.0.9.Final:compile\r\n[INFO] +- org.jboss.resteasy:resteasy-jaxrs:jar:3.0.9.Final:compile\r\n[INFO] |  +- org.jboss.spec.javax.annotation:jboss-annotations-api_1.1_spec:jar:1.0.1.Final:compile\r\n[INFO] |  \\- javax.activation:activation:jar:1.1:compile\r\n[INFO] +- org.jboss.resteasy:resteasy-multipart-provider:jar:3.0.9.Final:compile\r\n[INFO] |  +- org.jboss.resteasy:resteasy-jaxb-provider:jar:3.0.9.Final:compile\r\n[INFO] |  |  \\- com.sun.xml.bind:jaxb-impl:jar:2.2.7:compile\r\n[INFO] |  |     +- com.sun.xml.bind:jaxb-core:jar:2.2.7:compile\r\n[INFO] |  |     |  +- javax.xml.bind:jaxb-api:jar:2.2.7:compile\r\n[INFO] |  |     |  \\- com.sun.istack:istack-commons-runtime:jar:2.16:compile\r\n[INFO] |  |     \\- com.sun.xml.fastinfoset:FastInfoset:jar:1.2.12:compile\r\n[INFO] |  |        \\- javax.xml.bind:jsr173_api:jar:1.0:compile\r\n[INFO] |  +- javax.mail:mail:jar:1.5.0-b01:compile\r\n[INFO] |  \\- org.apache.james:apache-mime4j:jar:0.6:compile\r\n[INFO] +- org.jboss.resteasy:resteasy-spring:jar:3.0.9.Final:compile\r\n[INFO] +- javax.servlet:jstl:jar:1.2:compile\r\n[INFO] +- org.apache.commons:commons-lang3:jar:3.6:compile\r\n[INFO] +- dom4j:dom4j:jar:1.6.1:compile\r\n[INFO] |  \\- xml-apis:xml-apis:jar:1.0.b2:compile\r\n[INFO] +- org.hibernate:hibernate-core:jar:4.3.11.Final:compile\r\n[INFO] |  +- org.jboss.logging:jboss-logging-annotations:jar:1.2.0.Beta1:compile\r\n[INFO] |  +- org.jboss.spec.javax.transaction:jboss-transaction-api_1.2_spec:jar:1.0.0.Final:compile\r\n[INFO] |  +- org.hibernate.common:hibernate-commons-annotations:jar:4.0.5.Final:compile\r\n[INFO] |  +- org.hibernate.javax.persistence:hibernate-jpa-2.1-api:jar:1.0.0.Final:compile\r\n[INFO] |  +- org.javassist:javassist:jar:3.18.1-GA:compile\r\n[INFO] |  +- antlr:antlr:jar:2.7.7:compile\r\n[INFO] |  \\- org.jboss:jandex:jar:1.1.0.Final:compile\r\n[INFO] +- net.sourceforge.stripes:stripes:jar:1.5.7:compile\r\n[INFO] +- org.apache.openjpa:openjpa:jar:2.4.2:compile\r\n[INFO] |  +- net.sourceforge.serp:serp:jar:1.15.1:compile\r\n[INFO] |  +- org.apache.geronimo.specs:geronimo-jta_1.1_spec:jar:1.1.1:compile\r\n[INFO] |  \\- org.apache.xbean:xbean-asm5-shaded:jar:3.17:compile\r\n[INFO] +- org.springframework:spring-orm:jar:4.3.11.RELEASE:compile\r\n[INFO] |  \\- org.springframework:spring-jdbc:jar:4.3.11.RELEASE:compile\r\n[INFO] +- shiro:shiro-all:jar:1.0-incubating-SNAPSHOT:compile\r\n[INFO] +- org.springframework:spring-web:jar:4.3.11.RELEASE:compile\r\n[INFO] +- org.apache.sanselan:sanselan:jar:0.97-incubator:compile\r\n[INFO] +- com.sun.media:jai-codec:jar:1.1.3:compile\r\n[INFO] |  \\- javax.media:jai-core:jar:1.1.3:compile\r\n[INFO] +- com.sun.media:jai_imageio:jar:1.1:compile\r\n[INFO] +- javax.media:jai_core:jar:1.1.3:compile\r\n[INFO] +- thirdparty:mediautil:jar:1.0:compile\r\n[INFO] +- concurrent:concurrent:jar:1.3.4:compile\r\n[INFO] +- org.mindrot:jbcrypt:jar:0.4:compile\r\n[INFO] +- org.apache.poi:poi:jar:3.17:compile\r\n[INFO] |  \\- org.apache.commons:commons-collections4:jar:4.1:compile\r\n[INFO] +- net.spy:spymemcached:jar:2.12.3:compile\r\n[INFO] +- javax.interceptor:javax.interceptor-api:jar:1.2.1:compile\r\n[INFO] +- com.tinify:tinify:jar:1.5.1:compile\r\n[INFO] |  \\- com.squareup.okhttp3:okhttp:jar:3.8.1:compile\r\n[INFO] |     \\- com.squareup.okio:okio:jar:1.13.0:compile\r\n[INFO] +- net.java.dev.jets3t:jets3t:jar:0.9.4:compile\r\n[INFO] |  +- org.bouncycastle:bcprov-jdk15on:jar:1.52:compile\r\n[INFO] |  \\- com.jamesmurty.utils:java-xmlbuilder:jar:1.1:compile\r\n[INFO] |     \\- net.iharder:base64:jar:2.3.8:compile\r\n[INFO] +- org.jsoup:jsoup:jar:1.7.2:compile\r\n[INFO] +- org.elasticsearch:elasticsearch:jar:6.1.1:compile\r\n[INFO] |  +- org.apache.lucene:lucene-backward-codecs:jar:7.1.0:compile\r\n[INFO] |  +- org.apache.lucene:lucene-grouping:jar:7.1.0:compile\r\n[INFO] |  +- org.apache.lucene:lucene-misc:jar:7.1.0:compile\r\n[INFO] |  +- org.apache.lucene:lucene-queryparser:jar:7.1.0:compile\r\n[INFO] |  +- org.apache.lucene:lucene-sandbox:jar:7.1.0:compile\r\n[INFO] |  +- org.apache.lucene:lucene-spatial:jar:7.1.0:compile\r\n[INFO] |  +- org.apache.lucene:lucene-spatial-extras:jar:7.1.0:compile\r\n[INFO] |  +- org.apache.lucene:lucene-spatial3d:jar:7.1.0:compile\r\n[INFO] |  +- org.apache.lucene:lucene-suggest:jar:7.1.0:compile\r\n[INFO] |  +- org.elasticsearch:securesm:jar:1.2:compile\r\n[INFO] |  +- org.elasticsearch:elasticsearch-cli:jar:6.1.1:compile\r\n[INFO] |  |  \\- net.sf.jopt-simple:jopt-simple:jar:5.0.2:compile\r\n[INFO] |  +- com.carrotsearch:hppc:jar:0.7.1:compile\r\n[INFO] |  +- org.yaml:snakeyaml:jar:1.17:compile\r\n[INFO] |  +- com.fasterxml.jackson.dataformat:jackson-dataformat-smile:jar:2.8.10:compile\r\n[INFO] |  +- com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:jar:2.8.10:compile\r\n[INFO] |  +- com.tdunning:t-digest:jar:3.0:compile\r\n[INFO] |  +- org.hdrhistogram:HdrHistogram:jar:2.1.9:compile\r\n[INFO] |  +- org.apache.logging.log4j:log4j-api:jar:2.9.1:compile\r\n[INFO] |  \\- org.elasticsearch:jna:jar:4.4.0-1:compile\r\n[INFO] +- org.elasticsearch.client:transport:jar:6.1.1:compile\r\n[INFO] |  +- org.elasticsearch.plugin:transport-netty4-client:jar:6.1.1:compile\r\n[INFO] |  |  +- io.netty:netty-buffer:jar:4.1.13.Final:compile\r\n[INFO] |  |  +- io.netty:netty-codec:jar:4.1.13.Final:compile\r\n[INFO] |  |  +- io.netty:netty-codec-http:jar:4.1.13.Final:compile\r\n[INFO] |  |  +- io.netty:netty-common:jar:4.1.13.Final:compile\r\n[INFO] |  |  +- io.netty:netty-handler:jar:4.1.13.Final:compile\r\n[INFO] |  |  +- io.netty:netty-resolver:jar:4.1.13.Final:compile\r\n[INFO] |  |  \\- io.netty:netty-transport:jar:4.1.13.Final:compile\r\n[INFO] |  +- org.elasticsearch.plugin:reindex-client:jar:6.1.1:compile\r\n[INFO] |  |  \\- org.elasticsearch.client:elasticsearch-rest-client:jar:6.1.1:compile\r\n[INFO] |  |     \\- org.apache.httpcomponents:httpasyncclient:jar:4.1.2:compile\r\n[INFO] |  +- org.elasticsearch.plugin:lang-mustache-client:jar:6.1.1:compile\r\n[INFO] |  |  \\- com.github.spullara.mustache.java:compiler:jar:0.9.3:compile\r\n[INFO] |  +- org.elasticsearch.plugin:percolator-client:jar:6.1.1:compile\r\n[INFO] |  \\- org.elasticsearch.plugin:parent-join-client:jar:6.1.1:compile\r\n[INFO] +- com.itextpdf:itextpdf:jar:5.2.1:compile\r\n[INFO] +- com.lowagie:itext:jar:1.4.8:compile\r\n[INFO] +- org.xhtmlrenderer:core-renderer:jar:R8pre2:compile\r\n[INFO] +- de.congrace:exp4j:jar:0.3.11:compile\r\n[INFO] +- com.mchange:c3p0:jar:0.9.5.2:compile\r\n[INFO] |  \\- com.mchange:mchange-commons-java:jar:0.2.11:compile\r\n[INFO] +- thirdparty:lzstring4j:jar:unknown:compile\r\n[INFO] +- org.codehaus.groovy:groovy-all:jar:2.4.12:compile\r\n[INFO] +- jfree:jcommon:jar:1.0.16:compile\r\n[INFO] +- bsh:bsh:jar:1.3.0:compile\r\n[INFO] +- org.stripesstuff:stripesstuff:jar:0.1:compile\r\n[INFO] +- org.apache.maven.plugins:maven-resources-plugin:jar:3.0.2:compile\r\n[INFO] |  +- org.apache.maven:maven-plugin-api:jar:3.0:compile\r\n[INFO] |  |  +- org.apache.maven:maven-artifact:jar:3.0:compile\r\n[INFO] |  |  \\- org.sonatype.sisu:sisu-inject-plexus:jar:1.4.2:compile\r\n[INFO] |  |     \\- org.sonatype.sisu:sisu-inject-bean:jar:1.4.2:compile\r\n[INFO] |  |        \\- org.sonatype.sisu:sisu-guice:jar:noaop:2.1.7:compile\r\n[INFO] |  +- org.apache.maven:maven-core:jar:3.0:compile\r\n[INFO] |  |  +- org.apache.maven:maven-settings:jar:3.0:compile\r\n[INFO] |  |  +- org.apache.maven:maven-settings-builder:jar:3.0:compile\r\n[INFO] |  |  +- org.apache.maven:maven-repository-metadata:jar:3.0:compile\r\n[INFO] |  |  +- org.apache.maven:maven-model-builder:jar:3.0:compile\r\n[INFO] |  |  +- org.apache.maven:maven-aether-provider:jar:3.0:runtime\r\n[INFO] |  |  +- org.sonatype.aether:aether-impl:jar:1.7:compile\r\n[INFO] |  |  |  \\- org.sonatype.aether:aether-spi:jar:1.7:compile\r\n[INFO] |  |  +- org.sonatype.aether:aether-api:jar:1.7:compile\r\n[INFO] |  |  +- org.sonatype.aether:aether-util:jar:1.7:compile\r\n[INFO] |  |  +- org.codehaus.plexus:plexus-classworlds:jar:2.2.3:compile\r\n[INFO] |  |  +- org.codehaus.plexus:plexus-component-annotations:jar:1.5.5:compile\r\n[INFO] |  |  \\- org.sonatype.plexus:plexus-sec-dispatcher:jar:1.3:compile\r\n[INFO] |  |     \\- org.sonatype.plexus:plexus-cipher:jar:1.4:compile\r\n[INFO] |  +- org.apache.maven:maven-model:jar:3.0:compile\r\n[INFO] |  +- org.codehaus.plexus:plexus-utils:jar:3.0.24:compile\r\n[INFO] |  +- org.apache.maven.shared:maven-filtering:jar:3.1.1:compile\r\n[INFO] |  |  +- org.apache.maven.shared:maven-shared-utils:jar:3.0.0:compile\r\n[INFO] |  |  \\- org.sonatype.plexus:plexus-build-api:jar:0.0.7:compile\r\n[INFO] |  \\- org.codehaus.plexus:plexus-interpolation:jar:1.24:compile\r\n[INFO] +- org.apache.maven.plugins:maven-war-plugin:jar:3.2.0:compile\r\n[INFO] |  +- org.apache.maven:maven-archiver:jar:3.2.0:compile\r\n[INFO] |  +- org.codehaus.plexus:plexus-archiver:jar:3.5:compile\r\n[INFO] |  |  +- org.codehaus.plexus:plexus-io:jar:3.0.0:compile\r\n[INFO] |  |  +- org.apache.commons:commons-compress:jar:1.14:compile\r\n[INFO] |  |  +- org.iq80.snappy:snappy:jar:0.4:compile\r\n[INFO] |  |  \\- org.tukaani:xz:jar:1.6:runtime\r\n[INFO] |  \\- org.apache.maven.shared:maven-mapping:jar:3.0.0:compile\r\n[INFO] +- org.mongodb:mongo-java-driver:jar:3.3.0:compile\r\n[INFO] +- org.springframework.data:spring-data-mongodb:jar:1.9.2.RELEASE:compile\r\n[INFO] |  \\- org.springframework.data:spring-data-commons:jar:1.12.2.RELEASE:compile\r\n[INFO] \\- hk.kinesis.producer:kinesis-config:jar:0.0.1-SNAPSHOT:compile\r\n[INFO]    +- com.amazonaws:amazon-kinesis-client:jar:1.9.0:compile\r\n[INFO]    |  \\- com.google.protobuf:protobuf-java:jar:2.6.1:compile\r\n[INFO]    \\- com.amazonaws:amazon-kinesis-producer:jar:0.12.8:compile\r\n\r\n``` =||= Do you have any shareable project with this issue? it will be easier. =||= not right now it's a legacy project which we are trying to integrate with zuul, should I look at some jersey dependencies as it also has RuntimeDelegate class =||= "], ["1065", "Not able to access the service through gateway", null, "simion76", "05/30/19, 11:12:13 PM", "I have employee-service which is registered to Eureka Service (I can see that in Eureka page), I wnat to add load balancer using Zuul, but its not working, following are my application .yml files.\r\n\r\nemployee-service\r\n*******************\r\n\r\nspring:\r\n  application:\r\n    name: employee-service\r\n\r\nserver:\r\n  port: 8301\r\n\r\neureka:\r\n  client:\r\n    serviceUrl:\r\n      defaultZone: ${EUREKA_URI:http://localhost:8300/eureka}\r\n  instance:\r\n    preferIpAddress: true\r\n    \r\n\r\neureka-server\r\n**************\r\n\r\nspring:\r\n  application:\r\n    name: eureka-server\r\n\r\n    \r\nserver:\r\n  port: 8300\r\n  \r\neureka:\r\n  client:\r\n    registerWithEureka: false\r\n    fetchRegistry: false\r\n  server:\r\n      waitTimeInMsWhenSyncEmpty: 0\r\n      maxThreadsForPeerReplication: 0 \r\n\r\ngateway-server(Zuul Proxy)\r\n*****************************\r\nserver:\r\n  port: 8080\r\n\r\nspring:\r\n  application:\r\n    name: zuul-server\r\n    \r\neureka:\r\n  client:\r\n   serviceUrl:\r\n    defaultZone: http://localhost:8300/eureka\r\n\r\nzuul:\r\n  prefix: /api\r\n  routes:\r\n    employee-service:\r\n      path: /employee/**\r\n      serviceId: employee-service\r\n\r\n(In Zull proxy application.yml, STS shows \"unknown property 'eureka')\r\n\r\nPlease let me know , whats wrong with this configuration", "this is not the spring cloud netflix issue tracker =||= "], ["1066", "How to set the value of total-avail-memory?", "Eric", "jsntghf", "05/30/19, 11:12:13 PM", "My server's total memory is 8G, but eureka general info shows me that the total-avail-memory only 246m, I want to set total-avail-memory to 6G, how can we do that?", "I believe that is the current allocated heap[1,2], not the max memory[3].\r\n\r\n[1] https://github.com/Netflix/eureka/blob/v1.9.0/eureka-core/src/main/java/com/netflix/eureka/util/StatusInfo.java#L75\r\n[2] https://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#totalMemory()\r\n[3] https://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#maxMemory() =||= "], ["1067", "Instances currently registered with Eureka", "Eric", "jsntghf", "07/06/18, 12:32:32 AM", "The list of Instances currently registered with Eureka cant be refreshed, I started 3 instances, and showed me UP(3), and then stopped 1 instance, but always showed me UP(3), I hope it showed me UP(2), on developer environment, it is ok, on production environment, it is wrong, why?", "When the number of instances are less, `eureka.server.renewalPercentThreshold` can cause this behavior. You have not provided your Eureka server and client configurations. \r\n\r\nPlease provide configuration and check out [this ](https://github.com/spring-cloud/spring-cloud-netflix/issues/202)similar issue. =||= Hi @jsntghf please see if this updated wiki document answers your question. Thanks.\r\nhttps://github.com/Netflix/eureka/wiki/Server-Self-Preservation-Mode =||= "], ["1068", "not able to register eureka client with ip address ", null, "vikrantch-hk", "07/05/18, 10:59:37 PM", "please let me know if there is any configuration for registering eureka client with IP instead of hostname. Like in case of spring boot we can use preferIpAddress: true and give ipAddress. ", "`eureka.instance.preferIpAddress=true` will make instance register to Eureka server with IP address. You do not need  to provide IP address in any configuration as that will be automatically picked up from system by the application. \r\n =||= @narenchoudhary it works with Spring boot, is there any similar property for eureka-client in non spring boot applications =||= This configuration is not related to spring boot. Netflix OSS libraries (at least netflix-eureka) do not have any dependency on spring-boot.\r\n\r\n[examples folder](https://github.com/Netflix/eureka/tree/master/eureka-examples) has an example project which does not use spring-boot.\r\n[This SO question](https://stackoverflow.com/questions/35409492/eureka-service-discovery-without-spring-boot) is also very similar to your query.  =||= you can do this by declear your own customization config by extend the MyDataCenterInstanceConfig.\r\n`DynamicPropertyFactory configInstance = com.netflix.config.DynamicPropertyFactory.getInstance();\r\n        ApplicationInfoManager applicationInfoManager = initializeApplicationInfoManager(new CustomInstanceConfig ());\r\n        EurekaClient eurekaClient = initializeEurekaClient(applicationInfoManager, new DefaultEurekaClientConfig());`\r\n`public class CustomInstanceConfig extends MyDataCenterInstanceConfig{\r\n\t/**\r\n     * prefer ip instant of hostname\r\n     * @param refresh\r\n     * @return\r\n     */\r\n    @Override\r\n    public String getHostName(boolean refresh) {\r\n        try {\r\n            return InetAddress.getLocalHost().getHostAddress();\r\n        } catch (UnknownHostException e) {\r\n            return super.getHostName(refresh);\r\n        }\r\n    }\r\n}` =||= Thanks @narenchoudhary and @Sanisy for answering the question. =||= "], ["1069", "Configure hostName in eureka client", null, "dhruvpanwar95", "05/30/19, 11:11:56 PM", "I am not able to configure host name of my micrsoservcie through property given below\r\n\r\neureka.instance.preferIpAddress=true\r\neureka.preferSameZone=true\r\neureka.instance.hostname=192.168.70.107\r\neureka.shouldUseDns=false\r\neureka.name=api\r\neureka.vipAddress=192.168.70.107:7070\r\neureka.appGroup=api\r\n\r\neureka.decoderName=JacksonJson\r\neureka.port=7070\r\neureka.port.enabled=true\r\neureka.traffic.enabled=true\r", "NaN"], ["1070", "Wrong error handling in DiscoveryJerseyProvider.readFrom", null, "mayras", "07/25/18, 12:04:55 AM", "This problem already exists long time and makes debugging as mess:\r\n\r\n        try {\r\n            return decoder.decode(inputStream, serializableClass);\r\n        } catch (Throwable e) {\r\n            if (e instanceof Error) { // See issue: https://github.com/Netflix/eureka/issues/72 on why we catch Error here.\r\n                closeInputOnError(inputStream);\r\n                throw new WebApplicationException(createErrorReply(500, e, mediaType));\r\n            }\r\n            LOGGER.debug(\"Cannot parse request body\", e);\r\n            throw new WebApplicationException(createErrorReply(400, \"cannot parse request body\", mediaType));\r\n        }\r\n\r\nThis row \"if (e instanceof Error) \" makes a lot of problem, may be better handling? ", "@mayras the reason this is done is documented at https://github.com/Netflix/eureka/issues/72 . That may no longer be a valid case, but would you mind commenting on what the issues you have seen with catching the Error here? Thanks. =||= "], ["1071", "Fix the inconsistency logic in method updateRenewalThreshold(). ", "neoReMinD", "neoremind", "06/25/18, 11:29:34 PM", "Fix the inconsistency logic in method `updateRenewalThreshold()`. Because it does not reflect the expected intention based on the comment. \r\n`updateRenewalThreshold` will be qualified to run if renewal count * 2 is bigger than \r\n```\r\nserverConfig.getRenewalPercentThreshold() * expectedNumberOfRenewsPerMin\r\n```\r\nNOT\r\n```\r\nserverConfig.getRenewalPercentThreshold() * numberOfRenewsPerMinThreshold\r\n```\r\n\r", "@neoremind \r\nHi First of all I think you logic is right : )\r\nIn fact this Issues i have already submit a PR, but the author think  i should add some test code. But I not find a best way to test this code , so I close the PR(#1020) If you find the best way to test the code, please tell me.\r\n\r\nthanks\r\n =||= @holy12345 thanks for your reply. I am working on adding test case for the scenario, but before that I got one important question to confirm https://github.com/Netflix/eureka/issues/1073. Feel free to add comments. =||= @holy12345 @qiangdavidliu \r\nI have added test case for this scenario, please review my code. Many thanks.\r\n\r\nI will clarify briefly about what I have done. I create a new testcase named `TimeConsumingInstanceRegistryTest.java` which will run a bunch of sequential events in 2 minutes. I have added detailed comments about the steps that will be executed. \r\nHere I will paste them out for you to take a look.\r\n```\r\nVerify the following behaviors, the test case will run for 2 minutes.\r\n1. Registration of new instances.\r\n2. Lease expiration.\r\n3. NumOfRenewsPerMinThreshold will be updated. Since this threshold will be updated according to EurekaServerConfig.getRenewalThresholdUpdateIntervalMs(), and discovery client will try to get applications count from peer or remote Eureka servers, the count number will be used to update threshold.\r\nBelow shows the time line of a bunch of events in 120 seconds. Here the following setting are configured during registry startup: eureka.renewalThresholdUpdateIntervalMs=5000, eureka.evictionIntervalTimerInMs=10000\r\n       TimeInSecs 0          15         30    40   45         60        75   80      90         105       120\r\n                  |----------|----------|------|----|----------|---------|----|-------|----------|---------|\r\n       Events    (1)        (2)               (3)  (4)        (5)       (6)  (7)                (8)       (9)\r\n       \r\n(1). Remote server started on random port, local registry started as well. 50 instances will be registered to local registry with application name of LOCAL_REGION_APP_NAME and lease duration set to 30 seconds. At this time isLeaseExpirationEnabled=false, getNumOfRenewsPerMinThreshold= (50*2 + 1(initial value))*85%=86\r\n(2). 45 out of the 50 instances send heartbeats to local registry.\r\n(3). Check registry status, isLeaseExpirationEnabled=false, getNumOfRenewsInLastMin=0, getNumOfRenewsPerMinThreshold=86, registeredInstancesNumberOfMYLOCALAPP=50\r\n(4). 45 out of the 50 instances send heartbeats to local registry.\r\n(5). Accumulate one minutes data, and from now on, isLeaseExpirationEnabled=true, getNumOfRenewsInLastMin=90. Because lease expiration is enabled, and lease for 5 instance are expired, so evict 5 instances.\r\n(6). 45 out of the 50 instances send heartbeats to local registry.\r\n(7). Check registry status, isLeaseExpirationEnabled=true, getNumOfRenewsInLastMin=90, getNumOfRenewsPerMinThreshold=86, registeredInstancesNumberOfMYLOCALAPP=45\r\nRemote region add another 150 instances to application of LOCAL_REGION_APP_NAME. This will make PeerAwareInstanceRegistryImpl.updateRenewalThreshold() to refresh AbstractInstanceRegistry.numberOfRenewsPerMinThreshold.\r\n(8). 45 out of the 50 instances send heartbeats to local registry.\r\n(9). Check registry status, isLeaseExpirationEnabled=false, getNumOfRenewsInLastMin=90, getNumOfRenewsPerMinThreshold=256, registeredInstancesNumberOfMYLOCALAPP=45\r\nNote that there is a thread retrieving and printing out registry status for debugging purpose.\r\n```\r\n\r\nAfter reviewing the history of method `updateRenewalThreshold()`. I assume the logic is for the following scenario.\r\nAssuming there are 2 servers, server-A and server-B, each has total 100 heartbeats expected, and expiration threshold is 85. After sometime, server-A becomes an isolated island, losting connection with all clients and peer server-B. Then server-A enables preservation mode to avoid evict many instances. After a while when connection comes back to normal, it finds there are total 200 heartbeats expected from server-B which satisfy the condition of `updateRenewalThreshold()`, if the count is bigger than `85% * numberOfRenewsPerMinThreshold`, then server-A will update its renewal threshold to 170 as what server-B does. And after a while with new heartbeats to server-B and replicating to server-A, server-A will catch up and eventually the two servers are consistent.\r\n@qiangdavidliu could you help me review the case? or if you have more insights. Thanks! =||= @qiangdavidliu would you please review this PR? I suppose you are busy working, but still really appreciate if you could take a look. many thanks. :-)  =||= Thanks @neoremind . I'm a little busy right now, but I'll try to take a look at this when I can. =||= @qiangdavidliu Thanks very much! Take your time. =||= I want to more talk about this issue. In my mind, if client has not send heartbeat,eureka server will remove it. but during remove it , Eureka server why not update those number .(Eureka server use a background task do update two numbers).\r\n\r\nI understand this is Eureka architect, but can you explain more why design like this.\r\n\r\nI will appreciate you answer.\r\n\r\nThanks  =||= @holy12345 As far as I know, Eureka will update `numberOfRenewsPerMinThreshold` in 4 cases:\r\n* Register new instance.\r\n* Cancel one instance proactively.\r\n* Eureka server opening for traffic and this value is the number of instances replicated from peer.\r\n* In `updateRenewalThreshold()` method where it will be updated in 15mins in background.\r\n\r\nBut in expired cases, the value will not be updated since self-preservation relies on the value to determine if heartbeats drop below 85% of the expected number, so Eureka should not update this value when removing expired instances. =||= Thanks for you answer, but in my mind `evict` method just remove client information, but not update those two numbers Immediately. Update is on the background task.\r\nWhy not update immediately when `evict` method remove client information. =||= OK I get it.\r\n> But in expired cases, the value will not be updated since self-preservation relies on the value to determine if heartbeats drop below 85% of the expected number, so Eureka should not update this value when removing expired instances.\r\n\r\nis the reason. =||= @holy12345 you got it :) =||= Oh good. Thank you!\r\nThree days ago i find this logic, but i cann't understand it. I think it is a bug, because it seems all situdation will trigger this update, but i have no confidence.\r\nThen i use one day to read the relative logic and one day to search in baidu.\r\nAt the third day, i found you pull request, it's a big help for me to understand the logic, thank you!  =||= @qiangdavidliu Sorry to bring you back, would you please review this PR and test case? I think this could help a lot on the core logic verification. Many thanks!  =||= All guys\r\nI want to know more about this, there is issues also in Netflix production? I agree with @neoremind (its a core logic). so cloud you please tell more things about Netflix how to use eureka in production\r\n\r\nGreat thanks @qiangdavidliu  =||= @neoremind @holy12345 apologies on not being able to take a look at this, we have been swamped and have not had the bandwidth to work on this.\r\n\r\nTo answer your question about how we are using this, we are using the existing core logic as is, and have not had any issues with it as far as we can remember. =||= I've seen a situation similar to this in which we had the renewal threshold at 85%. We took down an AZ which resulted in roughly 33% of the registrations disappearing, since this was higher than the threshold, the servers entered self preservation mode and were not able to exit this mode since the update threshold would not update as the services were rescheduled on the remaining AZs. =||= @mattnelson In normal case, `updateRenewalThreshold` will only be updated when adding or dropping instances, if self perseveration is enabled, then if the heartbeats from instances drop below 85% of the expected value, eureka server stops to expire instance and will not quit unless the lost instances are back online to register/renew with eureka server. \r\nEureka will also try to get applications from peers, if the count is bigger than the threshold, it will update the `updateRenewalThreshold` of itself, this is what this PR works on to adjust and clarify.\r\nIn my opinion, if Eureka enters self preservation mode, and you deliberately offline some servers, Eureka will not quit.  =||= @qiangdavidliu Understand the situation that you are overwhelmed, Netflix grows so fast \ud83d\udc4d If this logic seems unnecessary, how about only adding the test case to eureka?  =||= @neoremind have looked over your changes over the weekend, these look good, and I very much appreciate the test cases attached.\r\n\r\nI'll merge this and cut a new release. =||= @qiangdavidliu many thanks! Appreciate your help! :) =||= "], ["1072", "why InstanceInfo need a overriddenstatus state ", "Xiangjuan Jia", "XiangjuanJia", "05/15/18, 01:47:02 PM", "I've been watching **AbstractInstanceRegistry** class all the time\uff0cbut i don't understand why instanceinfo need a overriddenstatus state. Please help me, thank you.", "NaN"], ["1073", "Eureka will disable expiration forever in some cases?", "neoReMinD", "neoremind", "05/30/19, 11:11:56 PM", "If any time, the heartbeat from all clients, a.k.a renewals falls below a percentage which by default configured to 85% in 15min, the server stops expiring instances.  This will happen usually by either `kill -9` on client or network unreachable. \r\nFor example, there are 50 endpoints, and eureka expects 100 heartbeats per min. \r\nIf due to some reason, the heartbeats drops to 80 which is below 85, and eureka will disable expiration, so there are 10 endpoints (should be 20 heartbeats) unavailable. \r\nBut what if this is a permanent state? People just `kill -9` on the 10 endpoints to make them offline? Eureka server will hold these unavailable endpoints for as long as possible because expiration is disabled. Is this case make sense? \r\n ", "Hi @neoremind \r\nAs far as i know , When the eureka client Down it will sent a message to Eureka Server, so Eureka Server can know its down, also Eureka server can recalculate numbers. If you use `kill -9` The Client will not send message to Eureka Server. So at this time The Eureka Server not recalculate numbers. \r\n\r\nBut Eureka server have a  task in background, it will evict client which not sent heartbeat.\r\n\r\nIf you have any question, Maybe can we use Chinese to communication : )\r\n\r\nI hope i can help you!\r\n\r\nthanks again \r\n\r\n =||= @holy12345 The background task is to evict those ones do not send heartbeats as regular basis, but if expiration is disabled, the background task is not able to perform, so those unavailable endpoints will stay if eureka does not enable expiration. =||= Hi. Thanks for the questions, let me try to address these.\r\n1. How does eureka clients 'end' their registration lifecycle?\r\n - the eureka protocol requires clients to execute an explicit unregister action when they are permanently going away. For example, in the provided java client, this is done in the [shutdown()](https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/DiscoveryClient.java#L901) method.\r\n - any clients that fails 3 consecutive heartbeats is considered to have an unclean termination, and will be evicted by the background eviction process.\r\n2. What happens when too many unclean terminations happen and trigger self preservations?\r\n - this is typically a rare case and we expect that this happen because of some failure mode. The expectation here is that once recovery has happened, the number of heartbeating clients will go back to be above the expected threshold and the servers will automatically recover from self preservation state. \r\n - if however this is expected (or after recovery the number of heartbeating clients does not go back to be above the threshold), you can force the servers to be out of self preservation mode by [temporarily disabling self preservation](https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/EurekaServerConfig.java#L112). We would expect that in these cases, a human operation is available to evaluate the situation and take the appropriate action. =||= @qiangdavidliu Thanks for your answer. What you explained makes sense. Abnormal offline instances should be considered as failure endpoints and expected to be back, normal offline is what Eureka expects clients to do. \r\n\r\nIn our system, we make self preservation to be dynamic configurable, so that we can change the behavior in runtime.   =||= "], ["1075", "only vip display on eureka web ui", "YangJun", "junneyang", "05/30/19, 11:11:56 PM", "client1-demo: 2 instances running on docker swarm/k8s, each ip addr is 10.0.0.11, 10.0.0.12\r\n\r\nbut the eureka ui display only one instance, with the client1-demo's vip(10.0.0.10):\r\n\r\n![qq 20180524202813](https://user-images.githubusercontent.com/6802322/40485415-07980904-5f91-11e8-8100-e1c6b15eee39.png)\r\n\r\n\r\nhow to display all instances?\r\nthanks!\r\n\r", "NaN"], ["1076", "Add some feature about dashboard", "saga", "holy12345", "05/30/19, 11:11:56 PM", "This topic is not issue, I want to know can we add some button on the eureka dashboard. such as add a cancel button, if custome want removie from eureka server  Immediately\u3002\r", "I have the same need...\r\n\r\nadd a remove button for micro service out of service.  =||= Hi @holy12345 this is not a feature we would need internally at Netflix (we use spinnaker for our needs), but we would be more than happy to support any PRs that add these features to the existing eureka dashboard. =||= "], ["1077", "Fix the missing logic in method isRegisterable", "\u5149\u95ea", "HikariShine", "05/27/18, 04:53:15 AM", "In the isRegisterable method, the logic seems allways return true.\r\nBut based on the comment in the method of isRegisterable(), it will return false otherwise.\r\nI think there are missing a return false at the end of Amazon logic.\r\nBut it has not a big affect of applications, is need to repair it?", "NaN"], ["1078", "Eureka server won't fetch info from peers if client.fetchRegistry is set to false", "neoReMinD", "neoremind", "05/30/19, 11:11:56 PM", "I notice that if client.fetchRegistry is set to false at server side, the server won't replicate from peers because when calling `client.getApplications()`, there is nothing returned since there is no background task fetching remote peers. \r\nBut if we set client.fetchRegistry is set to true, besides the initial replication from peers, the usage of this client only lies to update renewal threshold, so fetching info from peers periodically is useless.\r\nSo my question is what is the best practice for setting client.fetchRegistry?", "NaN"], ["1079", "change overriddenstatus field name in pojo to allow for better serialization compatibility", "David Liu", "qiangdavidliu", "05/31/18, 10:06:44 PM", "further relax deser behaviour on overriddenstatus field to allow for both lower and camel case", "@spencergibb I think this will fix https://github.com/spring-cloud/spring-cloud-netflix/issues/2941, do you agree? =||= Yup =||= This didn't fix things for us, since ` @JsonProperty(\"overriddenstatus\")` is still the lowercase version :-( =||= I was wondering about that :(. Let me give it one last shot. =||= Changing that to camel case breaks tests in `EurekaCodecCompatibilityTest` =||= `Unrecognized field \"overriddenstatus\"`. The opposite of what we have. When you have something in a branch/fork somewhere, let me know, I'll build and try so we don't end up releasing it broken again. =||= "], ["1080", "one more change to relax parsing compatibility due to overiddenstatus casing change", "David Liu", "qiangdavidliu", "06/01/18, 06:25:47 PM", "NaN", "applying your changes locally and testing =||= Looks good on my side. =||= @ryanjbaxter =||= Looks good \ud83d\udc4d  =||= "], ["1081", "eureka peer awareness using dns", "Sushant Borse", "bsushant-athena", "05/30/19, 11:11:57 PM", "Hi, I've following config and now I want to get rid of specifying server list and make it dynamic(mybe DNS). Can somebody please suggest my what changes are needed in the below configuration?\r\n\r\n```\r\neureka:\r\n  server:\r\n    port: 8093\r\n    enable-self-preservation: false\r\n  instance:\r\n    hostname: localhost\r\n    ipAddress: 127.0.0.1\r\n    preferIpAddress: true\r\n    instanceId: ${spring.application.name}-${HOST}-${PORT0}\r\n    metadataMap:\r\n      instanceId: ${spring.application.name}-${HOST}-${PORT0}\r\n      dockerImage: \"gateway\"\r\n      enableRegisterFilter: \"false\"\r\n  client:\r\n    serviceUrl:\r\n      defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka/\r\n\r\nzuul:\r\n  host:\r\n    connect-timeout-millis: 10000\r\n    socket-timeout-millis: 60000\r\n  server:\r\n    port: 8093\r\n  eureka:\r\n    datacenter: MyOwn\r\n    hostname: localhost\r\n    instance:\r\n      preferIpAddress: true\r\n      metadataMap:\r\n        instanceId: ${spring.application.name}-${HOST}-${PORT0}\r\n    client:\r\n      serviceUrl:\r\n        defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka/\r\n  sensitiveHeaders:\r\n  routes:\r\n    iam:\r\n      path: /iam/**\r\n      url: http://iams_auth:20020\r\nserver:\r\n  port: 8093\r\n```\r\n\r\nThanks,\r\nSushant", "Apart from the below mentioned way is there any other way to achive the same?\r\nhttps://github.com/Netflix/eureka/wiki/Deploying-Eureka-Servers-in-EC2#configuring-eips-using-dns =||= currently using below config it works but not flexible enough!!\r\n```\r\neureka:\r\n  datacenter: cloud\r\n  name: eureka\r\n  server:\r\n    port: 8093\r\n    preferSameZone: false\r\n    enable-self-preservation: false\r\n  instance:\r\n    preferIpAddress: true\r\n    instanceId: ${spring.application.name}-${HOST}-${PORT0}\r\n    metadataMap:\r\n      instanceId: ${spring.application.name}-${HOST}-${PORT0}\r\n      dockerImage: \"gateway\"\r\n      enableRegisterFilter: \"false\"\r\n  client:\r\n    registerWithEureka: true\r\n    region: us-east-1\r\n    fetchRegistry: true\r\n    availabilityZones:\r\n      us-east-1: us-east-1a\r\n    serviceUrl:\r\n      defaultZone: http://ec2-18-200-134-44.compute-1.amazonaws.com/eureka/\r\n      us-east-1a: http://ec2-18-200-134-44.compute-1.amazonaws.com/eureka/\r\n\r\nzuul:\r\n  host:\r\n    connect-timeout-millis: 10000\r\n    socket-timeout-millis: 60000\r\n  server:\r\n    port: 8093\r\n  eureka:\r\n    datacenter: cloud\r\n    #hostname: localhost\r\n    instance:\r\n      preferIpAddress: true\r\n      metadataMap:\r\n        instanceId: ${spring.application.name}-${HOST}-${PORT0}\r\n    client:\r\n      registerWithEureka: true\r\n      region: us-east-1\r\n      availabilityZones:\r\n        us-east-1: us-east-1a\r\n      serviceUrl:\r\n        defaultZone: http://ec2-18-200-134-44.compute-1.amazonaws.com/eureka/\r\n        us-east-1a: http://ec2-18-200-134-44.compute-1.amazonaws.com/eureka/\r\n  sensitiveHeaders:\r\n  routes:\r\n    iam:\r\n      path: /iam/**\r\n      url: http://iams_auth:20020\r\nserver:\r\n  port: 8093\r\n``` =||= ```\r\neureka:\r\n  datacenter: cloud\r\n  name: eureka\r\n  #https://github.com/spring-cloud/spring-cloud-netflix/issues/1816\r\n  #asgName: EurekaEIPASG\r\n  server:\r\n    port: 8093\r\n    preferSameZone: false\r\n    enable-self-preservation: false\r\n  instance:\r\n    hostname: localhost\r\n    preferIpAddress: true\r\n    instanceId: ${spring.application.name}-${HOST}-${PORT0}\r\n    metadataMap:\r\n      instanceId: ${spring.application.name}-${HOST}-${PORT0}\r\n      dockerImage: \"gateway\"\r\n      enableRegisterFilter: \"false\"\r\n  client:\r\n    registerWithEureka: true\r\n    #This must be true for DNS based configuration\r\n    useDnsForFetchingServiceUrls: true\r\n    #This is the suffix added to the DNS requests, so must match the records you create\r\n    eurekaServerDNSName: eurekagw.aws.abc.com\r\n    #This is the url added to the servers returned from DNS. e.g. eurekagw.aws.abc.com will become  http://eurekagw.aws.athenahealth.com/eureka\r\n    eurekaServerURLContext: eureka\r\n    region: us-east-1\r\n    fetchRegistry: true\r\n\r\nzuul:\r\n  host:\r\n    connect-timeout-millis: 10000\r\n    socket-timeout-millis: 60000\r\n  server:\r\n    port: 8093\r\n  eureka:\r\n    datacenter: cloud\r\n    hostname: localhost\r\n    instance:\r\n      preferIpAddress: true\r\n      metadataMap:\r\n        instanceId: ${spring.application.name}-${HOST}-${PORT0}\r\n    client:\r\n      registerWithEureka: true\r\n      #For DNS based matching\r\n      useDnsForFetchingServiceUrls: true\r\n      eurekaServerDNSName: eurekagw.aws.abc.com\r\n      eurekaServerURLContext: eureka\r\n      region: us-east-1\r\n  sensitiveHeaders:\r\n  routes:\r\n    iam:\r\n      path: /iam/**\r\n      url: http://iams_auth:20020\r\nserver:\r\n  port: 8093\r\n```\r\n\r\nWith this config I get following error\r\n```\r\n2018-08-19 15:30:29,826 [] DEBUG [main]  org.springframework.beans.factory.support.DefaultListableBeanFactory  - Eagerly caching bean 'zuul-org.springframework.cloud.netflix.zuul.filters.ZuulProperties' to allow for resolving potential circular references\r\n2018-08-19 15:30:29,830 [] ERROR [main]  org.springframework.boot.SpringApplication  - Error handling failed\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.netflix.zuul.ZuulProxyConfiguration': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'zuul-org.springframework.cloud.netflix.zuul.filters.ZuulProperties': Initialization of bean failed; nested exception is java.lang.IllegalStateException: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@229d10bd has not been refreshed yet\r\n```\r\n\r\nI'm creating txt records in aws route53 for `txt.us-east-1a.eurekagw.aws.abc.com` =||= "], ["1082", "Eureka in AWS", "Sushant Borse", "bsushant-athena", "06/11/18, 03:54:31 PM", "Hi,\r\n\r\nTo get the eureka working in aws using EIP, are following things are enough?\r\n```\r\n1. I have allocated a new EIP from AWS\r\n2. Configured Eureka client based on the Wiki post. Basically modified the region, zone and service URL to reflect the newly allocated EIP.\r\n3. Updated  -Deureka.datacenter=cloud java commandline to reflect use of AWS env.\r\n4. Updated Eureka server properties for 'Test' env to include AWS credentials (this step is required ??)\r\n```\r\ncan somebody please review this and let me know that I'm on right track?", "the  approach of hardcoding the EIP works fine now, so closing it. =||= "], ["1083", "defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka can't run normal", "lonecloud", "lonecloud", "05/30/19, 11:11:57 PM", "I using Eureka version is Edgware.SR3,if  i set application.yml using this properties:\r\n```\r\nserver:\r\n  port: 8761\r\neureka:\r\n   instance:\r\n    hostname: localhost\r\n   client:\r\n    register-with-eureka: false\r\n    fetch-registry: false\r\n    service-url:\r\n     defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka\r\n```\r\nIt can run normal ,but in http://127.0.0.1:8761/  registered-replicas  is empty  like this:\r\n```\r\n\r\nName | Value\r\n-- | --\r\ntotal-avail-memory | 400mb\r\nenvironment | test\r\nnum-of-cpus | 4\r\ncurrent-memory-usage | 33mb (8%)\r\nserver-uptime | 00:00\r\nregistered-replicas | \u00a0\r\nunavailable-replicas | \u00a0\r\navailable-replicas\r\n\r\n\r\n```\r\ncan you help me? \r\nthanks !", "NaN"], ["1084", "Error in EurekaClientAutoConfiguration while running Eureka Server", "Ragavan", "RagavanRevature", "07/05/18, 10:12:33 PM", "Error creating bean with name 'org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration': Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.core.env.ConfigurableEnvironment' available: expected at least 1 bean which qualifies as autowire candidate. \r\nSpring Boot - 2.0.2\r\nCloud - Finchley.RC2", "This is not the spring cloud Netflix issue tracker =||= Thanks @spencergibb . Closing this issue. =||= "], ["1085", "\u4f7f\u7528Junit\u8fd0\u884cspringboot\u5de5\u7a0b\u7684\u65f6\u5019\uff0c\u4e3a\u4ec0\u4e48\u6ce8\u518c\u5230Eureka\u4f1a\u5931\u8d25\uff1f", "confuse", "mncat", "05/30/19, 11:11:57 PM", "\u4f7f\u7528Junit\u8fd0\u884cspringboot\u5de5\u7a0b\u7684\u65f6\u5019\uff0c\u4e3a\u4ec0\u4e48\u6ce8\u518c\u5230Eureka\u4f1a\u5931\u8d25\uff1f\u67e5\u770b\u542f\u52a8\u65e5\u5fd7\u4f7f\u7528GET\u65b9\u6cd5\u53bb\u8bf7\u6c42\uff0c\u4f46\u662f\u76f4\u63a5\u8fd0\u884c\u5de5\u7a0b\u5c31\u4f1a\u6ce8\u518c\u6210\u529f\uff0c\u5e76\u4e14\u662f\u4f7f\u7528POST\u65b9\u6cd5\u53bb\u6ce8\u518c\u7684\uff1f\r\nIf I run the springboot project with junit \uff0cit register on the Eureka failed\uff0cthe log shows that is use get method to send register infomation to the Eureka \uff0cbut register failed.  While I derectly run the project \uff0cit can register on the Eureka successfully \uff0c the log shows that it send  register infomation with post method. This two picture show the log,the first is boot wtih junit  and the second is run directly. \r\n![image](https://user-images.githubusercontent.com/29520116/41351312-8e1b6efa-6f48-11e8-9922-79a9eb86dfe5.png)\r\n![image](https://user-images.githubusercontent.com/29520116/41351322-960db870-6f48-11e8-80dc-d38be5c5d417.png)\r", "NaN"], ["1086", "New feature: get connected applications", "J\u00e9r\u00f4me Van Der Linden", "jeromevdl", "05/30/19, 11:11:57 PM", "It would be a great feature to know who is connected to who. \r\n\r\nWhen a service retrieve information about another one (discovery, GET /apps/appid), it could be interesting to register this in order to know that the service is connected to the other. \r\n\r\nThus, we could build the complete graph of service dependencies. Eureka have all the information, It would be a great pity not to take advantage of it.\r\n\r\nI know this is not based on real connections (logs) but it would provide pretty good information for nothing.\r\n\r\nWhat do you think ?", "It would be nice to have :). =||= "], ["1087", "Method isThisMyUrl returns false in setup configured with DNS, is there a workaround?", "Mikhail Gromov", "mgtriffid", "08/21/18, 08:01:49 AM", "In our setup Eureka replication is configured following [this guide](https://github.com/Netflix/eureka/wiki/Deploying-Eureka-Servers-in-EC2#configuring-eips-using-dns). DNS records are resolved into AWS ELBs. And looks like this method returns `false` for ELB which actually belongs to stack where this instance is running. Because of that, heartbeats which were sent by clients to particular Eureka instance are replicated to this instance again. And because of that self-preservation can't trigger properly: there are more heartbeats than expected.\r\n\r\nHas anybody face this issue? As possible workaround, maybe there is a way to configure instanceInfo.hostName somehow to make it match ELB?\r\n\r\nThanks in advance for advice!", "Any news here? =||= In our custom build we ended up with following solution.\r\nEach Eureka node generates random UUID, and exposes an endpoint which just returns this UUID.\r\nCustom implementation of `PeerEurekaNodes` overrides method `isThisMyUrl`, and in this method it first calls mentioned endpoint of passed host. And if this call returns the same UUID this node has generated, it means \"this is my url\", and Eureka remembers that host and always thinks it is it's own host. But I'm not sure how to implement similar functionality in original Eureka, as can't foresee all possible cases. Just sharing an idea here. =||= Thanks @mgtriffid for the proposed solution, that would work. In effect what's required is for eureka servers to have an identity that it can match on. When using hostnames directly, this works, but not when servers are fronted by an ELB. The custom changes by @mgtriffid may be something that can be generalised into something that can work with both hostnames and custom UUIDs, and we would welcome such a PR for this project. =||= Submitted a [PR](https://github.com/Netflix/eureka/pull/1101), @qiangdavidliu .\r\n\r\nWith this PR Eureka still first tries to perform regular check, and only if it fails, we try to fetch peer id.\r\n\r\nAlso, I've added check only for replications and not for initial resolving peers, because in common scenario (when several instances are starting at the same time) we can't contact peers, as they are not open for traffic yet. Also wanted to perform calls to peers through common mechanism of `EurekaHttpClient`, hence, had to add method to `PeerEurekaNode`, and we don't have instances of `PeerEurekaNode` during initial URLs resolution. =||= Hi @mgtriffid \r\nI face the issue which maybe the same to you.\r\nWhen I start a `eureka server` in local, and start a `eureka client`,  I see the server log has two register log. By the debug the source code , I found `isThisMyUrl` is check not total right\r\n\r\nIn my mind I think when a `eureka client` start It will register to `eureka server` and `eureka server` will replicate to peer node(In replicate logic, it should skip itself).\r\n\r\nBut I found it not skip itself : (\r\n =||= @holy12345 , PR https://github.com/Netflix/eureka/pull/1107 is merged and included in 1.9.4, please see if new config parameter fits your needs.\r\nI guess we can close this now. =||= "], ["1088", "Concurrent register of custom healthcheck handler in DiscoveryClient", "Taras Danylchuk", "tdanylchuk", "06/25/18, 11:40:14 PM", "Some clients try to register their health checks and fail since there is possibility to rewrite healthcheck handler by default one.\r\n\r\nRoot cause:\r\nafter not thread safe null check DiscoveryClient will register default healthcheck handler even if during creation of that, custom one will be provided.\r\nResolution summary:\r\nwrap healthcheck handler in AtomicReference and set default implementation only if reference still contain null.\r\n\r\nExample is spring-cloud-netflix project and https://github.com/spring-cloud/spring-cloud-netflix/issues/2490 issue.", "@tdanylchuk looks good, thanks for the contribution. =||= My pleasure, thank you for supporting the project. =||= "], ["1089", "eureka server demo jersey problem on wildfly 10.1", "KenHan", "kenImas", "05/30/19, 11:11:57 PM", "Hi all,\r\n\r\nFollowing the instructions \"Running the demo application\" I built the eureka project and deployed the resulting war (renamed it to eureka.war before deploying) on my wildfly server. After the application starts up, the following error is thrown when the client sends a heartbeat:\r\n\r\n12:43:25,819 ERROR [io.undertow.request] (default task-3) UT005023: Exception handling request to /eureka/v2/apps/: com.sun.jersey.api.container.ContainerException: The ResourceConfig instance does not contain any root resource classes.\r\n\tat com.sun.jersey.server.impl.application.RootResourceUriRules.<init>(RootResourceUriRules.java:99)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl._initiate(WebApplicationImpl.java:1359)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl.access$700(WebApplicationImpl.java:180)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:799)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:795)\r\n\tat com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:193)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:795)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:790)\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.initiate(ServletContainer.java:509)\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:339)\r\n\tat com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:605)\r\n\tat com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:207)\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:394)\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:744)\r\n\tat io.undertow.servlet.core.LifecyleInterceptorInvocation.proceed(LifecyleInterceptorInvocation.java:111)\r\n\tat org.wildfly.extension.undertow.security.RunAsLifecycleInterceptor.init(RunAsLifecycleInterceptor.java:84)\r\n\tat io.undertow.servlet.core.LifecyleInterceptorInvocation.proceed(LifecyleInterceptorInvocation.java:97)\r\n\tat io.undertow.servlet.core.ManagedFilter.createFilter(ManagedFilter.java:80)\r\n\tat io.undertow.servlet.core.ManagedFilter.getFilter(ManagedFilter.java:66)\r\n\tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\r\n\tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n\tat com.netflix.eureka.GzipEncodingEnforcingFilter.doFilter(GzipEncodingEnforcingFilter.java:48)\r\n\tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\r\n\tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n\tat com.netflix.eureka.ServerRequestAuthFilter.doFilter(ServerRequestAuthFilter.java:52)\r\n\tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\r\n\tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n\tat com.netflix.eureka.StatusFilter.doFilter(StatusFilter.java:68)\r\n\tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\r\n\tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n\tat io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)\r\n\tat io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\r\n\tat io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\r\n\tat org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\r\n\tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\tat io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:131)\r\n\tat io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\r\n\tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\tat io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\r\n\tat io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\r\n\tat io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\r\n\tat io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\r\n\tat io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\r\n\tat io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\r\n\tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\tat org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\r\n\tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\tat io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:292)\r\n\tat io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:81)\r\n\tat io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:138)\r\n\tat io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:135)\r\n\tat io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\r\n\tat io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n\tat io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n\tat io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n\tat io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n\tat io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n\tat io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)\r\n\tat io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:272)\r\n\tat io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:81)\r\n\tat io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:104)\r\n\tat io.undertow.server.Connectors.executeRootHandler(Connectors.java:202)\r\n\tat io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:805)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n\r\nBy the looks of it, it seems that jersey can't find any resource classes. Anyone have a clue as to what causes this and how it can be fixed?\r\n\r\nNote: When deploying on tomcat I don't get this problem, by looking at the logs I can see that jersey can find the resources:\r\n\r\n22-Jun-2018 11:25:35.078 INFO [ContainerBackgroundProcessor[StandardEngine[Catalina]]] com.sun.jersey.api.core.ScanningResourceConfig.logClasses Root resource classes found:\r\n  class com.netflix.appinfo.HealthCheckResource\r\n  class com.netflix.eureka.resources.PeerReplicationResource\r\n  class com.netflix.eureka.resources.VIPResource\r\n  class com.netflix.eureka.resources.StatusResource\r\n  class com.netflix.eureka.resources.InstancesResource\r\n  class com.netflix.eureka.resources.ApplicationsResource\r\n  class com.netflix.eureka.resources.SecureVIPResource\r\n  class com.netflix.eureka.resources.ASGResource\r\n  class com.netflix.eureka.resources.ServerInfoResource\r\n\r", "NaN"], ["1090", "1.X \u6301\u7eed\u66f4\u65b0\u4e48\uff1f", "weir", "weir2010", "07/05/18, 09:55:03 PM", "1.X \u6301\u7eed\u66f4\u65b0\u4e48\uff1f", "1.X is pretty stable and in production-level, spring-cloud relies on 1.X. If there is demand I think community would play a big role in maintaining this. For your question, I think @qiangdavidliu might be the right person to answer. =||= Hi. The 1.x branch of eureka still form the core of the service discovery ecosystem at Netflix and will continue to be maintained. =||= "], ["1091", "1.x Continue to update?", "ThinOfSnowDance", "ThinOfSnowDance", "07/05/18, 09:54:41 PM", "### 1.x Continue to update?\r", "same concern. https://github.com/Netflix/eureka/issues/1090 =||= Though I'm not part of netflix, I'm fairly confident eureka will live on for quite a while. =||= @spencergibb thumb up!  =||= the 2.x work (on the 2.x branch) have been abandoned, but the 1.x branch of eureka still form the core of the service discovery ecosystem at Netflix and will continue to be maintained. =||= But now I'm confused about \"extension work on eureka 1.x has moved internally within Netflix.\".\r\n =||= "], ["1092", "2.x", null, "gaoyining", "07/05/18, 09:29:21 PM", "NaN", "comment =||= Hi, please note that `The open source work on eureka 2.0 has been discontinued. The code base and artifacts that were released as part of the existing repository of work on the 2.x branch is considered use at your own risk.` =||= "], ["1093", "Add possibility to configure expected interval between clients' renew\u2026", "Mikhail Gromov", "mgtriffid", "07/17/18, 04:19:36 AM", "\u2026s and not break self-preservation\r\n\r\nCurrently, if one sets renewal interval different from 30 seconds on clients, self-preservation doesn't work correctly. For example, see https://github.com/spring-cloud/spring-cloud-netflix/issues/373 . This PR adds possibility to configure expected renewal interval on Eureka server, so that if clients send renews every, say, 20 seconds, then SP threshold is `0.85 * 3 * count`, not `0.85 * 2 * count`.", "@mgtriffid Thanks your PR : )\r\nTiny things.\r\nCould you please add some validate about `serverConfig.getExpectedClientRenewalIntervalSeconds()` is not zero. =||= I think there might be a more aggressive solution to make heartbeats interval configurable. Because there are too many hard code by `/ 2` in class `AbstractInstanceRegistry` and `PeerAwareInstanceRegistryImpl`, if we set so then there is no need to add this parameter.  =||= > I think you may need to make a change here too:\r\nhttps://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/registry/PeerAwareInstanceRegistryImpl.java#L294\r\n\r\nSorry, I don't get it what do these two minutes mean. This seems to be an expiration check, but it uses lease duration and last lease renewal, and I can't understand why do we need to add 2 minutes. Could you kindly explain, @qiangdavidliu ?\r\n\r\nAddressed other comments. =||= @mgtriffid no worries, that was a minor issue. Thank you for the PR. =||= "], ["1094", "com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server", null, "jayzc1234", "05/30/19, 11:11:57 PM", "i do as \"https://github.com/Netflix/eureka/wiki/Building-Eureka-Client-and-Server\" told to do,but when i start tomct server and get a exception \"Cannot execute request on any known server\".but that demo guide page tells not to edit eureka-server.properties.so why is that?", "because your server is registering to other eureka server. you may config as below\uff1a\r\nregisterWithEureka: false =||= "], ["1095", "can i put some global metadata in eureka?", "dragontree101", "dragontree101", "07/10/18, 07:25:10 AM", "i found metadata must in one instance, i want to config some global metadata in eureka, how can i put some metadata detach from instance instead of global\r\n\r\ni found only restful api\r\n\r\n```\r\nPUT /eureka/v2/apps/appID/instanceID/metadata?key=value\r\n```\r\n\r\n\r\nthanks", "You cannot. Eureka is an instance-level registry. There is no place for service-level metadata in the registry hierarchy. Unfortunately, you will have to add any metadata at the instance level. \r\n\r\nConsul has support for service-level information.  =||= thanks, change eureka to consul is hard ...      :( \r\n =||= "], ["1096", "Cache capacity configurable", "saga", "holy12345", "07/10/18, 08:50:45 PM", "Hi @qiangdavidliu \r\n\r\nWhen `ResponseCacheImpl#readWriteCacheMap` init, it use hardcode to make initial capacity, so I add a parameter which can let customer decide the initial capacity.\r\n\r\nPlease check it.\r\n\r\nThanks : )", "Looks good, thanks @holy12345 . =||= "], ["1097", "Tiny improve", "saga", "holy12345", "07/10/18, 08:49:17 PM", "Remove magic number and replaced by `Status`", "Looks good, thanks @holy12345 . =||= "], ["1098", "DiscoveryClient.localRegionApps not clear application without any instances", "Addo.Zhang", "addozhang", "08/02/18, 09:54:17 PM", "Eureka client still holds those applications who has no any instances in `DiscoveryClient.localRegionApps`. The only way to delete them I found is setting `eureka.client.log-delta-diff` as true. But this approach will add one more full fetch request after delta request. \r\n\r\nIn method `updateDelta()`, the logic of handling instance deleted is confused. Even not apps exists, it still adds app back, and does removing op again. \r\n\r\n```java\r\nif (ActionType.DELETED.equals(instance.getActionType())) {\r\n    Application existingApp = applications.getRegisteredApplications(instance.getAppName());\r\n    if (existingApp == null) {\r\n        applications.addApplication(app);\r\n    }\r\n    logger.debug(\"Deleted instance {} to the existing apps \", instance.getId());\r\n    applications.getRegisteredApplications(instance.getAppName()).removeInstance(instance);\r\n}\r\n```\r\n\r\nI think the correct logic is if no app exists, do nothing. If exists, remove instance from it and **check if it has any instance up. If no, remove app.**", "Hi @addozhang\r\n\r\nI submit a PR about this issues, welcome you check it.\r\n\r\nThanks  =||= "], ["1099", "x'x", "Bruce Li", "SilongLi", "07/11/18, 03:21:24 AM", "xx ", "NaN"], ["1100", "Fix 1098", "saga", "holy12345", "08/02/18, 09:54:17 PM", "Hi @qiangdavidliu \r\n\r\nThis PR fix #1098 please check it.\r\n\r\nThanks : )", "@holy12345 thanks for the PR. This looks good in theory, though I would like to get some additional verification on whether this is safe to do as removal of apps is not something that expected in current client behaviour. Can you please add some testing to verify? `DiscoveryClientRegistryTest` would be a good starting point for this. Thanks. =||= @qiangdavidliu Great thanks : )\r\n\r\nI will add some test for this PR.\r\nOne more things could you please give me your personal email? If you think it inconvenient to disclose it in public, I can give you my email address(Because I want more discuss with you about eureka).\r\n\r\nMy email address is spring_holy@163.com\r\n\r\nThanks again =||= Hi @qiangdavidliu  First of all thank you!\r\n\r\nI add some test case for this PR, please you check it .\r\n\r\nYou say \r\n> removal of apps is not something that expected in current client behaviour\r\n\r\nSo I think in some case there have many application has no instanceInfo when merge the delta information(the action type is DELETE)\r\n\r\nAccording to your thoughts which is best ?\r\n\r\n- When application has no instanceInfo, we remove application(this PR logic)\r\n\r\n- Optimize the original logic, the code like this\r\n\r\n```\r\nif (ActionType.DELETED.equals(instance.getActionType())) {\r\n    Application existingApp = applications.getRegisteredApplications(instance.getAppName());\r\n    if (existingApp != null) {\r\n        logger.debug(\"Deleted instance {} to the existing apps \", instance.getId());\r\n        applications.getRegisteredApplications(instance.getAppName()).removeInstance(instance);\r\n    }\r\n}\r\n```\r\n\r\nThanks again : ) =||= Looks good, thanks @holy12345 . =||= "], ["1101", "EUREKA-1087 Add one more check for \"is this my url\", so that even whe\u2026", "Mikhail Gromov", "mgtriffid", "08/02/18, 07:42:38 AM", "\u2026n each node is behind ELB, heartbeats are not replicated to the node they originally were sent to", "@mgtriffid thanks for the PR. We will take a look at this. =||= Can the existing instance id be used for self identification? It is already a unique identifier.\r\n\r\nIntroducing a new endpoint complicates deployment considerations with rollout of this feature and adds more complexity. Additionally, eureka is already pretty chatty between the peers and with heartbeats. I would like to explore other options that don't add more requests. =||= @mattnelson , probably, yes, existing instance id should work.\r\nSpeaking of not introducing new requests. When Eureka resolves addresses of peers through DNS, hosts in txt records are the only information it has. Sorry, I don't understand, how can Eureka find corresponding instance ids if not trying these hosts?\r\nMaybe there already exists some request from which we could understand if caller == callee? If so, could you please suggest, where should I look?\r\n\r\nSpeaking of peers being chatty - please note that these requests are executed only for some short time after deployment, until Eureka finally calls itself and understands \"yeah, this peer is actually me\". After that, these requests don't happen.\r\n\r\nSpeaking of complicated deployment - yes, adding new resource to web server is required. But gradual rollout shouldn't be a problem: at some point Eureka will finally call itself (and if Eureka has this check - it means it has endpoint too), will figure out that called peer is actually the same node, and will stop doing these requests.\r\n\r\nOverall, I certainly understand that this looks like a kludge, would be happy to find better solution. =||= @mgtriffid I think @mattnelson raise some good points here about additional complexity that would be involved with this change. Does your deployment model support node specific configs? If so, the below strategy may be an easier way of achieving the same goal:\r\n1. introduce a config variable that can be set to override the isThisMe url that is checked at https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/cluster/PeerEurekaNodes.java#L246. Doing this eureka nodes can be configured to match on custom names that does not have to be the local hostname.\r\n2. in your deployment, set this config to be the ELB hostname that correspond to each node. =||= @qiangdavidliu , @mattnelson , thanks for ideas! Yes, this option with new configuration parameter is certainly much easier. Submitted new PR https://github.com/Netflix/eureka/pull/1107, declining this one. =||= "], ["1102", "Question: I see that client instance is deleted from Eureka node, but can't find how exactly", "Mikhail Gromov", "mgtriffid", "05/30/19, 11:11:58 PM", "Hi guys, I'm performing some destruction testing against Eureka cluster, and it behaves good, but I don't fully understand why :)\r\n\r\n#### Environment:\r\n3 Eureka servers in replication. Self-preservation enabled. Logging level is DEBUG. 16 clients are talking to them.\r\n\r\n#### What I do:\r\n1. On one of Eureka nodes (let's call it **Failure Peer**) I execute\r\n`sudo iptables -A INPUT -p tcp --dport 8010 -j DROP`\r\n, ruining all incoming requests.\r\n2. Wait some time, around 3 minutes.\r\n3. Kill (literally, `sudo kill -9`) one of clients and send DELETE request to one of healthy peers.\r\n4. Wait 5 minutes.\r\n5. Fix artificial networking issue by executing\r\n`sudo iptables -D INPUT -p tcp --dport 8010 -j DROP`\r\non **Failure Peer**\r\n\r\n#### What I see:\r\nKilled and deleted client is deleted from both healthy nodes instantly, and I see log entries about that:\r\n`Cancelled instance myService/myInstanceId (replication=true)` <- from where cancellation was replicated\r\n`Cancelled instance myService/myInstanceId (replication=false)` <- from where DELETE request was sent\r\nAnd when I fix network by removing iptables rule, I see that this client is removed from **Failure Peer** too.\r\n\r\n#### What makes me scratch my head:\r\nI don't see anything related to deletion in logs of **Failure Peer**. If this deletion happens because replication events are finally delivered, then I'd expect to see a message similar to ones above, as during replication method cancel() of instance registry is called. If it was expiration, I'd expect to see logged message saying that instance is expired, but there is no such message. I only see that `EurekaClient` was able to fetch delta from peers and delete instance from client-side registry:\r\n`Deleted instance myInstanceId to the existing apps`\r\n(that iptables rule breaks incoming connections, but outgoing requests work fine).\r\nThis puzzles me. Is there any connection between `EurekaClient` and `PeerAwareInstanceRegistryImpl` except method syncUp(), which, seemingly, is called only at startup (we don't use EIP binding)?\r\nCan you please give me a direction to dig? I just want to understand Eureka as deeply as possible and want to foresee as many issues as possible. And neither logs nor debugging helped me to figure out how does Eureka behave in this scenario.\r\n\r\nThank you guys for this software!", "NaN"], ["1103", "Race condition in one application server between Eureka/CloudConfig server and client", "Thoralf Rickert-Wendt", "trickert76", "05/30/19, 11:11:58 PM", "I've a very strange setup - some of our customers need a \"supported application server\" as a runtime environment and they don't want two or more servers runing (only one). So, our Spring boot application need to run in one application server but without code changes also on two, three or more for other customers or as JARs. Because all of that, I cannot use EARs.\r\n\r\nThe infrastructure for the problem is very simple. A Eureka server, a Cloud Config Server and a simple Eureka/CloudConfig client in one Application server. When the WARs of the servers are up and running, I can put the client WAR into deployments, then the client service connects to the Eureka server, find the instance of the cloud config server, reads the configuration and everything is okay.\r\n\r\nBut when I shutdown/restart the application server (Wildfly, JBoss, WLS), I run into a race condition. The client service cannot reach the servers. This is the bootstrap.yml\r\n```\r\n\r\nspring:\r\n    application:\r\n        name: myclient\r\n    jmx:\r\n        default-domain: myclient\r\n    cloud:\r\n        config:\r\n            username: user\r\n            password: pass\r\n            discovery:\r\n                enabled: true\r\n                serviceId: CONFIGURATION\r\n            retry:\r\n                maxAttempts: 10\r\n                initialInterval: 15000\r\n\r\neureka:\r\n    instance:\r\n        hostname: localhost\r\n        securePortEnabled: true\r\n        nonSecurePortEnabled: false\r\n        nonSecurePort: 80\r\n        metadataMap:\r\n            configPath: ${server.servletPath}\r\n        homePageUrlPath: ${server.servletPath}\r\n        statusPageUrlPath: ${server.servletPath}/actuator/info\r\n        healthCheckUrlPath: ${server.servletPath}/actuator/health\r\n    client:\r\n        serviceUrl:\r\n            defaultZone: https://user:pass@localhost:8443/my-ds/eureka\r\n``` \r\nThe initialInterval reduces the number of retries during bootstrap. But after everything is up, the client and the configuration service is registered in Eureka, but I get every 30sec or so an exception from the client, that it cannot find a CONFIGURATION instance. \r\n\r\nThe problem is, that the autowired configurations that values are stored in the config server are null. I tried to make a Thread.sleep() in the  SpringBootServletInitializer.configure(SpringApplicationBuilder application), but that doesn't help too.\r\n\r\nThe following exception is the first, that comes during startup, saying, it cannot connect (which is okay for me, everything is starting parallel). This is of course from the Eureka client.\r\n\r\n```\r\n11:25:26,726 ERROR [com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient] (ServerService Thread Pool -- 93) Request execution error: com.sun.jersey.api.client.ClientHandlerException: java.net.SocketTimeoutException: Read timed out\r\n        at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187)\r\n        at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123)\r\n        at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27)\r\n        at com.sun.jersey.api.client.Client.handle(Client.java:652)\r\n        at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682)\r\n        at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)\r\n        at com.sun.jersey.api.client.WebResource$Builder.get(WebResource.java:509)\r\n        at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.getApplicationsInternal(AbstractJerseyEurekaHttpClient.java:194)\r\n        at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.getApplications(AbstractJerseyEurekaHttpClient.java:165)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\r\n        at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\r\n        at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118)\r\n        at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\r\n        at com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1051)\r\n        at com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:965)\r\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:414)\r\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:269)\r\n        at org.springframework.cloud.netflix.eureka.CloudEurekaClient.<init>(CloudEurekaClient.java:63)\r\n        at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration.eurekaClient(EurekaClientAutoConfiguration.java:269)\r\n        at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration$$EnhancerBySpringCGLIB$$8b0bd015.CGLIB$eurekaClient$0(<generated>)\r\n        at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration$$EnhancerBySpringCGLIB$$8b0bd015$$FastClassBySpringCGLIB$$db7da68e.invoke(<generated>)\r\n        at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)\r\n        at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:361)\r\n        at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration$$EnhancerBySpringCGLIB$$8b0bd015.eurekaClient(<generated>)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:579)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1254)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1103)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:541)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:501)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$1(AbstractBeanFactory.java:353)\r\n        at org.springframework.cloud.context.scope.GenericScope$BeanLifecycleWrapper.getBean(GenericScope.java:390)\r\n        at org.springframework.cloud.context.scope.GenericScope.get(GenericScope.java:184)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:350)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n        at org.springframework.aop.target.SimpleBeanTargetSource.getTarget(SimpleBeanTargetSource.java:35)\r\n        at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaRegistration.getTargetObject(EurekaRegistration.java:167)\r\n        at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaRegistration.getEurekaClient(EurekaRegistration.java:156)\r\n        at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry.maybeInitializeClient(EurekaServiceRegistry.java:57)\r\n        at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry.register(EurekaServiceRegistry.java:39)\r\n        at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration.start(EurekaAutoServiceRegistration.java:80)\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:181)\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.access$200(DefaultLifecycleProcessor.java:52)\r\n        at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:356)\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:157)\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:121)\r\n        at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:885)\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.finishRefresh(ServletWebServerApplicationContext.java:161)\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:553)\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:140)\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:759)\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:395)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:327)\r\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:155)\r\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:135)\r\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:87)\r\n        at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:172)\r\n        at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:204)\r\n        at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:186)\r\n        at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\r\n        at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n        at org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\r\n        at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:251)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:96)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:78)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n        at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n        at org.jboss.threads.JBossThread.run(JBossThread.java:485)\r\nCaused by: java.net.SocketTimeoutException: Read timed out\r\n        at java.net.SocketInputStream.socketRead0(Native Method)\r\n        at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\r\n        at java.net.SocketInputStream.read(SocketInputStream.java:171)\r\n        at java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n        at sun.security.ssl.InputRecord.readFully(InputRecord.java:465)\r\n        at sun.security.ssl.InputRecord.read(InputRecord.java:503)\r\n        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:983)\r\n        at sun.security.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:940)\r\n        at sun.security.ssl.AppInputStream.read(AppInputStream.java:105)\r\n        at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:161)\r\n        at org.apache.http.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:82)\r\n        at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:278)\r\n        at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138)\r\n        at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56)\r\n        at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259)\r\n        at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:286)\r\n        at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:257)\r\n        at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:230)\r\n        at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273)\r\n        at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)\r\n        at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:684)\r\n        at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:486)\r\n        at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835)\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:118)\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\r\n        at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173)\r\n        ... 89 more\r\n```\r\nA second exception comes a little bit later:\r\n```\r\n11:25:51,095 ERROR [com.netflix.discovery.DiscoveryClient] (ServerService Thread Pool -- 88) DiscoveryClient_MACH-MARK2/thoralfs-mbp-2.fritz.box:mach-mark2:9998 - was unable to refresh its cache! status = Cannot execute request on any known server: com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\r\n        at com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1051)\r\n        at com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:965)\r\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:414)\r\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:269)\r\n        at org.springframework.cloud.netflix.eureka.CloudEurekaClient.<init>(CloudEurekaClient.java:63)\r\n        at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$EurekaClientConfiguration.eurekaClient(EurekaClientAutoConfiguration.java:240)\r\n        at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$EurekaClientConfiguration$$EnhancerBySpringCGLIB$$e2e6f298.CGLIB$eurekaClient$0(<generated>)\r\n        at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$EurekaClientConfiguration$$EnhancerBySpringCGLIB$$e2e6f298$$FastClassBySpringCGLIB$$493c2eea.invoke(<generated>)\r\n        at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)\r\n        at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:361)\r\n        at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$EurekaClientConfiguration$$EnhancerBySpringCGLIB$$e2e6f298.eurekaClient(<generated>)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:579)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1254)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1103)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:541)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:501)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n        at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:251)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1138)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1065)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:815)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:721)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:470)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1254)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1103)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:541)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:501)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n        at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:251)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1138)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1065)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:815)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:721)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:470)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1254)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1103)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:541)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:501)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n        at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:251)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1138)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1065)\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:584)\r\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:91)\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:373)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1348)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:578)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:501)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:760)\r\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:869)\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:759)\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:395)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:327)\r\n        at org.springframework.boot.builder.SpringApplicationBuilder.run(SpringApplicationBuilder.java:137)\r\n        at org.springframework.cloud.bootstrap.BootstrapApplicationListener.bootstrapServiceContext(BootstrapApplicationListener.java:197)\r\n        at org.springframework.cloud.bootstrap.BootstrapApplicationListener.onApplicationEvent(BootstrapApplicationListener.java:104)\r\n        at org.springframework.cloud.bootstrap.BootstrapApplicationListener.onApplicationEvent(BootstrapApplicationListener.java:70)\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:127)\r\n        at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:74)\r\n        at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:54)\r\n        at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:358)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:317)\r\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:155)\r\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:135)\r\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:87)\r\n        at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:172)\r\n        at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:204)\r\n        at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:186)\r\n        at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\r\n        at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n        at org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\r\n        at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:251)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:96)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:78)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n        at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n        at org.jboss.threads.JBossThread.run(JBossThread.java:485)\r\n\r\n```\r\n\r\nAnd then - the end - the Cloud config cannot be loaded and every 30sec the following exception comes up. All AutoWired fields are null. The application is up, but it cannot be used\r\n\r\n```\r\n11:25:51,262 WARN  [org.springframework.cloud.config.client.DiscoveryClientConfigServiceBootstrapConfiguration] (ServerService Thread Pool -- 88) Could not locate configserver via discovery: java.lang.IllegalStateException: No instances found of configserver (CONFIGURATION)\r\n        at org.springframework.cloud.config.client.ConfigServerInstanceProvider.getConfigServerInstances(ConfigServerInstanceProvider.java:25)\r\n        at org.springframework.cloud.config.client.DiscoveryClientConfigServiceBootstrapConfiguration.refresh(DiscoveryClientConfigServiceBootstrapConfiguration.java:84)\r\n        at org.springframework.cloud.config.client.DiscoveryClientConfigServiceBootstrapConfiguration.startup(DiscoveryClientConfigServiceBootstrapConfiguration.java:69)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:261)\r\n        at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:180)\r\n        at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:142)\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\r\n        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:400)\r\n        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:354)\r\n        at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:888)\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:553)\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:759)\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:395)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:327)\r\n        at org.springframework.boot.builder.SpringApplicationBuilder.run(SpringApplicationBuilder.java:137)\r\n        at org.springframework.cloud.bootstrap.BootstrapApplicationListener.bootstrapServiceContext(BootstrapApplicationListener.java:197)\r\n        at org.springframework.cloud.bootstrap.BootstrapApplicationListener.onApplicationEvent(BootstrapApplicationListener.java:104)\r\n        at org.springframework.cloud.bootstrap.BootstrapApplicationListener.onApplicationEvent(BootstrapApplicationListener.java:70)\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:127)\r\n        at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:74)\r\n        at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:54)\r\n        at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:358)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:317)\r\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:155)\r\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:135)\r\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:87)\r\n        at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:172)\r\n        at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:204)\r\n        at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:186)\r\n        at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\r\n        at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n        at org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\r\n        at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:251)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:96)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:78)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n        at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n        at org.jboss.threads.JBossThread.run(JBossThread.java:485)\r\n\r\n```\r\n\r\nFirst - I'm not sure, if this is a Cloud Config or a Eureka Client problem, but, because the Eureka client is registered after the Eureka server is up, I don't see a point, why the 30sec exception should come up. There is a CONFIGURATION instance available and a MYCLIENT instance, but the Cloud Config client doesn't check again. I've got a notion that DiscoveryClient.getInstances(serviceId) doesn't make a new request.\r\n\r\nI drilled down the Client code and ended on the Netflix Eureka client. So, I hope I'm right, this should be rechecked by the Eureka client.", "Ah, I forgot - in this situation - when I use a Feign client, this client doesn't work too, becaus it uses the same mechanism from the Eureka client. =||= Sorry - but that is still an issue to me. To run a Eureka service and a Eureka client in one Application Server is (maybe) not the preferred way of using them - but there are situation and options - and in that case I miss here some kind of ideas or other solutions. I'm sure, that this is a bug. \r\n\r\nThe CloudConfig client should always try to reach the discovery/config service, if it isn't successfull at the first pitch. There should be some kind of \"fault tolerance\". =||= The issue was closed only because it was stale, it you experience this on the latest version consider opening a new one with a minimal repro, based on the stack traces it looks more like a set up issue but hard to say. Also would be best to exclude Spring Cloud or any external frameworks from the minimal repro. =||= "], ["1104", "Use Webflux with embedded Eureka server", "LAcrazy", "BerMuc", "05/30/19, 11:11:58 PM", "We like the idea of using Eureka server for our product but the current implementation restricts us from using `Spring boot 2.x` with `webflux`, as per the conversation here:\r\nhttps://github.com/spring-cloud/spring-cloud-netflix/issues/3108\r\n\r\nIs there any timeline on adding support for `webflux`, in specific `RouterFunction`, to Eureka server?\r\n\r\nThanks in advance!\r", "NaN"], ["1105", "How to discover services deployed on kubernetes from eureka outside the kubernetes?", "Green Lei", "leiguorui", "05/30/19, 11:11:58 PM", "The UserService is deployed on kubernetes.\r\n\r\nThe OrderService is not deployed on kubernetes, and registered with Eureka.\r\n\r\nHow can OrderService loolup and access UserService through the Eureka??", "NaN"], ["1106", "\"gradle idea\"   command failed", "Jiang Rongbo", "jiangrongbo", "08/03/18, 03:20:14 AM", "An exception occurred applying plugin request [id: 'nebula.netflixoss', version: '3.6.0']\r\n> Failed to apply plugin [id 'nebula.netflixoss']\r\n   > Cannot set property 'defaultVersionStrategy' on null object\r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 1m 4s", "resolved by modify eureka/build.gradle file:\r\n\r\n_```\r\nbuildscript {\r\n    repositories {\r\n        jcenter()\r\n        mavenCentral()\r\n        maven{\r\n            url \"https://plugins.gradle.org/m2/\"\r\n        }\r\n    }\r\n\r\n    dependencies {\r\n        classpath \"com.netflix.nebula:gradle-extra-configurations-plugin:3.3.0\"\r\n        classpath 'com.netflix.nebula:gradle-netflixoss-project-plugin:5.1.1'\r\n    }\r\n}\r\n\r\nplugins {\r\n    id 'nebula.netflixoss' version '5.1.1'\r\n    id \"nebula.provided-base\" version \"3.3.0\"\r\n}\r\n......\r\n```_ =||= "], ["1107", "EUREKA-1087 Add config parameter eureka.myUrl", "Mikhail Gromov", "mgtriffid", "08/02/18, 10:18:52 PM", "...to specify URL Eureka should treat as its own (for cases when each Eureka node is behind LB and does not simply check replica URLs against own IP/host)", "Hm, on my local machine all tests pass well, is there any way to re-run Travis build? =||= Thanks @mgtriffid , I retriggered the travis build. =||= build passes. Thanks @mgtriffid  =||= Thanks for approval and merge @qiangdavidliu !\r\nMay I ask, when should we expect next release to happen? =||= @mgtriffid we should have a release out some time this week. =||= "], ["1108", "Add an interface for AwsAsgUtil", null, "troshko111", "08/06/18, 08:24:06 PM", "- Provide a replaceable abstraction over AWS ASG polling logic\r\n- Add a setting to disable AWS ASG polling", "NaN"], ["1109", "Stopping TimedSupervisorTasks", "Alberto C. R\u00edos", "Albertoimpl", "05/30/19, 11:11:58 PM", "Hi! We have a scenario where our Eureka server can be shut-down after some conditions. \r\nWe still would like to leave the applications talking to the server up and running but it's causing on each client application several:\r\n```\r\n   2018-07-20T11:38:22.35-0700 [APP/PROC/WEB/0] OUT 2018-07-20 18:38:22.349 ERROR 15 --- [tbeatExecutor-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_GREETER-MESSAGES/greeter-messages-cs.apps.mydomain.com:[GUID] - was unable to send heartbeat!\r\n   2018-07-20T11:38:22.35-0700 [APP/PROC/WEB/0] OUT com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n   2018-07-20T11:38:22.35-0700 [APP/PROC/WEB/0] OUT     at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-1.9.2.jar!/:1.9.2\r\n```\r\nWe were wondering if there is a way to disable the three `TimedSupervisorTask` or if is there any better way to stop retrying on the client side if the server is down.\r\n\r\nIf not, is there any recommendation you could give us to handle this situation?\r\n\r\nThanks!", "HI @AlbertoImpl \r\nHave you configured several eureka servers on your client side? I assume that your client configuration is as follows\r\n```\r\ndefaultZone = eurekaServer1, eurekaServer2, eurekaServer3\r\n```\r\nIn my mind if your shut-down `eurekaServer1` then client will sent heartbeat will failed, but client will auto choose next one(`eurekaServer2`)\r\n\r\nHope can help you \r\n\r\nThanks =||= Hi @holy12345 thanks for commenting.\r\nHowever, we are not running it with multiple servers. \r\nWe want to go from 1 working instance to 0 working instances avoiding the client apps to keep sending requests indefinitely when there are no working instances.\r\n\r\nThanks! =||= Hi @AlbertoImpl \r\n\r\nIn my mind there is no such mechanism, because the eureka client does not know whether the eureka server is down or the heartbeat fails due to network problems.\r\n\r\nYour thoughts?\r\n\r\nThanks =||= Hi @holy12345  thanks again.\r\n\r\nFor context:\r\nWe have a scenario where we have multiple client apps that intentionally can be connected to one eureka server that can be shut down.\r\nOnce that server is intentionally shut down, client apps keep sending the requests every couple of seconds and failing with the exception posted before.\r\n\r\nWhat about having a max-retry that defaults to 0 been keeping the same default retry-forever functionality and be able to configure that number for having a more fine-grained retry policy?\r\n\r\nWondering if that makes sense, and if it does, if it's the `DiscoveryClient` responsibility or if it should be a different handling in the `RetryableEurekaHttpClient`\r\n\r\nThanks\r\n =||= Hi @qiangdavidliu  : )\r\n\r\nCould you please give some suggestion? =||= Hi @AlbertoImpl @holy12345 from an architectural pov, eureka is designed so that eureka servers being down is considered a disaster scenario. Having clients that can potentially stop trying to re-register is not an expected part of eureka client/server interaction.\r\n\r\n@AlbertoImpl is your use case here purely driven by the logs generated? If so, they can be turned of via the necessary log4j log level configuration. =||= @qiangdavidliu  Thanks : ) =||= Hi @qiangdavidliu thanks for responding!\r\nIt isn't because of the logs.\r\nImagine the eureka-server is secured and it goes down. Now our client app has to go and authenticate once a while trying to reach nothing.\r\n\r\nHowever, if eureka is doing it so by design. I completely understand.\r\n\r\nThanks!\r\n =||= "], ["1110", "De-register application instance problem", null, "yangpancode", "05/30/19, 11:11:59 PM", "i use the Eureka REST operations to De-register application instance, De-register successfully \uff01 but in a few seconds, the Eureka client instance re-register soon. how to prent the client instance re-register. because some times we want to find the client instance problem, do not want restart the  client instance soon.\r\nuse DELETE /eureka/v2/apps/appID/instanceID REST operations.", "@yangpancode , even if you DELETE instance from Eureka via REST API, your instance still continues to send heartbeats, and when server receives heartbeat for instance it does not know about, server registers it. I'd suggest to set status OUT_OF_SERVICE instead DELETE, if you just want to stop routing traffic to problematic instance. =||= "], ["1111", "How do I handle exceptions in case of connection error  for the eureka client ?", null, "JangCool", "05/30/19, 11:11:59 PM", "I 'm using the eureka-client in the spring boot2.\r\nHowever, the eureka server is off and a connection error is output.\r\nI want to catch the error and do something else.\r\nHow do I handle exceptions in case of connection error  for the eureka client ?", "NaN"], ["1112", "Stats are not enabled for ASG cache", null, "brharrington", "05/30/19, 11:11:59 PM", "The ASG cache is not calling [recordStats](https://google.github.io/guava/releases/19.0/api/docs/com/google/common/cache/CacheBuilder.html#recordStats()) on the builder, so the stats metrics [getNumberofASGQueries](https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/aws/AwsAsgUtil.java#L356) and [getNumberofASGQueryFailures](https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/aws/AwsAsgUtil.java#L368) will always report 0.", "NaN"], ["1113", "ASG cache reloading is serial", null, "brharrington", "05/30/19, 11:11:59 PM", "The ThreadPoolExecutor for reloading the ASG cache is configured with a core size of 1 and max of 10, but since it uses an unbounded queue the executor will never grow beyond the core size. This appears to be unintentional ([pool definition](https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/aws/AwsAsgUtil.java#L93)).", "NaN"], ["1114", "Add possibility to register Eureka Server metrics to Spectator registry", "Mikhail Gromov", "mgtriffid", "08/17/18, 05:03:02 PM", "Hi, this adds possibility to register `EurekaMonitors` to some Spectator registry. Helps if Eureka is deployed not as Tomcat web app. Users may provide own registry and get metrics reported to Atlas, for example.\r\n\r\nHowever, if you think this is not enough and would be nice to add some Atlas configuration, so that even Tomcat web app could post metrics to Atlas, please let me know. However, I don't know how to pick proper `commonTags`, and we would need to provide own implementation of `AtlasConfig`, etc, etc. I bet if people are using Eureka and considering necessity of Atlas metrics, they already have some company-specific solutions for this, which can easily be applied with my PR.", "Thanks for the PR @mgtriffid ! @brharrington do you have any thoughts to this? =||= > Helps if Eureka is deployed not as Tomcat web app. Users may provide own registry and get metrics reported to Atlas, for example.\r\n\r\nA user can provide their own registry even if running as a Tomcat webapp, but they would probably need to pull it in as a library and build their own war file with additional config settings.\r\n\r\nAs a side note, you can also make Servo report into Atlas, either directly with:\r\n\r\nhttps://github.com/Netflix/servo/tree/master/servo-atlas\r\n\r\nRecent versions of Servo also have a SpectatorContext which can be used to have all servo monitors report in via a Spectator registry. This is what we are using internally now as we have to keep backwards compatibility for Servo instrumented apps for quite a while. =||= > Recent versions of Servo also have a SpectatorContext which can be used to have all servo monitors report in via a Spectator registry. This is what we are using internally now as we have to keep backwards compatibility for Servo instrumented apps for quite a while.\r\n\r\nWow, that's actually great, I think for our needs we may just increase version of Servo dependency to 0.12.25 and simply use `SpectatorContext`. Thanks for sharing this!\r\n\r\nGiven that you guys already have some solution for reporting this to Atlas (@brharrington mentioned duplication), and newer Servo provides a solution for this case, I think we can simply decline this PR - with `SpectatorContext` anybody can add Spectator and Atlas without any difficulties. =||= Thanks for that @mgtriffid . Closing the PR per the comment updates. =||= "], ["1115", "Eureka can not customize hostnameVerifier ", null, "aqier", "05/30/19, 11:11:59 PM", "See class **com.netflix.eureka.transport.JerseyReplicationClient** code\r\n\r\nEurekaJerseyClientBuilder clientBuilder = new EurekaJerseyClientBuilder()\r\n                    .withClientName(jerseyClientName)\r\n                    .withUserAgent(\"Java-EurekaClient-Replication\")\r\n                    .withEncoderWrapper(serverCodecs.getFullJsonCodec())\r\n                    .withDecoderWrapper(serverCodecs.getFullJsonCodec())\r\n                    .withConnectionTimeout(config.getPeerNodeConnectTimeoutMs())\r\n                    .withReadTimeout(config.getPeerNodeReadTimeoutMs())\r\n                    .withMaxConnectionsPerHost(config.getPeerNodeTotalConnectionsPerHost())\r\n                    .withMaxTotalConnections(config.getPeerNodeTotalConnections())\r\n                    .withConnectionIdleTimeout(config.getPeerNodeConnectionIdleTimeoutSeconds());\r\n\r\n            if (serviceUrl.startsWith(\"https://\") &&\r\n                    \"true\".equals(System.getProperty(\"com.netflix.eureka.shouldSSLConnectionsUseSystemSocketFactory\"))) {\r\n                clientBuilder.withSystemSSLConfiguration();\r\n            }\r\n            jerseyClient = clientBuilder.build();", "NaN"], ["1116", "[Question] Proper management of statuses - how to do it?", "Mikhail Gromov", "mgtriffid", "05/30/19, 11:11:59 PM", "Hi guys,\r\nIn our infrastructure we have a dedicated service which plays role of orchestrator. Currently, all our services register themselves as STARTING, and then orchestrator sets their status to UP using Eureka REST API at some point (when human asks to).\r\n\r\nThe problem is, when 3 heartbeats are missed for whatever reason, service is evicted from Eureka, then it is re-registered, but with status STARTING again. But we need them to be UP.\r\nMy question is, how statuses are supposed to be managed by design? I mean, it seems reasonable to have dedicated orchestrator which should keep knowledge about service statuses and allow to start or stop routing traffic to particular instance when needed. But clients lose their statuses if they are re-registered.\r\n\r\nMy assumption now that in such case we should make orchestrator talk to clients, and clients should set status of local in-memory `InstanceInfo` according to orchestrator's call. Same for metadata values. Am I right? If no, could you please suggest how can we organize status management in dedicated orchestrator?\r\n\r\nThanks!", "NaN"], ["1117", "[Question] Reading metadata from recently closed instance", null, "hashstax", "05/30/19, 11:12:00 PM", "I need to read metadata from recently closed instance (e.g. I'd like evictTask to trigger propagation of the metadata before instance is cancelled). Is there a good way to do so? ", "@hashstax, I'm not sure if this fit your needs, but as you probably know, clients fetch apps/delta to renew local registry, and in particular they return removed instances with `<actionType>DELETED</actionType>`. Try to experiment with this. =||= "], ["1118", "Get InstanceInfo with StatusChangeEvent", "Michael Pratt", "michael-pratt", "05/30/19, 11:12:00 PM", "Using Eureka Client, is it possible to get full instance information when a change occurs? Right now the `StatusChangeEvent` only sends current and previous instance status, but as far as I can tell there is no way to correlate that back to the actual instance that changed. I have to query the client again for my application and manually sort what has changed.\r\n\r\nWould it be possible to create a new listener interface that passes the old and new `InstanceInfo` objects whenever a status change occurs?", "@michael-pratt you are correct that the current implementation does not offer what you ask out of the box. We welcome community contributions if you would like to provide a PR for your functionality. =||= "], ["1119", "defaultZone separator support container space", "Kerwin Bryant", "kerwin612", "09/02/18, 07:22:32 PM", "NaN", "@ileler thank you for the PR. This looks fine, but would you mind adding some unit tests to verify both the existing and the future behaviour? Thanks. =||= @ileler thanks for the contrib! =||= It's my pleasure. =||= "], ["1120", "Some responses for /apps and /apps/delta contain inconsistent data", "Mikhail Gromov", "mgtriffid", "10/20/18, 10:33:56 PM", "**Environment:**\r\nEureka 1.9.4\r\n16 clients are talking to cluster of two Eureka nodes. 8 talk to one node, 8 to another.\r\nNetwork is stable and fast.\r\n**What I do:**\r\nUsing separate program, in endless loop I do the following:\r\n1) For each service set status to UP via REST API\r\n2) For each service set status to STARTING via REST API\r\n3) For each service set status to OUT_OF_SERVICE via REST API\r\n\r\n**What I expect:**\r\nClients fetch delta periodically, and every time they do, hash string they calculate after updateDelta matches actual body of response for delta request\r\n**What I see instead:**\r\nFrom time to time (quite rarely) all clients talking to one of nodes show in logs lines like this:\r\n`The Reconcile hashcodes do not match, client : STARTING_7_UP_11_, server : STARTING_5_UP_13_. Getting the full registry`\r\nI was able to intercept the response for apps/delta (not for the log line above, at different moment), and noticed that numbers in hash string in that response were actually wrong. Hash string said there were only 9 instances in OUT_OF_SERVICE, but rest of the response clearly returned 10 instances in OUT_OF_SERVICE.\r\n\r\nHave you guys ever noticed such weird behavior?\r\n\r\n**Thoughts:**\r\nWe noticed that AbstractInstanceRegistry uses RRWL to make apps/delta response as accurate as possible. But looks like write lock is [released](https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/registry/AbstractInstanceRegistry.java#L912) only when we return object of type Applications to ResponseCacheImpl, and that object holds references to mutable instances of InstanceInfo. Is it possible that mutation occurs after we return Applications to [method which actually calculates payload](https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/registry/ResponseCacheImpl.java#L429)?", "We consider invalid responses for apps/delta to be a bug, so would very appreciate some feedback :) =||= Hi @mgtriffid thanks for the issue and the experiment! The algorithm to compute the full/delta hash code is pretty ancient and I would not be surprised if it has some false signals. In out internal set up (i.e. in the Java EurekaClient) the client just falls back to a full fetch (refresh global state) when it sees a hash mismatch, and this is acceptable to us as we don't look at each individual fetch request, but rather whether the data is consistent over (a relatively short period of) time.\r\n\r\nRelated, we also run a side app internally that continuously calculates the eventual data consistency between the servers. =||= Hi @qiangdavidliu , thank you for your response!\r\nWe are also using Eureka's Java client, and we see that fallback to full fetch works just fine. However, the problem is, when Eureka's response contradicts itself (hash string doesn't match delta), then, because of Eureka response caching, many clients receive such response, and many clients fallback to full fetch, and that puts significant load on Eureka server. So I think we'll try to move serialization of /apps and /apps/delta under the write lock and see if it helps, and provide the PR.\r\n\r\nCould you kindly tell more about that side app, if that doesn't violate your NDA? :) =||= PRs are definitely welcome. Internally, we have partitioned our eureka usage to a read/write set that allows the read cluster to autoscale.\r\n\r\nAs for the side server that does data diffing, it is just a simple app that periodically gets data from each eureka write server and publish some metrics after comparing the data. We use it to alert on data inconsistencies. Nothing fancy. =||= @qiangdavidliu We have found out that when Eureka system gets into a \"registry inconsistency mode\" and many clients start executing full registry fetches, all these service instances exhibit high GC pauses for the specific time period, probably due to the downloading of full registries. This behaviour is definitely scary and we would like to know whether we operate at the limit of a Eureka system (at least one that is based on the open-sourced version) or not. We have around 1500 service instances registered in eureka now and the full registry fetch (along with the metadata we attach) is maybe 100MB of size. Do you feel that this may be a problematic setup? Do you have any information about scaling you can provide? =||= Hi @pparth we run eureka at much larger scales than 1500 instances (order of magnitude). There are a few things we do differently than the defaults in open source:\r\n1. we use G1GC which has given us much better GC characteristics compared to CMS\r\n2. we actually run an autoscalable readonly tier in front of our fixed host write cluster that take all the read traffic. =||= > 2\\. we actually run an autoscalable readonly tier in front of our fixed host write cluster that take all the read traffic.\r\n\r\n@qiangdavidliu  Can you provide more details on this? Is this using Eureka2? Which is introducing separate read/write clusters which has never progressed past a [release candidate](https://github.com/Netflix/eureka/tree/v2.0.0-rc.2) 3+ years ago.  =||= Hi @mattnelson the readonly server is not related to the Eureka2 work on the 2.x branch. That effort is abandon for various reasons, one being dependencies on projects that were never fully realised.\r\n\r\nWe do something pretty simple internally by basically taking the same eureka REST resources, put it in front of a guava cache, which in turn fronts a regular eureka client. This app then just registers with eureka as a regular app. (this app source code is not open source, but it is pretty straight forward).\r\n\r\nThe [eureka transport client config](https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/shared/transport/EurekaTransportConfig.java#L83) contains some configuration to support such a model.\r\n\r\nFor example, set the following configs:\r\n```\r\n# false == talk to readonly for query\r\neureka.transport.useBootstrapResolverForQuery=false\r\n\r\n# the vipAddress for the readonly cluster\r\neureka.transport.readClusterVip={some vip you've defined for the read only servers}\r\n\r\n# the vipAddress for the write cluster\r\neureka.transport.writeClusterVip={the vip address the write cluster register with}\r\n``` =||= @qiangdavidliu  Are you using Eureka to store service instance metadata? Do you think that this is a bad practise?\r\nIf the size of your registry is orders of magnitude larger, how do you handle full registry fetches? When such fetches happen, they must download tons of data, no?  =||= Submitted PR #1126 for this. Was able to easily reproduce inconsistent responses without this fix, totally cannot reproduce them with this fix. Please review. =||= Thanks @mgtriffid . We will take a look. =||= Closing this issue as the fix has been merged in. @mgtriffid will cut a release as soon as the current round of PRs are resolved. =||= "], ["1121", "Eureka status refresh problem", null, "rickywu", "10/20/18, 10:30:29 PM", "I enabled pause, restart, shutdown for endpoints \r\n\r\nWhen I post to pause for resume for service, the status refresh immediately in Eureka home page \r\nBut the status keep for seconds in /eureka/apps/app-id, \r\n\r\nstatus changed in home page:\r\n![image](https://user-images.githubusercontent.com/442398/45369887-882eb480-b619-11e8-8159-2e836f1edc0c.png)\r\n\r\nbut rest api result not changed and will be refreshed in about 5 seconds automatically\r\n![image](https://user-images.githubusercontent.com/442398/45369873-7a792f00-b619-11e8-84e3-af45a59113ad.png)\r\n\r\nHow can I keep them always as the same, I use SprintBoot 1.5.9", "@rickywu , Eureka keeps responses for /apps, /apps/delta and /apps/<app-id> cached for some time. In eventually consistent system like Eureka we can afford small delay of status change. Anyway, clients poll Eureka server periodically, so delivery of information about status changes is already not instant. =||= @mgtriffid  OK, so I have to wait for seconds till cache refreshed? =||= @rickywu @mgtriffid is correct. Information propagation through eureka is eventual consistent (up to 30s max latency by default). =||= "], ["1122", "Add User-Agent when requesting information from AWS Metadata service", "Will Bengtson", "willbengtson", "09/17/18, 10:50:15 PM", "Add User-Agent when requesting information from AWS Metadata service", "NaN"], ["1123", "on my platform,service run in docker and can register in Eureka but cant found it cause docker ip.", "iver3on", "iver3on", "05/30/19, 11:45:11 PM", "every service has its own domain name ,how can I register my service in Eureka by domain name \r\n\r\nor other solutions?\r\nHelp?", "eureka:\r\n  client:\r\n    serviceUrl:\r\n      defaultZone: http://xxxxxx.xxxxx.com/eureka/\r\n  instance:\r\n    hostname: http://xxxx.xxx..com\r\n    instance-id: http://xxxx.xxx.com\r\n\r\nnot working =||= using prefer-ip-address: false, then try again. =||= "], ["1124", "Jersey2: Additional Client Filters are not registered", "Sergey Krutsko", "krutsko", "09/24/18, 06:03:11 PM", "Additional Client filters registered at `clientBuilder` at https://github.com/Netflix/eureka/blob/master/eureka-client-jersey2/src/main/java/com/netflix/discovery/shared/transport/jersey2/Jersey2ApplicationClientFactory.java#L144 wiped out later by `clientConfig` at https://github.com/Netflix/eureka/blob/master/eureka-client-jersey2/src/main/java/com/netflix/discovery/shared/transport/jersey2/Jersey2ApplicationClientFactory.java#L171 \r\n\r\nI guess, we should register `additionalFilters` into `clientConfig`.", "PR https://github.com/Netflix/eureka/pull/1125 =||= "], ["1125", "ISSUE-1124 register additionalFilters into clientConfig", "Sergey Krutsko", "krutsko", "09/24/18, 03:18:28 PM", "NaN", "Thanks @krutsko for the PR. =||= "], ["1126", "EUREKA-1120 Move write.lock higher in stack...", "Mikhail Gromov", "mgtriffid", "10/14/18, 09:45:20 PM", " so that payload serialization is performed while locked", "Fixes #1120  =||= Maybe I'm interpreting this wrong, but are the locks inverted? Could that be the root cause of this issue?\r\n\r\nMutative(write) actions are acquiring a read lock\r\n\r\nhttps://github.com/Netflix/eureka/blob/ec2649e3a0a7eae5d3daabd2dfff7f8c2a91cc49/eureka-core/src/main/java/com/netflix/eureka/registry/AbstractInstanceRegistry.java#L191-L193\r\n\r\nhttps://github.com/Netflix/eureka/blob/ec2649e3a0a7eae5d3daabd2dfff7f8c2a91cc49/eureka-core/src/main/java/com/netflix/eureka/registry/AbstractInstanceRegistry.java#L455-L459\r\n\r\nRead operations are acquiring a write lock\r\n\r\nhttps://github.com/Netflix/eureka/blob/ec2649e3a0a7eae5d3daabd2dfff7f8c2a91cc49/eureka-core/src/main/java/com/netflix/eureka/registry/AbstractInstanceRegistry.java#L865-L871 =||= I don't think so, @mattnelson . RRWL's read lock can be entered by multiple threads, but if write lock is not locked, then other threads cannot enter even read lock. I think the intention here was to allow many threads modify different registered instances (statuses, metadata), but if response cache needs to be loaded - we take a pause and prepare response. But let's better wait for @qiangdavidliu  to respond to your concern. =||= @mgtriffid thanks for the PR. I checked some statistics and the data serialization (in extreme p99.9+ cases) can be pretty heavy, beyond even a second. With a write lock around this, this means instance registration and updates will be unable to proceed for that duration, which can be problematic.\r\n\r\nSeems like the root issue here is the mutable InstanceInfo objects to be serialized. It might be worth doing a quick experiment to see which is cheaper: locking around the serialization or ensuring copies of the data is returned by the `getApplicationDelta*` methods. =||= Thanks for pointing this out, I actually was concerned about performance too, for some reason thought serialization is quick. Good that you have some stats from production of your scale.\r\n[Naive benchmark](https://gist.github.com/mgtriffid/831b0154adaad305642c0881c4cd0639) shows that on average calling copying constructors is 11 times faster:\r\n```\r\nEncoding: 84819\r\nCopying constructors: 6561\r\nNow actual test:\r\nEncoding: 81785\r\nCopying constructors: 6803\r\nNow without metadata\r\nEncoding: 82318\r\nCopying constructors: 7140\r\n```\r\nWill update PR. =||= Moved locks to original place, added copying constructors. =||= Looks good, thanks @mgtriffid . Just want to verify with you that doing this is also able to solve your original issue? =||= @qiangdavidliu , well, at least with this fix I cannot reproduce that issue, while without this fix I can do that easily. =||= @qiangdavidliu Well, in our case, we consider frequent full registry fetches to be an issue. Especially in times when multiple clients execute full registry fetches at the same time, we have seen that we end up with resource starvation problems. What is your opinion on that? =||= @pparth we run with a readonly tier internally (same REST API -> cache -> EurekaClient ---> write servers), which due to its nature mitigated the original issue referenced in this PR.\r\n =||= The PR looks good, thank you @mgtriffid for the fix. =||= "], ["1127", "SP threshold is not updated correctly if >15% of client instances are not in UP status", "Mikhail Gromov", "mgtriffid", "05/30/19, 11:21:06 PM", "**Environment:**\r\nCluster of 2 Eureka nodes of freshest version\r\n```\r\neureka.enableSelfPreservation=true\r\neureka.expectedClientRenewalIntervalSeconds=15\r\neureka.renewalThresholdUpdateIntervalMs=240000 //default is 15 minutes, we just want to speed up testing\r\n```\r\n16 client instances talking to this cluster\r\n```\r\neureka.client.refresh.interval=15\r\n```\r\n**Experiment 1: confirming issue**\r\n15:00: 16 client instances in UP plus 2 Eurekas. Threshold is 61 = 18 * 4 * 0.85, 68 renews comes minutely, renews are above threshold, all is fine.\r\n15:02: 4 client instances were put into OUT_OF_SERVICE state via Eureka\u2019s REST API.\r\n15:03: Logs indicate that this method updating threshold was called, and they say threshold is still 61. This is expected, we did not delete anything, so threshold should be the same.\r\n15:04: We `kill -9` one of clients and wait for eviction to happen.\r\n15:06: Logs show that eviction happened.\r\n15:06: `/eureka/status` endpoint says that only 64 renews came last minute. Reasonable: we had 68 per minute, killed one service, now we have 64.\r\n15:07: Logs indicate that this method updating threshold was called, and they say threshold is still 61. Now this is becoming problematic. Common sense says: \u201cOnly 1 instance was evicted, 1 < 0.15 * 18, evictions happen from time to time, we should adjust self-preservation threshold now\u201d. But tricky condition of method `updateRenewalThreshold` comes into play:\r\nhttps://github.com/Netflix/eureka/blob/b2c5ea680099280f5c456c0e0d10970261dce67c/eureka-core/src/main/java/com/netflix/eureka/registry/PeerAwareInstanceRegistryImpl.java#L533-L537\r\nThis code now thinks that `count` == 13, not 17 (11 instances in UP plus two Eurekas). And previous value of `expectedNumberOfClientsSendingRenews` was 18, as in the beginning we had everything in `UP`. Condition evaluates to\r\n`((13) > (0.85 * 18)) == ((13) > 15.3) == false`\r\n, and threshold is not updated, and `expectedNumberOfClientsSendingRenews` is still 18.\r\n15:11: Started previously killed client again. Client registers, and on new registration Eureka increments `expectedNumberOfClientsSendingRenews`, it is now 19. It also recalculates threshold: `(int) (19 * 0.85 * 60 / 15) == 64`.\r\nSo, we returned the system to previous state, but threshold changed from 61 to 64. This is wrong, and it actually can lead to unwanted self-preservation if there is a significant number of instances in status different than `UP`.\r\n**Experiment 2: looking for fix**\r\nThis time we configure `eureka.shouldFilterOnlyUpInstances=false` on Eureka nodes.\r\n15:33: 16 client instances in `UP` plus 2 Eurekas. Threshold is 61 = 18 * 4 * 0.85, 68 renews comes minutely, renews are above threshold, all is fine\r\n15:34: 4 client instances were put into `OUT_OF_SERVICE` state via Eureka\u2019s REST API.\r\n15:37: Logs indicate that this method updating threshold was called, and they say threshold is still 61. This is expected, we did not delete anything, so threshold should be the same.\r\n15:43: We `kill -9` one of clients and wait for eviction to happen.\r\n15:44: Logs show that eviction happened.\r\n15:45: `/eureka/status` endpoint says that only 64 renews came last minute. Reasonable: we had 68 per minute, killed one service, now we have 64.\r\n15:45: Threshold updated, and it is 57, and this is what makes the difference! Now that check thought count was 17.\r\n`((17) > (0.85 * 18)) == ((17) > 15.3) == true`\r\n`expectedNumberOfClientsSendingRenews` becomes 17, threshold is updated to (int) (17 * 0.85 * 60 / 15) == 57.\r\n**Conclusion:**\r\nProbably, we should instruct users to configure `eureka.shouldFilterOnlyUpInstances=false` on Eureka server and add this configuration as default for eureka-server module which assembles .war file\r\n**Question:**\r\nBut why do we actually calculate registry size using Eureka client and not, well, registry size? It looks like I am missing something not obvious, but critical. Could you kindly clarify?\r\n\r\nThanks!", "HI @mgtriffid  \r\n\r\nThanks this question, I think this is question interesting. I notice this case you have two `eureka server`. one of `eureka server` means `eureka client` for other. we know `eureka client` can fetch instancesInfo from `eureka server` so this server fetch all instanceInfo from other and filter which status are not`UP` and cause the issue which you mention  (I think this is key point)\r\n\r\nthanks : )\r\n\r\n\r\n\r\n =||= @qiangdavidliu Any help here? =||= Sorry for the delayed response, and thanks for the detailed write up. I am also unsure to the reason why the calculation was done on the client rather than the registry, and found this PR from 2013 (!) that showed registry based calculations was possible at one point (https://github.com/Netflix/eureka/commit/4cd9c6e49c0151785bc0133c5e4b995d14191e96). I suspect that the registry is eventually not used due to the concurrent nature of accessing the server internal registry at scale.\r\n\r\nAs for your suggestion that we apply `eureka.shouldFilterOnlyUpInstances=false` as a default on the server side (and internally, we do run with that set to false too), that makes a lot of sense. =||= > **Environment:**\r\n> Cluster of 2 Eureka nodes of freshest version\r\n> \r\n> ```\r\n> eureka.enableSelfPreservation=true\r\n> eureka.expectedClientRenewalIntervalSeconds=15\r\n> eureka.renewalThresholdUpdateIntervalMs=240000 //default is 15 minutes, we just want to speed up testing\r\n> ```\r\n> 16 client instances talking to this cluster\r\n> \r\n> ```\r\n> eureka.client.refresh.interval=15\r\n> ```\r\n> **Experiment 1: confirming issue**\r\n> 15:00: 16 client instances in UP plus 2 Eurekas. Threshold is 61 = 18 * 4 * 0.85, 68 renews comes minutely, renews are above threshold, all is fine.\r\n> 15:02: 4 client instances were put into OUT_OF_SERVICE state via Eureka\u2019s REST API.\r\n> 15:03: Logs indicate that this method updating threshold was called, and they say threshold is still 61. This is expected, we did not delete anything, so threshold should be the same.\r\n> 15:04: We `kill -9` one of clients and wait for eviction to happen.\r\n> 15:06: Logs show that eviction happened.\r\n> 15:06: `/eureka/status` endpoint says that only 64 renews came last minute. Reasonable: we had 68 per minute, killed one service, now we have 64.\r\n> 15:07: Logs indicate that this method updating threshold was called, and they say threshold is still 61. Now this is becoming problematic. Common sense says: \u201cOnly 1 instance was evicted, 1 < 0.15 * 18, evictions happen from time to time, we should adjust self-preservation threshold now\u201d. But tricky condition of method `updateRenewalThreshold` comes into play:\r\n> [eureka/eureka-core/src/main/java/com/netflix/eureka/registry/PeerAwareInstanceRegistryImpl.java](https://github.com/Netflix/eureka/blob/b2c5ea680099280f5c456c0e0d10970261dce67c/eureka-core/src/main/java/com/netflix/eureka/registry/PeerAwareInstanceRegistryImpl.java#L533-L537)\r\n> \r\n> Lines 533 to 537 in [b2c5ea6](/Netflix/eureka/commit/b2c5ea680099280f5c456c0e0d10970261dce67c)\r\n> \r\n>  if ((count) > (serverConfig.getRenewalPercentThreshold() * expectedNumberOfClientsSendingRenews) \r\n>          || (!this.isSelfPreservationModeEnabled())) { \r\n>      this.expectedNumberOfClientsSendingRenews = count; \r\n>      updateRenewsPerMinThreshold(); \r\n>  } \r\n> \r\n> This code now thinks that `count` == 13, not 17 (11 instances in UP plus two Eurekas). And previous value of `expectedNumberOfClientsSendingRenews` was 18, as in the beginning we had everything in `UP`. Condition evaluates to\r\n> `((13) > (0.85 * 18)) == ((13) > 15.3) == false`\r\n> , and threshold is not updated, and `expectedNumberOfClientsSendingRenews` is still 18.\r\n> 15:11: Started previously killed client again. Client registers, and on new registration Eureka increments `expectedNumberOfClientsSendingRenews`, it is now 19. It also recalculates threshold: `(int) (19 * 0.85 * 60 / 15) == 64`.\r\n> So, we returned the system to previous state, but threshold changed from 61 to 64. This is wrong, and it actually can lead to unwanted self-preservation if there is a significant number of instances in status different than `UP`.\r\n> **Experiment 2: looking for fix**\r\n> This time we configure `eureka.shouldFilterOnlyUpInstances=false` on Eureka nodes.\r\n> 15:33: 16 client instances in `UP` plus 2 Eurekas. Threshold is 61 = 18 * 4 * 0.85, 68 renews comes minutely, renews are above threshold, all is fine\r\n> 15:34: 4 client instances were put into `OUT_OF_SERVICE` state via Eureka\u2019s REST API.\r\n> 15:37: Logs indicate that this method updating threshold was called, and they say threshold is still 61. This is expected, we did not delete anything, so threshold should be the same.\r\n> 15:43: We `kill -9` one of clients and wait for eviction to happen.\r\n> 15:44: Logs show that eviction happened.\r\n> 15:45: `/eureka/status` endpoint says that only 64 renews came last minute. Reasonable: we had 68 per minute, killed one service, now we have 64.\r\n> 15:45: Threshold updated, and it is 57, and this is what makes the difference! Now that check thought count was 17.\r\n> `((17) > (0.85 * 18)) == ((17) > 15.3) == true`\r\n> `expectedNumberOfClientsSendingRenews` becomes 17, threshold is updated to (int) (17 * 0.85 * 60 / 15) == 57.\r\n> **Conclusion:**\r\n> Probably, we should instruct users to configure `eureka.shouldFilterOnlyUpInstances=false` on Eureka server and add this configuration as default for eureka-server module which assembles .war file\r\n> **Question:**\r\n> But why do we actually calculate registry size using Eureka client and not, well, registry size? It looks like I am missing something not obvious, but critical. Could you kindly clarify?\r\n> Thanks!\r\n\r\nWhy is count 13 after killing a service in the Experiment 1? Should it be 17? Thank you =||= > > **Environment:**\r\n> > Cluster of 2 Eureka nodes of freshest version\r\n> > ```\r\n> > eureka.enableSelfPreservation=true\r\n> > eureka.expectedClientRenewalIntervalSeconds=15\r\n> > eureka.renewalThresholdUpdateIntervalMs=240000 //default is 15 minutes, we just want to speed up testing\r\n> > ```\r\n> > 16 client instances talking to this cluster\r\n> > ```\r\n> > eureka.client.refresh.interval=15\r\n> > ```\r\n> > **Experiment 1: confirming issue**\r\n> > 15:00: 16 client instances in UP plus 2 Eurekas. Threshold is 61 = 18 * 4 * 0.85, 68 renews comes minutely, renews are above threshold, all is fine.\r\n> > 15:02: 4 client instances were put into OUT_OF_SERVICE state via Eureka\u2019s REST API.\r\n> > 15:03: Logs indicate that this method updating threshold was called, and they say threshold is still 61. This is expected, we did not delete anything, so threshold should be the same.\r\n> > 15:04: We `kill -9` one of clients and wait for eviction to happen.\r\n> > 15:06: Logs show that eviction happened.\r\n> > 15:06: `/eureka/status` endpoint says that only 64 renews came last minute. Reasonable: we had 68 per minute, killed one service, now we have 64.\r\n> > 15:07: Logs indicate that this method updating threshold was called, and they say threshold is still 61. Now this is becoming problematic. Common sense says: \u201cOnly 1 instance was evicted, 1 < 0.15 * 18, evictions happen from time to time, we should adjust self-preservation threshold now\u201d. But tricky condition of method `updateRenewalThreshold` comes into play:\r\n> > [eureka/eureka-core/src/main/java/com/netflix/eureka/registry/PeerAwareInstanceRegistryImpl.java](https://github.com/Netflix/eureka/blob/b2c5ea680099280f5c456c0e0d10970261dce67c/eureka-core/src/main/java/com/netflix/eureka/registry/PeerAwareInstanceRegistryImpl.java#L533-L537)\r\n> > Lines 533 to 537 in [b2c5ea6](/Netflix/eureka/commit/b2c5ea680099280f5c456c0e0d10970261dce67c)\r\n> > if ((count) > (serverConfig.getRenewalPercentThreshold() * expectedNumberOfClientsSendingRenews)\r\n> > || (!this.isSelfPreservationModeEnabled())) {\r\n> > this.expectedNumberOfClientsSendingRenews = count;\r\n> > updateRenewsPerMinThreshold();\r\n> > }\r\n> > This code now thinks that `count` == 13, not 17 (11 instances in UP plus two Eurekas). And previous value of `expectedNumberOfClientsSendingRenews` was 18, as in the beginning we had everything in `UP`. Condition evaluates to\r\n> > `((13) > (0.85 * 18)) == ((13) > 15.3) == false`\r\n> > , and threshold is not updated, and `expectedNumberOfClientsSendingRenews` is still 18.\r\n> > 15:11: Started previously killed client again. Client registers, and on new registration Eureka increments `expectedNumberOfClientsSendingRenews`, it is now 19. It also recalculates threshold: `(int) (19 * 0.85 * 60 / 15) == 64`.\r\n> > So, we returned the system to previous state, but threshold changed from 61 to 64. This is wrong, and it actually can lead to unwanted self-preservation if there is a significant number of instances in status different than `UP`.\r\n> > **Experiment 2: looking for fix**\r\n> > This time we configure `eureka.shouldFilterOnlyUpInstances=false` on Eureka nodes.\r\n> > 15:33: 16 client instances in `UP` plus 2 Eurekas. Threshold is 61 = 18 * 4 * 0.85, 68 renews comes minutely, renews are above threshold, all is fine\r\n> > 15:34: 4 client instances were put into `OUT_OF_SERVICE` state via Eureka\u2019s REST API.\r\n> > 15:37: Logs indicate that this method updating threshold was called, and they say threshold is still 61. This is expected, we did not delete anything, so threshold should be the same.\r\n> > 15:43: We `kill -9` one of clients and wait for eviction to happen.\r\n> > 15:44: Logs show that eviction happened.\r\n> > 15:45: `/eureka/status` endpoint says that only 64 renews came last minute. Reasonable: we had 68 per minute, killed one service, now we have 64.\r\n> > 15:45: Threshold updated, and it is 57, and this is what makes the difference! Now that check thought count was 17.\r\n> > `((17) > (0.85 * 18)) == ((17) > 15.3) == true`\r\n> > `expectedNumberOfClientsSendingRenews` becomes 17, threshold is updated to (int) (17 * 0.85 * 60 / 15) == 57.\r\n> > **Conclusion:**\r\n> > Probably, we should instruct users to configure `eureka.shouldFilterOnlyUpInstances=false` on Eureka server and add this configuration as default for eureka-server module which assembles .war file\r\n> > **Question:**\r\n> > But why do we actually calculate registry size using Eureka client and not, well, registry size? It looks like I am missing something not obvious, but critical. Could you kindly clarify?\r\n> > Thanks!\r\n> \r\n> Why is count 13 after killing a service in the Experiment 1? Should it be 17? Thank you\r\n\r\nSorry, it should be four OUT_OF_SERVICE services plus one KILL service, right? =||= I assume #1140 should do it for now, please re-open if you disagree. =||= "], ["1128", "[DiscoveryClient-0] c.netflix.discovery.TimedSupervisorTask  : task supervisor timed out  java.util.concurrent.TimeoutException: null", null, "rajgoothy", "10/20/18, 10:32:37 PM", "-- spring boot version is 1.5.10 and cloud version is edgware-SR2\r\n\r\n2018-10-08 16:44:00.039  INFO [gpbs-api-gateway,,,] 11908 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration\r\n2018-10-08 16:47:42.782 ERROR [gpbs-api-gateway,,,] 11908 --- [DiscoveryClient-0] c.netflix.discovery.TimedSupervisorTask  : task supervisor timed out\r\n\r\njava.util.concurrent.TimeoutException: null\r\n\tat java.util.concurrent.FutureTask.get(FutureTask.java:205) [na:1.8.0]\r\n\tat com.netflix.discovery.TimedSupervisorTask.run(TimedSupervisorTask.java:63) ~[eureka-client-1.7.0.jar:1.7.0]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [na:1.8.0]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.8.0]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0]\r\n\tat java.lang.Thread.run(Thread.java:744) [na:1.8.0]", "can any body help us..\r\n =||= @rajgoothy , not enough information here. Could you provide all your eureka-related configuration parameters? =||= Ok.. will provide here ... =||= \r\n-- api gate way of application.yml\r\nspring:\r\n  application:\r\n    name: gpbs-api-gateway\r\n\r\nlogging:\r\n  level:\r\n    root: INFO\r\n    org:\r\n      springframework:\r\n       web: INFO\r\n      hibernate: INFO\r\n      apache: ERROR\r\n  path:  C:/gpbs_logs/\r\n  file: C:/gpbs_logs/gpbs-api-gateway.log    \r\n  \r\n#spring.cloud.config.fail-fast=true\r\nserver:\r\n  port: 8760\r\n  tomcat:\r\n    max-threads: 20\r\n\r\n    \r\neureka: \r\n  client: \r\n    register-with-eureka: true\r\n    fetch-registry: true\r\n    service-url: \r\n      defaultZone: http://127.0.0.1:9000/eureka\r\n      healthcheck: \r\n        enabled: true\r\n  instance:\r\n    leaseExpirationDurationInSeconds: 30000000\r\n    leaseRenewalIntervalInSeconds: 300000\r\n    preferIpAddress: true\r\n  #fetchRegistry: true\r\n\r\n==================\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.cloud.netflix.eureka.EnableEurekaClient;\r\nimport org.springframework.cloud.netflix.zuul.EnableZuulProxy;\r\nimport org.springframework.context.annotation.Bean;\r\n\r\nimport com.scb.gpbs.filter.GpbsLoggingFilter;\r\n\r\n@SpringBootApplication\r\n@EnableZuulProxy\r\n@EnableEurekaClient\r\npublic class ApiGatewayApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(GpbsApiGatewayApplication.class, args);\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic GpbsLoggingFilter simpleFilter() {\r\n\t    return new GpbsLoggingFilter();\r\n\t  }\r\n\r\n}\r\n\r\n=======\r\n\r\nMy Proxy interface: \r\n\r\nimport org.springframework.cloud.netflix.feign.FeignClient;\r\nimport org.springframework.cloud.netflix.ribbon.RibbonClient;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\n\r\nimport com.scb.gpbs.json.vo.ProductMapVO;\r\n\r\n@FeignClient(name=\"gpbs-api-gateway\")\r\n@RibbonClient(name=\"gpbs-rules-service\")\r\npublic interface GpbsRulesServiceProxy {\r\n\t\r\n\t@PostMapping(value = \"/gpbs-rules-service/gpbs/v1/product\",produces=\"application/json\",consumes=\"application/json\")\r\n\tpublic String  getProduct(@RequestBody ProductMapVO productMapVO);\r\n\t\t\r\n\t@PostMapping(value = \"/gpbs-rules-service/gpbs/v1/product2\",produces=\"application/json\",consumes=\"application/json\")\r\n\tpublic String  getProduct2(@RequestBody ProductMapVO productMapVO);\r\n\t\r\n\t@GetMapping(value = \"/gpbs-rules-service/test\")\r\n\tpublic String test();\r\n\t\r\n\t\r\n\t\t\r\n\r\n}\r\nzull MS pom.xml:\r\n==============\r\n\r\n\t<parent>\r\n\t\t<groupId>org.springframework.boot</groupId>\r\n\t\t<artifactId>spring-boot-starter-parent</artifactId>\r\n\t\t<version>1.5.10.RELEASE</version>\r\n\t\t<relativePath/> <!-- lookup parent from repository -->\r\n\t</parent>\r\n\r\n\t<properties>\r\n\t\t<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\r\n\t\t<project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\r\n\t\t<java.version>1.8</java.version>\r\n\t\t<spring-cloud.version>Edgware.SR2</spring-cloud.version>\r\n\t</properties>\r\n\r\n\t<dependencies>\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.springframework.boot</groupId>\r\n\t\t\t<artifactId>spring-boot-starter-actuator</artifactId>\r\n\t\t</dependency>\r\n\t<!-- \t<dependency>\r\n\t\t\t<groupId>org.springframework.boot</groupId>\r\n\t\t\t<artifactId>spring-boot-starter-jdbc</artifactId>\r\n\t\t</dependency> -->\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.springframework.cloud</groupId>\r\n\t\t\t<artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>\r\n\t\t</dependency>\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.springframework.cloud</groupId>\r\n\t\t\t<artifactId>spring-cloud-starter-netflix-zuul</artifactId>\r\n\t\t</dependency>\r\n\t\t<!-- <dependency>\r\n\t\t\t<groupId>org.springframework.cloud</groupId>\r\n\t\t\t<artifactId>spring-cloud-starter-oauth2</artifactId>\r\n\t\t</dependency>\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.springframework.cloud</groupId>\r\n\t\t\t<artifactId>spring-cloud-starter-security</artifactId>\r\n\t\t</dependency> -->\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.springframework.cloud</groupId>\r\n\t\t\t<artifactId>spring-cloud-starter-sleuth</artifactId>\r\n\t\t</dependency>\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.springframework.cloud</groupId>\r\n\t\t\t<artifactId>spring-cloud-starter-zipkin</artifactId>\r\n\t\t</dependency>\r\n\t\t<!-- <dependency>\r\n\t\t\t<groupId>org.springframework.session</groupId>\r\n\t\t\t<artifactId>spring-session-jdbc</artifactId>\r\n\t\t</dependency> -->\r\n\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.springframework.boot</groupId>\r\n\t\t\t<artifactId>spring-boot-starter-test</artifactId>\r\n\t\t\t<scope>test</scope>\r\n\t\t</dependency>\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.projectlombok</groupId>\r\n\t\t\t<artifactId>lombok</artifactId>\r\n\t\t\t<version>1.16.22</version>\r\n\t\t</dependency>\r\n\t</dependencies>\r\n\t\r\n\r\n\t<dependencyManagement>\r\n\t\t<dependencies>\r\n\t\t\t<dependency>\r\n\t\t\t\t<groupId>org.springframework.cloud</groupId>\r\n\t\t\t\t<artifactId>spring-cloud-dependencies</artifactId>\r\n\t\t\t\t<version>${spring-cloud.version}</version>\r\n\t\t\t\t<type>pom</type>\r\n\t\t\t\t<scope>import</scope>\r\n\t\t\t</dependency>\r\n\t\t</dependencies>\r\n\t</dependencyManagement>\r\n\r\n\t<build>\r\n\t\t<plugins>\r\n\t\t\t<plugin>\r\n\t\t\t\t<groupId>org.springframework.boot</groupId>\r\n\t\t\t\t<artifactId>spring-boot-maven-plugin</artifactId>\r\n\t\t\t</plugin>\r\n\t\t</plugins>\r\n\t</build>\r\n</project>\r\n =||= @mgtriffid,\r\n\r\nI have provided all the details . Please verify and suggest.\r\n\r\nI have provided a pre, post filter as component. =||= @rajgoothy , all I can suggest is to assure that your Eureka server is actually running on 127.0.0.1:9000. Please consider asking Spring Cloud developers, they may know more about your setup. =||= @mgtriffid , Thanks for the update and suggestion.. \r\n\r\nis any body able to verify this? =||= @rajgoothy , really, try to ask here https://github.com/spring-cloud/spring-cloud-netflix , people there will more likely be able to help you. This project is Eureka itself, and integration with Spring brings too many new variables, unknown to people here, to the equation. =||= Thanks @mgtriffid . @rajgoothy Spring Cloud Netflix would be the best place to ask Spring Cloud integration specific questions. As a general comment, issues to do with the TimedSupervisorTask tasks are typically caused by initialization issues (e.g. bad start up config etc) and not typically related to the actual TimedSupervisorTask itself (which are just periodic background tasks that the eureka-client executes). =||= "], ["1129", "Why was Eureka 2.0 discontinued?", "Alexey Surikov", "ksurent", "10/12/18, 11:20:29 AM", "Hi,\r\n\r\nthis is not a bug a report but a question. Having read [motivations for Eureka 2.0](https://github.com/Netflix/eureka/wiki/Eureka-2.0-Motivations) and [Eureka 2.0 architecture overview](https://github.com/Netflix/eureka/wiki/Eureka-2.0-Architecture-Overview), I started wondering why the work was discontinued. The ideas in the motivations document seem all reasonable and the architecture overview also makes sense.\r\n\r\nI'm wondering if someone from Netflix or someone who is familiar with the situation can shed some light on this? Did you find any flaws in the design or difficulties in implementing it? Your insight would be much appreciated.", "Hi @ksurent. The open source work on eureka 2.0 (as embodied by the 2.x branch) is discontinued. The rationale for this is variously due to dependencies on some parallel open source projects that never came to full fruition, and also the big bang nature of the project.\r\n\r\nThe majority of the motivations for eureka 2.0 is something that we (Netflix) still believe in, and have since realized internally. This is done in a much more evolutionary and incremental way, via variously:\r\n- a simple, auto-scalable REST readonly cluster with the same APIs to help with scale.\r\n- a simple, auto-scalable gRPC readonly cluster leveraging gRPC to provide streaming capabilities and better multi-language client support. =||= > and have since realized internally\r\n\r\nIs this via non open sourced updates? or is this via configuration mentioned to in https://github.com/Netflix/eureka/issues/1120#issuecomment-424957756 and introduced in #678 ?\r\n\r\n =||= Thanks @qiangdavidliu and @mattnelson! Your insight is appreciated.\r\n\r\nClosing the ticket because my curiosity has been satisfied. =||= @mattnelson the changes you referenced were indeed client side updates to help with client auto-discovery of the REST readonly cluster. The server side code for the read only servers (both REST and gRPC) are both internal at the moment unfortunately.  =||= @ksurent thank you for the information.\r\nJust curious if there exists any roadmap for near future regarding the Eureka 1.x.\r\nI notice that the project (Eureka 1.x) is roughly inactive recently. Is that the sign for a full stop of Eureka 1.x development, given that there is no plan on the realization of 2.0 version?  =||= "], ["1130", "Client not able to re-register with eureka server when eureka server restarted", null, "youtianhong", "10/23/18, 06:23:02 AM", "The issue always happen on our test environment, but can not reproduce on my local except one time.\r\n\r\nThe error below here:\r\n\r\n2018-10-11 10:45:57,198 [DiscoveryClient-HeartbeatExecutor-0] ERROR c.n.d.s.t.d.RedirectingEurekaHttpClient - Request execution error\r\ncom.sun.jersey.api.client.ClientHandlerException: A message body reader for Java class com.netflix.appinfo.InstanceInfo, and Java type class com.netflix.appinfo.InstanceInfo, and MIME media type text/html was not found\r\nat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:630)\r\nat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586)\r\nat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.sendHeartBeat(AbstractJerseyEurekaHttpClient.java:105)\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\nat com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73)\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\nat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118)\r\nat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79)\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\nat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:119)\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\nat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\nat com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:824)\r\nat com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1393)\r\nat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\nat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\nat java.lang.Thread.run(Thread.java:745)\r\n2018-10-11 10:45:57,199 [DiscoveryClient-HeartbeatExecutor-0] WARN c.n.d.s.t.d.RetryableEurekaHttpClient - Request execution failed with message: A message body reader for Java class com.netflix.appinfo.InstanceInfo, and Java type class com.netflix.appinfo.InstanceInfo, and MIME media type text/html was not found\r\n2018-10-11 10:45:57,199 [DiscoveryClient-HeartbeatExecutor-0] ERROR c.n.d.DiscoveryClient - DiscoveryClient_OSM-ADMIN/10.132.81.36:osm-admin:8082 - was unable to send heartbeat!\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\nat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111)\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\nat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\nat com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:824)\r\nat com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1393)\r\nat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\nat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\nat java.lang.Thread.run(Thread.java:745)\r\n\r\nI also saw this answer for https://github.com/Netflix/eureka/issues/914 \r\nbut it's not work for me.", "My issue had been fixed. The issue is caused by wrong nginx configuration of eureka url.\r\nOur nginx configuration will encapsulate 500,502 error as 404.\r\nIt works fine after removing this ngx config for eureka server url. =||= please show your wrong nginx configuration,  I met the same problem like you =||= "], ["1131", "React on Spot Instance interruption notifications", "Sergey Krutsko", "krutsko", "10/20/18, 10:28:49 PM", "If Spot Instance is marked for termination , then this termination info will be available in ec2 instance metadata.\r\nMore info at https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/spot-interruptions.html#spot-instance-termination-notices\r\n\r\nEureka Client should be able to check EC2 instance metadata and publish termination info to Eureka Client metadata. So, the interested parties could react accordinantly.\r\n\r", "PR #1132  =||= Closing in favour or PR. =||= @qiangdavidliu It will be great to have this released sooner than later. Thanks! =||= "], ["1132", "eureka-1131: handle spot instance termination", "Sergey Krutsko", "krutsko", "10/20/18, 10:09:07 PM", "NaN", "@qiangdavidliu thanks for looking into this. I have fixed all comments. =||= Thanks @krutsko  =||= "], ["1133", "Can I add extra fields to eureka dashboard?", null, "jishamenon2207", "11/08/19, 08:59:36 PM", "I understand I can add extra parameters as part of the metadataMap of instance for any eureka client. Is it possible for me to modify/ tweak the eureka dashboard so that it displays these extra parameters also on the dashboard.\r\n\r\nBasically is there any way I can edit the existing eureka dashboard to show some user defined variables for each of the eureka client I onboard?", "Hi @jishamenon2207 \r\n\r\nI think is issues has same request #1076 \r\nSo far there is no way can edit the eureka dashboard : ( but if you will you can submit a PR : )\r\n\r\nthanks\r\n\r\n\r\n =||= Thanks @holy12345. @jishamenon2207 we are happy to look at any PRs that can improve on the usability of eureka. =||= @qiangdavidliu @holy12345 : Would love to try it out. Do you have any guidance for me? \ud83d\ude04\r\ncould u please give me the github link for eureka-dashboard code? Thanks a zillion =||= @jishamenon2207 The eureka dashboard code is super old, you can find them here:\r\nhttps://github.com/Netflix/eureka/tree/master/eureka-resources/src/main/resources/jsp =||= "], ["1134", "Unavailable Replicas When Running in AWS Using DNS Replication", "Joseph Witthuhn", "JosephWitthuhnTR", "11/13/19, 06:10:47 PM", "We are running Eureka and having issues where all replicas are showing up in Eureka as unavailable replicas. Each server shows all three servers, so it successfully finds the others, but the replicas are showing as unavailable. Also, each server also shows itself as a replica (I'm not sure if that is normal).\r\n\r\nConfiguration:\r\n\r\n- Three EC2 instances. Each with an extra network interface attached.\r\n- The extra network interface is then referenced from our DNS records.\r\n- This allows us to take down an instance and replace it, and just attach the network interface to the new instance to allow our Eureka instances to maintain the same IP address.\r\n- For the sake of my examples below, let's say the EC2 instances are:\r\n\r\n| **AZ**         | **EC2 Instance** | **Extra Network Adapter** |\r\n|------------|--------------|-----------------------|\r\n| eu-west-1a | 10.1.1.1     | 10.1.1.2              |\r\n| eu-west-1b | 10.1.2.1     | 10.1.2.2              |\r\n| eu-west-1c | 10.1.3.1     | 10.1.3.2              |\r\n\r\nI believe the DNS record is working fine, since it is able to read the IP addresses of the other Eureka instances without issue.\r\n\r\nThe replics show up in \"unavailable-replicas\" on the Eureka page in this format:\r\n`http://10.1.1.2:8080/eureka/v2/,http://10.1.2.2:8080/eureka/v2/,http://10.1.3.2:8080/eureka/v2/,`\r\n(where those IP addresses are the correct IP addresses for the extra network interfaces that are referred do by our DNS records)\r\n\r\nIf I sign into one of the boxes, I am able to curl to these URLs, so I do not believe there is a network issue here. Also, application instances are successfully registering with Eureka,including all three instances of Eureka (as I'd expect, it shows them with the EC2 instance IPs of 10.1.1.1, 10.1.2.1, and 10.1.3.1).\r\n\r\nWe are running on 1.9.5, but also experienced the issue with a much older version, 1.3.1.\r\n\r\nLooking in the logs, we are seeing this output every sixty seconds:\r\n```\r\n2018-10-15 16:02:20,812 ERROR com.netflix.eureka.aws.EIPManager$EIPBindingTask:444 [Eureka-EIPBinder] [run] Could not bind to EIP\r\njava.lang.StringIndexOutOfBoundsException: String index out of range: -4\r\n        at java.lang.String.substring(String.java:1967)\r\n        at com.netflix.eureka.aws.EIPManager.getEIPsFromServiceUrls(EIPManager.java:360)\r\n        at com.netflix.eureka.aws.EIPManager.getEIPsForZoneFromDNS(EIPManager.java:394)\r\n        at com.netflix.eureka.aws.EIPManager.getCandidateEIPs(EIPManager.java:316)\r\n        at com.netflix.eureka.aws.EIPManager.isEIPBound(EIPManager.java:165)\r\n        at com.netflix.eureka.aws.EIPManager$EIPBindingTask.run(EIPManager.java:431)\r\n        at java.util.TimerThread.mainLoop(Timer.java:555)\r\n        at java.util.TimerThread.run(Timer.java:505)\r\n```\r\n(this is interesting because I don't believe we are even using EIP based configuration, right?)\r\n\r\nWe also see this every five minutes (with the correct DNS name):\r\n`2018-10-15 16:01:35,083 INFO  com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver:39 [AsyncResolver-bootstrap-executor-0] [getClusterEndpoints] Resolving eureka endpoints via DNS: txt.eu-west-1.eureka-qa.cloud.ourcompany.com`\r\n\r\nWhen we start our Eureka server, we are passing in system properties like this:\r\n`-Deureka.environment=qa -Deureka.datacenter=cloud -Deureka.shouldUseDns=true -Deureka.eurekaServer.domainName=eureka-qa.cloud.ourcompany.com -Deureka.eurekaServer.context=eureka/v2 -Deureka.enableSelfPreservation=false -Deureka.datacenter=cloud -Deureka.region=eu-west-1`\r\n\r\nAre we doing something wrong with our configuration? The StringIndexOutOfBoundsException issue almost looks like a bug with Eureka. We've spent a few days trying to solve this ourselves, but haven't made much progress.\r\n\r\nI'd appreciate any help anyone can give!\r\n\r\nThanks,\r\nJoseph Witthuhn", "Is the issue with lines 353-358 of EIPManager (https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/aws/EIPManager.java#L353)?\r\n\r\nThe comment indicates that the if check on line 358 is designed to prevent us from hitting that code if \"ec2-\" isn't in the hostname. But that isn't the effect of the code. If \"ec2-\" isn't in the hostname, then beginIndex will be set to \"3\" and we'll still go into the if check. As written, I think that if check is impossible not to hit. =||= Well, I see replica is displayed as \"unavailable\" if Eureka cannot find InstanceInfo for Eureka which has hostname same as configured. See https://github.com/Netflix/eureka/blob/master/eureka-core/src/main/java/com/netflix/eureka/util/StatusUtil.java#L68 . So in your situation each Eureka instance has \"EC2\" IP in registry, but DNS resolves into different IP, I think this explains such behavior.  =||= Is there a property that I could set that would fix that, and tell the Eureka client to register under the IP address of the network interface that I attached? Is that the behavior something that  `eureka.vipAddress` might set?\r\n\r\nAlso, I submit a pull request for the exception I was seeing. I'm not 100% sure if that resolves my particular issue, but I think it is a bug fix that is needed anyhow, right? This was #1135  =||= Can you supply the desired IP through `eureka-client/src/main/java/com/netflix/appinfo/providers/EurekaConfigBasedInstanceInfoProvider.java`? =||= "], ["1135", "eureka-1134: fix for StringIndexOutOfBoundsException", "Joseph Witthuhn", "JosephWitthuhnTR", "12/18/18, 05:14:17 AM", "It looks like a -1 was used when it should be comparing against 3. Based on line 353, beginIndex will always be larger than -1, but it will be 3 if there is no \"ec2-\" in the URL.\r\n\r\nThis is for issue #1134 which I reported earlier this morning.", "@jawitthuhn thanks for the PR, this does look like a bug. Given what the logic is trying express, it would make this code block much easier to read if we apply the below changes (and also add a test case):\r\n```\r\nfor (String cname : ec2Urls) {\r\n            int beginIndex = cname.indexOf(\"ec2-\");\r\n            if (-1 < beginIndex) {  // contains \"ec2-\"\r\n                int endIndex = cname.indexOf(regionPhrase + \".compute\");\r\n                String eipStr = cname.substring(beginIndex + 4, endIndex);\r\n                String eip = eipStr.replaceAll(\"\\\\-\", \".\");\r\n                returnedUrls.add(eip);\r\n            } else {  // do nothing\r\n              // Handle case where there are no cnames containing \"ec2-\"\r\n              // Reasons include:\r\n              //  Systems without public addresses - purely attached to corp lan via AWS Direct Connect             \r\n              //  Use of EC2 network adapters that are attached to an instance after startup\r\n            }\r\n}\r\n```\r\nWould you mind updating the PR? Thanks! =||= @qiangdavidliu - I believe I've made the requested changes. Could you check? =||= "], ["1136", "replicas still unavailable  bug,  server.content-path  is deprecated!!", "\u62d6\u978b\u83ab\u6b62\u6b65", "leonayx123", "05/30/19, 11:34:00 PM", "When I configured spring boot, I found it always failed.\r\n\r\nControl interface prompt \"unavailable-replicas \".\r\n\r\nWhen I read the source code, I found a bug here.\r\n\r\nThe org.springframework.cloud.net flix. Eureka. EurekaClientAutoConfiguration 125 lines.\r\n\r\n`\r\nString serverContextPath = this.env.getproperty (\" server.content-path \", \"/\");`\r\n\r\n\r\n**\"Server.content-path\"** is outdated code\r\n\r\n\r\nThe latest spring-boot context configuration is **\"server.servlet.content-path\"**\r\n\r\n\r\n\r\nThis configuration item affects the default address such as healthCheckUrl.\r\n\r\nHealthCheckUrl address will use context-path but is '/'  , \r\n\r\nso even if I configured 'server.servlet.content-path'.\r\n\r\neureka will still not be able to get client heartbeats.\r\n\r\nplease fix it ~ ", "This should probably be posted in spring-cloud project. Though I'm not sure.\r\nCould you please clarify, what exactly do you mean saying \"latest spring-boot context configuration\"? What is the origin of this parameter? Spring framework, Jetty, or servlet container spec? =||= > This should probably be posted in spring-cloud project. Though I'm not sure.\r\n> Could you please clarify, what exactly do you mean saying \"latest spring-boot context configuration\"? What is the origin of this parameter? Spring framework, Jetty, or servlet container spec?\r\n\r\n\r\nThank you for your reply.\r\nSorry, my English is not very good...\r\n\r\nLet me clarify it again\u3002\r\n\r\nI use the tomcat plug-in as the container of  eruka(dependence spring boot2)\uff0crun with IntelliJIDEA\u3002\r\n\r\n \"Server.content-path\" is no longer recommended~~\r\n\r\n```\r\norg.springframework.cloud.net flix. Eureka. EurekaClientAutoConfiguration 125 lines.\r\n\r\nString serverContextPath = this.env.getproperty (\" server.content-path \", \"/\");\r\n```\r\n\r\nthis line  is still used    outdated  \u201cserver.content-path\u201d   on this line of the class.\r\n\r\nHe will lead to the healthCheckUrl is not my actual address\r\n\r\nThat's what I mean~~~\r\n =||= Anyway, please try to ask in [Spring Cloud](https://github.com/spring-cloud/spring-cloud-netflix) project. Spring brings many new variables to the equation. This Github project is specifically for Eureka, and what you are using is some integration made by Spring Cloud developers. So, they very likely know more about your question. =||= > Anyway, please try to ask in [Spring Cloud](https://github.com/spring-cloud/spring-cloud-netflix) project. Spring brings many new variables to the equation. This Github project is specifically for Eureka, and what you are using is some integration made by Spring Cloud developers. So, they very likely know more about your question.\r\n\r\nOk, thanks for your patient reply =||= Thanks @mgtriffid  =||= "], ["1137", "Congestion errors during replication are not monitored by metrics", "Mikhail Gromov", "mgtriffid", "10/20/18, 10:24:42 PM", "**What I do:**\r\nIntroduce some networking or other issues which lead to massive congestion errors (HTTP 503 or timeouts).\r\n**What I expect to see:**\r\nThere is a counter for such errors\r\n**What I see instead:**\r\nThere is no such counter, only `numberOfSuccessfulExecutions`, `numberOfTransientError` and `numberOfPermanentError` are in place.\r", "NaN"], ["1138", "EUREKA-1137 Add counter for congestion issues", "Mikhail Gromov", "mgtriffid", "10/20/18, 10:24:42 PM", "Fixes #1137 ", "LGTM, thanks @mgtriffid . =||= "], ["1139", "Eureka is down still able to discover client service from zuul", null, "smartvishu", "10/20/18, 10:25:45 PM", "Facing issue with eureka, I am having 4 services zuul service, eureka server, client and producer service. Simulation steps:\r\n1) I up all services and find all are working fine\r\n2) Now I shutdown eureka and still found I am able to access all services through zuul host and port.\r\n3) Not able to understand how zuul is able to discover services without eureka got-down.\r\n\r\nRegards,\r\nVishnu ", "Hi Vishnu,\r\nThe thing is that Eureka Client keeps information about services in memory. And periodically it contacts Eureka Server to refresh that information. If your Eureka is unavailable, it simply fails to refresh info, and just uses previous. =||= Thanks @mgtriffid for providing the answer, that is exactly right. =||= "], ["1140", "update default server's eureka-client property", "David Liu", "qiangdavidliu", "10/26/18, 12:53:13 AM", "The eureka server internal eureka-client need to be configured to get instances for all statuses, not just UP. This is necessary to properly calculate the correct self preservation threshold. See issue https://github.com/Netflix/eureka/issues/1127 for a discussion.", "Hi @qiangdavidliu \r\nThis issues maybe make eureka server self preservation invalid, could you please include this PR in next release and do you have any plans for next release? thanks : ) =||= @holy12345 releasing one now. =||= "], ["1141", "How many Euraka-Server instances deployed in a cluster?What's the best number,2 or 3 or ....?", "andyzhaozhao", "andyzhaozhao", "10/23/18, 04:16:30 AM", "NaN", "NaN"], ["1142", "How many Euraka-Server instances deployed in a cluster?What's the best number,2 or 3 or ....?", "andyzhaozhao", "andyzhaozhao", "10/26/18, 12:55:22 AM", "like this: https://github.com/spring-cloud/spring-cloud-netflix/issues/3222", "HI @andyzhaozhao \r\n\r\nYou say you have 21 clients so in my experience you can start 3 eureka server(One Eureka server obviously not reasonable)\r\n\r\nFor you question whats the BEST number I think maybe no accurate answer.\r\n\r\n@qiangdavidliu  Any thoughts?  \r\n =||= Eureka does not do paxos style consensus, so there is no need to deploy at odd numbers. Having said that, I would recommend 3 or more servers as a general rule of thumb. The reason being eureka server deployments will often bring you under par (i.e. to 2 available when running 3). =||= "], ["1143", "How many Euraka-Server instances deployed in a cluster?What's the best number,2 or 3 or ....? help wanted", "andyzhaozhao", "andyzhaozhao", "10/23/18, 04:15:34 AM", " `help wanted`", "NaN"], ["1144", "How many Euraka-Server instances deployed in a cluster?What's the best number,2 or 3 or ....?", "andyzhaozhao", "andyzhaozhao", "10/23/18, 04:15:22 AM", "NaN", "NaN"], ["1145", "Shared heartbeat for proxied services", "Dave King", "kingo999", "05/30/19, 11:42:04 PM", "Hello,\r\nI have a scenario where I have eureka registered micro-services running behind a proxy.\r\nThe proxy is a true microservice , it is UP or DOWN.\r\nThe sub-services are virtual and created and registered when the proxy is started.\r\nThey should use/share the heartbeat of the proxy microservice. All UP or All DOWN.\r\n\r\nIs there a way (without custom code) for this scenario to be possible using the supplied Netflix classes/config options (sub-services share heartbeat of proxy) ?\r\nIs there a way to disable a heartbeat for a service permanently other than setting expiry periods so that a service is always up unless told otherwise ?", "If I understand your design correctly, you want something like:\r\n\r\n1) Have the Proxy heartbeat to Eureka only, do not register the sub-services with Eureka at all as they are not supposed to be independently addressable.\r\n\r\n2) In the proxy heartbeat logic, logically `AND` or logically `OR` the sub-service statuses depending on the desired behavior, determine the sub-service statuses by hitting their healthcheck endpoint periodically.\r\n\r\nIf you wish to just always report `UP` (this is even weaker than doing a logical `OR` of all sub-service healthcheck statuses), you can set up a no-op callback always saying it's `UP` (on the proxy) when registering with Eureka. You must heartbeat anyway even if you're always heartbeating as `UP` unconditionally otherwise your registration will be evicted.\r\n\r\nHope this makes sense. =||= "], ["1146", "[Enhancement] Add metrics to track number of instances per status", "Mikhail Gromov", "mgtriffid", "11/08/19, 09:00:02 PM", "**Problem:**\r\nWhile comparing values of metric localRegistrySize across different Eureka nodes in cluster allows to alert on registries inconsistency, there are problems this comparison cannot catch: when total registry size is the same, but counts of instances in each status are different across Eureka cluster.\r\n**Solution:**\r\nExpose count of instances for each status as metric to allow some alerting system to alert on inconsistencies.", "NaN"], ["1147", "EUREKA-1146 Expose metrics for counts of instances per status", "Mikhail Gromov", "mgtriffid", "09/10/19, 12:02:40 AM", "NaN", "Fixes #1146  =||= Hm, strange, on my machine all tests passed. Could somebody please restart? =||= good job =||= "], ["1148", "The question of eureka", null, "Shanchuanl", "05/30/19, 11:43:53 PM", "I have a problem when I import the source code of eureka ? Why? How to solve this problem\uff1f\r\norg.gradle.tooling.BuildException: Could not fetch model of type 'GradleBuild' using Gradle distribution 'https://services.gradle.org/distributions/gradle-2.10-bin.zip'.\r\n\tat org.gradle.tooling.internal.consumer.ExceptionTransformer.transform(ExceptionTransformer.java:51)\r\n\tat org.gradle.tooling.internal.consumer.ExceptionTransformer.transform(ExceptionTransformer.java:29)\r\n\tat org.gradle.tooling.internal.consumer.ResultHandlerAdapter.onFailure(ResultHandlerAdapter.java:41)\r\n\tat org.gradle.tooling.internal.consumer.async.DefaultAsyncConsumerActionExecutor$1$1.run(DefaultAsyncConsumerActionExecutor.java:57)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\r\n\tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n\tat org.gradle.tooling.internal.consumer.BlockingResultHandler.getResult(BlockingResultHandler.java:46)\r\n\tat org.gradle.tooling.internal.consumer.DefaultModelBuilder.get(DefaultModelBuilder.java:50)\r\n\tat sun.reflect.GeneratedMethodAccessor148.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.eclipse.buildship.core.workspace.internal.ConnectionAwareLauncherProxy.invokeRun(ConnectionAwareLauncherProxy.java:170)\r\n\tat org.eclipse.buildship.core.workspace.internal.ConnectionAwareLauncherProxy.invoke(ConnectionAwareLauncherProxy.java:160)\r\n\tat com.sun.proxy.$Proxy46.get(Unknown Source)\r\n\tat org.eclipse.buildship.core.workspace.internal.DefaultModelProvider$2.get(DefaultModelProvider.java:122)\r\n\tat org.eclipse.buildship.core.workspace.internal.DefaultModelProvider$3.call(DefaultModelProvider.java:142)\r\n\tat com.google.common.cache.LocalCache$LocalManualCache$1.load(LocalCache.java:4724)\r\n\tat com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3522)\r\n\tat com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2315)\r\n\tat com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2278)\r\n\tat com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2193)\r\n\tat com.google.common.cache.LocalCache.get(LocalCache.java:3932)\r\n\tat com.google.common.cache.LocalCache$LocalManualCache.get(LocalCache.java:4721)\r\n\tat org.eclipse.buildship.core.workspace.internal.DefaultModelProvider.getFromCache(DefaultModelProvider.java:153)\r\n\tat org.eclipse.buildship.core.workspace.internal.DefaultModelProvider.executeOperation(DefaultModelProvider.java:138)\r\n\tat org.eclipse.buildship.core.workspace.internal.DefaultModelProvider.executeModelBuilder(DefaultModelProvider.java:118)\r\n\tat org.eclipse.buildship.core.workspace.internal.DefaultModelProvider.fetchModel(DefaultModelProvider.java:69)\r\n\tat org.eclipse.buildship.core.workspace.internal.DefaultModelProvider.fetchGradleBuild(DefaultModelProvider.java:93)\r\n\tat org.eclipse.buildship.core.projectimport.ProjectPreviewJob.fetchGradleBuildStructure(ProjectPreviewJob.java:86)\r\n\tat org.eclipse.buildship.core.projectimport.ProjectPreviewJob.runToolingApiJobInWorkspace(ProjectPreviewJob.java:75)\r\n\tat org.eclipse.buildship.core.util.progress.ToolingApiWorkspaceJob$1.run(ToolingApiWorkspaceJob.java:79)\r\n\tat org.eclipse.buildship.core.util.progress.ToolingApiInvoker.invoke(ToolingApiInvoker.java:62)\r\n\tat org.eclipse.buildship.core.util.progress.ToolingApiWorkspaceJob.runInWorkspace(ToolingApiWorkspaceJob.java:76)\r\n\tat org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:39)\r\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)\r\nCaused by: org.gradle.internal.exceptions.LocationAwareException: Build file '/Users/shan/Desktop/code/gupao/code/eureka-master/build.gradle' line: 10\r\nAn exception occurred applying plugin request [id: 'nebula.netflixoss', version: '3.6.0']\r\n\tat org.gradle.plugin.use.internal.DefaultPluginRequestApplicator.applyPlugin(DefaultPluginRequestApplicator.java:181)\r\n\tat org.gradle.plugin.use.internal.DefaultPluginRequestApplicator.applyPlugins(DefaultPluginRequestApplicator.java:130)\r\n\tat org.gradle.configuration.DefaultScriptPluginFactory$ScriptPluginImpl.apply(DefaultScriptPluginFactory.java:126)\r\n\tat org.gradle.configuration.project.BuildScriptProcessor.execute(BuildScriptProcessor.java:38)\r\n\tat org.gradle.configuration.project.BuildScriptProcessor.execute(BuildScriptProcessor.java:25)\r\n\tat org.gradle.configuration.project.ConfigureActionsProjectEvaluator.evaluate(ConfigureActionsProjectEvaluator.java:34)\r\n\tat org.gradle.configuration.project.LifecycleProjectEvaluator.evaluate(LifecycleProjectEvaluator.java:55)\r\n\tat org.gradle.api.internal.project.AbstractProject.evaluate(AbstractProject.java:510)\r\n\tat org.gradle.api.internal.project.AbstractProject.evaluate(AbstractProject.java:90)\r\n\tat org.gradle.execution.TaskPathProjectEvaluator.configureHierarchy(TaskPathProjectEvaluator.java:42)\r\n\tat org.gradle.configuration.DefaultBuildConfigurer.configure(DefaultBuildConfigurer.java:35)\r\n\tat org.gradle.initialization.DefaultGradleLauncher$2.run(DefaultGradleLauncher.java:125)\r\n\tat org.gradle.internal.Factories$1.create(Factories.java:22)\r\n\tat org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\r\n\tat org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:52)\r\n\tat org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:122)\r\n\tat org.gradle.initialization.DefaultGradleLauncher.access$200(DefaultGradleLauncher.java:32)\r\n\tat org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:99)\r\n\tat org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:93)\r\n\tat org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\r\n\tat org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:62)\r\n\tat org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:93)\r\n\tat org.gradle.initialization.DefaultGradleLauncher.getBuildAnalysis(DefaultGradleLauncher.java:87)\r\n\tat org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.configure(InProcessBuildActionExecuter.java:102)\r\n\tat org.gradle.tooling.internal.provider.runner.BuildModelActionRunner.run(BuildModelActionRunner.java:48)\r\n\tat org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\r\n\tat org.gradle.tooling.internal.provider.runner.SubscribableBuildActionRunner.run(SubscribableBuildActionRunner.java:58)\r\n\tat org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\r\n\tat org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:43)\r\n\tat org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:28)\r\n\tat org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:78)\r\n\tat org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:48)\r\n\tat org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:52)\r\n\tat org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:37)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\r\n\tat org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\r\n\tat org.gradle.util.Swapper.swap(Swapper.java:38)\r\n\tat org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.health.DaemonHealthTracker.execute(DaemonHealthTracker.java:47)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:66)\r\n\tat org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:72)\r\n\tat org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.health.HintGCAfterBuild.execute(HintGCAfterBuild.java:41)\r\n\tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n\tat org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\r\n\tat org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:246)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:54)\r\n\tat org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:40)\r\nCaused by: org.gradle.api.plugins.InvalidPluginException: An exception occurred applying plugin request [id: 'nebula.netflixoss', version: '3.6.0']\r\n\tat org.gradle.plugin.use.internal.DefaultPluginRequestApplicator.applyPlugin(DefaultPluginRequestApplicator.java:178)\r\n\t... 59 more\r\nCaused by: org.gradle.api.internal.plugins.PluginApplicationException: Failed to apply plugin [id 'nebula.netflixoss']\r\n\tat org.gradle.api.internal.plugins.DefaultPluginManager.doApply(DefaultPluginManager.java:160)\r\n\tat org.gradle.api.internal.plugins.DefaultPluginManager.apply(DefaultPluginManager.java:112)\r\n\tat org.gradle.plugin.use.internal.DefaultPluginRequestApplicator$5.run(DefaultPluginRequestApplicator.java:132)\r\n\tat org.gradle.plugin.use.internal.DefaultPluginRequestApplicator.applyPlugin(DefaultPluginRequestApplicator.java:166)\r\n\t... 59 more\r\nCaused by: java.lang.NullPointerException: Cannot set property 'defaultVersionStrategy' on null object\r\n\tat nebula.plugin.netflixossproject.NetflixOssProjectPlugin$_apply_closure1.doCall(NetflixOssProjectPlugin.groovy:55)\r\n\tat nebula.plugin.netflixossproject.NetflixOssProjectPlugin.apply(NetflixOssProjectPlugin.groovy:54)\r\n\tat nebula.plugin.netflixossproject.NetflixOssProjectPlugin.apply(NetflixOssProjectPlugin.groovy)\r\n\tat org.gradle.api.internal.plugins.ImperativeOnlyPluginApplicator.applyImperative(ImperativeOnlyPluginApplicator.java:35)\r\n\tat org.gradle.api.internal.plugins.RuleBasedPluginApplicator.applyImperative(RuleBasedPluginApplicator.java:44)\r\n\tat org.gradle.api.internal.plugins.DefaultPluginManager.doApply(DefaultPluginManager.java:144)\r\n\t... 62 more\r\n\r", "NaN"], ["1149", "ServiceUrlRandomizer based on hostname may lead to uneven distribution of clients", "Mikhail Gromov", "mgtriffid", "05/31/19, 08:27:10 PM", "Back in 2013 (here 3767d56efbabc8cf5e26fc442c7b008c841bbf19) randomizer for list of available Eureka nodes was introduced. And in this implementation reordering service URLs in fact depends on host name.\r\nThis implementation is still the only one present in Eureka client. However, if number of services per host is big, but number of hosts is not, it leads to uneven distribution of load on Eureka. For example, if there are some big hosts running numerous Docker containers.\r\n\r\nHence, 3 questions:\r\n1) Why does this implementation depends on host name, why not just use random seed calculated once?\r\n2) If reason is hard to find since the implementation is 5yo, would you mind if we support random seed?\r\n3) And if you don't mind that we support random seed, do you want us to leave hostname-dependent implementation as default one and add config parameter to enable random-based, or we may just replace hostname-dependent one with random-based?\r\n\r\nThanks!", "Any comment here guys? =||= @mgtriffid From your description it sounds like you need a different randomization mechanisms for clients to find, fetch or register with eureka nodes.  Or do you need different randomization for eureka nodes to find each other?  Or both?  The PR you submitted only modified the behavior for inter node communication of the eureka cluster and has no effect on client side randomization.  That change would need to be wired into ZoneAffinityClusterResolver.   =||= @elandau , we need different randomization for clients to choose Eureka nodes. And actually with my changes if I do\r\n```java\r\n        ResolverUtils.setRandomizer(new Randomizer() {\r\n            private final int seed = new Random().nextInt();\r\n            @Override\r\n            public void randomize(List randomList) {\r\n                if (randomList.size() < 2) {\r\n                    return;\r\n                }\r\n                Random random = new Random(seed);\r\n                int last = randomList.size() - 1;\r\n                for (int i = 0; i < last; i++) {\r\n                    int pos = random.nextInt(randomList.size() - i);\r\n                    if (pos != i) {\r\n                        Collections.swap(randomList, i, pos);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n```\r\nsomewhere before Eureka Guice module is configured, this does the trick for me: seed is different every time, but order of preference remains the same. This implementation of `Randomizer` just uses random number instead of local IP hashcode.\r\n\r\n> That change would need to be wired into ZoneAffinityClusterResolver.\r\n\r\nAs you can see, `ZoneAffinityClusterResovler` just calls `ResolverUtils.randomize`, so logic is actually wired into there.\r\n\r\nAm I missing something else? =||= Sorry, you are correct.  Not sure why I wasn't making that connection. =||= Anything new about this guys? Are we ok to proceed with the PRs we submitted?  =||= "], ["1150", "how long is the eureka registration time lag?", "yugj", "yugj", "11/02/18, 02:53:55 PM", "\r\nHi\uff0c**i want to  reduce eureka  registration state synchronization time**,i knew eureka client/server ribbon has local cache for eureka registration info,i try to config some related configuration, like this\r\n\r\n**Eureka Server**\r\n\r\n```yaml\r\nspring:\r\n  application:\r\n    name: eureka\r\nserver:\r\n  port: 9000\r\neureka:\r\n  environment: yugj-test\r\n  client:\r\n    register-with-eureka: false\r\n    fetch-registry: false\r\n    serviceUrl:\r\n      defaultZone: http://localhost:9000/eureka/\r\n  instance:\r\n    prefer-ip-address: true\r\n    instance-id: ${spring.cloud.client.ipAddress}:${server.port}\r\n  server:\r\n    enable-self-preservation: false #default true\r\n    eviction-interval-timer-in-ms: 10000 #default 60000\r\n    response-cache-update-interval-ms: 3000 #default 30000\r\n    use-read-only-response-cache: false\r\nendpoints:\r\n  shutdown:\r\n    enabled: true\r\n    sensitive: false\r\n```\r\n\r\n**Eureka Client A( ribbon and feign as http client)**\r\n\r\n```yaml\r\nserver:\r\n  port: 9010\r\n\r\nspring:\r\n  application:\r\n    name: sv-ribbon\r\nribbon:\r\n  MaxConnectionsPerHost: 1000\r\n  MaxTotalConnections: 3000\r\n  ReadTimeout: 10000\r\n  ConnectTimeout: 2000\r\n  MaxAutoRetries: 0\r\n  MaxAutoRetriesNextServer: 0\r\n  ServerListRefreshInterval: 1000\r\n  eureka:\r\n    enabled: true\r\neureka:\r\n  client:\r\n    serviceUrl:\r\n      defaultZone: http://localhost:9000/eureka/\r\n  healthcheck:\r\n     enabled: true\r\n  instance:\r\n    lease-renewal-interval-in-seconds: 5 \r\n    lease-expiration-duration-in-seconds: 20 \r\n    registry-fetch-interval-seconds: 5 \r\n    metadata-map:\r\n      cluster: main\r\n    prefer-ip-address: true\r\n    instance-id: ${spring.cloud.client.ipAddress}:${server.port}\r\n```\r\n\r\n**Eureka client B(privide some rest api) **\r\n\r\n```yaml\r\nserver:\r\n  port: 9006\r\n\r\nspring:\r\n  profiles:\r\n    active: @profile.id@\r\n  application:\r\n    name: rest-server\r\n\r\neureka:\r\n  client:\r\n    serviceUrl:\r\n      defaultZone: http://localhost:9000/eureka/\r\n  healthcheck:\r\n     enabled: true\r\n  instance:\r\n    lease-renewal-interval-in-seconds: 5\r\n    lease-expiration-duration-in-seconds: 15\r\n    registry-fetch-interval-seconds: 5\r\n    metadata-map:\r\n      cluster: main\r\n    prefer-ip-address: true\r\n    instance-id: ${spring.cloud.client.ipAddress}:${server.port}\r\nmanagement:\r\n  security:\r\n    enabled: false\r\nlog:\r\n  home: /data/logs/${spring.profiles.active}\r\n```\r\n\r\n\r\n\r\n**question:**\r\n\r\ni turn off eureka server read only cache: **eureka.server.use-read-only-response-cache: false**\r\n\r\ni lowering eureka client registry fetch interval:**eureka.instance.registry-fetch-interval-seconds: 5**\r\n\r\ni lowering ribbon server list refresh time:**ribbon.ServerListRefreshInterval: 5000**\r\n\r\n\r\n\r\ni think it should be less 10 seconds that client a can get the latest registration info;\r\n\r\nbut when i execute: curl -i -X PUT http://localhost:9000/eureka/apps/rest-server/192.168.1.138:9006/status?value=OUT_OF_SERVICE\r\n\r\nps\uff1arest-server is client B\r\n\r\nclient A not alway synchronize client B registration info within 10 seconds\uff1bsometimes up to 30 seconds\r\n\r\n(i continued send request to client A ,client send request to client B via ribbon and feigin\r\n\r\nwhen i set client B OUT_OF_SERVICE, count how long client A failed to get response)\r\n\r\n\r\n\r\nis these some configuration i missed?  \r\n\r\nthank you !", "Wow, quite a lot of libraries involved here :) It may be Eureka who behaves not like you expect, it may be Ribbon.\r\nFirst, could you please isolate the problem?\r\nYou can use Eureka REST API to get registry directly from Eureka and check how soon does your instance in fact change status. If Eureka consistently returns you fresh information within 10 seconds, then it's wrong place to dig. In such case I'd suggest you to post your question in Ribbon project, or maybe even Spring Cloud. =||= > Wow, quite a lot of libraries involved here :) It may be Eureka who behaves not like you expect, it may be Ribbon.\r\n> First, could you please isolate the problem?\r\n> You can use Eureka REST API to get registry directly from Eureka and check how soon does your instance in fact change status. If Eureka consistently returns you fresh information within 10 seconds, then it's wrong place to dig. In such case I'd suggest you to post your question in Ribbon project, or maybe even Spring Cloud.\r\n\r\nthx, eureka rest api get registry immediately, i dig wrong place =||= although this issue is closed, below parameter is missed:\r\n\r\n```\r\nribbon.NFLoadBalancerPingInterval: 5  # default 30s\r\n``` =||= "], ["1151", "EUREKA-1149 Allow custom randomizer", "Mikhail Gromov", "mgtriffid", "04/17/19, 11:51:45 AM", " so that services on same host could talk to different Eureka peers", "One of possible fixes for #1149 . =||= Declining in favor of #1194. =||= "], ["1152", "Improved logging", null, "elandau", "11/12/18, 05:52:41 PM", "- Improve logging by linking cause to WebApplicationException\r\n- Add attempt counter to TimeSupervisorTask to help identify situations where the supervisor has stalled", "ship it! =||= "], ["1153", "Tweak Staleness metrics", null, "elandau", "11/14/18, 08:46:59 PM", "Tweak the staleness guages to return 0 for when the client is shut down or when refreshes are not enabled.  Otherwise the metric can be misleading by incorrectly making it appear that refreshes are not working.", "NaN"], ["1154", "[Bug] If instance is not found when trying to update metadata via REST API, server error is thrown", "Mikhail Gromov", "mgtriffid", "12/17/18, 07:35:52 AM", "It seems that Eureka server should return 404 in such case. Just like it does if instance is not found when trying to update status or DELETE instance from registry.", "Related PR is merged, so closing this. =||= "], ["1155", "EUREKA-1154 Return 404 if instance is not found when updating metadata", "Mikhail Gromov", "mgtriffid", "11/14/18, 09:54:58 PM", "NaN", "Fixes #1154. =||= "], ["1156", "Fix-1154", "saga", "holy12345", "11/14/18, 07:17:19 PM", "Change response code when instance not found we return 404 not 500\r\n\r\nPlease see https://github.com/Netflix/eureka/issues/1154\r\n\r\nThanks", "Duplicates #1155. =||= "], ["1157", "Eureka Client doesn't respect DNS server change at runtime", "Sergey Krutsko", "krutsko", "12/18/18, 03:31:24 PM", "Eureka Client doesn't respect DNS server change at runtime.\r\n\r\nE.g. try to adjust DNS server at `/etc/resolv.conf` file , but Eureka Client keep communicate with _old_ address.\r\n\r\nThe reason is that Eureka Client initializes [InitialDirContext](https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/endpoint/DnsResolver.java#L50) once and keep it in static variable , so it never re-read resolv.conf.\r\n\r\nI didn't spent much time to write a proper unit test for this (let me know if it needed), but here the code which could help to check this with DnsResolver.\r\n\r\n```\r\nScheduledExecutorService executorService = Executors.newScheduledThreadPool(1);\r\n\r\n        executorService.scheduleAtFixedRate(\r\n                () -> {\r\n                    logger.info(\"running dns checker\");\r\n\r\n                    Hashtable env = new Hashtable();\r\n                    env.put(Context.INITIAL_CONTEXT_FACTORY, \"com.sun.jndi.dns.DnsContextFactory\");\r\n                    DirContext ictx = null;\r\n                    try {\r\n                        ictx = new InitialDirContext(env);\r\n                        String dnsServers = (String) ictx.getEnvironment().get(\"java.naming.provider.url\");\r\n\r\n                        logger.info(\"DNS Servers: \" + dnsServers );\r\n                    } catch (NamingException e) {\r\n\r\n                    }\r\n\r\n                    try {\r\n                        String dnsServers = (String) dirContext.getEnvironment().get(\"java.naming.provider.url\");\r\n\r\n                        logger.info(\"DNS Servers static : \" + dnsServers );\r\n                    } catch (NamingException e) {\r\n\r\n                    }\r\n                },\r\n                10,\r\n                10,\r\n                TimeUnit.SECONDS\r\n        );\r\n```\r\n\r", "Shouldn't we open an issue first, linked to this PR? =||= @pparth  I guess it doesn't matter, but here it's https://github.com/Netflix/eureka/issues/1158 =||= Can someone check this PR please? =||= Can someone take a look at the PR, and re-run the tests (they all pass on my local machine) ? =||= "], ["1158", "Eureka Client doesn't respect DNS server change at runtime", "Sergey Krutsko", "krutsko", "05/30/19, 11:46:53 PM", "More details and PR is here https://github.com/Netflix/eureka/pull/1157", "who could take a look at the PR?\r\nThanks =||= Can someone take a look and merge this PR please? It is rather straight forward.  =||= Thanks for the report and the PR! =||= "], ["1159", "Eureka REST operation CORS(Cross-origin resource sharing)", "xcbeyond", "xcbeyond", "11/30/18, 04:55:23 PM", "When other systems call the Eureka Rest api\uff0cit will Cross-domain access problem\u3002Is there any good way\uff0cexcept the modified Eureka Rest api interface.", " @xcbeyond i met, too. but I thought it was not necessary that in a production environment, you don't have to call the rest api directly. you can introduced zuul  or nginx , seems Eureka is not supposed to be exposed to the outside =||= Most servlet containers have CORS filters you can use (see for example [Tomcat](https://tomcat.apache.org/tomcat-9.0-doc/config/filter.html#CORS_Filter) and [Jetty](https://www.eclipse.org/jetty/documentation/9.4.x/cross-origin-filter.html) filters). So if you need that functionality you should be able to enable it. =||= @halower @brharrington thank you.I rewrite rest api to call the rest api directly.([springCloudEureka-rest](https://github.com/xcbeyond/springCloudLearning/tree/master/springCloudEureka-rest)) =||= Insert this in your main class:\r\n-------------------------------\r\n\r\n\tpublic @Bean FilterRegistrationBean<?> corsFilter() {\r\n\t\tUrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n\t\tCorsConfiguration config = new CorsConfiguration();\r\n\t\tconfig.setAllowCredentials(true);\r\n\t\tconfig.addAllowedOrigin(\"http://localhost:4200\");\r\n\t\tconfig.addAllowedMethod(\"*\");\r\n\t\tconfig.addAllowedHeader(\"Accept\");\r\n\t\tsource.registerCorsConfiguration(\"/**\", config);\r\n\t\tFilterRegistrationBean<Filter> bean = new FilterRegistrationBean<Filter>(new CorsFilter(source));\r\n\t\tbean.setOrder(Ordered.HIGHEST_PRECEDENCE);\r\n\t\treturn bean;\r\n\t}\r\n\r\nFull example: https://github.com/EffNox/spring_eureka-rest-operations-angular =||= "], ["1160", "eureka master v1.9.8 build failed error on linux Centos 6", "Yuyang", "yuynagforhacker", "12/20/18, 08:31:05 AM", "Hello, I have a question.\r\nMy environment is Linux centos 6, the following problem occurs when executing ./gradlew build after clone source code\r\n\r\ncom.netflix.discovery.DiscoveryClientRegistryTest > testEurekaClientPeriodicHeartbeat FAILED\r\n\u00a0\u00a0\u00a0\u00a0org.mockito.exceptions.verification.TooLittleActualInvocations at DiscoveryClientRegistryTest.java:156\r\n\r\ncom.netflix.discovery.EurekaEventListenerTest > testCacheRefreshEvent FAILED\r\n\u00a0\u00a0\u00a0\u00a0java.lang.NullPointerException at EurekaEventListenerTest.java:81\r\n\r\ncom.netflix.discovery.DiscoveryClientEventBusTest > testStatusChangeEvent FAILED\r\n\u00a0\u00a0\u00a0\u00a0java.lang.NullPointerException at DiscoveryClientEventBusTest.java:90\r\n\r\n200 tests completed, 3 failed, 4 skipped\r\n:eureka-client:test FAILED\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task ':eureka-client:test'.\r\n> There were failing tests. See the report at: file:///opt/eureka/eureka-client/build/reports/tests/index.html\r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\r\n\r\nBUILD FAILED\r\n\r\nRequest for help above", "NaN"], ["1161", "Manual instance registration with EurekaHttpClient", "Stephan Windm\u00fcller", "windmueller", "11/08/19, 09:00:46 PM", "I am trying to register application instances manually using the Eureka Client (version 1.9.3):\r\n\r\n```\r\nEurekaHttpClient registrationClient = new RestTemplateEurekaHttpClient(new RestTemplate(), \"http://localhost:8080/eureka\");\r\nInstanceInfo instanceInfo = InstanceInfo.Builder.newBuilder()\r\n[...]\r\n.build();\r\nregistrationClient.register(instanceInfo);\r\n```\r\n\r\nThe result is an HTTP error (400) because of a `MismatchedInputException`: `Root name 'instanceId' does not match expected ('instance') for type [simple type, class com.netflix.appinfo.InstanceInfo]`\r\n\r\nIt seems that the generated JSON does not contain a root \"instance\" field. Am I using the API correctly or is there another way for manual instance registration? The Eureka server is running in version 2.0.2.", "You can try the following:\r\n\r\n```java\r\nfinal String serviceUrl = \"http://localhost:8762/eureka/\";\r\n\r\nTransportClientFactory factory = new RestTemplateTransportClientFactory();\r\nEurekaEndpoint defaultEndpoint = new DefaultEndpoint(serviceUrl);\r\nEurekaHttpClient eurekaHttpClient = factory.newClient(defaultEndpoint);\r\n\r\nInstanceInfo info = InstanceInfo.Builder.newBuilder()\r\n        [...]\r\n        .build();\r\n\r\neurekaHttpClient.register(info);\r\n``` =||= Hello, have you solved the problem? =||= Sorry for the late response. The suggested code works perfectly, thank you. =||= I still have HTTP Error 400 using the given solution =||= > @softreaver I still have HTTP Error 400 using the given solution\r\n\r\nIt's likely something different, please open a separate issue in this case and provide the relevant details (minimal repro).\r\n\r\n =||= "], ["1162", "Question: region distinct server, but multi-region service lookup", null, "jferron0310", "06/21/19, 05:27:06 PM", "This is more of a research question that anything as I've tried to scour the internet.  But I'm wondering the following setup and if is possible.  I have:\r\n\r\n- region a-aws and region b-aws.  Either region could have 1 to N eureka servers that sync between themselves, but not cross region (this is key).\r\n- App registering to region b-aws as a server, but wants to look up services as the discovery client in either a-aws or b-aws.  Is this possible and how do I set up the discovery client to do so and not having the application switch it's current eureka registration server.\r\n\r\nI'm trying to debug a new env we are setting up and noticing the server registration flip when we don't want it to as we have functionality for the eureka client to be able to lookup services in either region.  The reason being for this env, we want the regions isolated and not able to cross-sync eureka registrations.\r\n\r\nWhat i'm seeing in our logs: \r\n\r\n2018-11-28T20:34:11.97+0000 [APP/PROC/WEB/0]OUT 2018-11-28T20:34:11.975Z WARN  0 [DiscoveryClient-3] com.netflix.discovery.DiscoveryClient: DISCOVERY: Could not pick a zone based on preferred zone settings. My zone - defaultZone, preferSameZone- true. Defaulting to a-aws\r\n2018-11-28T20:34:11.97+0000 [APP/PROC/WEB/0]OUT 2018-11-28T20:34:11.975Z INFO  0 [DiscoveryClient-3] com.netflix.discovery.DiscoveryClient: Updating the serviceUrls as they seem to have changed from [https://b-aws/eureka/] to [https://a-aws/eureka/] \r\n\r\nJohn\r", "this is not a well supported use case but should be achievable by creating another Discovery client for lookups only and feeding it a totally independent config disabling heartbeating/registration and using different region. =||= Hi, @jferron0310 did you ever try this out? looking for an example for this. =||= "], ["1163", "  Add @Override toString() in InstanceInfo", "SangMin", "phantasmicmeans", "12/18/18, 04:30:19 AM", "Application(class) can get simple information by @Override the toString().\r\n\r\n-> toString() in Application.java\r\n\r\n    @Override\r\n    public String toString() {\r\n        return \"Application [name=\" + name + \", isDirty=\" + isDirty\r\n                + \", instances=\" + instances + \", shuffledInstances=\"\r\n                + shuffledInstances + \", instancesMap=\" + instancesMap + \"]\";\r\n    }\r\n\r\nIt is simple to use some information immediately.\r\n\r\nBut What is more necessary is the information in InstanceInfo(class)?\r\nInstanceInfo provides a detailed information about the eureka client.\r\nInstanceInfo provides a getter, but it has about 30 member variables.\r\n\r\nSo it seems necessary to provide the overriden toString() of InstanceInfo", "NaN"], ["1164", "eureka 1.9.8 Incrementally acquired registration instance cannot get the latest contract renewal time", "yikangfeng", "yikangfeng", "05/31/19, 12:00:59 AM", "Incrementally acquired registration instance cannot get the latest contract renewal time", "Hi @yikangfeng \r\nCould you please speak more in detail? Thanks\r\n\r\n =||= "], ["1165", "Mem raised after I call api everytime.", null, "zhaodageng", "05/31/19, 12:01:30 AM", "current-memory-usage | 74mb (7%)\r\nwill increase every time after you call the api http://ip:port/eureka/apps\r\n\r\n\r", "Well, I can't say this is surprising - Eureka allocates objects when you call this API, but most are supposed to be collected by GC. Does memory utilization continue to grow steadily even after garbage collection? In other words, do you experience a memory leak? Also please let us know what's the version you are using. =||= "], ["1166", "Configuration of Eureka Server in Eureka Client on AWS ECS", "Steve Behrendt", "dersteve", "11/08/19, 09:01:54 PM", "How do you address the Eureka Server on AWS ECS?\r\n\r\nMy requirements/current setup:\r\n- Eureka Server Deployed as ECS Service with Launch Type EC2\r\n-- Service Discovery (from ECS) enabled, which creates a Route53 DNS entry for the Eureka Server (e.g. eureka.local)\r\n- Eureka Server is only for mid-tier Services, hence no external address of Eureka Server needed/wanted\r\n- Eureka Server deployed in multiple AZs in one region\r\n- Eureka Client needs to configure (address) the Eureka Server somehow\r\n\r\n**Addressing via DNS from Route53:** \r\nWhen I set the `eurekaServerDNSName: service-registry.local` like this, then I get the following exception, because it can't find the txt record for the DNS entry. Is there a way to create the TXT record also and if yes, how shall I set this for ECS Service Discovery?\r\n\r\nException:\r\n`\r\nCaused by: java.lang.RuntimeException: Failed to initialize DiscoveryClient!\r\n`\r\n\r\n`\r\nationConfigEmbeddedWebApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'eurekaAutoServiceRegistration'; nested exception is java.lang.NullPointerException\r\n`\r\n\r\n`\r\nc.n.d.s.r.aws.ConfigClusterResolver : Resolving eureka endpoints via DNS: txt.eu-west-1.service-registry.local\r\n`\r\n\r\nIn addition when I want to create the txt record in Route53 for my services, I get the error message that I can't actually change this record, like \"The resource hostedzone/yyy can only be managed through servicediscovery.amazonaws.com\". So I wonder how I could use DNS configuration with AWS ECS for Eureka configuration.\r\n\r\n**Elastic IPs as an alternative**\r\nSince Elastic IPs (EIP) expose a public IP this is no possible solution for us.", "@dersteve did you manage to find a solution to this?\r\n\r\nI tried without ECS Service Discovery since it creates only SRV or A records. Instead I associated a private hosted zone with the VPC and had a subset of private IP addresses dedicated for the instances Eureka is being launched on (bridge mode being used in ECS), then I have a separate process which keeps the txt records up to date with these private IPs. was running into issues with hostname mismatches in the containers =||= @HieronymusLex No, I actually didn't manage to do it. We were thinking about a solution along your lines, but were a bit afraid of all the necessary stuff. We are now close to finish a version where we don't use Eureka on ECS. \r\n\r\nInstead we use a private hosted zone and a A-Record for each service so we can address a service in a resttemplate with its name, e.g. \"customer\" (as we did with Eureka/Ribbon/LoadBalanced Resttemplate before) and have the A-Record in the private zone pointed to a ALB that distributes the load between the service instances.  =||= @HieronymusLex and @troshko111 I have the same problem. Is there a way to properly setup the dns discovery? =||= I'm trying to register a service with eureka which is using ecs service discovery(instead of using ribbon). Is SRV record supported by eureka? =||= No, the SRV records aren't implemented. =||= "], ["1167", "EIPManager cannot bind EIP  when ec2 instance has 2 privateIp's", "Sushant Borse", "bsushant-athena", "11/08/19, 09:01:37 PM", "Hi,\r\n\r\nWe are using ECS service discovery which assignes a new privateIp to the eureka instance. So EIPManager is not able to allocate eip to that eureka instance as there are two privateIp's for that instance. \r\n\r\n**Error Stacktrace** : \r\n```\r\ncom.amazonaws.AmazonServiceException: There are multiple interfaces attached to instance 'i-0304df75ac562f573'. Please specify an interface ID for the operation instead. (Service: AmazonEC2; Status Code: 400; Error Code: InvalidInstanceID; Request ID: f2e3ad9b-64ab-4802-ab84-a01130a9521d)\r\nat com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:1071)\r\nat com.amazonaws.http.AmazonHttpClient.executeOneRequest(AmazonHttpClient.java:719)\r\nat com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:454)\r\nat com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:294)\r\nat com.amazonaws.services.ec2.AmazonEC2Client.invoke(AmazonEC2Client.java:9393)\r\nat com.amazonaws.services.ec2.AmazonEC2Client.associateAddress(AmazonEC2Client.java:2806)\r\nat com.netflix.eureka.aws.EIPManager.bindEIP(EIPManager.java:243)\r\nat com.netflix.eureka.aws.EIPManager.handleEIPBinding(EIPManager.java:136)\r\nat com.netflix.eureka.aws.EIPManager.start(EIPManager.java:105)\r\nat com.netflix.eureka.aws.AwsBinderDelegate.start(AwsBinderDelegate.java:42)\r\nat org.springframework.cloud.netflix.eureka.server.EurekaServerBootstrap.initEurekaServerContext(EurekaServerBootstrap.java:145)\r\nat org.springframework.cloud.netflix.eureka.server.EurekaServerBootstrap.contextInitialized(EurekaServerBootstrap.java:81)\r\nat org.springframework.cloud.netflix.eureka.server.EurekaServerInitializerConfiguration$1.run(EurekaServerInitializerConfiguration.java:70)\r\nat java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\nPlease suggest workaround!\r\n\r\nThanks,\r\nSushant", "NaN"], ["1168", "How do I More instance to App \uff1f", "\u5e84\u6587\u8fbe", "pkwenda", "05/31/19, 12:08:37 AM", "We company some features want use Eureka instead of zookeeper , I check out this WIKI:[Eureka REST operations](https://github.com/Netflix/eureka/wiki/Eureka-REST-operations), I do packaging Eureka-client , but only has register instanceId REST , And I get an error when I keep AppId and replace InstanceId. how to add instances into App's REST ? It should be exit \uff01\r\nbecause\uff1a\r\n\r\n![image](https://user-images.githubusercontent.com/14212375/50760492-f4a58180-12a2-11e9-9583-82cdd9fbf7e9.png)\r\n\r\nIt is Array like zookeeper \uff01 How do I register multiple instances\uff1fNow, i only can register one instance into one App\u3002\r\n\r\n![image](https://user-images.githubusercontent.com/14212375/50761610-cbd2bb80-12a5-11e9-934c-67e327e8d368.png)\r\n\r\nI register like this.", "Have each instance of the app register with Eureka and it will be merged server-side and all will be addressable. =||= "], ["1170", "sanitize metadata map for empty values", "David Liu", "qiangdavidliu", "01/11/19, 12:26:25 AM", "NaN", "NaN"], ["1171", "Endpoint ID 'service-registry' contains invalid characters", "Wray Zheng", "wrayzheng", "05/31/19, 12:09:46 AM", "```\r\n :: Spring Boot ::        (v2.1.1.RELEASE)\r\n\r\n2019-01-12 00:37:56.311  INFO 14204 --- [           main] c.c.eurekasvr.EurekasvrApplication       : No active profile set, falling back to default profiles: default\r\n2019-01-12 00:37:58.191  WARN 14204 --- [           main] o.s.boot.actuate.endpoint.EndpointId     : Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.\r\n```", "This is actuator's warning.  and  hystrix.stream is the same =||= Does not seem to be a Eureka bug per se. =||= "], ["1172", "update the comment", "iZDT", "izdt", "05/30/19, 10:36:47 PM", "update the comment of  getRegisteredApplications(String appName)", "Thanks! =||= "], ["1173", "Rest endpoint /eureka/apps/delta is not returning delta correctly ", "Piyush Kumar", "piyushkumar13", "07/28/19, 06:08:46 AM", " I am updating the eureka metadata with key `weight` and `some value` using endpoint `/eureka/apps/${app-name}/${app-id}/metadata?weight=40`. I am calling this update metadata api **once** for each of my registered service instances(eureka client registered with eureka) in a **loop**(registered instances are two and it can be more). Simultaneously, I am hitting the endpoint `/eureka/apps/delta` but this endpoint sometimes returning the response with the updates I have done using update metadata api and sometimes its not.  <br/>\r\nJust to re-verify my above result, I have deployed zuul application, registered it with eureka and customized the Ribbon configuration- getting the **servers from loadbalancers** and **from returned server fetching InstanceInfo** object and printing **InstanceInfo.getMetadata** . This also sometimes giving the correct updated metadata and sometimes not.\r\n\r\n**Note** : I am using Spring cloud version `Edgware.SR4`. \r\n\r\nHave a look at this snapshot Response of /eureka/apps/delta after update metadata call\r\n\r\n<img width=\"1332\" alt=\"screen shot 2019-01-15 at 10 06 08 pm\" src=\"https://user-images.githubusercontent.com/13505531/51197849-9e76b500-1918-11e9-896e-759d6b5b5e46.png\">", "@qiangdavidliu @tbak could you please provide some help on this. =||= cc-ing the current primary maintainers @elandau @troshko111  =||= Thanks @qiangdavidliu  =||= Thanks for the report, it'd be helpful if you could come up with a minimal repro, not sure what the problem you're facing may be. =||= I was able to resolve the issue by using diabling delta : `disableDelta: true` .  Thought, it might be helpful for someone else.\r\n**A word of caution** : disabling delta will increase the traffic b/w eureka clients and eureka server. =||= "], ["1175", "move gain of lastDirtyTimestamp before gain of status to avoid race condition", "Addo.Zhang", "addozhang", "04/23/19, 02:39:57 AM", "refer to solution of #1174", "delete forked repo by mistake. New one #1198 created. Close this =||= "], ["1176", "Allow 'immediate' registerRuntimeMetadata instead of waiting for the next heartbeat", "Ant\u00f3nio Pedro Marques", "entonio", "05/31/19, 12:18:06 AM", "My understanding is that changes made by a client to its InstanceInfo (namely, the metadata) are only sent to the server in the next heartbeat. With a default heartbeat of 30s, that will be, on average, 15s after they are made.\r\n\r\nThis is fine for most of my metadata, but for some of it - that changes very rarely - I'd really want the changes to be as immediate as possible. They wouldn't have to be immediate, but preferably within an interval of 5 seconds or less, which is much sooner than the average heartbeat.\r\n\r\nReducing the heartbeat interval is not only against the advice, as it's also overkill for what I want, since the changes that do need immediate updates are very rare. So I thought of 2 possibilities:\r\n\r\n1. Having a high-frequency thread to check if updates have to be sent, and send them f the next heartbeat is still far away. That would require callers to *not* request updates if they aren't high priority (I currently have a thread periodically requesting those 'lesser priority' updates).\r\n2. Add a `boolean immediately` to `registerRuntimeMetadata` according to which the update is really performed at call time.\r\n\r\nOption 2 seems pretty unobtrusive to me, but I'm unsure if this feature fits your philosophy at all, or if it doesn't do the same breakage that is said to be an issue with small interval heartbeats. I'd add that all I'd need would be a 'best effort' thing to provide some functionality, rather than some flawless, edgecaseless, wonder.", "Thanks for describing the use case. The proposed solutions do not seem like a perfect design fit into a naturally eventually consistent model of Eureka as there's no \"immediate\" anywhere anyway and the underlying replication may be delayed even if you heartbeat more often. Based on the info provided it'd say we're unlikely to implement this / merge a PR.\r\n\r\nThe use case seems to be trying to utilize Eureka as a config store which it isn't, if that's the case I suggest trying ZooKeeper, etcd or similar.\r\n\r\nHope this makes sense. =||= "], ["1177", "Remove unused javax.mail dependency", "Matt Nelson", "mattnelson", "05/30/19, 10:29:38 PM", "Remove unused javax.mail dependency", "Thanks for the PR! =||= "], ["1178", "Ereka 1.9.8 Renews threshold is correct for the first time, and then this value will automatically grow, resulting in automatic opening of protection mode. What is the reason?", "yikangfeng", "yikangfeng", "05/31/19, 12:18:28 AM", "Ereka 1.9.8 Renews threshold is correct for the first time, and then this value will automatically grow, resulting in automatic opening of protection mode. What is the reason?", "Hi @yikangfeng , please check if your Eureka server has property `eureka.shouldFilterOnlyUpInstances` configured as `false`. See #1127 for details. Please read the first post there and see if it describes your situation. =||= > Hi @yikangfeng , please check if your Eureka server has property `eureka.shouldFilterOnlyUpInstances` configured as `false`. See #1127 for details. Please read the first post there and see if it describes your situation.\r\n\r\nWell, thank you very much. =||= Thanks @mgtriffid.  =||= "], ["1179", "Is it necessary for service consumers to register in the registry?", "dear_nero", "dearnero", "05/31/19, 12:19:26 AM", "If my application is a consumer, do I need to set register-with-eureka=false?\r\nIf my application is a provider, do I need to set fetch-registry=false?\r", "It's not necessary to register to be able to query and not necessary to query if you just want to register. =||= "], ["1180", "Implementing client in another language", null, "arvyy", "05/31/19, 12:20:21 AM", "(Sorry if it's not the right place to ask)\r\n\r\nHow should I go about implementing the eureka-client in a different language? Does a specification / interface for the client exist? Or is following java implementation the only real path for such task?", "Following the Java client is likely the best option at this point, sorry. =||= "], ["1181", "client start failed : Ignoring onDemand update due to rate limiter", "Eden", "EdenStack", "05/31/19, 12:23:29 AM", "I use **spring boot 2.1.2.RELEASE** and **spring cloud Greenwich.RELEASE**\r\n\r\nOther services use most of the same libs works fine except 2 services use **spring-boot-starter-amqp** cannot be registered to eureka .\r\n\r\nWarn log is : **Ignoring onDemand update due to rate limiter**\r\n\r", "Trying Spring support may be a better option in this use case, seems unrelated to Eureka. =||= "], ["1182", "Excuse me, Eureka version 1.9.8 configures preferSameZone when configuring to get zones from DNS and service urls, so as to register under the same zone? Look at the source code or need to configure availability Zones. Is there any problem? Thank you.", "yikangfeng", "yikangfeng", "05/31/19, 12:22:35 AM", "Excuse me, Eureka version 1.9.8 configures preferSameZone when configuring to get zones from DNS and service urls, so as to register under the same zone? Look at the source code or need to configure availability Zones. Is there any problem? Thank you.\r\n\r\n![image](https://user-images.githubusercontent.com/6268253/52897418-1e8d8480-320f-11e9-9972-45a66abd1e9f.png)\r", "This is related to preferring the local availability zone, I suggest to check out say AWS docs on availability zones to better understand what this is and why it may be useful. =||= "], ["1183", "http://localhost:8761/ opens but http://localhost:8761/eureka doesn't", "RajneeshDubey", "RajneeshDubey", "05/31/19, 12:25:21 AM", "While setting up discovery server on local -\r\n\r\neureka server dashboard opens at \"http://localhost:8761/\" but \"http://localhost:8761/eureka\" doesn't. And i need it to register my services on to that.  \r\n![image](https://user-images.githubusercontent.com/15822150/53089384-73443e80-3532-11e9-8932-3771db4023dd.png)\r\n\r\n![image](https://user-images.githubusercontent.com/15822150/53089424-8f47e000-3532-11e9-91e8-f5e3ea9e1ae8.png)\r", "Sorry this is likely unrelated to Eureka, if you feel otherwise please provide more details and a minimal repro, then feel free to reopen. =||= http://localhost:8761/eureka/eureka put url in client property file like this.It worked for me =||= "], ["1184", "build fail-what are the right versions?", "Abhishek Anand", "ninjabhishek", "02/24/19, 10:44:06 AM", "I just cloned and tried build. I am getting following error. My java version is \"1.8.0_191\" and gradle version \"5.2.1\". Are these the right versions to build and use? Or there is another workaround I need to follow?\r\n\r\n![image](https://user-images.githubusercontent.com/20058829/53261199-6de52080-36f9-11e9-8e9e-e493aa49e760.png)\r", "You should use the gradle wrapper (`./gradlew`) rather than a gradle install. =||= yup..got it..thanks =||= "], ["1185", "JerseyReplicationClient doesn't honor custom SSL Context", null, "MOS6522", "11/08/19, 09:04:03 PM", "In an earlier ticket, there was an error in the Replication Client for Eureka where it wasn't checking to see if there was a system setting for \"shouldSSLConnectionUseSystemSocketFactory\", but that was fixed.\r\n\r\nHowever, the fix is fairly limited in scope. The current fix is to look to see if HTTPS is used for the replication protocol, if it is, look for a system property (shouldSSLConnectionUseSystemSocketFactory).\r\n\r\nA problem occurs in the \"somewhat documented\" way to create a discovery client that uses a custom SSL context is to create a \"DiscoveryClient.DiscoveryClientOptionalArgs\" bean and have it in the Spring Context. This bean is not used during the creation of the replication client. \r\n\r\nThe question is:\r\n\r\nShouldn't the \"DiscoveryClient.DiscoveryClientOptionalArgs\" be used in creating the replication client? This way, people who setup a custom SSL Context can just do it once and forget it. \r\n\r\nThere are a lot of apps out there that use the system wide SSL for inter process communication outside of their application's domain (i.e. SystemA is a gateway to SystemB which needs SSL Client Certs. They shoudln't have to be rewritten to make it so that Eureka takes control of the default context and the existing code has to be refactored to use custom context. Eureka should be the drop in.\r\n\r", "NaN"], ["1186", "Client reports \"HTTP 400 Bad Request/unable to send heartbeart!\" even though heartbeat succeeds", null, "jbrew8", "05/31/19, 12:29:44 AM", "I have setup a eureka server and a handful of web services as eureka clients, all deployed as aws elastic beanstalk apps. Everything appears to be working correctly- the apps register with eureka and are visible on the system status page, and I can hit them via a zuul server that gets routing info from eureka.\r\n\r\nHowever, the clients are reporting that they are not able to send heartbeats, despite the fact that the server is receiving them just fine. The server lists the services as UP and the access log for the server shows that it is receiving the heartbeats and replying with a 200 status code. \r\n\r\nBut the clients are are throwing 400/Bad Request exceptions:\r\n\r\n```\r\n2019-03-08 15:38:11,884 [DiscoveryClient-HeartbeatExecutor-0] DEBUG c.n.d.s.t.j.AbstractJerseyEurekaHttpClient - Jersey HTTP PUT <eureka server host>/eureka/apps/HOOPLA-RECOMMENDATIONS/<hostname>:80:3aaeab0f-8899-4890-9323-584cf416aec2; statusCode=200\r\n2019-03-08 15:38:11,884 [DiscoveryClient-HeartbeatExecutor-0] ERROR c.n.d.s.t.d.RedirectingEurekaHttpClient - Request execution error. endpoint=DefaultEndpoint{ serviceUrl='<eureka server host>/eureka}\r\njavax.ws.rs.WebApplicationException: HTTP 400 Bad Request\r\n\tat com.netflix.discovery.provider.DiscoveryJerseyProvider.readFrom(DiscoveryJerseyProvider.java:110)\r\n\tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:634)\r\n\tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586)\r\n\tat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.sendHeartBeat(AbstractJerseyEurekaHttpClient.java:105)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n\tat com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n\tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118)\r\n\tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n\tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n\tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n\tat com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:846)\r\n\tat com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1405)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: com.thoughtworks.xstream.io.StreamException: \r\n\tat com.thoughtworks.xstream.io.xml.DomDriver.createReader(DomDriver.java:115)\r\n\tat com.thoughtworks.xstream.io.xml.DomDriver.createReader(DomDriver.java:84)\r\n\tat com.thoughtworks.xstream.XStream.fromXML(XStream.java:1445)\r\n\tat com.netflix.discovery.converters.wrappers.CodecWrappers$XStreamXml.decode(CodecWrappers.java:387)\r\n\tat com.netflix.discovery.provider.DiscoveryJerseyProvider.readFrom(DiscoveryJerseyProvider.java:103)\r\n\t... 23 common frames omitted\r\nCaused by: org.xml.sax.SAXParseException: Premature end of file.\r\n\tat com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:257)\r\n\tat com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:339)\r\n\tat com.thoughtworks.xstream.io.xml.DomDriver.createReader(DomDriver.java:108)\r\n\t... 27 common frames omitted\r\n2019-03-08 15:38:11,884 [DiscoveryClient-HeartbeatExecutor-0] WARN  c.n.d.s.t.d.RetryableEurekaHttpClient - Request execution failed with message: HTTP 400 Bad Request\r\n2019-03-08 15:38:11,884 [DiscoveryClient-HeartbeatExecutor-0] ERROR c.netflix.discovery.DiscoveryClient - DiscoveryClient_HOOPLA-RECOMMENDATIONS/<hostname>:80:3aaeab0f-8899-4890-9323-584cf416aec2 - was unable to send heartbeat!\r\n```\r\n\r\nThe client acknowledges the 200 response from the server, but then throws an error when trying to parse the response body. Stepping through the client code, it looks like the client is expecting an InstanceInfo object in the body of the response it gets from the server. But the heartbeat endpoint's response body is empty. \r\n\r\nThe server and client are the same eureka version (1.9.3).\r\n\r\nIs this the expected behavior? Is this a bug, or could there be a problem with my configuration?", "In my original post I said everything appeared to be working fine despite the exceptions, but this was wrong: clients were not automatically re-registering with the server when the server was restarted.\r\n\r\nBut- this might not be a bug after all. I had eureka running as an aws elastic beanstalk app using tomcat and httpd. The httpd config had mod_deflate enabled, which appears to have caused all of the empty response bodies to be compressed into an empty gzip file. The discovery client through exceptions when trying to parse this empty response body. Disabling gzip compression on the eureka server solved this issue.\r\n =||= We are also seeing same issue and we want the compression as well. Isn't there any other workaround for this ? =||= eureka:\r\n  instance:\r\n    hostname: localhost\r\n  client:\r\n    gZipContent: false\r\n    registerWithEureka: false\r\n    fetchRegistry: false\r\n    serviceUrl:\r\n      defaultZone: http://localhost:80/eureka/\r\n  server:\r\n    enableSelfPreservation: false  \r\n    gZipContentFromRemoteRegion: false\r\n\r\nWe are also seeing same issue ,and accept you  tips, my config is show above. the error is always. please tell me where my error? thank you!\r\n =||= @jbrew8  =||= netflix-eureka 2.1.2.RELEASE\r\nin k8s environment with same issue \r\nknow the problem but don't know how to fix it.\r\ncause all of the empty response bodies to be compressed into an empty gzip file =||= I have fixed this.\r\nif your eureka server run by war deploy to tomcat,do not compression xml and json,setting in tomcat config server.xml\r\nif your eureka server run by jar,do not compression  xml and json,setting in application.yml or application.properties or bootstrap.properties =||= Can you show what you mean by that, please? What is your configuration? =||= > Can you show what you mean by that, please? What is your configuration?\r\n\r\n\r\n![QQ\u622a\u56fe20200923193738](https://user-images.githubusercontent.com/10512112/94007728-78373700-fdd4-11ea-9800-3b5b38dbd96b.png)\r\n\r\nremove these compression config from your web server  or application.yml.\r\nthis fixed my issue =||= My application.yml for the Eureka-Client, or for the Eureka-Server project?\r\n\r\nFor my eureka-server project I have this configuration:\r\n\r\nserver.port=8761\r\neureka.client.register-with-eureka=false\r\neureka.client.fetch-registry=false\r\n\r\n\r\nAnd for my eureka-client project I have:\r\n\r\neureka.instance.hostname=wallet-test.host\r\neureka.client.register-with-eureka=true\r\neureka.client.fetch-registry=false\r\neureka.client.serviceUrl.defaultZone=http://wallet-forwarder.host/eureka =||= > My application.yml for the Eureka-Client, or for the Eureka-Server project?\r\n\r\nEureka-Server =||= > > My application.yml for the Eureka-Client, or for the Eureka-Server project?\r\n> \r\n> Eureka-Server\r\n\r\nLike below?\r\neureka.client.g-zip-content=false\r\neureka.server.g-zip-content-from-remote-region=false\r\neureka.server.xml-codec-name=false =||= > > > My application.yml for the Eureka-Client, or for the Eureka-Server project?\r\n> > \r\n> > \r\n> > Eureka-Server\r\n> \r\n> Like below?\r\n> eureka.client.g-zip-content=false\r\n> eureka.server.g-zip-content-from-remote-region=false\r\n> eureka.server.xml-codec-name=false\r\n\r\nyes,if you run by jar. =||= > > > > My application.yml for the Eureka-Client, or for the Eureka-Server project?\r\n> > > \r\n> > > \r\n> > > Eureka-Server\r\n> > \r\n> > \r\n> > Like below?\r\n> > eureka.client.g-zip-content=false\r\n> > eureka.server.g-zip-content-from-remote-region=false\r\n> > eureka.server.xml-codec-name=false\r\n> \r\n> yes,if you run by jar.\r\n\r\nI package a war and deploy that in the cloud.\r\nMy configuration is only a application.properties file\r\nand a pom.xml =||= > > > > > My application.yml for the Eureka-Client, or for the Eureka-Server project?\r\n> > > > \r\n> > > > \r\n> > > > Eureka-Server\r\n> > > \r\n> > > \r\n> > > Like below?\r\n> > > eureka.client.g-zip-content=false\r\n> > > eureka.server.g-zip-content-from-remote-region=false\r\n> > > eureka.server.xml-codec-name=false\r\n> > \r\n> > \r\n> > yes,if you run by jar.\r\n> \r\n> I package a war and deploy that in the cloud.\r\n> My configuration is only a application.properties file\r\n> and a pom.xml. Isnt application.properties ok for war?\r\n\r\n =||= > > > > > > My application.yml for the Eureka-Client, or for the Eureka-Server project?\r\n> > > > > \r\n> > > > > \r\n> > > > > Eureka-Server\r\n> > > > \r\n> > > > \r\n> > > > Like below?\r\n> > > > eureka.client.g-zip-content=false\r\n> > > > eureka.server.g-zip-content-from-remote-region=false\r\n> > > > eureka.server.xml-codec-name=false\r\n> > > \r\n> > > \r\n> > > yes,if you run by jar.\r\n> > \r\n> > \r\n> > I package a war and deploy that in the cloud.\r\n> > My configuration is only a application.properties file\r\n> > and a pom.xml. Isnt application.properties ok for war?\r\n\r\nif you run by war,careful your web server,such as tomcat,in server.xml maybe have gzip compression config,remove it. =||= > server.xml\r\n\r\nI dont have a server.xml file at all in my project =||= > > > > > > > My application.yml for the Eureka-Client, or for the Eureka-Server project?\r\n> > > > > > \r\n> > > > > > \r\n> > > > > > Eureka-Server\r\n> > > > > \r\n> > > > > \r\n> > > > > Like below?\r\n> > > > > eureka.client.g-zip-content=false\r\n> > > > > eureka.server.g-zip-content-from-remote-region=false\r\n> > > > > eureka.server.xml-codec-name=false\r\n> > > > \r\n> > > > \r\n> > > > yes,if you run by jar.\r\n> > > \r\n> > > \r\n> > > I package a war and deploy that in the cloud.\r\n> > > My configuration is only a application.properties file\r\n> > > and a pom.xml. Isnt application.properties ok for war?\r\n> \r\n> if you run by war,careful your web server,such as tomcat,in server.xml maybe have gzip compression config,remove it.\r\n\r\nI dont have a server.xml file at all in my project\r\n\r\n =||= > > server.xml\r\n> \r\n> I dont have a server.xml file at all in my project\r\n\r\nno,not in your project,that in your web server config.\r\ndoes your war run in tomcat that provided by cloud =||= Changed to that:\r\nIs this correct?\r\n\r\n    <Connector port=\"80\" protocol=\"HTTP/1.1\"\r\n               connectionTimeout=\"20000\"\r\n\t       compression=\"on\"\r\n               compressionMinSize=\"512\"\r\n\t       useSendfile=\"false\"\r\n               compressableMimeType=\"text/html,text/xml,text/plain,text/css,application/xml,application/xhtml+xml,application/rss+xml,application/javascript,application/x-javascript,image/svg+xml\"\r\n               redirectPort=\"443\" />\r\n               \r\n    <Connector port=\"8080\" protocol=\"HTTP/1.1\"\r\n               connectionTimeout=\"20000\"\r\n\t       compression=\"on\"\r\n               compressionMinSize=\"512\"\r\n\t       useSendfile=\"false\"\r\n               compressableMimeType=\"text/html,text/xml,text/plain,text/javascript,text/plain,application/json,application/xml,text/css,application/xml,application/xhtml+xml,application/rss+xml,application/javascript,application/x-javascript,image/svg+xml\"\r\n               redirectPort=\"443\" /> =||= yeah,same situation with me,\r\nremove these configs \r\n\r\ncompression=\"on\"\r\ncompressionMinSize=\"512\"\r\ncompressableMimeType=\"text/html,text/xml,text/plain,text/javascript,text/plain,application/json,application/xml,text/css,application/xml,application/xhtml+xml,application/rss+xml,application/javascript,application/x-javascript,image/svg+xml\"\r\n\r\nin your Connector  =||= > yeah,same situation with me,\r\n> remove these configs\r\n> \r\n> compression=\"on\"\r\n> compressionMinSize=\"512\"\r\n> compressableMimeType=\"text/html,text/xml,text/plain,text/javascript,text/plain,application/json,application/xml,text/css,application/xml,application/xhtml+xml,application/rss+xml,application/javascript,application/x-javascript,image/svg+xml\"\r\n> \r\n> in your Connector\r\n\r\nLike that?\r\n\r\n<Connector port=\"80\" protocol=\"HTTP/1.1\"\r\n         connectionTimeout=\"20000\"\r\n         useSendfile=\"false\"\r\n           redirectPort=\"443\" />\r\n           \r\n<Connector port=\"8080\" protocol=\"HTTP/1.1\"\r\n        connectionTimeout=\"20000\"\r\n       useSendfile=\"false\"\r\n         redirectPort=\"443\" /> =||= > Like that?\r\n\r\nleave this in your Connector config\r\n\r\n`<Connector port=\"8080\" protocol=\"HTTP/1.1\"\r\n           connectionTimeout=\"20000\"\r\n       useSendfile=\"false\"\r\n           redirectPort=\"443\" />` =||= "], ["1187", "Unable to register client with eureka server deployed on weblogic 12c.", "Lalitha", "lalitha7", "06/21/19, 05:25:00 PM", "I've deployed eureka server on weblogic 12c. Spring boot version is 1.5.13.RELEASE and spring cloud version is Edgware.RELEASE.\r\nI'm getting the following error when client tries to connect to eureka server deployed on weblogic.\r\nWhen eureka server is deployed on tomcat , client is able to connect to eureka server.\r\n```\r\n2019-03-11 18:31:35.109  INFO 18856 --- [ (self-tuning)'] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server\r\n2019-03-11 18:31:35.568  WARN 18856 --- [ (self-tuning)'] c.n.d.s.t.d.RetryableEurekaHttpClient    : Request execution failure with status code 404; retrying on another server if available\r\n2019-03-11 18:31:35.582 ERROR 18856 --- [ (self-tuning)'] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_localhost:10000 unable to refresh its cache! status = Cannot execute request on any known server\r\n\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n\tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111) ~[eureka-client-1.7.0.jar:1.7.0]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.7.0.jar:1.7.0]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137) ~[eureka-client-1.7.0.jar:1.7.0]\r\n\tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.7.0.jar:1.7.0]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.7.0.jar:1.7.0]\r\n\tat com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1022) [eureka-client-1.7.0.jar:1.7.0]\r\n\tat com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:936) [eureka-client-1.7.0.jar:1.7.0]\r\n\tat com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:412) [eureka-client-1.7.0.jar:1.7.0]\r\n\tat com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:267) [eureka-client-1.7.0.jar:1.7.0]\r\n\tat org.springframework.cloud.netflix.eureka.CloudEurekaClient.<init>(CloudEurekaClient.java:61) [spring-cloud-netflix-eureka-client-1.4.0.RELEASE.jar:1.4.0.RELEASE]\r\n\tat org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration.eurekaClient(EurekaClientAutoConfiguration.java:261) [spring-cloud-netflix-eureka-client-1.4.0.RELEASE.jar:1.4.0.RELEASE]\r\n\tat org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration$$EnhancerBySpringCGLIB$$46a33e66.CGLIB$eurekaClient$1(<generated>) [spring-cloud-netflix-eureka-client-1.4.0.RELEASE.jar:1.4.0.RELEASE]\r\n\tat org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration$$EnhancerBySpringCGLIB$$46a33e66$$FastClassBySpringCGLIB$$75586b08.invoke(<generated>) [spring-cloud-netflix-eureka-client-1.4.0.RELEASE.jar:1.4.0.RELEASE]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) [spring-core-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:358) [spring-context-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration$$EnhancerBySpringCGLIB$$46a33e66.eurekaClient(<generated>) [spring-cloud-netflix-eureka-client-1.4.0.RELEASE.jar:1.4.0.RELEASE]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_181]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_181]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_181]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_181]\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162) [spring-beans-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588) [spring-beans-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1181) [spring-beans-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1075) [spring-beans-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:513) [spring-beans-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483) [spring-beans-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$2.getObject(AbstractBeanFactory.java:351) [spring-beans-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.cloud.context.scope.GenericScope$BeanLifecycleWrapper.getBean(GenericScope.java:379) [spring-cloud-context-1.3.0.RELEASE.jar:1.3.0.RELEASE]\r\n\tat org.springframework.cloud.context.scope.GenericScope.get(GenericScope.java:181) [spring-cloud-context-1.3.0.RELEASE.jar:1.3.0.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:346) [spring-beans-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) [spring-beans-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.aop.target.SimpleBeanTargetSource.getTarget(SimpleBeanTargetSource.java:35) [spring-aop-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.cloud.netflix.eureka.serviceregistry.EurekaRegistration.getTargetObject(EurekaRegistration.java:166) [spring-cloud-netflix-eureka-client-1.4.0.RELEASE.jar:1.4.0.RELEASE]\r\n\tat org.springframework.cloud.netflix.eureka.serviceregistry.EurekaRegistration.getEurekaClient(EurekaRegistration.java:155) [spring-cloud-netflix-eureka-client-1.4.0.RELEASE.jar:1.4.0.RELEASE]\r\n\tat org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry.maybeInitializeClient(EurekaServiceRegistry.java:56) [spring-cloud-netflix-eureka-client-1.4.0.RELEASE.jar:1.4.0.RELEASE]\r\n\tat org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry.register(EurekaServiceRegistry.java:37) [spring-cloud-netflix-eureka-client-1.4.0.RELEASE.jar:1.4.0.RELEASE]\r\n\tat org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration.start(EurekaAutoServiceRegistration.java:80) [spring-cloud-netflix-eureka-client-1.4.0.RELEASE.jar:1.4.0.RELEASE]\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:173) [spring-context-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.access$200(DefaultLifecycleProcessor.java:50) [spring-context-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:346) [spring-context-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:149) [spring-context-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:112) [spring-context-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:880) [spring-context-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.finishRefresh(EmbeddedWebApplicationContext.java:144) [spring-boot-1.5.13.RELEASE.jar:1.5.13.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546) [spring-context-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) [spring-boot-1.5.13.RELEASE.jar:1.5.13.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693) [spring-boot-1.5.13.RELEASE.jar:1.5.13.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360) [spring-boot-1.5.13.RELEASE.jar:1.5.13.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303) [spring-boot-1.5.13.RELEASE.jar:1.5.13.RELEASE]\r\n\tat org.springframework.boot.web.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:154) [spring-boot-1.5.13.RELEASE.jar:1.5.13.RELEASE]\r\n\tat org.springframework.boot.web.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:134) [spring-boot-1.5.13.RELEASE.jar:1.5.13.RELEASE]\r\n\tat org.springframework.boot.web.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:87) [spring-boot-1.5.13.RELEASE.jar:1.5.13.RELEASE]\r\n\tat org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:169) [spring-web-4.3.17.RELEASE.jar:4.3.17.RELEASE]\r\n\tat weblogic.servlet.internal.WebAppServletContext.initContainerInitializer(WebAppServletContext.java:1394) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.servlet.internal.WebAppServletContext.initContainerInitializers(WebAppServletContext.java:1331) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.servlet.internal.WebAppServletContext.initContainerInitializers(WebAppServletContext.java:1317) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1834) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:2876) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1661) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:823) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.application.internal.ExtensibleModuleWrapper$StartStateChange.next(ExtensibleModuleWrapper.java:360) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.application.internal.ExtensibleModuleWrapper$StartStateChange.next(ExtensibleModuleWrapper.java:356) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.application.internal.ExtensibleModuleWrapper.start(ExtensibleModuleWrapper.java:138) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:124) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:216) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:211) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:73) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:24) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:729) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:258) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.application.internal.SingleModuleDeployment.activate(SingleModuleDeployment.java:48) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:165) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:80) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:587) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:150) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:116) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:339) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:846) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1275) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:442) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:176) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:68) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:548) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.work.ExecuteThread.execute(ExecuteThread.java:311) [weblogic.server.merged.jar:12.1.3.0.0]\r\n\tat weblogic.work.ExecuteThread.run(ExecuteThread.java:263) [weblogic.server.merged.jar:12.1.3.0.0]\r\n```\r\n\r", "Hi, \r\nI am also having some issues since my eureka serve looks like it's up, however it's not reachable, are you also facing this issue?\r\n\r\n\r\nRegards! =||= Hello,\r\n\r\nWe are able to use spring eureka discovery with weblogic 12c .\r\nDid you get the eureka server console from your weblogic server before trying anything on client side ? =||= Hi @fabienleconte , I didn't, I was facing issues, let me try again then I'll back with you to post the error.\r\n\r\n\r\nRegards! =||= Is the server actually reachable? try telnetting to check. =||= "], ["1188", "Eureka Server Ignoring Client Hostname while registration", null, "msalmanST", "11/08/19, 09:04:44 PM", "Hey guys,\r\n\r\nI am facing an same issue when running eureka server and eureka client on two different domains (both hosted on AWS), in this case eureka server always use its own domain name for the registered instance and not using the client hostname. I also try to set the client domain name by setting inside bootstrap.properties i.e eureka.instance.hostname=my.domain.com but it is not reflecting inside \"/eureka/apps\"\r\n\r\nAny help is much appreciated.\r\n\r\nUpdated:\r\nBoth my eureka server and the client service running inside docker container in two different servers with two different domains.", "I am facing the same issue. did you find any solution for this? =||= Do check what is the hostname set for your machine using command `hostname`, eureka used the returned value as the hostname of the machine. Do update the hostname with your machine hostname and it will work fine. =||= "], ["1189", "Eureka client registration failed in openshift platform", null, "CodeRaju", "03/15/19, 10:38:11 AM", "I have a eureka server running in openshift platform. when i try to register client it's throwing below error\r\n\r\n2019-03-15 09:02:45.850  WARN 1 --- [tbeatExecutor-0] c.n.d.s.t.d.RetryableEurekaHttpClient    : Request execution failed with message: java.net.UnknownHostException:\r\n2019-03-15 09:02:45.850 ERROR 1 --- [freshExecutor-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error. endpoint=DefaultEndpoint{ serviceUrl='https://xxx.com:8761/eureka\r\ncom.sun.jersey.api.client.ClientHandlerException: java.net.UnknownHostException: Name or service not known\r\n\r\n**Server config**\r\napplication.yml\r\nserver:\r\n  port: 8761\r\n  servlet:\r\n    context-path: /\r\n\r\nspring:\r\n  application:\r\n    name: eureka-service\r\n\r\neureka:\r\n       instance:\r\n         hostname: xxxx.com\r\n       client:\r\n         registerWithEureka: false\r\n         fetchRegistry: false\r\n         serviceUrl:\r\n           defaultZone: https://${eureka.instance.hostname}:${server.port}/eureka/\r\n**Server pom**\r\n         <parent>\r\n                     <groupId>org.springframework.boot</groupId>\r\n                     <artifactId>spring-boot-starter-parent</artifactId>\r\n                     <version>2.1.3.RELEASE</version>\r\n             </parent>\r\n              <dependency>\r\n\t\t\t<groupId>org.springframework.cloud</groupId>\r\n\t\t\t<artifactId>spring-cloud-starter-netflix-eureka-server</artifactId>\r\n\t\t</dependency>\r\n               <dependencies>\r\n\t\t\t<dependency>\r\n\t\t\t\t<groupId>org.springframework.cloud</groupId>\r\n\t\t\t\t<artifactId>spring-cloud-dependencies</artifactId>\r\n\t\t\t\t<version>Greenwich.RELEASE</version>\r\n\t\t\t\t<type>pom</type>\r\n\t\t\t\t<scope>import</scope>\r\n\t\t\t</dependency>\r\n\t\t</dependencies>\r\n\r\n**Client**\r\npom.xml\r\n<parent>\r\n        <groupId>org.springframework.boot</groupId>\r\n        <artifactId>spring-boot-starter-parent</artifactId>\r\n        <version>2.1.3.RELEASE</version>\r\n    </parent>\r\n     <dependency>\r\n\t\t\t<groupId>org.springframework.cloud</groupId>\r\n\t\t\t<artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>\r\n\t</dependency> \r\n<dependencies>\r\n     \t\t\t<dependency>\r\n     \t\t\t\t<groupId>org.springframework.cloud</groupId>\r\n     \t\t\t\t<artifactId>spring-cloud-dependencies</artifactId>\r\n     \t\t\t\t<version>Greenwich.RELEASE</version>\r\n     \t\t\t\t<type>pom</type>\r\n\t\t\t\t<scope>import</scope>\r\n     \t\t\t</dependency>\r\n     \t\t</dependencies>\r\n**application.yml**\r\nserver:\r\n  port: 8081\r\n  servlet:\r\n    context-path: /\r\neureka:\r\n    client:\r\n      registerWithEureka: true\r\n      fetchRegistry: true\r\n      serviceUrl:\r\n       defaultZone: https://XXX.com:8761/eureka ", "internal issue. resolved now =||= "], ["1190", "Spring microservice instance is not registering with Eureka running in port other than 8761", null, "karthikrajas", "06/21/19, 05:24:03 PM", "I am new to microservices and springboot, learning it. Got the following issue. Please check.\r\n\r\napplication.yml of my microservice (client to Eureka)\r\n\r\n```\r\nspring:\r\n  application:\r\n    name: queue1\r\n\r\neureka:\r\n  client:\r\n    registerWithEureka: true\r\n    fetchRegistry: true  \r\n    serviceUrl:\r\n      defaultZone: http://localhost:8762/\r\n\r\nserver:\r\n  port: 7777\r\n\r\napp:\r\n  id: ${random.uuid}\r\n```\r\n\r\napplication.yml of Eureka\r\n\r\n```\r\neureka:\r\n  instance:\r\n    hostname: peer1\r\n  client:\r\n    register-with-eureka: false\r\n    fetch-registry: false\r\nserver:\r\n  port: 8762\r\n```\r\n\r\nI am starting Eureka in port 8762 and referring to that in my microservices. Microservice is failing to register itself with Eureka. Following is the exception from microservice logs.\r\n\r\n\r\n```\r\n2019-03-21 17:02:16.248 ERROR 1804 --- [freshExecutor-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ZUUL_RIBBON/ICB8061.ibsplc.com:zuul_ribbon:8080 - was unable to refresh its cache! status = Cannot execute request on any known server\r\n\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n\tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1051) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:965) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.DiscoveryClient.refreshRegistry(DiscoveryClient.java:1479) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.DiscoveryClient$CacheRefreshThread.run(DiscoveryClient.java:1446) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [na:1.8.0_202]\r\n\tat java.util.concurrent.FutureTask.run(Unknown Source) [na:1.8.0_202]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [na:1.8.0_202]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.8.0_202]\r\n\tat java.lang.Thread.run(Unknown Source) [na:1.8.0_202]\r\n```\r\n\r\n\r\n```\r\n2019-03-21 17:02:16.278 ERROR 1804 --- [tbeatExecutor-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error. endpoint=DefaultEndpoint{ serviceUrl='http://localhost:8762/}\r\n\r\njavax.ws.rs.WebApplicationException: com.fasterxml.jackson.databind.exc.MismatchedInputException: Root name 'timestamp' does not match expected ('instance') for type [simple type, class com.netflix.appinfo.InstanceInfo]\r\n at [Source: (com.sun.jersey.client.apache4.ApacheHttpClient4Handler$HttpClientResponseInputStream); line: 1, column: 2]\r\n\tat com.netflix.discovery.provider.DiscoveryJerseyProvider.readFrom(DiscoveryJerseyProvider.java:110) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:634) ~[jersey-client-1.19.1.jar:1.19.1]\r\n\tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586) ~[jersey-client-1.19.1.jar:1.19.1]\r\n\tat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.sendHeartBeat(AbstractJerseyEurekaHttpClient.java:105) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:89) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:846) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1405) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [na:1.8.0_202]\r\n\tat java.util.concurrent.FutureTask.run(Unknown Source) [na:1.8.0_202]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [na:1.8.0_202]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.8.0_202]\r\n\tat java.lang.Thread.run(Unknown Source) [na:1.8.0_202]\r\n```\r\n\r\n\r\nNow the most important thing is, everything is perfectly fine if I change the Eureka server port and the microservice's Eureka registration port to 8761 !!!! Registration of microservice is succeding in this case.\r\n\r\nDid this multiple times before posting the question and it is behaving like this.\r\n\r\nAny inputs here would be very much helpful.", "The springboot version that I am using is 2.1.3.RELEASE.\r\nAnd the cloud version is Greenwich.RELEASE =||= @karthikrajas  hello,  did you resolve this problem? can you share? thanks! =||= Both of your configuration files are named after the hump\r\nregister-with-eureka\r\nregisterWithEureka\r\nTry to unify them\r\nMy English is poor =||= Use this in client:\r\ndefaultZone: http://localhost:8762/eureka and you will be good =||= eureka:\r\n  server:\r\n    port: 8762\r\n  client:\r\n    register-with-eureka: true\r\n    fetch-registry: true\r\n    service-url:\r\n      defaultZone: http://${EUREKA_HOST:localhost}:${EUREKA_PORT:${eureka.server.port}}/eureka/ =||= I got the same issue.  My version is 2.2.7.RELEASE.\r\ncloud version is Hoxton.SR4. Nothing above is solved the problem. =||= It's probably best to ask in the corresponding Spring repo, this is not really specific to Eureka. =||= Annotate Bootstrap class with @EnableEurekaServer =||= > Use this in client:\r\n> defaultZone: http://localhost:8762/eureka and you will be good\r\n\r\nWould u share the reason, pls \uff1f =||= "], ["1191", "Fix: DiscoveryClient NullPointException", null, "markGbug", "05/30/19, 10:18:31 PM", "there possible null pointer dereference of applications in com.netflix.discovery.DiscoveryClient.fetchRegistry . when applications is null, the log param will cause null point.", "The contract seems to be the `getApplications()` is never `null` and is not allowed to be, the code throughout the `DiscoveryClient` assumes it's not and never sets it to `null`. It's accessed without a null check in many places including the `ctor`, in fact even with this added check it makes no functional difference as it's immediately accessed without any check later in the `ctor`.\r\n\r\ni.e.\r\n\r\n```\r\n    @Override\r\n    public Applications getApplications() {\r\n        return localRegionApps.get();\r\n    }\r\n```\r\n\r\nand all `localRegionApps.set` calls check for `null` and never set it to `null`.\r\n\r\nIf you have a clear repro how this can happen without blowing up in all other places, feel free to reopen.\r\n =||= "], ["1192", "eureka client", null, "huangry999", "04/05/19, 10:09:20 AM", "NaN", "NaN"], ["1193", "How to inject com.netflix.discovery.DiscoveryClient", null, "huangry999", "05/31/19, 12:34:40 AM", "With org.springframework.cloud.client.discovery.EnableDiscoveryClient annotation I could only inject org.springframework.cloud.client.discovery.DiscoveryClient. Anyway I want to register EurekaEventListener to eureka client, so I neet the com.netflix.discovery.DiscoveryClient.\r\nHow could I do? please.", "Seems more of a Spring question than Eureka, can you try searching through Spring issues to see if this has been asked? (and the docs) =||= "], ["1194", "EUREKA-1149 Add injectable customizable EndpointRandomizer", "Mikhail Gromov", "mgtriffid", "05/31/19, 08:27:10 PM", "This is another attempt to fix #1149. This time tried to take comments from #1151 into account.\r\n\r\nDifficult thing here is that there are actually two randomizers across Eureka codebase. And the one that is used by DiscoveryClient ends up being just a call to static method. So I decided to not touch existing randomizer that is a field of DiscoveryClient (because I have no idea where can it be used) and introduced new field. This EndpointRandomizer is passed to ZoneAffinityClusterResolver through some chain of calls. I have left behavior unchanged, just made it customizeable.", "Anyone taking a look at this PR ? =||= Thanks for the PR @mgtriffid! =||= "], ["1195", ".travis.yml: The 'sudo' tag is now deprecated in Travis CI", "Christian Clauss", "cclauss", "06/10/20, 06:57:21 PM", "[Travis are now recommending removing the __sudo__ tag](https://blog.travis-ci.com/2018-11-19-required-linux-infrastructure-migration).\n\n\"_If you currently specify __sudo: false__ in your __.travis.yml__, we recommend removing that configuration_\" ", "Fixed by #1295. =||= "], ["1196", "initial-instance-info-replication-interval-seconds  didn't work.", null, "zhenzhenailzlx", "05/31/19, 12:36:51 AM", "I set  initial-instance-info-replication-interval-seconds parameter\uff0cbut it didn't work.", "Please provide a minimal repro if you believe there's a bug with the setting. =||= Closing as non-actionable for the time being. Feel free to reopen or open a new issue. =||= "], ["1197", "Persistence Backed Registry", "Sandeep Adinarayana", "sandy-adi", "06/11/19, 08:12:47 PM", "I'm trying to setup a eureka registry backed by a persistence store. I don't see any documentation around this topic. \r\nWould it be possible to configure a persistence to store all the registered applications? ", "Definitely not impossible but not something immediately pluggable into the current design. Look into \"registries\". The value of the data stored decreases exponentially over time so this has very low value in the first place. What's your use case? =||= > Definitely not impossible but not something immediately pluggable into the current design. Look into \"registries\". The value of the data stored decreases exponentially over time so this has very low value in the first place. What's your use case?\r\n\r\nThe use case is that we are using eureka in a stand alone mode, the eureka cluster might die at any time and then come back up. At this point we want the eureka cluster to hydrate itself with the previously registered services. =||= I'm not sure of the value of such feature as I mentioned the data is essentially worthless as it gets stale, focus on making the cluster available so it does not die all at once and rely on heartbeats to restore the data vs preloading some stale cache. =||= The heartbeats are applicable only when your services have a eureka client right? our services are not all on Java and we will have to end up writing a eureka client for every stacke which IMO is not the best way to go about it. \r\n\r\n Also it's not a stale cache, we actually have an abstraction API over eureka that updates the persistent store in addition to eureka. We were exploring use of archaius to keep eureka in sync with the persistent store but havent made  progress with that approach yet.\r\n\r\nIsnt it risky to assume that your whole cluster will never go down?  =||= > The heartbeats are applicable only when your services have a eureka client right? our services are not all on Java and we will have to end up writing a eureka client for every stacke which IMO is not the best way to go about it.\r\n\r\nI agree this is not the best way to do it, I would personally recommend to implement a sidecar which registers services in discovery instead, i.e. have a small process on localhost which hits your service healthcheck endpoint and if that returns success, heartbeats to discovery on your behalf. This way you don't have to implement Eureka clients in every stack, it has other benefits like proper startup sequence order, network connectivity check (loopback but still), etc.\r\n\r\n> Also it's not a stale cache, we actually have an abstraction API over eureka that updates the persistent store in addition to eureka. We were exploring use of archaius to keep eureka in sync with the persistent store but havent made progress with that approach yet.\r\n> \r\n> Isnt it risky to assume that your whole cluster will never go down?\r\n\r\nI look at this differently, say everything crashes, the entire Eureka cluster:\r\n\r\n- The clients still have the Eureka data, it's going stale but there's no outage (yet).\r\n- Make sure when Eureka nodes crash new ones start up in their place fast, ideally under a minute.\r\n- New node(s) came up.\r\n- Your services started to heartbeat to the new Eureka nodes, Eureka data is fresh again and the service is fully restored.\r\n\r\nIn this absolutely disastrous scenario (all nodes went down) you did not even have an outage and had slightly stale Eureka data for couple minutes while the new nodes were coming up.\r\n\r\nIs it worth it to add a bunch of complexity to replicate the data somewhere just to mitigate couple minutes of stale data once a couple months (this is pessimistic)? =||= "], ["1198", "move gain of lastDirtyTimestamp before gain of status to avoid race condition", "Addo.Zhang", "addozhang", "06/21/19, 05:41:37 PM", "refer to solution of #1174", "PR #1198  =||= "], ["1199", "Spring Boot Actuator strange behavior", "Tobias Tschech", "tschechniker", "05/31/19, 12:39:43 AM", "Hi,\r\n\r\nwe discovered a strange behavior with the spring boot actuator and the eureka check.\r\n\r\nWhenever a Services gets deleted in the Eureka server the eureka status in the actuator turns from up to down.\r\n\r\n\r\nUp output of actuator:\r\n```json\r\n\"discoveryComposite\": {\r\n      \"status\": \"UP\",\r\n      \"details\": {\r\n        \"discoveryClient\": {\r\n          \"status\": \"UP\",\r\n          \"details\": {\r\n            \"services\": [\r\n              \"SERVICE-1\",\r\n              \"SERVICE-2\",\r\n            ]\r\n          }\r\n        },\r\n        \"eureka\": {\r\n          \"description\": \"Remote status from Eureka server\",\r\n          \"status\": \"UP\",\r\n          \"details\": {\r\n            \"applications\": {\r\n              \"SERVICE-1\": 1,\r\n              \"SERVICCE-2\": 1,\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n```\r\n\r\nDown output:\r\n\r\n```json\r\n   \"discoveryComposite\": {\r\n      \"description\": \"Remote status from Eureka server\",\r\n      \"status\": \"DOWN\",\r\n      \"details\": {\r\n        \"discoveryClient\": {\r\n          \"status\": \"UP\",\r\n          \"details\": {\r\n            \"services\": [\r\n              \"SERVICE-1\",\r\n            ]\r\n          }\r\n        },\r\n        \"eureka\": {\r\n          \"description\": \"Remote status from Eureka server\",\r\n          \"status\": \"DOWN\",\r\n          \"details\": {\r\n            \"applications\": {\r\n              \"SERVICE-1\": 1,\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n```\r\n\r\nI did not find any documentation about the actuator indicators of eureka. Why does one shows up and the other down? ", "That's because spring boot support isn't here but in spring-cloud-netflix. =||= Thanks for the replay. I will ask in the spring-cloud-netflix project ;) =||= Thanks @spencergibb! =||= "], ["1200", "java.net.URISyntaxException: Illegal character in authority - Eureka with AWS ECS ", "Jitesh Prajapati", "jitesh-prajapati123", "05/31/19, 12:40:53 AM", "I have successfully registered AWS ECS containers with Eureka. When I run service discovery, it errors that there is an illegal character in URL.\r\n\r\njava.net.URISyntaxException: Illegal character in authority at index 7: http://10.0.4.75 :32922/volvo-survey/tags [Check space/hidden special char after IP address].\r\n\r\nCheck the attached screenshot.\r\n\r\n![error](https://user-images.githubusercontent.com/19203741/56721800-45ae8800-6763-11e9-9d77-852cf1f3a167.png)\r", "Please provide a minimal repro if possible and reopen. =||= "], ["1201", "\"eureka\" does not support \"ipv6\"?", "ZHUO", "zhuozl", "11/08/19, 09:05:20 PM", "NaN", "Please elaborate. What is the specific issue you're experiencing? =||= > Please elaborate. What is the specific issue you're experiencing?\r\n\r\nregistry spring-config-server and spring-config-client in ipv6 environment, spring-config-client get error spring-config-server uri ,the rui lack of \"[]\". I follow spring-config-client code , find this maby config-client bug . =||= You may want to include the setup and the specific error you're getting together with the full stack trace, otherwise hard to even localize the issue to any component. =||= "], ["1202", "Failed to register to eureka server with spring security", "Torres Lei", "403Unauthorized", "05/31/19, 12:41:48 AM", "I have tried many times, but it failed every time.\r\nSpring Boot Version: 2.1.3.RELEASE\r\nSpring Cloud Version: Greenwich.RELEASE\r\n\r\nThere is eureka server's configuration:\r\n```\r\nspring:\r\n  application:\r\n    name: registration-center\r\n  security:\r\n    user:\r\n      name: eureka\r\n      password: 123456\r\nserver:\r\n  port: 8761\r\neureka:\r\n  instance:\r\n    hostname: localhost\r\n  client:\r\n    fetch-registry: false\r\n    register-with-eureka: false\r\n    service-url:\r\n      default-zone: http://eureka:123456@${eureka.instance.hostname}:${server.port}/eureka/\r\n  server:\r\n    enable-self-preservation: false\r\n```\r\nAnd this is eureka client's configuration:\r\n```\r\nspring:\r\n  cloud:\r\n    gateway:\r\n      discovery:\r\n        locator:\r\n          enabled: true\r\n      routes:\r\n      - id: route_service_user\r\n        uri: lb://SERVICE-USER\r\n        predicates:\r\n        - Path=/user/**\r\n  application:\r\n    name: gateway-client\r\nserver:\r\n  port: 8901\r\neureka:\r\n  client:\r\n    servers-url:\r\n      default-zone: http://eureka:123456@localhost:8761/eureka\r\n    register-with-eureka: true\r\n    fetch-registry: true\r\n  instance:\r\n    prefer-ip-address: true\r\n    hostname: localhost\r\n```\r\nI also tried to disable csrf:\r\n```\r\n@EnableWebSecurity\r\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable()\r\n                .authorizeRequests()\r\n                .antMatchers(\"/actuator/**\").permitAll()\r\n                .anyRequest()\r\n                .authenticated()\r\n                .and().httpBasic();\r\n    }\r\n}\r\n```\r\nIt bothers me a lot, could you please help me out?", "Try Spring Cloud support, this is not really directly related to Eureka based on my understanding. =||= "], ["1203", "Change woodstox-core-asl to woodstox-core", null, "svenhaag", "06/12/19, 12:19:36 AM", "Currently eureka-core uses woodstox-core-asl 4.4.1 which is no longer maintained. Please change to the current woodstox-core dependency (https://github.com/FasterXML/woodstox).", "NaN"], ["1204", "Can I dynamically change the zone to which the client belongs after the client starts?", "devzwd", "zwdgit", "05/31/19, 12:42:56 AM", "NaN", "Probably better not to, heartbeats won't transmit this so you'd need to detect it yourself and re-register. =||= "], ["1205", "Euraka server warning in java 11", "\u7b71\u8fdbGG", "zhaokejin", "05/31/19, 12:43:52 AM", "`WARNING: An illegal reflective access operation has occurred\r\nWARNING: Illegal reflective access by com.thoughtworks.xstream.core.util.Fields (file:/D:/Java/m2/repository/com/thoughtworks/xstream/xstream/1.4.10/xstream-1.4.10.jar) to field java.util.TreeMap.comparator\r\nWARNING: Please consider reporting this to the maintainers of com.thoughtworks.xstream.core.util.Fields\r\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\nWARNING: All illegal access operations will be denied in a future release`", "The project is largely Java 8 at this point but we're open to PRs for better Java 11 compatibility. =||= "], ["1206", "can not build eureka with gradle in Java 11", "Sinux", "shinux", "05/31/19, 12:44:58 AM", "with gradle-2.10-bin.zip or version below `4`:\r\n\r\n```\r\n* What went wrong:\r\nCould not determine java version from '11.0.1'.\r\n```\r\n\r\nwith gradle-5.4.1-bin.zip:\r\n\r\n```\r\nAn exception occurred applying plugin request [id: 'nebula.netflixoss', version: '3.6.0']\r\n> Failed to apply plugin [class 'nebula.plugin.info.dependencies.DependenciesInfoPlugin']\r\n   > Could not create plugin of type 'DependenciesInfoPlugin'.\r\n      > No signature of method: org.gradle.api.internal.artifacts.ivyservice.ivyresolve.strategy.DefaultVersionComparator.asStringComparator() is applicable for argument types: () values: []\r\n        Possible solutions: asVersionComparator()\r\n```\r\n\r", "downgrade java to 8 solves the problem.\r\n\r\nBut if java 11 is not compatible with building eureka by gradle or required some customization, documentation is supposed to point it out. =||= The project is largely a Java 8 one, we'd be open to PRs improving the Java 11 support though.  =||= "], ["1207", "Redeploying an Eureka server does not stop all threads and timers", "Stephan Windm\u00fcller", "windmueller", "11/13/19, 06:08:59 PM", "Our web application uses spring-cloud-netflix-eureka-server in version 2.1.1.RELEASE. When it is redeployed without restarting the application server, we get messages like\r\n\r\n````\r\norg.apache.catalina.loader.WebappClassLoaderBase.checkThreadLocalMapForLeaks The web\r\napplication [MyWebApp] created a ThreadLocal with key of type [java.lang.ThreadLocal]\r\n(value [java.lang.ThreadLocal@f049ac9]) and a value of type [com.netflix.eureka.Version]\r\n(value [V2]) but failed to remove it when the web application was stopped. Threads are going\r\nto be renewed over time to try and avoid a probable memory leak.\r\n````\r\n\r\nand\r\n\r\n````\r\norg.apache.catalina.loader.WebappClassLoaderBase.clearReferencesThreads The web\r\napplication [MyWebApp] appears to have started a thread named [Eureka-CacheFillTimer]\r\nbut has failed to stop it. This is very likely to create a memory leak.\r\n````\r\n\r\nThe latter is shown for\r\n\r\n- `ReplicaAwareInstanceRegistry - RenewalThresholdUpdater`\r\n- `Eureka-JerseyClient-Conn-Cleaner`\r\n- `Eureka-CacheFillTimer`\r\n\r\nFor example, the CacheFillTimer is started in `ResponseCacheImpl` as a daemon but never stopped. This results in errors like\r\n\r\n````\r\norg.apache.catalina.loader.WebappClassLoaderBase.checkStateForResourceLoading\r\nIllegal access: this web application instance has been stopped already. Could not load [ch.qos.logback.classic.spi.ThrowableProxy].\r\nThe following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\r\njava.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [ch.qos.logback.classic.spi.ThrowableProxy].\r\n````\r\n\r\nThese issues can cause resource problems on the application server. It would be great if Eureka stops all timers and threads on shutting the application for redeployment.\r", "Thanks for the report @stovocor, this sounds reasonable and if anyone's interested in addressing this we can discuss the fix here.\r\n\r\nConsidering that we never redeploy in place and the workaround is simple (server restart), we will not be fixing this ourselves. =||= Which version to use for this fix?\r\nis `2020.0.0-M1` ok? Or `Hoxton.RC2` works too? =||= Releases -> Search for the commit msg / hash you're interested in.\r\nIn this case you want https://github.com/Netflix/eureka/releases/tag/v1.9.14 and above.\r\n\r\n> is 2020.0.0-M1 ok? Or Hoxton.RC2 works too?\r\n\r\nNo idea what these strings are, they are not Eureka versions. =||= Those are spring cloud release trains. Hoxton.SR5 is the latest that you shsould be using in production. https://search.maven.org/artifact/org.springframework.cloud/spring-cloud-netflix-dependencies/2.2.3.RELEASE/pom =||= "], ["1208", "RetryableEurekaHttpClient candidateHosts size may improve to avoid quarantineSet not be cleared", "iZDT", "izdt", "11/08/19, 09:08:14 PM", "Assume we have a same url in two zone(some reasons, although it's not reasonable), simply the configuration file as flows:\r\n\r\n```\r\neureka.client.region=region1\r\neureka.client.availability-zones.region1 = zone1,zone2\r\neureka.client.serviceUrl.zone1=http://localhost:8080/eureka\r\neureka.client.serviceUrl.zone2=http://localhost:8080/eureka\r\neureka.client.transport.retryableClientQuarantineRefreshPercentage=1\r\n```\r\nIf eureka server is not available, then the url will be added to quarantineSet. Client will not be able to re-register to eureka server when eureka server restarted (Always throw throw exception \"There is no known eureka server; cluster server list is empty\").\r\n\r\nI analyse the code of RetryableEurekaHttpClient in the eureka-client:\r\n```\r\n  private final Set<EurekaEndpoint> quarantineSet = new ConcurrentSkipListSet<>();\r\n\r\n  ...\r\n\r\n\t if (currentEndpoint != null) {\r\n                quarantineSet.add(currentEndpoint);\r\n         }\r\n  ...\r\n\r\n  private List<EurekaEndpoint> getHostCandidates() {\r\n        List<EurekaEndpoint> candidateHosts = clusterResolver.getClusterEndpoints();\r\n        quarantineSet.retainAll(candidateHosts);\r\n\r\n        // If enough hosts are bad, we have no choice but start over again\r\n        int threshold = (int) (candidateHosts.size() * transportConfig.getRetryableClientQuarantineRefreshPercentage());\r\n        //Prevent threshold is too large\r\n        if (threshold > candidateHosts.size()) {\r\n            threshold = candidateHosts.size();\r\n        }\r\n        if (quarantineSet.isEmpty()) {\r\n            // no-op\r\n        } else if (quarantineSet.size() >= threshold) {\r\n            logger.debug(\"Clearing quarantined list of size {}\", quarantineSet.size());\r\n            quarantineSet.clear();\r\n        } else {\r\n            List<EurekaEndpoint> remainingHosts = new ArrayList<>(candidateHosts.size());\r\n            for (EurekaEndpoint endpoint : candidateHosts) {\r\n                if (!quarantineSet.contains(endpoint)) {\r\n                    remainingHosts.add(endpoint);\r\n                }\r\n            }\r\n            candidateHosts = remainingHosts;\r\n        }\r\n\r\n        return candidateHosts;\r\n  }\r\n```\r\n\r\nThe problem is: threshold use ```candidateHosts.size()``` (Use ```List```), but only ```quarantineSet.size() >= threshold``` the quarantineSet can be cleared.\r\nAlthough two zones is diferent ```AwsEndpoint```, they are the same ```EurekaEndpoint```. At this time quarantineSet size is 1, but threshold is 2, quarantineSet.size() will always smaller than threshold. QuarantineSet will never be cleared, so client will not be able to re-register to eureka server when eureka server restarted.\r\n\r\n\r\nMy solution is translate candidateHosts list to set, and then use the candidateHostsSetSize:\r\n```\r\n    private List<EurekaEndpoint> getHostCandidates() {\r\n        List<EurekaEndpoint> candidateHosts = clusterResolver.getClusterEndpoints();\r\n        quarantineSet.retainAll(candidateHosts);\r\n\r\n\t // Use Set to remove the same EurekaEndpoint in the List to prevent threshold always larger than quarantineSet size\r\n        int candidateHostsSetSize = (new ConcurrentSkipListSet<>(candidateHosts)).size();\r\n        // If enough hosts are bad, we have no choice but start over again\r\n        int threshold = (int) (candidateHostsSetSize * transportConfig.getRetryableClientQuarantineRefreshPercentage());\r\n        //Prevent threshold is too large\r\n        if (threshold > candidateHostsSetSize) {\r\n            threshold = candidateHostsSetSize;\r\n        }\r\n\tif (quarantineSet.isEmpty()) {\r\n            // no-op\r\n        } else if (quarantineSet.size() >= threshold) {\r\n            logger.debug(\"Clearing quarantined list of size {}\", quarantineSet.size());\r\n            quarantineSet.clear();\r\n        } \r\n   ...\r\n  }\r\n```\r\n\r\n\r", "> Assume we have a same url in two zone\r\n\r\nI think this is not reasonable and does not make sense to \"support\" in this way or any other way except for maybe better validation. =||= \r\n> I think this is not reasonable and does not make sense to \"support\" in this way or any other way except for maybe better validation.\r\n\r\nYes, putting a same url in two zone is meaningless. However, in actual use, in order to be highly available, there may be an additional edge address in two zone (after all, there is no document to point out it is forbidden), but once we do this, it will be dangerous. Because if eureka server network is shortbale unavailable, it will not be able to recover since the quarantineSet cannot be cleared.\r\nTherefore, I personally not agree it's an additional validation, after all, it is not reasonable to compare the size of Set with the size of List. Of course, I have considered other solutions, but the smallest and easiest way to change is to compare size with the same structure. So I hope to solve this issuse to avoid the risk, maybe there is a better way?\r\n =||= > Yes, putting a same url in two zone is meaningless.\r\n\r\nMy point exactly. The url cannot be the same by definition, otherwise that's just the same zone, two urls which are the same point to the same thing.\r\n\r\n> in actual use, in order to be highly available, there may be an additional edge address in two zone (after all, there is no document to point out it is forbidden), but once we do this, it will be dangerous\r\n\r\nCan you elaborate? Could you give an example maybe?\r\n\r\nAs for the document, there's no strict requirements doc for everything so some things are assumed where reasonable (like here).\r\n\r\nI understand the bug you observed and understand the potential fix you proposed, the thing is that the system should not work around bad config and hide potential issues, this can manifest in other places and the system should fail early not continue pretending \"it's fine\" if two servers point to the same address. In this case I'd rather reject the configuration as fundamentally invalid. =||= > Can you elaborate? Could you give an example maybe?\r\n> \r\n> As for the document, there's no strict requirements doc for everything so some things are assumed where reasonable (like here).\r\n> \r\n> I understand the bug you observed and understand the potential fix you proposed, the thing is that the system should not work around bad config and hide potential issues, this can manifest in other places and the system should fail early not continue pretending \"it's fine\" if two servers point to the same address. In this case I'd rather reject the configuration as fundamentally invalid.\r\n\r\n\r\nThanks for your reply and explain. It's much reasonable to check the config first and prevent the potential issues.\r\nI gave a bad example, actually, we never config like this. This is a simple example to explain this issue. \r\nI found this issue at a high-available exercise, and I spent few hours to find out why eureka servers alaways not available.\r\nWe use eureka with a large-scale nodes, to make the server more high available, we use multi-zone config, and we want use a smart DNS to resolve serviceUrls:\r\n```\r\neureka:\r\n client:\r\n   region: abc\r\n   useDnsForFetchingServiceUrls: true\r\n   eurekaServerPort: 10101\r\n   eurekaServerDNSName: demo.com\r\n   eurekaServerURLContext: eureka\r\n```\r\nand the DNS txt is:\r\n```\r\ntxt.abc.demo.com -> aregion.abc.demo.com bregion.abc.demo.com\r\ntxt.aregion.abc.demo.com to 10.0.0.1 10.0.0.2\r\ntxt.bregion.abc.demo.com to 10.0.1.3 10.0.1.4\r\n```\r\nIt works fine, but when bregion is down, the DNS will dynamic to resolve bregion address to aregion address.The problem comes... then I thought could we fix this.  Now I think we shouldn't let the Smart DNS to resolve urls dynamically, just let eureka client do by itself.\r\nThanks for your time to discuss this issue with me.  =||= "], ["1209", "Eureka client sends a heartbeat with a chance to fail. \"om.sun.jersey.api.client.ClientHandlerException: org.apache.http.NoHttpResponseException: 172.28.7.245:9000 failed to respond\"", "Michael Ge", "Michael-Ge", "07/08/19, 05:53:09 PM", "SpringCloud Ver: Greenwich.SR1", "SpringCloud Ver: Greenwich.SR1\r\nThe Eureka client and the Eureka server are on the same server, but the heartbeat fails to be sent. The error message is as follows:\r\n20:50:32.271 [DiscoveryClient-HeartbeatExecutor-0] ERROR com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient - Request execution error. endpoint=DefaultEndpoint{ serviceUrl='http://172.28.7.245:9000/eureka/}\r\ncom.sun.jersey.api.client.ClientHandlerException: org.apache.http.NoHttpResponseException: 172.28.7.245:9000 failed to respond\r\n\tat com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187) ~[jersey-apache-client4-1.19.1.jar:1.19.1]\r\n\tat com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123) ~[jersey-client-1.19.1.jar:1.19.1]\r\n\tat com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.sun.jersey.api.client.Client.handle(Client.java:652) ~[jersey-client-1.19.1.jar:1.19.1]\r\n\tat com.sun.jersey.api.client.WebResource.handle(WebResource.java:682) ~[jersey-client-1.19.1.jar:1.19.1]\r\n\tat com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74) ~[jersey-client-1.19.1.jar:1.19.1]\r\n\tat com.sun.jersey.api.client.WebResource$Builder.put(WebResource.java:529) ~[jersey-client-1.19.1.jar:1.19.1]\r\n\tat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.sendHeartBeat(AbstractJerseyEurekaHttpClient.java:102) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) ~[eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:89) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:846) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1405) [eureka-client-1.9.8.jar:1.9.8]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\r\n\tat java.lang.Thread.run(Thread.java:834) [?:?]\r\nCaused by: org.apache.http.NoHttpResponseException: 172.28.7.245:9000 failed to respond\r\n\tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:141) ~[httpclient-4.5.8.jar:4.5.8]\r\n\tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56) ~[httpclient-4.5.8.jar:4.5.8]\r\n\tat org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259) ~[httpcore-4.4.11.jar:4.4.11]\r\n\tat org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:294) ~[httpcore-4.4.11.jar:4.4.11]\r\n\tat org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:257) ~[httpclient-4.5.8.jar:4.5.8]\r\n\tat org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:230) ~[httpclient-4.5.8.jar:4.5.8]\r\n\tat org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273) ~[httpcore-4.4.11.jar:4.4.11]\r\n\tat org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125) ~[httpcore-4.4.11.jar:4.4.11]\r\n\tat org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:679) ~[httpclient-4.5.8.jar:4.5.8]\r\n\tat org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:481) ~[httpclient-4.5.8.jar:4.5.8]\r\n\tat org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835) ~[httpclient-4.5.8.jar:4.5.8]\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:118) ~[httpclient-4.5.8.jar:4.5.8]\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.8.jar:4.5.8]\r\n\tat com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173) ~[jersey-apache-client4-1.19.1.jar:1.19.1]\r\n\t... 26 more\r\n\r\nWhen I excluded the jersey from the Eureka Client, the problem was solved. Why?\r\n\r\n            <dependency>\r\n                <groupId>org.springframework.cloud</groupId>\r\n                <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>\r\n                <version>2.1.1.RELEASE</version>\r\n                <exclusions>\r\n                    <exclusion>\r\n                        <groupId>com.sun.jersey</groupId>\r\n                        <artifactId>jersey-client</artifactId>\r\n                    </exclusion>\r\n                    <exclusion>\r\n                        <groupId>com.sun.jersey</groupId>\r\n                        <artifactId>jersey-core</artifactId>\r\n                    </exclusion>\r\n                    <exclusion>\r\n                        <groupId>com.sun.jersey.contribs</groupId>\r\n                        <artifactId>jersey-apache-client4</artifactId>\r\n                    </exclusion>\r\n                </exclusions>\r\n            </dependency> =||= Was the server actually reachable? Could you say curl it or telnet? =||= The Eureka Server and Client are on the same server and are connected via the local IP address. =||= This does not actually mean there was connectivity and/or the server was actually up and listening. =||= Try localizing the issue to either the server or the client by checking connectivity to the server using the tools I suggested or really anything else. =||= "], ["1210", "Enhance getHostCandidates method to avoid quarantineSet never be cleared", "iZDT", "izdt", "06/21/19, 05:49:52 PM", "Fix #1208 \r\nUse ```ConcurrentSkipListSet```  to remove  duplicates  in the ```List<EurekaEndpoint>``` candidateHosts to avoid threshold always larger than quarantineSet size.\r", "See the comment in the linked issue, this does not make sense from the configuration standpoint, better validation is a maybe but actual support is not an option (and I doubt it would not go hay wire in other places) anyway. =||= "], ["1211", "No way to add additional HttpHeader to all peer replication calls", "Yuxin Bai", "LittleBaiBai", "06/07/19, 05:52:13 PM", "Currently, all `PeerEurekaNode` are created by a protected method on singleton `PeerEurekaNodes.createPeerEurekaNode()`, which calls a static method on `JerseyReplicationClient.createReplicationClient()` to create a `HttpReplicationClient`. I don't see an easy way to add additional ClientFilter to the client.\r\n\r\nI see two ways to solve this issue based:\r\n1. Add an `addReplicationClientFilter` method to the `HttpReplicationClient` interface. This way I can just override the `createPeerEurekaNode` with my additional filter when creating my new `PeerEurekaNodes`. It's not the cleanest solution, but will be a very small PR.\r\n2. Similar to how singleton `DiscoveryClient` takes in `DiscoveryClientOptionalArgs`, singleton `PeerEurekaNodes` can take in `ReplicationClientOptionalArgs`, and pass it down to create `HttpReplicationClient`. This is definitely a cleaner and more extensive solution than the first one, but requires more testing.\r\n\r\nAny inputs here would be very much helpful.", "NaN"], ["1212", "add ClientFilter to HttpReplicationClient", "Yuxin Bai", "LittleBaiBai", "06/07/19, 04:11:14 PM", "Connects to #1211", "@elandau Based on your comment of \"only allow adding filters at creation time\", I did this quick spike on how that could look like: https://github.com/Netflix/eureka/compare/master...LittleBaiBai:add-additional-filters-on-creation.\r\n\r\nI haven't tested this yet. Do you think this is on the right (or better) direction? =||= @LittleBaiBai I think the current implementation (this PR) is fine.  I actually view the existing pattern of passing in an object of optional dependencies as poor api design.  That pattern came about as a hack around Guice's poor support for optional injection.  If we ever decide to refactor this code I'd prefer to deprecate all constructors and switch to the builder pattern.   =||= "], ["1213", "eureka 2.0.4  automatically stop after a few hours", null, "brookliu123", "07/08/19, 05:52:47 PM", "my eureka server automatically stop after a few hours \r\nlog print\uff1a\r\n\r\n2019-06-06 20:30:55.792  INFO 32377 --- [      Thread-15] ConfigServletWebServerApplicationContext : Closing org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@56ef9176: startup date [Thu Jun 06 11:36:59 CST 2019]; parent: org.springframework.context.annotation.AnnotationConfigApplicationContext@3834d63f\r\n2019-06-06 20:30:55.793  INFO 32377 --- [      Thread-15] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application unknown with eureka with status DOWN\r\n2019-06-06 20:30:55.795  INFO 32377 --- [      Thread-15] o.s.c.support.DefaultLifecycleProcessor  : Stopping beans in phase 0\r\n2019-06-06 20:30:55.796  INFO 32377 --- [      Thread-15] c.n.eureka.DefaultEurekaServerContext    : Shutting down ...\r\n2019-06-06 20:30:55.800  INFO 32377 --- [      Thread-15] c.n.eureka.DefaultEurekaServerContext    : Shut down\r\n2019-06-06 20:30:55.803  INFO 32377 --- [      Thread-15] o.s.j.e.a.AnnotationMBeanExporter        : Unregistering JMX-exposed beans on shutdown\r\n2019-06-06 20:30:55.803  INFO 32377 --- [      Thread-15] o.s.j.e.a.AnnotationMBeanExporter        : Unregistering JMX-exposed beans\r\n2019-06-06 20:30:55.806  INFO 32377 --- [      Thread-15] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...\r\n2019-06-06 20:30:55.806  INFO 32377 --- [      Thread-15] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient", "Looks like a graceful shutdown to me, if you believe there's a bug leading to this, please include a minimal repro. =||= "], ["1214", "Add unit tests for com.netflix.discovery.util.EurekaEntityFunctions", "Braavos", "EricHetti", "07/08/19, 09:53:32 PM", "I've analysed your codebase and noticed that `com.netflix.discovery.util.EurekaEntityFunctions` is not fully tested.\r\nI've written some tests for the methods in this class with the help of [Diffblue Cover](https://www.diffblue.com/opensource).\r\n\r\nHopefully, these tests will help you detect any regressions caused by future code changes. If you would find it useful to have additional tests written for this repository, I would be more than happy to look at other classes that you consider important.", "Thanks for the PR! =||= btw, if you're looking for test-related tasks, fixing the flakiness would be the top one probably. =||= > btw, if you're looking for test-related tasks, fixing the flakiness would be the top one probably.\r\n\r\nDo you have any specific class in mind which you would like me to have a look at? :) =||= > Do you have any specific class in mind which you would like me to have a look at? :)\r\n\r\nno not really, just run the tests multiple times and see if you get any intermittent failures, the ones failing would be flaky and something we'd appreciate to have fixed. =||= Hi @troshko111 just following up and wondering if you would like me to make any changes to the PR? =||= Sorry did not realize this got updated, for the future can you please not rebase PR iterations? It makes the review very hard (every iteration has to be reviewed again as a completely new change without any intermediate diffs). =||= "], ["1215", "RestTemplate call \"I/O error on GET request for\" - PCFDEV - Eureka", "Praveen MK", "mkpraveen", "06/11/19, 10:44:34 PM", "I'm getting below error when I make resttemplate call as below.\r\nTo me it looks like random generated hostname is not accessible.\r\n\r\nI use pcfdev-v0.30.2+PCF1.11.0-windows ,  pcfdev-v1.2.0-windows. spring-boot.2.1.3.\r\n\r\n// Get movie details\r\nMovieDetails movieDetails = \r\nrestTemplate.getForObject(\"http://movie-details-service/jpamovies/\" + movieId, MovieDetails.class);\r\n\r\n\"message\": \"I/O error on GET request for \\\"http://movie-details-service/jpamovies/2\\\": 7c6b7bdc-36ca-4b0f-77d9-f2f2; nested exception is java.net.UnknownHostException: 7c6b7bdc-36ca-4b0f-77d9-f2f2\",\r\n\r\n\r\nI'm having Eureka server registration as below.\r\n\r\n\r\nApplication | AMIs | Availability Zones | Status\r\n-- | -- | -- | --\r\nMOVIE-CATALOG-SERVICE | n/a\u00a0(1) | (1) | UP\u00a0(1) -\u00a0bdd136c3-c3e6-4333-4840-fcd0\r\nMOVIE-DETAILS-SERVICE | n/a\u00a0(1) | (1) | UP\u00a0(1) -\u00a07c6b7bdc-36ca-4b0f-77d9-f2f2\r\n\r\nPlease help to resolve the issue.", "This does not seem to be related to Eureka (as shown above the registration data seems fine), consider checking the docs for the client used (Spring). =||= "], ["1216", "Update woodstox to 5.x", null, "troshko111", "06/12/19, 12:14:53 AM", "Addresses #1203.", "NaN"], ["1217", "SSL for Eureka Peer server communication", null, "venkatesh-007", "06/13/19, 04:53:25 PM", "Hi Team,\r\n\r\nI've been trying to have Service Registration and discovery using Eureka over SSL for java application(Spring boot based)\r\n\r\nMy Eureka Clients are able to register with Eureka Server Service over ssl (by using DiscoveryClient.DiscoveryClientOptionalArgs bean modification) illustrated below:\r\n\r\n```\r\n@Bean\r\n\tpublic DiscoveryClient.DiscoveryClientOptionalArgs getTrustStoredEurekaClient(SSLContext sslContext) {\r\n\t\tDiscoveryClient.DiscoveryClientOptionalArgs args = new DiscoveryClient.DiscoveryClientOptionalArgs();\r\n\t\targs.setSSLContext(sslContext);\r\n\t\treturn args;\r\n\t}\r\n\t@Bean\r\n\tpublic SSLContext sslContext() throws Exception {\r\n\t\treturn new SSLContextBuilder()\r\n\t\t\t\t.loadTrustMaterial(trustStore, trustStorePassword.toCharArray())\r\n\t\t\t\t.loadKeyMaterial(keyStore, keyStorePassword.toCharArray(), keyPassword.toCharArray())\r\n\t\t\t\t.build();\r\n\t}\r\n```  \r\nThe code above uses keystore, truststore to configure DiscoveryClientOptionalArgs\r\nThat kind of works well for a single eureka server \r\n\r\nNow when i'm trying to have multiple eureka servers(an eureka cluster with each 2 servers which are peer of each other) \r\n\r\nMy two eureka servers are not able to sync up with each other\r\nDoes Eureka uses some other HttpClient implementation for syncing the peer registries that needs to custom configured(Similar to EurekaJerseyClient and DiscoveryClientArgs used for Eureka Client to Eureka Server Heartbeats)?\r\n\r\nNeed Suggestions and help to find out approach for having peer eureka service syncing over ssl\r\n\r\n\r", "Refer to https://github.com/spring-cloud/spring-cloud-netflix/issues/3563  =||= "], ["1218", "Put back deprecated constructor", null, "elandau", "06/13/19, 06:29:30 PM", "NaN", "NaN"], ["1219", "Trouble connecting to eureka server on AWS server", null, "itziklavon", "06/21/19, 05:16:28 PM", "Hi, getting the following error when trying to register server to eureka -\r\n`\r\n2019-06-20 10:16:30.642 [ERROR] [main] [org.springframework.cloud.netflix.eureka.serviceregistry.EurekaRegistration:120] error getting CloudEurekaClient\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'scopedTarget.eurekaClient' defined in class path resource [org/springframework/cloud/netflix/eureka/EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.netflix.discovery.EurekaClient]: Factory method 'eurekaClient' threw exception; nested exception is java.lang.RuntimeException: Failed to initialize DiscoveryClient!\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:627)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:607)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1321)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1160)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$1(AbstractBeanFactory.java:356)\r\n        at org.springframework.cloud.context.scope.GenericScope$BeanLifecycleWrapper.getBean(GenericScope.java:389)\r\n        at org.springframework.cloud.context.scope.GenericScope.get(GenericScope.java:186)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:353)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n        at org.springframework.aop.target.SimpleBeanTargetSource.getTarget(SimpleBeanTargetSource.java:35)\r\n        at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaRegistration.getTargetObject(EurekaRegistration.java:129)\r\n        at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaRegistration.getEurekaClient(EurekaRegistration.java:117)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282)\r\n        at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:499)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\r\n        at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaRegistration$$EnhancerBySpringCGLIB$$b156ec7e.getEurekaClient(<generated>)\r\n        at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry.maybeInitializeClient(EurekaServiceRegistry.java:57)\r\n        at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry.register(EurekaServiceRegistry.java:38)\r\n        at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration.start(EurekaAutoServiceRegistration.java:83)\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:182)\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.access$200(DefaultLifecycleProcessor.java:53)\r\n        at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:360)\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:158)\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:122)\r\n        at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:893)\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.finishRefresh(ServletWebServerApplicationContext.java:161)\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:552)\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:140)\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:742)\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:389)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)\r\n        at com.bo.operators.OperatorsWebApplication.main(OperatorsWebApplication.java:25)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:47)\r\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:86)\r\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:50)\r\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:51)\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.netflix.discovery.EurekaClient]: Factory method 'eurekaClient' threw exception; nested exception is java.lang.RuntimeException: Failed to initialize DiscoveryClient!\r\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622)\r\n        ... 46 common frames omitted\r\nCaused by: java.lang.RuntimeException: Failed to initialize DiscoveryClient!\r\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:411)\r\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:269)\r\n        at org.springframework.cloud.netflix.eureka.CloudEurekaClient.<init>(CloudEurekaClient.java:67)\r\n        at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration.eurekaClient(EurekaClientAutoConfiguration.java:330)\r\n        at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration$$EnhancerBySpringCGLIB$$5c47663.CGLIB$eurekaClient$0(<generated>)\r\n        at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration$$EnhancerBySpringCGLIB$$5c47663$$FastClassBySpringCGLIB$$f69df780.invoke(<generated>)\r\n        at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\r\n        at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363)\r\n        at org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration$$EnhancerBySpringCGLIB$$5c47663.eurekaClient(<generated>)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n        ... 47 common frames omitted\r\nCaused by: java.lang.ExceptionInInitializerError: null\r\n        at com.netflix.discovery.converters.wrappers.CodecWrappers$XStreamXml.<init>(CodecWrappers.java:358)\r\n        at com.netflix.discovery.converters.wrappers.CodecWrappers.create(CodecWrappers.java:133)\r\n        at com.netflix.discovery.converters.wrappers.CodecWrappers.getEncoder(CodecWrappers.java:75)\r\n        at com.netflix.discovery.converters.wrappers.CodecWrappers.getEncoder(CodecWrappers.java:66)\r\n        at com.netflix.discovery.provider.DiscoveryJerseyProvider.<init>(DiscoveryJerseyProvider.java:77)\r\n        at com.netflix.discovery.shared.transport.jersey.EurekaJerseyClientImpl$EurekaJerseyClientBuilder$MyDefaultApacheHttpClient4Config.<init>(EurekaJerseyClientImpl.java:202)\r\n        at com.netflix.discovery.shared.transport.jersey.EurekaJerseyClientImpl$EurekaJerseyClientBuilder.build(EurekaJerseyClientImpl.java:178)\r\n        at com.netflix.discovery.shared.transport.jersey.JerseyEurekaHttpClientFactory$JerseyEurekaHttpClientFactoryBuilder.buildLegacy(JerseyEurekaHttpClientFactory.java:230)\r\n        at com.netflix.discovery.shared.transport.jersey.JerseyEurekaHttpClientFactory$JerseyEurekaHttpClientFactoryBuilder.build(JerseyEurekaHttpClientFactory.java:204)\r\n        at com.netflix.discovery.shared.transport.jersey.JerseyEurekaHttpClientFactory.create(JerseyEurekaHttpClientFactory.java:161)\r\n        at com.netflix.discovery.shared.transport.jersey.Jersey1TransportClientFactories.newTransportClientFactory(Jersey1TransportClientFactories.java:59)\r\n        at com.netflix.discovery.DiscoveryClient.scheduleServerEndpointTask(DiscoveryClient.java:485)\r\n        at com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:398)\r\n        ... 60 common frames omitted\r\nCaused by: java.lang.NullPointerException: null\r\n        at com.thoughtworks.xstream.mapper.ClassAliasingMapper.addClassAlias(ClassAliasingMapper.java:37)\r\n        at com.thoughtworks.xstream.XStream.alias(XStream.java:1510)\r\n        at com.thoughtworks.xstream.XStream.setupAliases(XStream.java:920)\r\n        at com.thoughtworks.xstream.XStream.<init>(XStream.java:590)\r\n        at com.thoughtworks.xstream.XStream.<init>(XStream.java:514)\r\n        at com.thoughtworks.xstream.XStream.<init>(XStream.java:483)\r\n        at com.thoughtworks.xstream.XStream.<init>(XStream.java:429)\r\n        at com.thoughtworks.xstream.XStream.<init>(XStream.java:396)\r\n        at com.netflix.discovery.converters.XmlXStream.<init>(XmlXStream.java:51)\r\n        at com.netflix.discovery.converters.XmlXStream.<clinit>(XmlXStream.java:42)\r\n        ... 73 common frames omitted\r\n2019-06-20 10:16:30.746 [ERROR] [main] [org.springframework.boot.SpringApplication:821] Application run failed\r\norg.springframework.context.ApplicationContextException: Failed to start bean 'eurekaAutoServiceRegistration'; nested exception is java.lang.NullPointerException\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:185)\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.access$200(DefaultLifecycleProcessor.java:53)\r\n        at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:360)\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:158)\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:122)\r\n        at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:893)\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.finishRefresh(ServletWebServerApplicationContext.java:161)\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:552)\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:140)\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:742)\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:389)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)\r\n        at com.bo.operators.OperatorsWebApplication.main(OperatorsWebApplication.java:25)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:47)\r\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:86)\r\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:50)\r\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:51)\r\nCaused by: java.lang.NullPointerException: null\r\n        at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry.maybeInitializeClient(EurekaServiceRegistry.java:57)\r\n        at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry.register(EurekaServiceRegistry.java:38)\r\n        at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration.start(EurekaAutoServiceRegistration.java:83)\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:182)\r\n        ... 20 common frames omitted\r\n`\r\n\r\nafter few minutes(10-15 minutes, it is able to connect)", "Looks like an instantiation issue related to Spring, try double checking their docs and debug this, otherwise probably a good idea to ask in the corresponding support channel. =||= "], ["1220", "Spring boot project @EnableEurekaServer causes unable to start tomcat", "xiapeixin", "cielswift", "06/22/19, 09:13:26 AM", "Added @EnableEurekaServer, which caused tomcat to fail to start; remove @EnableEurekaServer and start normally\r\n\r\n![1](https://user-images.githubusercontent.com/42295829/59960292-1dd86800-94f9-11e9-8ad0-f061dcfb1efd.PNG)\r\n\r\nJDK VERSION 12.0.1 SPRING BOOT VERSION 2.1.6.RELEASE\r", "NaN"], ["1222", "Upgrade to Xstream 1.4.11.1 due to reopening of vulnerability CVE-2013-7285", "Ankur", "ankurbhakta", "07/01/19, 10:10:38 PM", "Looks like the old vulnerability in CVE-2013-7284 was not fully addressed by Xstream version 1.4.10.  This old version is showing up in our vulnerability scans. Can we upgrade to the newer  xstream version 1.4.11.1\r\n\r\nLinks to release notes/vulnerability fixes:\r\nhttps://x-stream.github.io/changes.html", "Another option is to completely remove xstream as proposed in #1074 =||= I agree with @mattnelson #1074 would be the long term fix, this one being a quick easy fix. =||= Thanks for the report @ankurbhakta and the PR @spencergibb, appreciate it. No emotional attachment to Xstream but we do not want to break anyone so any solution will need to be compatible. =||= "], ["1223", "Upgrades xstream to 1.4.11.1", "Spencer Gibb", "spencergibb", "07/01/19, 10:10:38 PM", "fixes #1222", "NaN"], ["1224", "make AmazonInfo deserializer more robust", null, "brharrington", "07/16/19, 08:12:55 PM", "Prior to this change, it was easy to trigger an endless loop in\r\n`StringInterningAmazonInfoBuilder` if the `dataCenterInfo` payload\r\nwasn't exactly right. For example, it could be done with:\r\n\r\n```\r\n\"dataCenterInfo\": {\r\n  \"@class\": \"com.netflix.appinfo.AmazonInfo\",\r\n  \"metadata\": {\r\n    \"instance-id\": \"i-12345\"\r\n  }\r\n}\r\n```\r\n\r\nIf there wasn't a field before `metadata` it would skip over the\r\n`metadata` field and then end up in an endless loop because it\r\ndidn't check for the end of input.", "Thanks @brharrington! =||= "], ["1225", "Rigisting hava some wrong", null, "Aronlele", "11/08/19, 09:08:47 PM", "Now i deploy client service app and config serviceurl  http://xx.xx.xx.102:8761/eureka/,http://xx.xx.xx.103:8761/eureka/\r\nps, defaultZone \r\nbut register-center have not register each other, so is not syc\r\nissue:\r\nservice app only registered in one center,hope have a resolution", "Please provide detailed setup and detailed analysis (logs at least). =||= "], ["1226", "Fetch docker container name of microservices registered with the Eureka server", null, "SyCode7", "11/08/19, 09:09:01 PM", "I am in a situation where I need to fetch the name of docker containers within which applications register to Eureka server. Is this possible at the moment for Java applications to offer such information while registering to Eureka or during subsequent health checks? I am using Spring-cloud microservices.", "You can send custom data with your Eureka registration, include the running container image name into the tags? =||= "], ["1227", "application  can only register to one eureka  when the security is on", "Chinazhouwy", "Chinazhouwy", "08/02/19, 05:33:15 PM", "the version : Greenwich.SR2\r\n\r\nwhen not use spring-boot-starter-security\r\nthe application can register to the eureka cluster\r\nbut when I use spring-boot-starter-security,\r\nthe application only register to one server", "I believe you're better off asking this on Spring related support channels. This is likely unrelated to Eureka. =||= "], ["1228", "Eureka microservices on load testing giving, com.sun.jersey.api.client.clienthandlerexception:java.net.connectexception:connection refused", null, "amir-ansari", "11/08/19, 09:09:14 PM", "We are load testing our application. we have eureka naming server in cluster(replica).All services registers with eureka without any issue. But when we start hitting the api's in for loop, after some time (2,3 minutes) it gives com.sun.jersey.api.client.clienthandlerexception:java.net.connectexception:connection refused.\r\n\r\nHere are my yml for naming server 1\r\n\r\neureka:\r\n  instance:\r\n    hostname: 10.0.60.49\r\n  server:\r\n    enableSelfPreservation: false\r\n   \r\n  client:\r\n    serviceUrl:\r\n      defaultZone: http://10.0.60.50:8762/eureka\r\n    register-with-eureka: true\r\n    fetch-registry: true\r\nserver:\r\n  port: 8761\r\n\r\nHere are my yml for naming server 2\r\n\r\neureka:\r\n  instance:\r\n    hostname: 10.0.60.50\r\n  server:\r\n    enableSelfPreservation: false\r\n  client:\r\n    serviceUrl:\r\n      defaultZone: http://10.0.60.49:8761/eureka\r\n    register-with-eureka: true\r\n    fetch-registry: true\r\nserver:\r\n  port: 8762\r\n\r\nAny help will be appriciated, thanks.", "Need more info, set up, test script, metrics during test, etc. =||= "], ["1229", "move gain of lastDirtyTimestamp before gain of status to avoid race condition", "Addo.Zhang", "addozhang", "09/10/19, 12:01:58 AM", "solution for #1174 ", "Not so deep in the code but how serialization order may change anything? =||= OK. Now I get your explanation in #1174.\r\nMake sense for me. I vote for this PR. =||= "], ["1230", "shutdown of application instance deregisters entire application", null, "xf57212", "11/08/19, 10:05:12 PM", "Spring Boot version: 2.0.4.RELEASE\r\nSpring Cloud version: Finchley.RELEASE\r\neureka-client version: 1.9.2\r\n\r\nWe have 60+ instances of a microservice running in a docker swarm. We scale these microservices dynamically based on need, so the number of instances are constantly in a state of flux, going up and down.\r\n\r\nOur problem is when a single instance is shut down due to lack of need, it deregisters the entire application from the registry instead of just the instance. This causes us to drop data because the registry thinks the service no longer exists until another instance somehow figures out it needs to reregister a few seconds later.\r\n\r\nI have tried setting the config option `shouldUnregisterOnShutdown: false`, which does indeed prevent the service from deregistering. But now if a single instance is shut down, it registers the service in a \"DOWN\" state. Even though there are still at least 59 instances running.\r\n\r\nWhile in a down state, the registry prevents anything from talking to the service.\r\n\r\nHow can I deregister a single instance of the application, NOT put the application in a down state, and continue processing seemlessly with the remaining instances that are still running?", "This should not be happening in any case (graceful instance deregister or abrupt heartbeat stop), the other instances will stay as UP. If you share some logs I can give you pointers wrt what to look at. =||= Sorry, this should have been closed out a while ago as we found the issue.\r\n\r\nThere was a conflict between Netflix Eureka and Docker Swarm both trying to load balance our services. Docker swarm seemed to have taken priority causing all instances to be registered as a single instance within Netflix Eureka. At the time of this ticket we were not aware Docker Swarm had any load balancing. We have since fixed the conflict and everything is working as intended now. =||= Thanks for the update! =||= "], ["1231", "Error:(12, 30) java: cannot access org.springframework.context.ConfigurableApplicationContext   class file for org.springframework.context.ConfigurableApplicationContext not found", "Melody W.", "melodybabee", "08/09/19, 12:02:12 AM", "When I initialized my first eureka project, I spent much time to config the development environment. I got stuck when I run this demo. It shows that there are no errors in the build process, but could not run successfully.\r\n\r\nThe error log is:\r\n```\r\nError:(12, 30) java: cannot access org.springframework.context.ConfigurableApplicationContext\r\n  class file for org.springframework.context.ConfigurableApplicationContext not found\r\n```\r\n\r\nmy parent pom.xml is:\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\r\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n    <modelVersion>4.0.0</modelVersion>\r\n\r\n    <groupId>com.melodywang</groupId>\r\n    <artifactId>springclass01</artifactId>\r\n    <packaging>pom</packaging>\r\n    <version>1.0-SNAPSHOT</version>\r\n\r\n    <parent>\r\n        <groupId>org.springframework.boot</groupId>\r\n        <artifactId>spring-boot-starter-parent</artifactId>\r\n        <version>2.1.6.RELEASE</version>\r\n        <relativePath/> <!-- lookup parent from repository -->\r\n    </parent>\r\n\r\n    <modules>\r\n        <module>serviceregistry</module>\r\n    </modules>\r\n\r\n    <properties>\r\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\r\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\r\n        <java.version>1.8</java.version>\r\n        <spring-cloud.version>Finchley.SR2</spring-cloud.version>\r\n    </properties>\r\n\r\n    <dependencyManagement>\r\n        <dependencies>\r\n            <dependency>\r\n                <groupId>org.springframework.cloud</groupId>\r\n                <artifactId>spring-cloud-dependencies</artifactId>\r\n                <version>${spring-cloud.version}</version>\r\n                <type>pom</type>\r\n                <scope>import</scope>\r\n            </dependency>\r\n        </dependencies>\r\n    </dependencyManagement>\r\n\r\n    <dependencies>\r\n        <dependency>\r\n            <groupId>org.springframework.cloud</groupId>\r\n            <artifactId>spring-cloud-starter-netflix-eureka-server</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-web</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-test</artifactId>\r\n            <scope>test</scope>\r\n        </dependency>\r\n    </dependencies>\r\n\r\n    <build>\r\n        <plugins>\r\n            <plugin>\r\n                <groupId>org.springframework.boot</groupId>\r\n                <artifactId>spring-boot-maven-plugin</artifactId>\r\n            </plugin>\r\n        </plugins>\r\n    </build>\r\n</project>\r\n```\r\n\r\nThe service pom.xml is:\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\r\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n    <parent>\r\n        <artifactId>springclass01</artifactId>\r\n        <groupId>com.melodywang</groupId>\r\n        <version>1.0-SNAPSHOT</version>\r\n    </parent>\r\n    <modelVersion>4.0.0</modelVersion>\r\n\r\n    <artifactId>serviceregistry</artifactId>\r\n\r\n    <dependencies>\r\n        <dependency>\r\n            <groupId>org.springframework.cloud</groupId>\r\n            <artifactId>spring-cloud-starter-netflix-eureka-server</artifactId>\r\n        </dependency>\r\n\r\n    </dependencies>\r\n\r\n</project>\r\n```\r\n\r\nThe application.yml is:\r\n```\r\nspring:\r\n  application:\r\n    name: service-registry\r\n\r\nserver:\r\n  port: 8761 \r\n\r\neureka:\r\n  instance:\r\n    hostname: localhost \r\n  client:\r\n    register-with-eureka: false\r\n    fetch-registry: false\r\n    serviceUrl:\r\n      defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka/\r\n```\r\n\r\nI have tried `mvn package`and `mvn dependency:purge-local-repository`and it shows that this project has been built successfully. ", "I recreated this project, and it works successfully.\r\nHere is the code part for reference, and I guess the problem is the Maven cache.\r\n\r\nparent pom.xml\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\r\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n    <modelVersion>4.0.0</modelVersion>\r\n\r\n    <groupId>com.melodywang</groupId>\r\n    <artifactId>spring-microservice</artifactId>\r\n    <packaging>pom</packaging>\r\n    <version>1.0-SNAPSHOT</version>\r\n    <modules>\r\n        <module>service-registry</module>\r\n    </modules>\r\n\r\n    <parent>\r\n        <groupId>org.springframework.boot</groupId>\r\n        <artifactId>spring-boot-starter-parent</artifactId>\r\n        <version>2.1.6.RELEASE</version>\r\n        <relativePath/> <!-- lookup parent from repository -->\r\n    </parent>\r\n\r\n    <properties>\r\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\r\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\r\n        <java.version>1.8</java.version>\r\n        <spring-cloud.version>Finchley.SR2</spring-cloud.version>\r\n    </properties>\r\n\r\n    <dependencyManagement>\r\n        <dependencies>\r\n            <dependency>\r\n                <groupId>org.springframework.cloud</groupId>\r\n                <artifactId>spring-cloud-dependencies</artifactId>\r\n                <version>${spring-cloud.version}</version>\r\n                <type>pom</type>\r\n                <scope>import</scope>\r\n            </dependency>\r\n        </dependencies>\r\n    </dependencyManagement>\r\n\r\n    <dependencies>\r\n        <dependency>\r\n            <groupId>org.springframework.cloud</groupId>\r\n            <artifactId>spring-cloud-starter-netflix-eureka-server</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-web</artifactId>\r\n            <version>2.1.6.RELEASE</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-test</artifactId>\r\n            <scope>test</scope>\r\n        </dependency>\r\n    </dependencies>\r\n\r\n    <build>\r\n        <plugins>\r\n            <plugin>\r\n                <groupId>org.springframework.boot</groupId>\r\n                <artifactId>spring-boot-maven-plugin</artifactId>\r\n            </plugin>\r\n        </plugins>\r\n    </build>\r\n\r\n\r\n</project>\r\n```\r\nservice pom.xml\r\n```<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\r\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n    <parent>\r\n        <artifactId>spring-microservice</artifactId>\r\n        <groupId>com.melodywang</groupId>\r\n        <version>1.0-SNAPSHOT</version>\r\n    </parent>\r\n    <modelVersion>4.0.0</modelVersion>\r\n\r\n    <artifactId>service-registry</artifactId>\r\n\r\n    <dependencies>\r\n        <dependency>\r\n            <groupId>org.springframework.cloud</groupId>\r\n            <artifactId>spring-cloud-starter-netflix-eureka-server</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-web</artifactId>\r\n            <version>2.1.6.RELEASE</version>\r\n        </dependency>\r\n\r\n    </dependencies>\r\n\r\n\r\n</project>\r\n```\r\nmain class\r\n```\r\npackage com.melodywang.serviceregistry;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;\r\n\r\n@SpringBootApplication\r\n@EnableEurekaServer\r\npublic class EurekaServiceApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(EurekaServiceApplication.class, args);\r\n    }\r\n}\r\n\r\n```\r\n =||= "], ["1232", "\u4e00\u4e2a\u901a\u7528\u7684\u4fe1\u606f\u6cc4\u9732\u5b89\u5168\u95ee\u9898", null, "XL665", "08/29/19, 12:02:51 AM", "NaN", "NaN"], ["1233", "Example application error", "huqingfeng", "jzdayz", "09/09/19, 05:43:38 AM", "When i run eureka-server in tomcat \uff0ci visit http://localhost:8080/eureka ,i got this error\r\n\r\n\r\n```java\r\n2019-08-22 16:25:12,812 INFO  com.netflix.discovery.DiscoveryClient:844 [DiscoveryClient-InstanceInfoReplicator-0] [register] DiscoveryClient_EUREKA/huqingfengs-MacBook-Pro.local: registering service...\r\n2019-08-22 16:25:20,914 ERROR com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient:83 [DiscoveryClient-InstanceInfoReplicator-0] [execute] Request execution error. endpoint=DefaultEndpoint{ serviceUrl='http://localhost:8080/eureka/v2/}\r\ncom.sun.jersey.api.client.ClientHandlerException: java.net.SocketTimeoutException: Read timed out\r\n        at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187)\r\n        at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123)\r\n        at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27)\r\n        at com.sun.jersey.api.client.Client.handle(Client.java:652)\r\n        at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682)\r\n        at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)\r\n        at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:570)\r\n        at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.register(AbstractJerseyEurekaHttpClient.java:56)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\r\n        at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\r\n        at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118)\r\n        at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n        at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:847)\r\n        at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:121)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at java.lang.Thread.run(Thread.java:748)\r\nCaused by: java.net.SocketTimeoutException: Read timed out\r\n        at java.net.SocketInputStream.socketRead0(Native Method)\r\n        at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\r\n        at java.net.SocketInputStream.read(SocketInputStream.java:171)\r\n```", "NaN"], ["1234", "Examples with rest services", null, "DareUrDream", "11/08/19, 09:13:26 PM", "I have trying to use Eureka to deploy rest services, but then the current examples are standard main method [eureka-examples](https://github.com/Netflix/eureka/tree/master/eureka-examples) ones. Are they are neat tricks so that deploying rest services are easy. Would appreciate if an example is shared for the benefit of all users.\r\n\r\nCheers !!\r\nDareUrDream\r\n\r\nP.S - I know spring integration can do it but am trying to achieve this without using the integration projects.", "We don't have guidelines for that, use whatever you're most comfortable with. We internally leverage Spring for Java services, see https://www.youtube.com/watch?v=mln3_o6qlBo =||= "], ["1235", "Uses HashMap if CompactHashMap is not available on classpath.", "Spencer Gibb", "spencergibb", "09/04/19, 04:56:03 PM", "This allows eureka users to exclude compactmap library if they so choose.", "Should the dependency be scoped as optional?\r\n\r\nhttps://github.com/Netflix/eureka/blob/fb355976fe989b41d126d1801a0cc159951b3b38/eureka-client/build.gradle#L21 =||= @mattnelson I don't think so. I'm shooting for the defaults to stay the same. If it gets excluded, it still works. =||= "], ["1236", "AbstractInstanceRegistry$CircularQueue is inneficient", "Arthur Gavlyukovskiy", "gavlyukovskiy", "09/30/19, 04:51:17 PM", "I have noticed that `AbstractInstanceRegistry$CircularQueue` implementation is quite inefficient due to `ConcurrentLinkedQueue#size`, which is linear time complexity of storage size, effectively making add element O(n).", "NaN"], ["1237", "Optimized CircularQueue by using ArrayBlockingQueue with constant time size implementation", "Arthur Gavlyukovskiy", "gavlyukovskiy", "09/30/19, 04:51:17 PM", "Since `AbstractInstanceRegistry` already have synchronization on `recentRegisteredQueue` and `recentCanceledQueue` it's safe to change `CircularQueue` implementation to extend `LinkedList` with constant time `size()`.\r\n\r\nBenchmark:\r\n```\r\nimport org.openjdk.jmh.annotations.Benchmark;\r\nimport org.openjdk.jmh.annotations.BenchmarkMode;\r\nimport org.openjdk.jmh.annotations.Fork;\r\nimport org.openjdk.jmh.annotations.Level;\r\nimport org.openjdk.jmh.annotations.Measurement;\r\nimport org.openjdk.jmh.annotations.Mode;\r\nimport org.openjdk.jmh.annotations.OutputTimeUnit;\r\nimport org.openjdk.jmh.annotations.Scope;\r\nimport org.openjdk.jmh.annotations.Setup;\r\nimport org.openjdk.jmh.annotations.State;\r\nimport org.openjdk.jmh.annotations.Warmup;\r\nimport org.openjdk.jmh.runner.Runner;\r\nimport org.openjdk.jmh.runner.RunnerException;\r\nimport org.openjdk.jmh.runner.options.Options;\r\nimport org.openjdk.jmh.runner.options.OptionsBuilder;\r\n\r\nimport java.util.concurrent.TimeUnit;\r\n\r\n@BenchmarkMode(Mode.Throughput)\r\n@OutputTimeUnit(TimeUnit.SECONDS)\r\n@State(Scope.Benchmark)\r\n@Fork(value = 2)\r\n@Warmup(iterations = 3, batchSize = 10000)\r\n@Measurement(iterations = 3, batchSize = 10000)\r\npublic class CircularQueueBenchmark {\r\n\r\n    private final EurekaCircularQueue<String> eureka = new EurekaCircularQueue<>(10000);\r\n    private final EurekaCircularQueueLinkedList<String> eurekaLinkedList = new EurekaCircularQueueLinkedList<>(10000);\r\n\r\n    @Setup(Level.Iteration)\r\n    public void setup(){\r\n        eureka.clear();\r\n        eurekaLinkedList.clear();\r\n    }\r\n\r\n    @Benchmark\r\n    public EurekaCircularQueue<String> eureka() {\r\n        synchronized (eureka) {\r\n            eureka.add(\"something\");\r\n        }\r\n        return eureka;\r\n    }\r\n\r\n    @Benchmark\r\n    public EurekaCircularQueueLinkedList<String> eurekaLinkedList() {\r\n        synchronized (eurekaLinkedList) {\r\n            eurekaLinkedList.add(\"something\");\r\n        }\r\n        return eurekaLinkedList;\r\n    }\r\n\r\n    public static void main(String[] args) throws RunnerException {\r\n        Options opt = new OptionsBuilder()\r\n                .include(CircularQueueBenchmark.class.getSimpleName())\r\n                .build();\r\n\r\n        new Runner(opt).run();\r\n    }\r\n}\r\n```\r\nResults:\r\n```\r\nBenchmark                                 Mode  Cnt     Score     Error  Units\r\nCircularQueueBenchmark.eureka            thrpt    6     3.297 \u00b1   0.005  ops/s\r\nCircularQueueBenchmark.eurekaLinkedList  thrpt    6  3893.782 \u00b1 110.320  ops/s\r\n```\r\n\r\nfixes #1236", "> Also ideally this should be an array-based circular buffer as both the old and the new implementations are not cache-friendly and are slow to iterate which is one of their primary uses, but it does not matter in this context much (if at all), I'm ok with this change as it makes perfect sense to me as long as you address the issues.\r\n\r\nI was also thinking about it, and I even have working implementation, but I thought it would be too risky for you to accept it considering low performance difference (I measured only `add`) between array and linked list backed queues :)\r\n\r\nI added commit with additional synchronization and array backed implementation. I also noticed that iteration just moves elements to array list, which is much faster when using collection as a source, especially with efficient `toArray` implementation. I made some measurements and it looks pretty impressive:\r\n```\r\nCircularQueueIterateBenchmark.arrayCircularQueue                             thrpt    3   14177.309 \u00b1  291.964  ops/s\r\nCircularQueueIterateBenchmark.arrayCircularQueueConstructor                  thrpt    3   45361.993 \u00b1 2427.956  ops/s\r\nCircularQueueIterateBenchmark.arrayCircularQueueConstructorOptimizedToArray  thrpt    3  264552.864 \u00b1 5394.090  ops/s\r\nCircularQueueIterateBenchmark.eurekaLinkedList                               thrpt    3   11591.028 \u00b1  819.217  ops/s\r\n```\r\nI don't know how to create a benchmark that has proper memory layout to show higher cache hit rate for array backed implementation, but even difference between loop copy - `arrayCircularQueue` and constructor with efficient `toArray` - `arrayCircularQueueConstructorOptimizedToArray` is impressive! =||= Sorry for the delay on this one, I'm giving this full attention now. =||= @brharrington I agree with you, I checked the code and implementation is the same as mine, except locking. And I more believe Doug Lea than myself to implement and test data structures :)\r\n\r\nAlso it looks like with this approach we can remove locking on insertion as this code will be sufficient even under race:\r\n```  \r\n@Override\r\n  public boolean offer(T item) {\r\n    while (!underlying.offer(item)) {\r\n      underlying.poll();\r\n    }\r\n    return true;\r\n  }\r\n```\r\n\r\n@troshko111 what do you think on this approach? =||= This collection is thread-safe and based on the usage in the instance registry, all of the sync code can be removed, i.e. clear, element addition, toArray. =||= @troshko111 I updated the PR with suggestions from @brharrington. Please review =||= "], ["1238", "Unable to run the eureka-examples project as guided in https://github.com/Netflix/eureka/wiki/Running-the-Demo-Application", null, "shaezard", "03/23/20, 11:56:55 PM", "I just cloned the repo in my local machine and was trying to follow the instructions provided at https://github.com/Netflix/eureka/wiki/Running-the-Demo-Application. However,\r\n\r\n1. when i have launched the server using the war and tomcat it shows the replica as unavailable.\r\n\r\n2. when i run the example service application it throws, the following error:-\r\n\r\n5:40:10 PM: Executing task 'ExampleEurekaService.main()'...\r\n\r\nInferred project: eureka, version: 1.9.13-SNAPSHOT\r\nThe testJar task is deprecated.  Please place common test harness code in its own project and publish separately.\r\nThe testJar task is deprecated.  Please place common test harness code in its own project and publish separately.\r\nThe testJar task is deprecated.  Please place common test harness code in its own project and publish separately.\r\nPublication nebula not found in project :.\r\n[buildinfo] Not using buildInfo properties file for this build.\r\nPublication named 'nebula' does not exist for project ':' in task ':artifactoryPublish'.\r\n:eureka-client:compileJava UP-TO-DATE\r\n:eureka-client:processResources UP-TO-DATE\r\n:eureka-client:classes UP-TO-DATE\r\n:eureka-client:writeManifestProperties UP-TO-DATE\r\n:eureka-client:jar\r\nNote: /home/abdur/IdeaProjects/eureka/eureka-examples/src/main/java/com/netflix/eureka/ExampleEurekaGovernatedService.java uses or overrides a deprecated API.\r\nNote: Recompile with -Xlint:deprecation for details.\r\n:eureka-examples:compileJava\r\n:eureka-examples:processResources UP-TO-DATE\r\n:eureka-examples:classes\r\n[main] WARN com.netflix.config.sources.URLConfigurationSource - No URLs will be polled as dynamic configuration sources.\r\n[main] INFO com.netflix.config.sources.URLConfigurationSource - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.\r\n[main] INFO com.netflix.config.DynamicPropertyFactory - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@621be5d1\r\n[main] WARN com.netflix.discovery.internal.util.Archaius1Utils - Cannot find the properties specified : eureka-client. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\r\n[main] INFO com.netflix.appinfo.providers.EurekaConfigBasedInstanceInfoProvider - Setting initial instance status as: STARTING\r\n[main] WARN com.netflix.discovery.internal.util.Archaius1Utils - Cannot find the properties specified : eureka-client. This may be okay if there are other environment specific properties or the configuration is installed with a different mechanism.\r\n[main] INFO com.netflix.discovery.DiscoveryClient - Initializing Eureka in region us-east-1\r\n[main] INFO com.netflix.discovery.provider.DiscoveryJerseyProvider - Using JSON encoding codec LegacyJacksonJson\r\n[main] INFO com.netflix.discovery.provider.DiscoveryJerseyProvider - Using JSON decoding codec LegacyJacksonJson\r\n[main] INFO com.netflix.discovery.provider.DiscoveryJerseyProvider - Using XML encoding codec XStreamXml\r\n[main] INFO com.netflix.discovery.provider.DiscoveryJerseyProvider - Using XML decoding codec XStreamXml\r\n[main] INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration\r\n[main] ERROR com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver - Cannot resolve to any endpoints from provided configuration: {defaultZone=[]}\r\n[main] ERROR com.netflix.discovery.shared.transport.EurekaHttpClients - Initial resolution of Eureka server endpoints failed. Check ConfigClusterResolver logs for more info\r\n[main] INFO com.netflix.discovery.DiscoveryClient - Disable delta property : false\r\n[main] INFO com.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null\r\n[main] INFO com.netflix.discovery.DiscoveryClient - Force full registry fetch : false\r\n[main] INFO com.netflix.discovery.DiscoveryClient - Application is null : false\r\n[main] INFO com.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true\r\n[main] INFO com.netflix.discovery.DiscoveryClient - Application version is -1: true\r\n[main] INFO com.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server\r\n[main] ERROR com.netflix.discovery.DiscoveryClient - DiscoveryClient_UNKNOWN/rtx2080ti - was unable to refresh its cache! status = There is no known eureka server; cluster server list is empty\r\ncom.netflix.discovery.shared.transport.TransportException: There is no known eureka server; cluster server list is empty\r\n\tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:108)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\r\n\tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\r\n\tat com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1069)\r\n\tat com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:983)\r\n\tat com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:430)\r\n\tat com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:276)\r\n\tat com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:272)\r\n\tat com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:268)\r\n\tat com.netflix.discovery.DiscoveryClient.<init>(DiscoveryClient.java:260)\r\n\tat com.netflix.eureka.ExampleEurekaService.initializeEurekaClient(ExampleEurekaService.java:52)\r\n\tat com.netflix.eureka.ExampleEurekaService.main(ExampleEurekaService.java:63)\r\n[main] WARN com.netflix.discovery.DiscoveryClient - Using default backup registry implementation which does not do anything.\r\n[main] INFO com.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30\r\n[main] INFO com.netflix.discovery.InstanceInfoReplicator - InstanceInfoReplicator onDemand update allowed rate per min is 4\r\n[main] INFO com.netflix.discovery.DiscoveryClient - Discovery Client initialized at timestamp 1567858216224 with initial instances count: 0\r\n:eureka-examples:ExampleEurekaService.main()\r\nRegistering service to eureka with STARTING status\r\nSimulating service initialization by sleeping for 2 seconds...\r\nDone sleeping, now changing status to UP\r\n[main] INFO com.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1567858218229, current=UP, previous=STARTING]\r\nWaiting ... verifying service registration with eureka ...\r\n[DiscoveryClient-InstanceInfoReplicator-0] INFO com.netflix.discovery.DiscoveryClient - DiscoveryClient_UNKNOWN/rtx2080ti: registering service...\r\n[DiscoveryClient-InstanceInfoReplicator-0] WARN com.netflix.discovery.DiscoveryClient - DiscoveryClient_UNKNOWN/rtx2080ti - registration failed There is no known eureka server; cluster server list is empty\r\ncom.netflix.discovery.shared.transport.TransportException: There is no known eureka server; cluster server list is empty\r\n\tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:108)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\r\n\tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n\tat com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:847)\r\n\tat com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:121)\r\n\tat com.netflix.discovery.InstanceInfoReplicator$1.run(InstanceInfoReplicator.java:101)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)", "This is the snip of eureka dashboard.\r\n\r\n![image](https://user-images.githubusercontent.com/47674815/64474978-eee99e00-d199-11e9-8d42-5409564e6d04.png)\r\n =||= Seems like it can't reach the Eureka server, make sure it's up and taking traffic. =||= "], ["1239", "Application service not able to register to the Eureka server", null, "shaezard", "11/08/19, 08:58:45 PM", "Hi\r\n\r\nI launched a eureka-server using spring-boot. I have a non spring-boot application service. Can a non spring-boot application register to a spring-boot eureka-server. If yes, how to do that?", "Absolutely yes, if that app is in Java, you can use the `EurekaClient`, if not, check its heartbeat protocol (wiki, source code) and mimic the behavior. =||= "], ["1240", "getting unkownHostException with spring-boot", null, "S7range", "09/14/19, 01:32:51 PM", "I am creating a microservice-based application and I have multiple microservices I need to use. but I cannot seem to do it properly. \r\n\r\nthis is an application that uses spring boot and eureka as service discovery and I am using restTemplate to connect to other services. I have searched for a solution a lot. I found a few but none have worked. a lot of posts suggested using a loadBalanced restTemplate, but it still does not work.\r\n\r\n here is my restTemplate Bean:\r\n```\r\n    @Bean\r\n\t@Qualifier(\"loadBalancedRestTemplate\")\r\n    public RestTemplate loadBalancedRestTemplate(RestTemplateCustomizer customizer) {\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        customizer.customize(restTemplate);\r\n        return restTemplate;\r\n    }\r\n```\r\nThis is my eureka config in application.yml file:\r\n```\r\neureka:\r\n  client:\r\n    enabled: true\r\n    healthcheck:\r\n      enabled: true\r\n    fetch-registry: true\r\n    register-with-eureka: true\r\n    instance-info-replication-interval-seconds: 10\r\n    registry-fetch-interval-seconds: 10\r\n  instance:\r\n    appname: gateway\r\n    instanceId: gateway:${spring.application.instance-id:${random.value}}\r\n    lease-renewal-interval-in-seconds: 5\r\n    lease-expiration-duration-in-seconds: 10\r\n    status-page-url-path: ${management.endpoints.web.base-path}/info\r\n    health-check-url-path: ${management.endpoints.web.base-path}/health\r\n    metadata-map:\r\n      zone: primary # This is needed for the load balancer\r\n      profile: ${spring.profiles.active}\r\n      version: #project.version#\r\n      git-version: ${git.commit.id.describe:}\r\n      git-commit: ${git.commit.id.abbrev:}\r\n      git-branch: ${git.branch:}\r\nribbon:\r\n  eureka:\r\n    enabled: true\r\n```\r\nWhenever I want to login to my application a POST request is sent from the gateway to the UAA server to authenticate the credentials. The first time everything is ok and it's working properly, but when I try to do the same thing I get this error: \r\n```org.springframework.web.client.ResourceAccessException: I/O error on POST request for \"http://usermicro/oauth/token\": usermicro; nested exception is java.net.UnknownHostException: usermicro```\r\nAnd this is the full stacktrace:\r\n```\r\n2019-09-13 19:07:46.188 ERROR 13215 --- [ XNIO-1 task-18] o.z.problem.spring.common.AdviceTrait    : Internal Server Error\r\n\r\norg.springframework.web.client.ResourceAccessException: I/O error on POST request for \"http://usermicro/oauth/token\": usermicro; nested exception is java.net.UnknownHostException: usermicro\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:744)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:670)\r\n\tat org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:445)\r\n\tat com.gateway.app.security.oauth2.OAuth2TokenEndpointClientAdapter.sendPasswordGrant(OAuth2TokenEndpointClientAdapter.java:64)\r\n\r\n```\r\nI am sure that both gateway and usermicro are registered in eureka service discovery. I cannot figure out the problem. \r\n\r\nthank you for your help.", "Please don't cross post =||= @spencergibb I am sorry! I was not sure where to post it. =||= "], ["1241", "Eureka Client not working", "Nemo", "gpugems", "09/25/19, 09:51:18 PM", "import { logger } from '../common/logging';\r\nimport { ExpressConfig } from './Express';\r\nimport { Eureka } from 'eureka-js-client';\r\n\r\nexport class Application {\r\n\r\n  server: any;\r\n  express: ExpressConfig;\r\n\r\n  constructor() {\r\n    this.express = new ExpressConfig();\r\n    \r\n    const port = 3001;\r\n    this.server = this.express.app.listen(port, () => {\r\n      logger.info(`Server Started! Express: http://localhost:${port}`);\r\n});\r\n  \r\n  let client=new Eureka({\r\n    instance: {\r\n      app: 'hello-world-chapter-6',\r\n      hostName: 'localhost',\r\n      ipAddr: '127.0.0.1',\r\n      statusPageUrl: `http://localhost:${port}`,\r\n      healthCheckUrl: `http://localhost:${port}/health`,\r\n      port: {\r\n        '$': port,\r\n        '@enabled': true,\r\n      },\r\n      vipAddress: 'myvip',\r\n      dataCenterInfo: {\r\n        '@class': 'com.netflix.appinfo.InstanceInfo$DefaultDataCenterInfo',\r\n        'name': 'MyOwn',\r\n      },\r\n    },\r\n    eureka: {\r\n      host: 'localhost',\r\n      port: 8761,\r\n      servicePath: '/eureka/apps/',\r\n    }\r\n  });\r\n  client.start();\r\n\r\n  process.on('SIGINT', ()=>{\r\n    this.server.close();\r\n    client.stop();\r\n  });\r\n  \r\n}\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nError starting the Eureka Client { Error: connect ECONNREFUSED 127.0.0.1:8761\r\n    at Object._errnoException (util.js:1031:13)\r\n    at _exceptionWithHostPort (util.js:1052:20)\r\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1195:14)\r\n  errno: 'ECONNREFUSED',\r\n  code: 'ECONNREFUSED',\r\n  syscall: 'connect',\r\n  address: '127.0.0.1',\r\n  port: 8761 }", "I don't know what client this is, but even ignoring the fact it's not part of the repository and is likely a wrong place to report, looks to me nothing's wrong with it per se, clearly nothing's listening on the port you're trying to connect to: see https://linux.die.net/man/2/connect. =||= "], ["1242", "Regression in Eureka server 1.8.0 (and above)", "Georg Friedrich", "GFriedrich", "09/30/19, 04:58:25 PM", "I've just updated from Eureka 1.7.2 to the latest Eureka version and ended up with a regression due to the PR #970 \r\nMore specifcally the InstanceInfo now contains a lowercase app name even though it shouldn't.\r\nReason: One of my apps registering at Eureka uses a lowercase app name. But normally Eureka itself should do an \"uppercase\" call to have this fixed.\r\nThis is expected to happen for the deserialization at https://github.com/Netflix/eureka/blob/9d07ac4aaba90876d89a691521c128c9c59bcce8/eureka-client/src/main/java/com/netflix/discovery/converters/EurekaJacksonCodec.java#L516-L526\r\nBut the thing is: The cache already contains the string in the lowercase variant and the value transformer is not even called, resulting in the lowercase variant to be used.\r\nMy idea would be to overwrite the source of the underlying ArrayCharBuffer at https://github.com/Netflix/eureka/blob/9d07ac4aaba90876d89a691521c128c9c59bcce8/eureka-client/src/main/java/com/netflix/discovery/util/DeserializerStringCache.java#L320\r\nby calling the value transformer to make sure that the source already has the right value (offset and length need to be set accordingly). No need to keep the value transformer anymore.\r\n@troshko111 what do you think?\r", "Fixed by #1245  =||= "], ["1243", "Fix DeserializerStringCache if value transformer is used (#1242)", "Georg Friedrich", "GFriedrich", "09/30/19, 04:57:46 PM", "Resolves #1242 ", "@tcellucci I'm aware of the issues that you've mentioned, but I think this is better than a broken cache implementation.\r\n\r\nI've already tried to explain the bug in detail in #1242 and it's not the one that you've described but I can try again to make it more clear:\r\nIf you have a cache that looks like this:\r\nCharbuffer{\"value\"} -> String{\"value\"}\r\nand you get to the point where the application name is deserialized from a response that is written in lowercase and contains also the name \"value\", you will lookup the cache by using a Charbuffer{\"value\"}. The cache in turn will return the String{\"value\"} even though your value transformer would have created a String{\"VALUE\"} instead. Due to that Eureka will create a weird exception underneath complaining about the lowercase application name that was returned from the cache.\r\n\r\nOf course you could change the value transformer to work with some input from the cache and do the transformation after the lookup, but this in turn would create a new String on each and every lookup. And as I'm not aware were this String is used later on (maybe it is kept at some different place too), I've decided against it, to not have several instances of String{\"VALUE\"} in the heap.\r\n\r\nInstead I've decided to do the transformation upfront, so that the cache is able to hold a value for \"value\" and \"VALUE\". By that the String{\"VALUE\"} is always reused and the just created string to lookup the cache is thrown away directly, resulting in only one element more in the cache and the rest can be GC'ed right afterwards.\r\n\r\nIf you've a better solution, feel free to change the PR, but I think it's far better to have a correct and working implementation than a buggy cache that pays more focus on possible GC workload than on correctness. =||= I think a unit test demonstrating the problem is in order, rather than more exposition. =||= reading through your comments, it sounds as if your code is accessing the cache in different ways for the same key (this implied by the presence of a lower-case cache value in the cache, despite an uppercasing cache value transform).  More plainly, for the same key, I am inferring that sometimes a value transformer is used and sometimes it is not.  The observed behavior is that the cache always returns the initially cached value, rather than transformed value you're expecting.\r\n\r\n =||= @tcellucci there you go - I've created a test for this case. It fails with the old implementation but works with the new one.\r\nThis case is happening if the cache was used already by e.g. some other field of the InstanceInfo containing the value as lowercase and then trying to deserialize the app name which should be converted to uppercase but isn't. =||= @GFriedrich thanks for bringing this up! I've merged the linked PR, closing this one. =||= "], ["1244", "Eureka Register service with RESR API", "Nemo", "gpugems", "09/25/19, 09:55:39 PM", "Hi,\r\n\r\nI am trying to register a microservice in eureka with the following input. \r\n\r\ncurl -X POST -i http://localhost:8761/eureka/apps --data '{\r\n    instance: {\r\n        hostName: \"WKS-SOF-L011\",\r\n        app: \"com.automationrhapsody.eureka.app\",\r\n        vipAddress: \"com.automationrhapsody.eureka.app\",\r\n        secureVipAddress: \"com.automationrhapsody.eureka.app\",\r\n        ipAddr: \"10.0.0.10\",\r\n        status: \"STARTING\",\r\n        port: {$: 8080, @enabled: true},\r\n        securePort: {$: 8443, @enabled: true},\r\n        healthCheckUrl: \"http://WKS-SOF-L011:8080/healthcheck\",\r\n        statusPageUrl: \"http://WKS-SOF-L011:8080/status\",\r\n        homePageUrl: \"http://WKS-SOF-L011:8080\",\r\n        dataCenterInfo: {\r\n            @class: \"com.netflix.appinfo.InstanceInfo$DefaultDataCenterInfo\", \r\n            name: \"MyOwn\"\r\n        },\r\n    \r\n}'\r\n\r\nAnd got the following error message : \r\n\r\n{\"timestamp\":1568974209215,\"status\":405,\"error\":\"Method Not Allowed\",\"message\":\"Method Not Allowed\",\"path\":\"/eureka/apps/\"}\r", "https://github.com/Netflix/eureka/wiki/Eureka-REST-operations =||= "], ["1245", "address cache bug with value supplier", "Tom Cellucci", "tcellucci", "09/30/19, 04:57:04 PM", "this PR is a different fix to issue #1242, \"Fix DeserializerStringCache if value transformer is used\". See issue 1242 for details on the situation, but the summary is that the DeserializerStringCache may not properly handle caching for strings when a 'value transformer' is present.\r\n\r\nThe fix in this PR updates the CharacterBuffer classes to include a new 'variant' field that disambiguates identical cache entries with the same key but different values.  The value of 'variant' is unique to the type of the valueTransformer, which is appropriate for implementations that provide consistent output for a given cached 'string' (as seen in Eureka's InstanceInfoDeserializer).\r\n\r\nThanks to GFriedrich, who identified this issue and submitted alternate PR https://github.com/Netflix/eureka/pull/1243 as well as a unit test to isolate the issue.  His test is also incorporated with this PR.", "NaN"], ["1246", "Client cannot update instance status", "Gr\u00e9gory Sohn", "gsohn", "10/03/19, 08:33:32 AM", "Wa are using 2.1.3.RELEASE spring release of eureka client.\r\n\r\nWe can't update instance status. We have following errors :\r\n\r\n`RetryableEurekaHttpClient    : Request execution failed with message: java.lang.NoClassDefFoundError: vlsi/utils/CompactHashMap`\r\n\r\n`DiscoveryClient    : DiscoveryClient_XXX-SERVICE/worker-1:XXX-service:9600 - was unable to refresh its cache! status = Cannot execute request on any known server`\r\n\r\n`com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server`\r\n\r\nAny idea ? :)\r\n\r\n\r\n\r", "This is not the spring issue tracker. https://github.com/spring-cloud/spring-cloud-netflix =||= Ok but seems more like a com.netflix.discovery package issue for me, no ?\r\n\r\n\r\n```\r\njavax.ws.rs.WebApplicationException: java.lang.NoClassDefFoundError: vlsi/utils/CompactHashMap\r\nat com.netflix.discovery.provider.DiscoveryJerseyProvider.readFrom(DiscoveryJerseyProvider.java:107) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:634) ~[jersey-client-1.19.1.jar!/:1.19.1]\r\nat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586) ~[jersey-client-1.19.1.jar!/:1.19.1]\r\nat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.getApplicationsInternal(AbstractJerseyEurekaHttpClient.java:198) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.getApplications(AbstractJerseyEurekaHttpClient.java:165) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1051) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:965) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.DiscoveryClient.refreshRegistry(DiscoveryClient.java:1479) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.DiscoveryClient$CacheRefreshThread.run(DiscoveryClient.java:1446) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]\r\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\r\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\r\nat java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\r\n\r\nCaused by: java.lang.NoClassDefFoundError: vlsi/utils/CompactHashMap\r\nat com.netflix.discovery.converters.EurekaJacksonCodec$InstanceInfoDeserializer.deserialize(EurekaJacksonCodec.java:625) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.converters.EurekaJacksonCodec$InstanceInfoDeserializer.deserialize(EurekaJacksonCodec.java:408) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.fasterxml.jackson.databind.ObjectReader._bind(ObjectReader.java:1574) ~[jackson-databind-2.9.9.3.jar!/:2.9.9.3]\r\nat com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:965) ~[jackson-databind-2.9.9.3.jar!/:2.9.9.3]\r\nat com.netflix.discovery.converters.EurekaJacksonCodec$ApplicationDeserializer.deserialize(EurekaJacksonCodec.java:738) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.converters.EurekaJacksonCodec$ApplicationDeserializer.deserialize(EurekaJacksonCodec.java:698) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.fasterxml.jackson.databind.ObjectReader._bind(ObjectReader.java:1574) ~[jackson-databind-2.9.9.3.jar!/:2.9.9.3]\r\nat com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:965) ~[jackson-databind-2.9.9.3.jar!/:2.9.9.3]\r\nat com.netflix.discovery.converters.EurekaJacksonCodec$ApplicationsDeserializer.deserialize(EurekaJacksonCodec.java:808) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.converters.EurekaJacksonCodec$ApplicationsDeserializer.deserialize(EurekaJacksonCodec.java:775) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.fasterxml.jackson.databind.ObjectReader._unwrapAndDeserialize(ObjectReader.java:1703) ~[jackson-databind-2.9.9.3.jar!/:2.9.9.3]\r\nat com.fasterxml.jackson.databind.ObjectReader._bindAndClose(ObjectReader.java:1608) ~[jackson-databind-2.9.9.3.jar!/:2.9.9.3]\r\nat com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:1188) ~[jackson-databind-2.9.9.3.jar!/:2.9.9.3]\r\nat com.netflix.discovery.converters.EurekaJacksonCodec.readValue(EurekaJacksonCodec.java:197) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.converters.wrappers.CodecWrappers$LegacyJacksonJson.decode(CodecWrappers.java:314) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.provider.DiscoveryJerseyProvider.readFrom(DiscoveryJerseyProvider.java:103) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\n... 26 common frames omitted\r\n\r\n2019-10-02 14:33:41.089  WARN [core-service,,,] 1 --- [freshExecutor-0] c.n.d.s.t.d.RetryableEurekaHttpClient    : Request execution failed with message: java.lang.NoClassDefFoundError: vlsi/utils/CompactHashMap\r\n2019-10-02 14:33:41.090 ERROR [core-service,,,] 1 --- [freshExecutor-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_CORE-SERVICE/worker-1:core-service:9500 - was unable to refresh its cache! status = Cannot execute request on any known server\r\n\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\nat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1051) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:965) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.DiscoveryClient.refreshRegistry(DiscoveryClient.java:1479) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat com.netflix.discovery.DiscoveryClient$CacheRefreshThread.run(DiscoveryClient.java:1446) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\nat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]\r\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\r\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\r\nat java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\r\n``` =||= I updated my dependencies to use 1.9.13 eureka-client library version instead of 1.9.3. Seems ok now. Thanks =||= "], ["1247", "why expectedNumberOfRenewsPerMin not reduce after Eureka client shutting down unexpectedly ?", null, "githubyong", "11/08/19, 08:56:23 PM", "I have a standalone eureka server(not self register) and a eureka client.\r\n1.set  enable-self-preservation =true\r\n2. kill eureka client process.\r\n3. start eureka client.\r\nRepeat step 2-3, the ekreua server \"Renews threshold\" will increment very fast, and eureka server enter self preservation after a while. I had to restart the eureka server to recover it.\r\nit seems that it won't call server method 'com.netflix.eureka.registry.PeerAwareInstanceRegistryImpl#cancel' when Eureka client shutting down unexpectedly . is it proper ?", "By design to protect against mass information loss in case of a wide range is potential issues. =||= "], ["1248", "Whitelist/BlackList", "Francisco M. Palos", "franciscopalos", "03/23/20, 11:57:16 PM", "Hi all,\r\n\r\nIs there any way to stablish a whitelist or blacklist in order to enable registry only microservices deployed in several hosts? \r\nI know that we could use AWS zones, but currently we have deployed all microservices in our internal intranet.\r\n\r\nThanks & Regards", "You mean like create a whitelist of services allowed to talk to Eureka? =||= > You mean like create a whitelist of services allowed to talk to Eureka?\r\n\r\n@troshko111 Yes, that's exactly what we are looking for but it seems there is no way to perform it. Isn't it?\r\n\r\nThanks! =||= There are two properties that control if the instance should register with eureka and if the instance should fetch the registry. These can be flexed on those hosts you do not want to participate with eureka.\r\n\r\nhttps://github.com/Netflix/eureka/blob/743af8be0fa37118a3a9ee0d39f3ba8a89621119/eureka-client/src/main/java/com/netflix/discovery/EurekaClientConfig.java#L273-L284\r\nhttps://github.com/Netflix/eureka/blob/743af8be0fa37118a3a9ee0d39f3ba8a89621119/eureka-client/src/main/java/com/netflix/discovery/EurekaClientConfig.java#L451-L456 =||= > @troshko111 Yes, that's exactly what we are looking for but it seems there is no way to perform it. Isn't it?\r\n> \r\n> Thanks!\r\n\r\nIn addition to what @mattnelson has mentioned, depending on your requirements and reliability of the solution I'd suggest to explore:\r\n\r\n- If deployed to a cloud provider infra, look into network control like security groups on AWS and equivalent on Azure/GCP.\r\n- Put on a reverse proxy in front of Eureka instances and require mTLS (terminating it at the reverse proxy), make the proxy verify the client identities against the whitelist or just use special certs.\r\n- Use a firewall of some sort, iptables should do.\r\n\r\nThis is really outside of the service concerns. =||= Hi both,\r\n\r\nThanks for your help. We will check it now. =||= "], ["1249", "fix eureka client not register it self ofter a long time network conn\u2026", null, "skyguard1", "01/27/20, 06:28:53 PM", "In this issue (https://github.com/Netflix/eureka/issues/1221), eureka client try to re - register but throw TransportException, so the re - register logic not executed, in my opinion, throw ThranportException show that server-side processing logic errors, Therefore, I personally think that DiscoveryClient should re-register when receiving TransportException. Please review the pull request and make Suggestions. I will track this problem, thank you", "General:\r\n\r\n- We can only re-register if we received a 404, no other error as this explicitly indicates the instance has been evicted, see the linked issue for an example. You can't just re-register on any error.\r\n\r\n- Needs tests to demonstrate the issue and the fix.\r\n\r\n- Exception handling looks incorrect as both renew and doRegister swallow exceptions. =||= "], ["1251", "Cleanup resources on web-app shutdown (#1207)", "Stephan Windm\u00fcller", "windmueller", "11/11/19, 05:55:19 PM", "In order to allow a clean shutdown, I canceled various timers and unregistered a number of Servo monitors. The `CurrentRequestVersion` got a `remove` method so that the `ThreadLocal` can be cleared after use.\r\n\r\nThe (in my opinion) only ugly solution is `ServoControl` which stops the executor of Servo since the library seems to be no longer maintained.", "> The (in my opinion) only ugly solution is `ServoControl` which stops the executor of Servo since the library seems to be no longer maintained.\r\n\r\nServo is in maintenance mode and we aren't investing much new effort into it, however, PRs that have minimal risk will be considered.  =||= Thanks @stovocor! =||= "], ["1252", "TimedSupervisorTask if cancel the future when it Timeout, the executor whill never execute success again.", null, "BankRen", "11/08/19, 10:24:49 PM", "[eureka-client/src/main/java/com/netflix/discovery/TimedSupervisorTask.java](url)\r\n\r\n ```\r\n       try {\r\n            future = executor.submit(task);\r\n            threadPoolLevelGauge.set((long) executor.getActiveCount());\r\n            future.get(timeoutMillis, TimeUnit.MILLISECONDS);  // block until done or timeout\r\n            delay.set(timeoutMillis);\r\n            threadPoolLevelGauge.set((long) executor.getActiveCount());\r\n            successCounter.increment();\r\n        } catch (TimeoutException e) {\r\n            .....         \r\n        } finally {\r\n            if (future != null) {\r\n                future.cancel(true);\r\n            }\r\n       }\r\n```\r\nif the future cancelled when it throw TimeoutException, it whill interrupt the thread from executor. So that, the executor will handle a interrupted thread, it never execute success again.", "sound's like the issue I had: https://github.com/Netflix/eureka/issues/1250 =||= Looks like a dup of #1250. =||= "], ["1253", "Why Eureka Servers do not exchange instances each other?", "yuanxu zhang", "yuanxuzhang", "03/23/20, 11:56:32 PM", "Hi,There is two Eureka Servers named ServerA and ServerB, a part of services with Eureka Client named ClientA,ClientB were setted eureka.client.serviceUrl.defaultZone value to ServerA, the rest of services with Eureka Client named ClientC,ClientD were setted eureka.client.serviceUrl.defaultZone value to ServerB. ServerA and ServerB defaultZone were setted each other. I expected ServerA and ServerB could replicate client instances,ServerA has all clients, the same as ServerB, but ServerA only has ClientA,ClientB(ServerB only has ClientC,ClientD). Even ServerA and ServerB were started with fetchRegistry=true setting had all clents, ServerA would lost clientC and clientD later(no heate beat). Why Eureka Servers do not exchange instances each other? Need the Client must set eureka.client.serviceUrl.defaultZone value to all eureka servers(ServerA and ServerB)?", "Hard to tell much without a minimal repro with config samples, looks like a misconfiguration to me. Make sure you correctly set up the Eureka cluster first. =||= "], ["1254", "Ask a conceptual question, different regions can not access each other, right?", null, "startjava", "11/08/19, 09:20:29 PM", "Ask a conceptual question, different regions can not access each other, right?\r\ndifferent zone can access each other\uff1f\r\nzone inner servers can access each other\uff1f\r\n\r\n3 ask ...\r\n\r\nhope answer:\r\n\uff081\uff09\uff1f\r\n\uff082\uff09\uff1f\r\n\uff083\uff09\uff1f\r\n\r\nthank you very much!", "Yes to all 3.\r\n\r\nRegions do not communicate among themselves due to regional isolation model, i.e. to support fail out and cookie cutter region expansion. =||= "], ["1255", "Stack for i-xxx does not exist (Service: AmazonCloudFormation; Status Code: 400; Error Code: ValidationError; Request ID: xxx", "Lucas", "lucasobsidiam", "11/08/19, 10:22:18 PM", "We are trying to move our local micro-service architecture to Amazon Web Services with my little experience.\r\n\r\nI have added the ConfigBean line, Maven Dependency and am trying to compile in an EC2 instance which then is sent to ECR and deployed on Fargate. I have attached an IAM role so that when I load Eureka with AWS Autoconfigure it doesn't throw an access key error as adding it to the config did not work. Now I am having the following error appear, which I can't figure out what it's trying to do in CloudFormation:\r\n\r\n> Stack for i-0d6112770e8cb97b2 does not exist (Service: AmazonCloudFormation; Status Code: 400; Error Code: ValidationError; Request ID: e1ac5b22-8b1c-43a5-b93c-e469a541fe46)\r\n\r\n`org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.aws.core.env.ResourceIdResolver.BEAN_NAME': Invocation of init method failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'stackResourceRegistryFactoryBean' defined in class path resource [org/springframework/cloud/aws/autoconfigure/context/ContextStackAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.aws.core.env.stack.config.StackResourceRegistryFactoryBean]: Factory method 'stackResourceRegistryFactoryBean' threw exception; nested exception is com.amazonaws.services.cloudformation.model.AmazonCloudFormationException: Stack for i-0d6112770e8cb97b2 does not exist (Service: AmazonCloudFormation; Status Code: 400; Error Code: ValidationError; Request ID: e1ac5b22-8b1c-43a5-b93c-e469a541fe46)`\r\n\r\nWhere should I be looking at?", "Try to ask at Spring, this is unrelated to Eureka, looks to me like you're missing the value for stack property. =||= "], ["1256", "How to delay eureka client registration eureka server?", null, "kinsey-jian", "11/08/19, 09:22:09 PM", "In K8S, I have a Spring Boot application which is also a Eureka client. The normal behavior of the application is to register with Eureka server on start up as UP. I have a requirement that the application shouldn't register with the Eureka server until k8s readiness finished\r", "This is more of a Spring question, in short you should not call the `.register()` until ready to do so. You may also look into supplying a healthcheck preventing it from going to UP unless your conditions are met. =||= "], ["1257", "How to register a go microservice in spring eureka server", "Kushan KS Edirisooriya", "kushankavinda", "11/15/19, 06:28:05 PM", "I tried many ways to register go microservice in eureka can you please let me know what is the end point that  i neet to call to register a microservice", "Follow the logic in `DiscoveryClient`, you need to heartbeat to\r\n`/discovery/v2/apps/$APP/$INSTANCE_ID?status=$STATUS&lastDirtyTimestamp=$LAST_REGISTRATION` with the appropriate content. =||= We do not ship non-Java clients but it should be pretty trivial to implement a sidecar registering with Eureka and use it in all non-Java services. =||= "], ["1258", "pull", null, "xjfeng306602097", "11/20/19, 11:10:52 PM", "pull request", "Please open an issue first so we can discuss what you'd like to do. We can then update the PR and reopen it. =||= "], ["1259", "maybe this is a bug in eureka-client in class com.netflix.discovery.shared.transport.jersey.ApacheHttpClientConnectionCleaner", null, "chaichunyang", "12/04/19, 03:55:48 AM", "in class com.netflix.discovery.shared.transport.jersey.ApacheHttpClientConnectionCleaner\r\nthe method cleanIdle is for clean idle connections from the pool\r\nthe parameter is in MILLISECONDS, but use connectionManager. closeIdleConnections in SECONDS\r\n\r\n\r\n    public void cleanIdle(long delayMs) {\r\n        Stopwatch start = executionTimeStats.start();\r\n        try {\r\n            apacheHttpClient.getClientHandler().getHttpClient()\r\n                    .getConnectionManager()\r\n                    .closeIdleConnections(delayMs, TimeUnit.SECONDS);\r\n        } catch (Throwable e) {\r\n            logger.error(\"Cannot clean connections\", e);\r\n            cleanupFailed.increment();\r\n        } finally {\r\n            if (null != start) {\r\n                start.stop();\r\n            }\r\n        }\r\n    }", "no one reply this\uff1f =||= This appears to be a typo, this is constructed via `EurekaJerseyClientBuilder` all usages of which read a config property explicitly suffixed with `seconds`, i.e. there's no bug but the parameter name should be `delayS` instead of the current `delayMs`. =||= > This appears to be a typo, this is constructed via `EurekaJerseyClientBuilder` all usages of which read a config property explicitly suffixed with `seconds`, i.e. there's no bug but the parameter name should be `delayS` instead of the current `delayMs`.\r\n\r\nthank you for response, But I debug the code, the configuration property `eureka.client.service-url.eureka-connection-idle-timeout-seconds`  sure is `seconds` by default 30, But in `com.netflix.discovery.shared.transport.EurekaClientFactoryBuilder` it has been multiplied 1000, so when call the build method, the connectionIdleTimeout param actually is `30 * 1000`.\r\n\r\n```\r\nEurekaClientFactoryBuilder:\r\n    public B withClientConfig(EurekaClientConfig clientConfig) {\r\n        withClientAccept(EurekaAccept.fromString(clientConfig.getClientDataAccept()));\r\n        withAllowRedirect(clientConfig.allowRedirects());\r\n        withConnectionTimeout(clientConfig.getEurekaServerConnectTimeoutSeconds() * 1000);\r\n        withReadTimeout(clientConfig.getEurekaServerReadTimeoutSeconds() * 1000);\r\n        withMaxConnectionsPerHost(clientConfig.getEurekaServerTotalConnectionsPerHost());\r\n        withMaxTotalConnections(clientConfig.getEurekaServerTotalConnections());\r\n        \r\n\r\n> withConnectionIdleTimeout(clientConfig.getEurekaConnectionIdleTimeoutSeconds() * 1000);\r\n\r\n        withEncoder(clientConfig.getEncoderName());\r\n        return withDecoder(clientConfig.getDecoderName(), clientConfig.getClientDataAccept());\r\n    }\r\n```\r\nwhen writting this comment I found the newest version 1.9.14 has fix this bug already.\r\nbut the newest spring cloud still depend on 1.9.13. so finally i need update my depends. =||= "], ["1260", "Instance is OUT_OF_SERVICE in service registry, still traffic flowing to this instance ", null, "ganeshcbhanage", "03/23/20, 11:58:13 PM", "I was trying out eureka endpoints as mentioned [here](https://github.com/Netflix/eureka/wiki/Eureka-REST-operations)\r\n\r\nAfter doing PUT /eureka/v2/apps/appID/instanceID/status?value=OUT_OF_SERVICE for 1 instance, it is going out of service in service registry, but still I see traffic flowing through this instance.\r\n\r\nAny help here is appreciated.", "The state is eventually consistent, if you're sure all the servers` registries have it as OOS but the traffic is still going there, it must be an issue on the client side, do the clients see the changes? If no, why? Are there any connectivity issues? What's the impact duration (1m, 30m, hours, persistent?) Anything over 1-2m would indicate an issue with propagation and needs to be localized to the server/client first. =||= I got to know, it is because of PCF. The way PCF handles routes registry using GO router =||= Can you elaborate? Was there an actual issue or a misconfiguration? =||= "], ["1261", "Eureka FreeMarker template error in AMI's column when running in Fargate with Private IP", "Lucas", "lucasobsidiam", "12/04/19, 03:28:34 PM", "I've successfully connected one of our microservices to Eureka from Fargate. Eureka is currently on a separate EC2 instance and microservices will be running from Fargate (hopefully Eureka too). I have managed to get this running properly (or it seems) but I am getting a FreeMarker template error on the Eureka status page under the AMIs columns in \"Instances currently registered with Eureka\".\r\n\r\nWhat I have done to achieve this Fargate to EC2 Eureka connection with Private IP is the following:\r\n\r\nDockerfile:\r\n```\r\n#############\r\n### build ###\r\n#############\r\n\r\n# base image\r\nFROM maven:3.6.2-ibmjava-8-alpine as build\r\n\r\n# set working directory\r\nWORKDIR /app\r\n\r\n\r\n# install and cache app dependencies\r\nCOPY . /app\r\nRUN mvn clean package\r\n\r\n\r\n############\r\n### prod ###\r\n############\r\n\r\n# base image\r\nFROM openjdk:8-alpine\r\n\r\nRUN apk add jq\r\n\r\n# set working directory\r\nWORKDIR /app\r\n\r\n# copy entrypoint from the 'build environment'\r\nCOPY --from=build /app/entrypoint.sh /app/entrypoint.sh\r\n\r\n# copy artifact build from the 'build environment'\r\nCOPY --from=build /app/target/user-service-0.0.1-SNAPSHOT.jar /app/user-service-0.0.1-SNAPSHOT.jar\r\n\r\n# expose port 8081\r\nEXPOSE 8081\r\n\r\n# run entrypoint\r\nENTRYPOINT [\"/bin/sh\", \"./entrypoint.sh\"]\r\n```\r\n\r\nentrypoint.sh:\r\n```\r\n#!/bin/sh\r\nexport FARGATE_IP=$(wget -q -O - http://169.254.170.2/v2/metadata | jq -r .Containers[0].Networks[0].IPv4Addresses[0])\r\necho $FARGATE_IP\r\njava -jar user-service-0.0.1-SNAPSHOT.jar\r\n```\r\n\r\napplication-aws.properties\r\n```\r\neureka.client.region=us-east-1\r\neureka.client.use-dns-for-fetching-service-urls=true\r\neureka.client.eureka-server-u-r-l-context=eureka\r\neureka.client.eureka-server-d-n-s-name=eureka.domain.com\r\neureka.client.eureka-server-port=8761\r\neureka.instance.prefer-ip-address=true\r\neureka.instance.ip-address=${FARGATE_IP}\r\neureka.instance.non-secure-port=8081\r\n```\r\n\r\nThis gives me the following error under the AMIs column in the Eureka page but the service still works.\r\n\r\n> FreeMarker template error (DEBUG mode; use RETHROW in production!): The following has evaluated to null or missing: ==> amiCount.key [in template \"eureka/status.ftl\" at line 35, column 26] ---- Tip: It's the step after the last dot that caused this error, not those before it. ---- Tip: If the failing expression is known to legally refer to something that's sometimes null or missing, either specify a default value like myOptionalVar!myDefault, or use <#if myOptionalVar??>when-present<#else>when-missing. (These only cover the last step of the expression; to cover the whole expression, use parenthesis: (myOptionalVar.foo)!myDefault, (myOptionalVar.foo)?? ---- ---- FTL stack trace (\"~\" means nesting-related): - Failed at: ${amiCount.key} [in template \"eureka/status.ftl\" at line 35, column 24] ---- Java stack trace (for programmers): ---- freemarker.core.InvalidReferenceException: [... Exception message was already printed; see it above ...] at freemarker.core.InvalidReferenceException.getInstance(InvalidReferenceException.java:134) at freemarker.core.EvalUtil.coerceModelToTextualCommon(EvalUtil.java:467) at freemarker.core.EvalUtil.coerceModelToStringOrMarkup(EvalUtil.java:389) at freemarker.core.EvalUtil.coerceModelToStringOrMarkup(EvalUtil.java:358) at freemarker.core.DollarVariable.calculateInterpolatedStringOrMarkup(DollarVariable.java:100) at freemarker.core.DollarVariable.accept(DollarVariable.java:63) at freemarker.core.Environment.visit(Environment.java:366) at freemarker.core.IteratorBlock$IterationContext.executedNestedContentForCollOrSeqListing(IteratorBlock.java:317) at freemarker.core.IteratorBlock$IterationContext.executeNestedContent(IteratorBlock.java:271) at freemarker.core.IteratorBlock$IterationContext.accept(IteratorBlock.java:242) at freemarker.core.Environment.visitIteratorBlock(Environment.java:642) at freemarker.core.IteratorBlock.acceptWithResult(IteratorBlock.java:107) at freemarker.core.IteratorBlock.accept(IteratorBlock.java:93) at freemarker.core.Environment.visit(Environment.java:366) at freemarker.core.IteratorBlock$IterationContext.executedNestedContentForCollOrSeqListing(IteratorBlock.java:317) at freemarker.core.IteratorBlock$IterationContext.executeNestedContent(IteratorBlock.java:271) at freemarker.core.IteratorBlock$IterationContext.accept(IteratorBlock.java:242) at freemarker.core.Environment.visitIteratorBlock(Environment.java:642) at freemarker.core.IteratorBlock.acceptWithResult(IteratorBlock.java:107) at freemarker.core.IteratorBlock.accept(IteratorBlock.java:93) at freemarker.core.Environment.visit(Environment.java:330) at freemarker.core.Environment.visit(Environment.java:336) at freemarker.core.Environment.visit(Environment.java:336) at freemarker.core.Environment.process(Environment.java:309) at freemarker.template.Template.process(Template.java:384) at org.springframework.web.servlet.view.freemarker.FreeMarkerView.processTemplate(FreeMarkerView.java:389) at org.springframework.web.servlet.view.freemarker.FreeMarkerView.doRender(FreeMarkerView.java:302) at org.springframework.web.servlet.view.freemarker.FreeMarkerView.renderMergedTemplateModel(FreeMarkerView.java:253) at org.springframework.web.servlet.view.AbstractTemplateView.renderMergedOutputModel(AbstractTemplateView.java:178) at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:316) at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1371) at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1117) at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1056) at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005) at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:897) at javax.servlet.http.HttpServlet.service(HttpServlet.java:634) at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882) at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:88) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:109) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:109) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:109) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:109) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:114) at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:104) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:109) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:109) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:853) at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1587) at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) at java.lang.Thread.run(Thread.java:748)\r\n\r", "Freemarker is used in spring cloud Netflix =||= Asking at spring cloud Netflix. Thanks @spencergibb  =||= "], ["1262", "Disable jersey2 jsonp/moxy auto discovery", "Matt Nelson", "mattnelson", "12/20/19, 05:41:42 PM", "Disable moxy/jsonp autodiscovery as the eureka client usage leverages an explicitly registered message body reader/writer.\r\n\r\nWhen moxy or another json processor(jsonp) are on the classpath, they will be autodiscovered and registered into the transport/application clients which causes errors as those other providers take precedence over the DiscoveryJerseyProvider.\r\n\r\nExample stack trace of moxy attempting to handle the request\r\n```\r\n\tat org.eclipse.persistence.jaxb.rs.MOXyJsonProvider.readFrom(MOXyJsonProvider.java:695)\r\n\tat org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor.invokeReadFrom(ReaderInterceptorExecutor.java:256)\r\n\tat org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor.aroundReadFrom(ReaderInterceptorExecutor.java:235)\r\n\tat org.glassfish.jersey.message.internal.ReaderInterceptorExecutor.proceed(ReaderInterceptorExecutor.java:155)\r\n\tat org.glassfish.jersey.spi.ContentEncoder.aroundReadFrom(ContentEncoder.java:127)\r\n\tat org.glassfish.jersey.message.internal.ReaderInterceptorExecutor.proceed(ReaderInterceptorExecutor.java:155)\r\n\tat org.glassfish.jersey.message.internal.MessageBodyFactory.readFrom(MessageBodyFactory.java:1085)\r\n\tat org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:874)\r\n\tat org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:808)\r\n\tat org.glassfish.jersey.client.ClientResponse.readEntity(ClientResponse.java:326)\r\n\tat org.glassfish.jersey.client.InboundJaxrsResponse$1.call(InboundJaxrsResponse.java:115)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:315)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:297)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:228)\r\n\tat org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:419)\r\n\tat org.glassfish.jersey.client.InboundJaxrsResponse.runInScopeIfPossible(InboundJaxrsResponse.java:267)\r\n\tat org.glassfish.jersey.client.InboundJaxrsResponse.readEntity(InboundJaxrsResponse.java:112)\r\n\tat com.netflix.discovery.shared.transport.jersey2.AbstractJersey2EurekaHttpClient.getApplicationsInternal(AbstractJersey2EurekaHttpClient.java:266)\r\n```", "@troshko111 Could I get review on this? =||= Thanks @mattnelson! =||= @troshko111 Do know when this will be released? =||= I have no problem releasing right now, it seems pretty safe to me. In general, feel free to mention if it's important to release close to the PR merge, more than happy to accomodate.\r\n\r\nEDIT 1: kicked off one.\r\nEDIT 2: released. =||= "], ["1263", "Release 1.9.14 Fails to Build", "Matthew Johnson", "copperlight", "11/02/20, 01:12:47 AM", "Steps to reproduce:\r\n\r\n1. Download the `tar.gz` file from the [1.9.14 Releases page](https://github.com/Netflix/eureka/releases/tag/v1.9.14).\r\n1. Extract the tarball.\r\n1. `./gradlew build`\r\n\r\nError:\r\n\r\n```\r\n./gradlew build\r\n\r\n...\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* Where:\r\nBuild file '/Users/matthewj/Downloads/eureka-1.9.14/build.gradle' line: 10\r\n\r\n* What went wrong:\r\nAn exception occurred applying plugin request [id: 'nebula.netflixoss', version: '3.6.0']\r\n> Failed to apply plugin [id 'nebula.netflixoss']\r\n   > Cannot set property 'defaultVersionStrategy' on null object\r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\r\n\r\nBUILD FAILED\r\n\r\nTotal time: 24.677 secs\r\n```\r\n\r\nThe issue is that the Nebula plugin depends on the existence of tags within a Git repo.\r\n\r\nIf you clone the repo, checkout the v1.9.14 tag and build from there, then it succeeds.\r\n\r", "I run into the same error. Any updates on this? =||= No changes, PRs are welcome, otherwise you can use the workaround:\r\n\r\n> checkout the v1.9.14 tag and build from there, then it succeeds. =||= After thinking about it, I am fine with the build process as it is.\r\n\r\nIt may be worth a doc update mentioning that tags should be checked out to perform a build.\r\n =||= "], ["1264", "How to delay eureka-client registration without set leaseRenewalIntervalInSeconds?", null, "mengnanpanghu", "12/26/19, 01:40:35 PM", "Hi, I have already set ```eureka.client.initialInstanceInfoReplicationIntervalSeconds``` ,but it's not work for me because the ***heartbeat*** task still run the ```register()```  \r\n\r\nSo I have to set the ```eureka.instance.leaseRenewalIntervalInSeconds``` which also have an impact on the heartbeat interval, and it finally works.  \r\n\r\nIs there a way to delay eureka-client registration without set leaseRenewalIntervalInSeconds?", "Have you considered utilizing the status for this? i.e. do not report yourself as \"UP\" until you're ready, would that do it? =||=  My bad, I should have found this solution earlier, It works\r\nThanks for your help =||= "], ["1265", "Gracefully handle HTML errors from Eureka server", null, "Helmsdown", "12/19/19, 09:46:54 PM", "It possible to get HTML responses from the server (e.g. Apache fails to\r\ntalk to backend API). These would result in a failure to deserialize\r\nand a random exception logged.", "NaN"], ["1266", "Where to update the \"expectedNumberOfClientsSendingRenews\" when we evict a instance?", "wangmeng", "barrywangmeng", "01/27/20, 06:28:33 PM", "When I look at eureka has been a source of confusion in \"selfPreservationMode\", I saw the sorce code with mater branch,\r\nwhen we see register or cancel method, there will be update \"expectedNumberOfClientsSendingRenews\", just like the code:\r\n\r\n```java\r\n// The lease does not exist and hence it is a new registration\r\nsynchronized (lock) {\r\n    if (this.expectedNumberOfClientsSendingRenews > 0) {\r\n        // Since the client wants to register it, increase the number of clients sending renews\r\n        this.expectedNumberOfClientsSendingRenews = this.expectedNumberOfClientsSendingRenews + 1;\r\n        updateRenewsPerMinThreshold();\r\n    }\r\n}\r\n```\r\n\r\ni have read the code with \"evict\" method in \"AbstractInstanceRegistry\" class, but i didn't find where to update the \"expectedNumberOfClientsSendingRenews\" when we evict a instance according to a timed task. \r\n\r\ncan you tell me where to update the \"expectedNumberOfClientsSendingRenews\" when we evict a instance ? \r", " I saw the same question, but it seems that the problem has not been solved\u3002\r\nsee detail\uff1ahttps://github.com/spring-cloud/spring-cloud-netflix/issues/2407 =||= Trying to understand whether this was intentional (and why) but so far it looks like a bug to me. =||= "], ["1267", "How to recover from self preservation mode under auto scaling", "ZHEN, XU", "larryxuzhen", "01/15/20, 06:14:52 AM", "I have a k8s cluster with several auto scaling deployments. When the number of instance decrease sharply, Eureka may enter the self preservation mode and can not recover automatically. Cuz the those instances actually disappeared and would not reappear, and the renew threshold keeps high for nonexistent instances... \r\nIs there any recommended way to deal with it other than decreasing the renewalPercentThreshold?", "Hi, in this case you may try to change configuration parameter `eureka.enableSelfPreservation` to `false` temporarily, wait until Eureka picks up new value, then wait for it to evict the instances, then set this property back to `true`. =||= "], ["1269", "Spring Zuul + Eureka Different IP address LoadBalancer issue", null, "amin224", "01/20/20, 10:36:27 AM", "Hi,\r\n\r\nI have a eureka+zuul application running on my server in order to have service discovery and API gateway for my microservices. When i make a request to any microservice on the same machine localhost it is working fine, but when i try with another instance and from another machine i am getting this error:\r\n\r\n```\r\n{\r\n    \"timestamp\": \"2020-01-17T12:56:06.677+0000\",\r\n    \"status\": 500,\r\n    \"error\": \"Internal Server Error\",\r\n    \"message\": \"Connect to {server ip address}:{8003} [/{server ip address}] failed: Connection refused (Connection refused)\"\r\n}\r\n```\r\n\r\nMy Eureka+Zuul Config:\r\n\r\n```\r\nserver.port=8761\r\nspring.application.name=servicediscovery\r\neureka.client.registerWithEureka=false\r\neureka.client.fetchRegistry=false\r\neureka.instance.preferIpAddress=true\r\neureka.server.waitTimeInMsWhenSyncEmpty=5\r\neureka.instance.nonSecurePort=80\r\nspring.cloud.inetutils.preferredNetworks=192.\r\neureka.server.expectedClientRenewalIntervalSeconds=30\r\neureka.instance.leaseExpirationDurationInSeconds=40\r\neureka.instance.registry.expected-number-of-clients-sending-renews=5\r\neureka.server.evictionIntervalTimerInMs=60000\r\neureka.server.renewalPercentThreshold=0.85\r\neureka.server.renewalThresholdUpdateIntervalMs=20000\r\neureka.server.enableSelfPreservation=true\r\nzuul.routes.microservice.url=http://{the ip address of my server machine}:8003/\r\nzuul.routes.microservice.sensitiveHeaders=\r\n```\r\nMy Microservice Config:\r\n\r\n```\r\neureka.client.serviceUrl.defaultZone=http://{ip address of my server machine}:8761/eureka\r\neureka.client.fetchRegistry=true\r\neureka.client.registryFetchIntervalSeconds=30\r\neureka.instance.preferIpAddress=true\r\neureka.client.registerWithEureka=true\r\neureka.client.healthcheck.enabled=true\r\neureka.instance.healthCheckUrlPath=/actuator/health\r\neureka.instance.statusPageUrlPath=/actuator/info\r\neureka.instance.leaseRenewalIntervalInSeconds=30\r\neureka.instance.leaseExpirationDurationInSeconds=40\r\neureka.client.eurekaServiceUrlPollIntervalSeconds=60\r\neureka.client.instanceInfoReplicationIntervalSeconds=30\r\neureka.client.initialInstanceInfoReplicationIntervalSeconds=40\r\n```\r\n\r\nPlease let me know what i am missing, should i add more URLs to `zuul.routes.microservice.url=http://{the ip address of my server machine}:8003/` so i mention all ip addresses of my machines and how is it possible?", "Turns out i left an important note that proved i was not load balancing by using the above property `zuul.routes.microservice.url=http://{1 of the machine IP address}/8100/`\r\n\r\nhttps://cloud.spring.io/spring-cloud-netflix/reference/html/#router-and-filter-zuul\r\n\r\nBelow properties worked for me\r\n\r\n```\r\nzuul.routes.microservice.path=/microservice/**\r\nzuul.routes.microservice.serviceID=microservice1\r\nmicroservice1.ribbon.listOfServers=http://{machine 1 ip address}:8100/,http://{machine 2 ip address}:8100/,http://localhost:8100/\r\nmicroservice1.ribbon.eureka.enabled=true\r\n``` =||= "], ["1270", "Spring netflix Zuul Connection Refused", null, "amin224", "08/12/20, 06:25:53 AM", "Hi,\r\n\r\nI have eureka server discovery for my microservice connected to eureka as client, in addition i added an api gateway netflix zuul in order to load balance multiple instances run on different machines ( different IP addresses). My question is how can i enable Zuul to load balance between the instances. I am aware of these properties for Zuul that will do the job but i don't know how to add additional IP addresses to be connected to Zuul as i am getting connection refused for different machines.\r\n\r\nZuul server application.properties\r\n```\r\nzuul.routes.microservice.url=http://{1 of the machine IP address}/8100/\r\nzuul.routes.microservice.path=/microservice/**\r\nzuul.routes.microservice.serviceID=microservice1\r\nzuul.routes.microservice.sensitiveHeaders=\r\neureka.instance.preferIpAddress=true\r\neureka.client.serviceUrl.defaultZone=http://{eureka IP address machine}:8761/eureka\r\n```\r\nThank you", "Turns out i left an important note that proved i was not load balancing by using the above property `zuul.routes.microservice.url=http://{1 of the machine IP address}/8100/`\r\n\r\nhttps://cloud.spring.io/spring-cloud-netflix/reference/html/#router-and-filter-zuul\r\n\r\nBelow properties worked for me\r\n\r\n    zuul.routes.microservice.path=/microservice/**\r\n    zuul.routes.microservice.serviceID=microservice1\r\n    microservice1.ribbon.listOfServers=http://{machine 1 ip address}:8100/,http://{machine 2 ip address}:8100/,http://localhost:8100/\r\n    microservice1.ribbon.eureka.enabled=true =||= Can someone please forward me a link where they discuss about these properties in details or try to explain as i could not find detailed explanation. Thank you\r\n\r\n```\r\nzuul.host.time-to-live=\r\nzuul.host.connect-timeout-millis=\r\nzuul.host.socket-timeout-millis=\r\nzuul.semaphore.max-semaphores=\r\nribbon.ServerListRefreshInterval=\r\nribbon.ConnectTimeout=\r\nribbon.ReadTimeout=\r\nribbon.NIWSServerListClassName=com.netflix.loadbalancer.ConfigurationBasedServ\r\nhystrix.command.default.execution.isolation.thread.timeoutInMilliseconds=\r\n``` =||= Have you checked out https://github.com/Netflix/ribbon and https://github.com/Netflix/zuul yet? =||= Thank you for the links that you have sent me, I will look them up and much appreciated. =||= "], ["1271", "decrement expectedNumberOfClientsSendingRenews for expired leases", "Snow Pettersen", "snowp", "01/27/20, 06:28:33 PM", "Moves the logic that decrements the expected number of clients into\r\n`internalCancel` - this should ensure that we're calling it both for\r\nexplicit cancels as well as well as when the instance lease expires.\r\n\r\nFixes #1266", "I couldn't find any existing test coverage for this, happy to add some if ya'll have any pointers to where to start =||= "], ["1273", "Scaling Eureka Horizontally", "Sean Humbarger", "cowboy-cod3r", "02/24/20, 09:27:01 PM", "Hi,\r\n\r\nWe recently had some issues with our 3 node Eureka Server cluster.  We had some major scaling events which brought the number of registered instances with Eureka to about 2400.  Upon reaching this number, file handles and CPU spiked.  Eureka was unable to recover from this and our only recourse was to scale back our services and kill off the 2 Eureka Servers that were in distress (the 3rd was not in distress).  We were running an older version of Eureka (1.6.2) via spring cloud.  We have since upgraded Eureka to version 1.9.13.  After our upgrade to 1.9.13 we noticed we could now register about 3500 instances before we would start seeing a significant number of socket timeouts and CPU would jitter quite a bit.  We then found the following issue and supporting pull request:\r\n\r\n- https://github.com/Netflix/eureka/issues/982\r\n- https://github.com/Netflix/eureka/pull/1031\r\n\r\nIn short, the guidance was to increase the peer node read timeout using the `eureka.server.peer-node-read-timeout-ms` property.  We did this and doing so got rid of timeouts completely and settled CPU.  Our target was to register 10,000 instances which we've now hit.\r\n\r\nOur next test was to figure out what impact scaling the Eureka server horizontally from 3 instances to 9 instances would have.  When we scaled out with 10,000 registered instances, each eureka server seemed to be giving a different picture of the world and we'd never see the same number of instances registered between our eureka server.  Most of the time each server was off by the thousands.  I tried scaling back down to 6 instances but that did not work either.  It wasn't until I scaled back to three did things start to settle out.  So here are my questions:\r\n\r\n1. Is there any real benefit to scaling Eureka horizontally other than providing redundancy?\r\n2. Are there specific tuning parameters that may be helpful for replication when scaling out the number of Eureka servers?\r\n3. Regarding the `eureka.server.max-elements-in-status-replication-pool` property, what exactly defines an element?  Does this relate to the number of registered instances?\r\n4. Would you be able to share any numbers on the netflix side in terms of performance testing for Eureka?\r\n\r\nTo possibly help with any of my questions above, here is what our configurations look like on our Eureka servers (we use DNS resolution to find the eureka servers and I've omitted those properties from the config below).  I realize some of these properties are the default but we define them anyways in our `application.properties` file.\r\n\r\n```\r\n# Server Specific Settings\r\nserver.port=8761\r\nserver.tomcat.max-threads=500\r\n\r\n# Client Settings\r\neureka.client.register-with-eureka=true\r\neureka.client.fetch-registry=false\r\neureka.client.enabled=true\r\neureka.client.prefer-same-zone-eureka=false\r\neureka.client.on-demand-update-status-change=true\r\n\r\n# Instance Settings\r\neureka.instance.app-group-name=SERVICE-DISCOVERY\r\neureka.instance.appname=eureka\r\neureka.instance.non-secure-port=${server.port}\r\neureka.instance.virtual-host-name=eureka\r\n\r\n# Upon startup, the time to wait before eureka will serve its cache.  You want to wait long enough, where you\r\n# think the cache will be populated enough to provide to backends.  You don't want to serve an empty cache.\r\neureka.server.wait-time-in-ms-when-sync-empty=180000\r\n\r\n# Turn on self preservation mode and sent renewal threshold to 30%. If 30% are lost at once, stop ejecting instances.\r\neureka.server.enable-self-preservation=true\r\neureka.server.renewal-percent-threshold=0.30\r\n\r\n# How often eureka will requery DNS for a new peer listing.\r\neureka.server.peer-eureka-status-refresh-time-interval-ms=60000\r\n\r\n# Indicates whether the replication between cluster nodes should be batched for network efficiency. Default is false.\r\neureka.server.batch-replication=true\r\n\r\n# The replicated data sent in the request will be always compressed. Default is false.\r\neureka.server.enable-replicated-request-compression=false\r\n\r\n# Max number of replication events that can be allowed to back up in the status replication pool.  Default is 10000.\r\neureka.server.max-elements-in-status-replication-pool=10000\r\n\r\n# Max number of replication events that can be allowed to back up in the replication pool.  This replication pool\r\n# is responsible for all events except status updates.  Default is 10000.\r\neureka.server.max-elements-in-peer-replication-pool=10000\r\n\r\n# The min number of threads to be used for replication. Default is 5.\r\neureka.server.min-threads-for-peer-replication=5\r\n\r\n# The max number of threads to be used for replication. Default is 20.\r\neureka.server.max-threads-for-peer-replication=20\r\n\r\n# Total number of HTTP connections allowed to peer eureka nodes for replication. Default is 1000.\r\neureka.server.peer-node-total-connections=1000\r\n\r\n# Total number of HTTP connections allowed to a particular peer eureka node for replication. Default is 500.\r\neureka.server.peer-node-total-connections-per-host=500\r\n\r\n# Replication timeout.  Default is 200\r\neureka.server.peer-node-read-timeout-ms=10000\r\n\r\n# Others to consider\r\neureka.server.max-idle-thread-age-in-minutes-for-peer-replication=15\r\neureka.server.max-threads-for-status-replication=10\r\neureka.server.peer-node-connect-timeout-ms=1000\r\neureka.server.peer-node-connection-idle-timeout-seconds=30\r\n```\r", "Another thing we've noticed, is that anytime we attempt to scale beyond 3 nodes, at least one of the nodes always reports that there are unavailable replicas.  Over time, the node that reports the unavailable replicas changes.\r\n\r\nAlso, we randomly get this error:\r\n`ERROR c.n.e.c.ReplicationTaskProcessor - Batch update failure with HTTP status code 500; discarding 250 replication tasks`\r\n\r\nWe'll see this several times in a row and all of a sudden a significant number of registered instances will be evicted from the Eureka server. =||= Sean, thanks for the detailed write up. I don't see anything out of ordinary in your config, it should be ok, you might want to fix `renewal-percent-threshold`, it's the other way around (70% threshold means under 30% of nodes can drop dead at once).\r\n\r\n> Is there any real benefit to scaling Eureka horizontally other than providing redundancy?\r\n\r\nI can offer a personal opinion only, I don't think there's a whole lot of benefit scaling horizontally beyond 2-3 nodes for redundancy alone, heck running 1 would not be crazy. Services should be designed in a way a temporary Name Service (Eureka) unavailability is not an issue, worst case if none of the servers are up, new deployments will be slowed down and the existing instances will have a potentially stale state (unless this is naturally very volatile, couple minutes of delay is not a problem); and this is only until you restart / redeploy the name service nodes after which it all goes back to normal. This is not a service you need many nines of availability for, there's a little reason to go above 99.9% for a name service but opinions vary.\r\n\r\nAn actual benefit of scaling horizontally may be amplifying the NIC throughput in case you have a lot of readers and are close to saturating the NICs on your Eureka nodes. The number of horizontal nodes here is proportional of the total throughput you want to handle, but I would not go crazy (maybe 5 tops), as this is a full mesh replication.\r\n\r\n> Are there specific tuning parameters that may be helpful for replication when scaling out the number of Eureka servers?\r\n\r\nBatching is probably the only important one. Try playing with these settings.\r\n\r\n> Regarding the eureka.server.max-elements-in-status-replication-pool property, what exactly defines an element? Does this relate to the number of registered instances?\r\n\r\n`eureka-core/src/main/java/com/netflix/eureka/cluster/PeerEurekaNode.java:245`, this is used for ASG status replication only.\r\n\r\n> Would you be able to share any numbers on the netflix side in terms of performance testing for Eureka?\r\n\r\nI'm unable to share the exact numbers but can say that we have significantly more instances than a couple thousands, but trying to keep the NIC saturation under 25% on the Eureka nodes. We do not run a massive number of Eureka nodes, just a couple (horizontally), most of the traffic is reads, the replication is negligible in comparison, so that's the main optimization opportunity.\r\n\r\nBased on your write up, it seems like you may be having either networking issues or sub-optimal tomcat configuration, I suggest start with checking that, this is a bunch of blocking IO so one thing to check is whether the pools are getting full and hence requests are getting dropped due to that. =||= @troshko111 \r\nThank you for taking the time to respond above.  I'll have to dive into our tomcat settings.  We currently deploy eureka through spring-cloud and the only thing we tune WRT to tomcat is `server.tomcat.max-threads`.  \r\n\r\nFor now, we have decided to stick with three eureka servers.  Regarding the consistency issue, I did notice that consistency seemed to get better when I changed `eureka.client.fetch-registry` from `false` to `true`.  We ended up changing it to `true` based on another issue we were seeing where the renewal threshold would go down to 0 (although it wouldn't start out that way).  Here is the link that gave me the answer to that:\r\nhttps://github.com/spring-cloud/spring-cloud-netflix/issues/380#issuecomment-180394690\r\n\r\nThank you again.  I think we can close this one out. =||= "], ["1274", "Microservices not registering on all Eureka Instances", "Priyam Srivastava", "wambling", "04/13/21, 05:58:05 PM", "Hi,\r\n\r\nI am trying to achieve HA of Eureka Instances by doing clustering with Apache2 and mod_jk. Clustering is working fine but microservices are not registering on both instances.\r\n\r\nI have added a post at Stack Overflow  over a month ago but have not received any suggestion so far, hence this post here. Instead of duplicating the entire problem statement here, please refer to my Stack Overflow post for full issue description.\r\n\r\nIf needed I can re-post everything here again. \r\n\r\n[Microservices not registering on all Eureka Instances](https://stackoverflow.com/questions/59489749/microservices-not-registering-on-all-eureka-instances)\r\n\r\nMy objective is that in each microservice I should only give the clustered URL of Eureka server and not a list of URLs. So that tomorrow when I add a new instance of Eureka behind the load balancer, I don't have to update the properties/bootstrap files of each microservices.\r\n\r\nRegards,\r\nPriyam", "You only need to setup Eureka nodes properly, they must know of each other to replicate, I don't see how any set up of the peer nodes in your config, they are not replicating. =||= @troshko111\r\n> You only need to setup Eureka nodes properly, they must know of each other to replicate, I don't see how any set up of the peer nodes in your config, they are not replicating.\r\n\r\nAs per the instructions here (for two peer awareness), I have already set the properties like below:\r\n\r\nEureka-1 props:\r\n\r\n```\r\neureka:\r\n  client:\r\n    service-url:\r\n      defaultZone: http://eureka-server-2:8081/eureka-naming-server/eureka\r\n```\r\nEureka-2 props\r\n\r\n```\r\neureka:\r\n  client:\r\n    service-url:\r\n      defaultZone: http://eureka-server-1:8080/eureka-naming-server/eureka\r\n```\r\nPlease let me know what according to you is missing. May be I didn't understand your comment properly.\r\nKindly do note that my objective is to use load-balancer URL in the microservices something like below:\r\nMicroservice props:\r\n\r\n```\r\neureka:\r\n  client:\r\n    service-url:\r\n      defaultZone: http://localhost:80/eureka-naming-server/eureka\r\n``` =||= This looks good to me, the only suggestion I have is to use sticky-ish routing when going through the LB so that you don't heartbeat to different nodes each time potentially running into replication races. =||= > This looks good to me, the only suggestion I have is to use sticky-ish routing when going through the LB so that you don't heartbeat to different nodes each time potentially running into replication races.\r\n\r\nOk let me try that way and see how it goes. =||= "], ["1275", "Broadcast public ipv4 addresses on override", "Argha C", "argha-c", "02/03/20, 09:50:54 PM", "This is a quick and dirty PR to get Eureka to return public ipv4 addresses when overriden by a new config flag `broadcastPublicIpv4`.\r\n\r\nHowever, it doesn't fundamentally alter the behavior of `resolveDefaultAddress` as part of this change. \r\n\r\n/cc @drobertduke ", "NaN"], ["1276", "Upgrade gradle", "Spencer Gibb", "spencergibb", "04/30/20, 10:17:32 PM", "Running recent intellij with java 11 runtime\r\n```\r\nCannot determine classpath for resource 'java/sql/SQLException.class' from location 'jrt:/java.sql/java/sql/SQLException.class'.\r\n\r\nThe project uses Gradle 2.10 which is incompatible with IDEA running on Java 10 or newer.\r\nSee details at https://github.com/gradle/gradle/issues/8431\r\nPossible solution:\r\n - Upgrade Gradle wrapper to 4.8.1 version and re-import the project\r\n```", "ping :-) =||= "], ["1277", "The renew method of class Lease in eureka-core why add duration", null, "zxm812", "04/13/21, 05:58:14 PM", "when the Lease renew, lastUpdateTimestamp = System.currentTimeMillis() + duration;\r\nbut method of isExpired add the duration another:\r\npublic boolean isExpired(long additionalLeaseMs) {\r\n        return (evictionTimestamp > 0 || System.currentTimeMillis() > (lastUpdateTimestamp + duration + additionalLeaseMs));\r\n}", "This may be an officially known bug\uff0cyou can see the code comments in `Lease.isExpired()`\uff0cjust like this\uff1a\r\n```java\r\n/**\r\n * Checks if the lease of a given {@link com.netflix.appinfo.InstanceInfo} has expired or not.\r\n *\r\n * Note that due to renew() doing the 'wrong\" thing and setting lastUpdateTimestamp to +duration more than\r\n * what it should be, the expiry will actually be 2 * duration. This is a minor bug and should only affect\r\n * instances that ungracefully shutdown. Due to possible wide ranging impact to existing usage, this will\r\n * not be fixed.\r\n *\r\n * @param additionalLeaseMs any additional lease time to add to the lease evaluation in ms.\r\n */\r\npublic boolean isExpired(long additionalLeaseMs) {\r\n    return (evictionTimestamp > 0 || System.currentTimeMillis() > (lastUpdateTimestamp + duration + additionalLeaseMs));\r\n}\r\n```\r\n\r\nIn the end, they said \"Due to possible wide ranging impact to existing usage, this will not be fixed.\" =||= "], ["1280", "Can a newer version of Eureka client(e.g. 1.9.2) be used with an older version of the server(e.g. 1.6.2)?", "yuzai", "kaoyahuigui2018", "04/07/20, 05:29:10 PM", "We are planning to upgrade springboot1.5.6 to 2.x, which contains\r\nspringcloud-eureka will also be upgraded from 1.3.1 (eureka 1.6.2) to 1.4.x (eureka 1.9.2),\r\nBut now there are many different projects (non-springboot projects) registered on the eureka server, so we don't want to upgrade the eureka server and only upgrade the client. Is there any problem in this?", "Should be no problem, the API is compatible. =||= "], ["1281", "Cannot execute request on any known server\" when i set up a Eureka cluster by Kubernate cluster", "nityananda", "Nityananda777", "06/10/20, 06:59:36 PM", "**In Eureka Server**\r\nserver:\r\n  port: 8761 # Indicate the default PORT where this service will be started\r\n\r\neureka:\r\n  client:\r\n    registerWithEureka: false   #telling the server not to register himself in the service registry\r\n    fetchRegistry: false\r\n  server:\r\n    waitTimeInMsWhenSyncEmpty: 0    #wait time for subsequent sync\r\n  instance:\r\n    hostname: localhost\r\n\r\n**In Eureka Client**\r\nspring:\r\n  application:\r\n    name: api-gateway\r\n\r\nserver:\r\n  port: 8088\r\n\r\neureka:         #tells about the Eureka server details and its refresh time\r\n  instance:\r\n    leaseRenewalIntervalInSeconds: 1\r\n    leaseExpirationDurationInSeconds: 2\r\n  client:\r\n    serviceUrl:\r\n      defaultZone: http://localhost:8761/eureka/\r\n    region: default\r\n    registryFetchIntervalSeconds: 5\r\n    healthcheck:\r\n      enabled: true\r\n    lease:\r\n      duration: 5\r\nendpoints:\r\n  restart:\r\n    enabled: true\r\n\r\n\r\n**Spring Boot Dependency version-2.1.2.RELEASE** \r\n**Cloud version-Greenwich.SR1**\r\n \r\n\r\n**Getting Error**\r\nat org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180) ~[httpclient-4.5.6.jar!/:4.5.6]\r\n\tat org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144) ~[httpclient-4.5.6.jar!/:4.5.6]\r\n\tat org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134) ~[httpclient-4.5.6.jar!/:4.5.6]\r\n\tat org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610) ~[httpclient-4.5.6.jar!/:4.5.6]\r\n\tat org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445) ~[httpclient-4.5.6.jar!/:4.5.6]\r\n\tat org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835) ~[httpclient-4.5.6.jar!/:4.5.6]\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:118) ~[httpclient-4.5.6.jar!/:4.5.6]\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.6.jar!/:4.5.6]\r\n\tat com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173) ~[jersey-apache-client4-1.19.1.jar!/:1.19.1]\r\n\t... 27 common frames omitted\r\n2020-03-21 16:16:45.428  WARN 1 --- [tbeatExecutor-0] c.n.d.s.t.d.RetryableEurekaHttpClient    : Request execution failed with message: java.net.ConnectException: Connection refused (Connection refused)\r\n2020-03-21 16:16:45.428 ERROR 1 --- [tbeatExecutor-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_API-GATEWAY/gateway-service-758bf48b69-tp4qz:api-gateway:8088 - was unable to send heartbeat!\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n\tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\n\tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\n\tat com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:846) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\n\tat com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1405) [eureka-client-1.9.8.jar!/:1.9.8]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_201]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_201]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_201]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_201]\r\n\tat java.lang.Thread.run(Thread.java:748) [na:1.8.0_201]\r\n2020-03-21 16:16:46.430 ERROR 1 --- [tbeatExecutor-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error. endpoint=DefaultEndpoint{ serviceUrl='http://localhost:8761/eureka/}\r\ncom.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused (Connection refused)\r\n\tat com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187) ~[jersey-apache-client4-1.19.1.jar!/:1.19.1]\r\n\tat com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123) ~[jersey-client-1.19.1.jar!/:1.19.1]\r\n\tat com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\n\tat com.sun.jersey.api.client.Client.handle(Client.java:652) ~[jersey-client-1.19.1.jar!/:1.19.1]\r\n\tat com.sun.jersey.api.client.WebResource.handle(WebResource.java:682) ~[jersey-client-1.19.1.jar!/:1.19.1]\r\n\tat com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74) ~[jersey-client-1.19.1.jar!/:1.19.1]\r\n\tat com.sun.jersey.api.client.WebResource$Builder.put(WebResource.java:529) ~[jersey-client-1.19.1.jar!/:1.19.1]\r\n\tat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.sendHeartBeat(AbstractJerseyEurekaHttpClient.java:102) ~[eureka-client-1.9.8.jar!/:1.9.8]\r\n\r\n\r\n\r\n\r", "Based on the error seems like nothing was running on that port at that time, once you set up the server try to curl it or telnet there to ensure there's connectivity. =||= You're also using localhost for both the client and the server but depending on how you actually run this it may not be the same \"localhost\". =||= "], ["1282", "Add stats for DiscoveryClient", "Bennett", "yobennett", "04/07/20, 05:27:28 PM", "We introduce a nested class for `DiscoveryClient` to make it easier for users to read helpful attributes that can assist in log analysis and debugging. Most of these attributes are captured by existing metrics:\r\n\r\n* `initTimestampMs`: timestamp when the client was initialized\r\n* `localRegistrySize`: number of instances for all applications\r\n* `lastSuccessfulRegistryFetchTimestampMs`: timestamp for last successful fetch\r\n* `lastSuccessfulHeartbeatTimestampMs`: timestamp for last successful heartbeat\r\n\r\nWe add a new attribute called `initLocalRegistrySize`, which is the number of instances for all applications read when the client was initialized. We include a helper method that uses this attribute so that users can determine whether the client's initial fetch of registry information succeeded or failed. Note that other accessors are suffixed with `Ms` (for milliseconds) to denote the time unit.\r\n\r\nAdditionally, we update the existing `registrySize` with the value from `initLocalRegistrySize` during initialization instead of waiting until the first local registry refresh.", "NaN"], ["1283", "Update unit tests", "Kaze", "melochin", "04/06/20, 06:22:19 PM", "update ``InstanceInfoReplicatorTest`` and ``RateLimiterTest``\r\n1. remove staled mock code in ``InstanceInfoReplicatorTest.setup()``\r\n2. change the loop condition in ``RateLimiterTest.testEvenLoad()``. Otherwise, the loop body will not be executed.\r\n\r", "Thanks! =||= "], ["1284", "upgrade jackson to - 2.9.10", null, "RakefetEP", "04/07/20, 10:45:15 PM", "(for some security fixes)", "I see that jackson-databind has 2.9.10.3 but jackson-core does not have it and there is only one variable for Jackson libraries.\r\n\r\nI will change to 2.9.10 for now. =||= Thanks, @troshko111 !\r\n\r\nHave a lovely day :) =||= Thanks for the PR! I'll release this now. =||= Great! Thanks a lot! =||= Hi @troshko111 :) Regarding the upgrade to latest Jackson 2.10.3, are there any special steps I should do before creating the PR?\r\n\r\nThanks again! =||= Hey, I went over the changelog and don't really see anything there which could break compatibility. I think it'd be a good idea to compare the `JSON` representation of various resources (instance info, app list, etc.) pre- and post-change to ensure there are no serialization differences. =||= "], ["1285", "How to prevent unwanted clients register to the eureka server?", "Koma", "KomaBeyond", "06/05/20, 11:04:39 PM", "As the title description, is there any way that i can do in the eureka server side to prevent client registration?", "This really depends on your situation (how exposed the server is, what guarantees you're looking for), I suggest you explore these options (order desc by reliability/guarantees):\r\n\r\n1) `mTLS`, reject not whitelisted clients\r\n2) `iptables`, reject not whitelisted subnets\r\n2) If deployed to a public cloud, look into the cloud offerings for network security (e.g. security groups on AWS) and create a VPC for trusted clients and only allow traffic from there\r\n\r\nBest to do 1 + 2, require mTLS and limit the traffic to an internal VPC. =||= @troshko111 \r\n\r\nThanks for ur reply and u given a very good ideas. But because some of reasons, we expected to do this work just only in the eureka server application inside.\r\n\r\nSo is there any extension way that i can use to?\r\n\r\nI saw there is a class named PeerAwareInstanceRegistryImpl and it has a register method responsibility to the client registration.\r\n\r\nSo if i can extension this class and override the register method then i can prevent client registration in this method though the instance metaDataMap attribute. =||= Yeah as I said it depends on what kind of guarantees you're looking for, if you don't care about doing it securely then you absolutely can override some registry methods and just reject registrations of instances you don't like.\r\n\r\nJust note that this is trivial to game, as the traffic is plaintext and the registration info is self-reported, anyone can report any nonsense until you accept it. If you're in some sort of trusted environment that may be ok, but probably worth mentioning. =||= Yeah, thanks for your reply, and finally we are using the spring-security to do this work.  =||= "], ["1287", "resolve endpoint zone from metadata", "\u866b\u4e8c", "MI-cool", "05/27/20, 04:43:08 PM", "endpoint zone can be get from metadata", "The change LGTM, but can you elaborate on the bug and add some tests showing how it fixes it? =||= Sorry.\r\nMy project was build with spring-cloud-starter-netflix-eureka-client.\r\nI use the following configuration to make the client dynamically aware of the server nodes. \r\n\r\neureka.client.transport.bootstrapResolverStrategy=composite\r\neureka.client.transport.readClusterVip=eureka-read-server\r\neureka.client.transport.writeClusterVip=eureka-write-server\r\n\r\nDuring the test, it was found that the client lost the server zone information. Finally found that the more reasonable way to modify is to add a few lines of code submitted. =||= I will try to add some tests. =||= Test was done. =||= Sorry for the delay, this fell off my attention, I promise to have a short turnaround now.\r\nI looked around the code and seems like this is Aws-specific path (see the return type) so it's expected to not to have the zone info on `MyDatacenterInfo`, there's no contract saying there should be any zone there in the meta. What issues it this causing?\r\n =||= My eureka server was build with spring-cloud-starter-netflix-eureka-server. On server side, the framework build instances use [dataCenterInfo](https://github.com/spring-cloud/spring-cloud-netflix/blob/188b9c112c2bcad9a4474e3e4a49191bb1087195/spring-cloud-netflix-eureka-client/src/main/java/org/springframework/cloud/netflix/eureka/EurekaInstanceConfigBean.java#L159) type of `MyDataCenterInfo` as default.\r\nMy eureka client was build with spring-cloud-starter-netflix-eureka-client. I use `eureka.client.transport.bootstrapResolverStrategy=composite` to make the client dynamically aware of the server nodes. Here comes the problem, since [newBootstrapResolver](https://github.com/Netflix/eureka/blob/2596a054e348def518799b98a32db61c4f3eab48/eureka-client/src/main/java/com/netflix/discovery/shared/transport/EurekaHttpClients.java#L106) lost `zone` of server instances, eureka clients can't be zone affinity to server instances. =||= Yeah I think this is reasonable, the current AWS/non-AWS separation is weak so I don't see a better place to do this tbh. Thanks and sorry for the delay. =||= No worries. =||= "], ["1288", "Checks for existence of ConfigurationManager.", "Spencer Gibb", "spencergibb", "04/30/20, 10:19:06 PM", "This is useful if a project has excluded Archaius 1 such as spring-cloud-netflix. This is a simple workaround.", "My current workaround https://github.com/spring-cloud/spring-cloud-netflix/pull/3746 =||= "], ["1289", "update to latest gradle wrapper", "Snow Pettersen", "snowp", "04/30/20, 10:17:32 PM", "Updates the gradle wrapper to 6.3, the neubla plugin to latest version\r\nand replaces the jetty module with org.gretty as the jetty module has\r\nbeen removed.\r\n\r\nMove to org.gretty is motivated by https://stackoverflow.com/questions/50119925/error-while-replacing-jetty-plugin-to-gretty-plugin-gradle\r\n\r\nFixes #1276", "LGTM =||= "], ["1290", "Eureka Service Registry Replica", "subbareddy", "repo-gsr", "05/21/20, 10:05:00 PM", "am new to this service Registry i did one sample spring boot application with peer to peer mode.\r\n\r\nHere am not understanding.\r\n\r\nDo i need to Start the All peers at the same time why because one peer registry is Registering to another because of Replica which am doing.\r\n\r\nbut i started One time with one profile then it is giving following error message.\r\n\r\n```\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-1.9.13.jar:1.9.13]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) ~[eureka-client-1.9.13.jar:1.9.13]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) ~[eureka-client-1.9.13.jar:1.9.13]\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.9.13.jar:1.9.13]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) ~[eureka-client-1.9.13.jar:1.9.13]\r\n        at com.netflix.discovery.DiscoveryClient.unregister(DiscoveryClient.java:941) [eureka-client-1.9.13.jar:1.9.13]\r\n        at com.netflix.discovery.DiscoveryClient.shutdown(DiscoveryClient.java:919) [eureka-client-1.9.13.jar:1.9.13]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_211]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_211]\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_211]\r\n        at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_211]\r\n        at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:389) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeDestroyMethods(InitDestroyAnnotationBeanPostProcessor.java:347) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeDestruction(InitDestroyAnnotationBeanPostProcessor.java:177) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:242) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.beans.factory.support.DisposableBeanAdapter.run(DisposableBeanAdapter.java:235) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.cloud.context.scope.GenericScope$BeanLifecycleWrapper.destroy(GenericScope.java:403) [spring-cloud-context-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n        at org.springframework.cloud.context.scope.GenericScope.destroy(GenericScope.java:142) [spring-cloud-context-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n        at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:258) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:571) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:543) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1072) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:504) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1065) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1060) [spring-context-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1029) [spring-context-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:948) [spring-context-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n```\r\n\r\nam new to this service Registry i did one sample spring boot application with peer to peer mode.\r\n\r\nHere am not understanding.\r\n\r\nDo i need to Start the All peers at the same time why because one peer registry is Registering to another because of Replica which am doing.\r\n\r\nbut i started One time with one profile then it is giving following error message.\r\n\r\n\r\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n        at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-1.9.13.jar:1.9.13]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) ~[eureka-client-1.9.13.jar:1.9.13]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) ~[eureka-client-1.9.13.jar:1.9.13]\r\n        at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.9.13.jar:1.9.13]\r\n        at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) ~[eureka-client-1.9.13.jar:1.9.13]\r\n        at com.netflix.discovery.DiscoveryClient.unregister(DiscoveryClient.java:941) [eureka-client-1.9.13.jar:1.9.13]\r\n        at com.netflix.discovery.DiscoveryClient.shutdown(DiscoveryClient.java:919) [eureka-client-1.9.13.jar:1.9.13]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_211]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_211]\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_211]\r\n        at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_211]\r\n        at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:389) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeDestroyMethods(InitDestroyAnnotationBeanPostProcessor.java:347) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeDestruction(InitDestroyAnnotationBeanPostProcessor.java:177) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:242) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.beans.factory.support.DisposableBeanAdapter.run(DisposableBeanAdapter.java:235) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.cloud.context.scope.GenericScope$BeanLifecycleWrapper.destroy(GenericScope.java:403) [spring-cloud-context-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n        at org.springframework.cloud.context.scope.GenericScope.destroy(GenericScope.java:142) [spring-cloud-context-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n        at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:258) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:571) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:543) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1072) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:504) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1065) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1060) [spring-context-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1029) [spring-context-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n        at org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:948) [spring-context-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\r\n```\r\n\r\n\r\n\r\n\r", "You don't have to coordinate the start, they will discover the peers eventually, you may get transient errors initially when there's 0 peers for a moment. =||= "], ["1291", "Eureka Discovery + Zuul Gateway as one app", "Jakob Male\u017ei\u010d", "Blarc", "05/08/20, 07:01:13 PM", "I am wondering if it is possible to run both eureka discovery and zuul gateway on the same microservice? Thanks.\r\n\r\n(This is my first time making an issue on open source project, so I hope this is not the wrong place and I am sorry if it is.)", "Hey, they do different things, Zuul is an edge proxy and Eureka is a service registry, you totally can use both together, if by \"together\" you mean a single logical \"platform\" you deploy your microservices to. Are you trying to figure out if you can run both on the same host? =||= Yes, I was wondering if you can run them both on the same host and I managed to do it by now. It's probably not the proper way to do it, but I needed to do this, because of the 5 apps restriction on Heroku. Thanks anyway :) =||= Sure, no worries. You may want to look into containers (may be easy to tap into `systemd` features for namespacing/cgroups) to get some level of isolation. =||= "], ["1292", "fix enableSelfPreservation bug", "\u5f20\u5929\u8bd1", "ztyandjw", "05/10/20, 06:20:34 PM", "~~### 1\u3001**the enableSelfPreservation  bug**~~\r\n\r\n~~the property eureka.server.enableSelfPreservation default is true~~\r\n\r\n~~AbstractInstanceRegistry#evict(long additionalLeaseMs)~~\r\n```java\r\nif (!isLeaseExpirationEnabled()) {\r\n   logger.debug(\"DS: lease expiration is currently disabled.\");\r\n   return;\r\n}\r\n```\r\n~~when the property we set  false, then the function isLeaseExpirationEnabled() return boolean is true~~\r\n\r\n~~then !isLeaseExpirationEnabled() is false, the code will not go into this if code~~\r\n\r\n\r\n~~**so  i  changed the function isLeaseExpirationEnabled()   set the true -> false**~~\r\n\r\n~~PeerAwareInstanceRegistryImpl#isLeaseExpirationEnabled()~~\r\n```java\r\n@Override\r\n    public boolean isLeaseExpirationEnabled() {\r\n        if (!isSelfPreservationModeEnabled()) {\r\n            // The self preservation mode is disabled, hence allowing the instances to expire.\r\n           //change here true to false\r\n           - return true;\r\n           + return false;\r\n        }\r\n        return numberOfRenewsPerMinThreshold > 0 && getNumOfRenewsInLastMin() > numberOfRenewsPerMinThreshold;\r\n    }\r\n````\r\n\r\n\r\n---------------------------\r\n\r\n\r\n\r\n~~### **2\u3001 function call isLeaseExpirationEnabled\uff08\uff09,   below  logic is wrong**~~\r\n\r\n~~AbstractInstanceRegistry#getInstanceByAppAndId(String appName, String id, boolean includeRemoteRegions)~~\r\n```java\r\nif (lease != null\r\n                && (!isLeaseExpirationEnabled() || !lease.isExpired())) {\r\n            return decorateInstanceInfo(lease);\r\n        }\r\n```\r\n~~**when isLeaseExpirationEnabled return true means  we want to eureka evict the leases,  so i think here  should be ( isLeaseExpirationEnabled()  || lease not expired   ) && lease != null**~~\r\n\r\n~~so i changed it~~\r\n\r\n```java\r\nif (lease != null\r\n                && (isLeaseExpirationEnabled() || !lease.isExpired())) {\r\n            return decorateInstanceInfo(lease);\r\n        }\r\n```\r\n\r\n\r\n---------------------------\r\n\r\n\r\n~~### 3\u3001 the last one function call this isLeaseExpirationEnabled function~~\r\n\r\n~~ AbstractInstanceRegistry#getInstancesById(String id, boolean includeRemoteRegions)~~\r\n\r\n~~### **here isLeaseExpirationEnabled is ok,  no need to  edit **~~\r\n```java\r\nif (leaseMap != null) {\r\n                Lease<InstanceInfo> lease = leaseMap.get(id);\r\n\r\n                if (lease == null || (isLeaseExpirationEnabled() && lease.isExpired())) {\r\n                    continue;\r\n                }\r\n\r\n                if (list == Collections.EMPTY_LIST) {\r\n                    list = new ArrayList<InstanceInfo>();\r\n                }\r\n                list.add(decorateInstanceInfo(lease));\r\n            }\r\n```\r", "sorry i make a mistake, ignore it =||= No worries, do you want me to close it? =||= > No worries, do you want me to close it?\r\n\r\nyes, pls close it =||= "], ["1293", "Remove uses of 'provided' in the eureka client", "David Robert Duke", "drobertduke", "05/11/20, 10:09:55 PM", "After updating gradle, we can stop using the deprecated 'provided' configuration.\r\nThis fixes an issue where the jackson-dataformat-xml and woodstox-core dependencies are affecting projects consuming eureka-client.", "What about the `providedCompile` (2 hits), should those go to? =||= Nitpick, but maybe the wording of this comment should be updated as well: https://github.com/Netflix/eureka/blob/18e9f4a43f7156a5635edecc4cedba6f81346fa5/eureka-core/build.gradle#L13 =||= > What about the `providedCompile` (2 hits), should those go to?\r\n\r\nprovidedCompile seems to be still used to exclude dependencies from War files https://github.com/gradle/gradle/issues/1171 =||= "], ["1294", "Client service registering with Eureka in openshift", "vijitha09", "vijitha09", "08/18/20, 07:36:00 PM", "I have a eureka registry server deployed and client in openshift\r\nbut the client takes the pod name and is not being accessible", "This is a network connectivity problem not a Eureka problem by the looks of it. If you add more info I can help you pinpoint it. =||= "], ["1295", "Remove sudo configuration", null, "dengliming", "05/11/20, 10:10:19 PM", "A PR for [https://github.com/Netflix/eureka/issues/1195](https://github.com/Netflix/eureka/issues/1195)", "Thanks, merged. =||= "], ["1296", "Update Compactmap library to 2.0", "Jaromir Hamala", "jerrinot", "05/26/20, 08:35:20 PM", "Compactmap 2.0 has been relicensed under the Apache 2.0 license.\r\nSee: https://github.com/vlsi/compactmap/issues/6\r\n\r\nPrevious versions use LGPL.\r\nThis caught multiple projects by surprise. See for example\r\nhttps://github.com/spring-cloud/spring-cloud-netflix/issues/3636\r\nor https://github.com/hazelcast/hazelcast-eureka/issues/52", "Thanks @jerrinot! =||= "], ["1297", "Add ability to gate InstanceStatus updates", "Bennett", "yobennett", "06/16/20, 10:41:45 PM", "We add a way for users to define gates when updating their InstanceStatus that is irrespective of the healthcheck handler response. For example, if the healthcheck handler returns an InstanceStatus of `UP` but a gate disallows that status then the healthcheck status will be overridden and the new status will be set to `DOWN`.\r\n\r\nIf there are no gates defined, the default behavior of the discovery client is unchanged.", "I think instead of doing this in the client, you may just want to implement a custom InstanceStatusMapper. Ref: https://github.com/Netflix/eureka/blob/master/eureka-client/src/test/java/com/netflix/appinfo/ApplicationInfoManagerTest.java#L82 =||= @qiangdavidliu Thanks. I hadn't considered using an `InstanceStatusMapper` to address these use cases. Functionally this seems to be comparable to the proposed gates. I'm going to review the differences to weigh the benefits of each approach. =||= Closing in favor of #1307  =||= "], ["1298", "Modify iteration Map function", "zhangzhiqiang", "qq1036916439", "06/02/20, 12:15:01 PM", "A small change\u3002changed iteration map function\u3002Can bring some performance improvements\u3002", "NaN"], ["1299", "Modify iteration Map Mode", "zhangzhiqiang", "qq1036916439", "06/02/20, 04:30:56 PM", "Modify iteration Map Mode\u3002I think the performance through entrySet Iterate Map is better.", "@troshko111 This is my first time participating in an open source project. It is a pity that I did not use the email bound to github when I submitted, but used the email of the company by mistake. I don't know if there is a remedy. I want to see my name in the Contributions.\r\n =||= @troshko111 https://help.github.com/en/github/using-git/changing-author-info#platform-windows\r\n =||= I have reverted it, please re-submit using the correct git user info. =||= "], ["1300", "Revert \"Improve map iteration in JerseyApplicationClient\"", null, "troshko111", "06/02/20, 05:59:01 PM", "Reverts Netflix/eureka#1299", "NaN"], ["1301", "Modify iteration Map function", "zhangzhiqiang", "qq1036916439", "06/02/20, 08:01:54 PM", "Modify iteration Map Mode.I think the performance through entrySet Iterate Map is better.\r\nThank you!", "I re-submit.please re-merge.thanks. =||= "], ["1302", "DiscoveryManager failed to lookup latest application instances.", null, "alexchoi-git", "08/18/20, 07:36:15 PM", "Environment:\r\nModule eureka-client\r\nVersion: 1.0.3.RELEASE (inherent from spring-cloud-starter-parent, version Angel.SR3)\r\n\r\nIssue:\r\nDiscoveryManager not returns the latest application instances even if new comers are registered to the service. No error found, looks like the cache never refresh. \r\n\r\nInvoked method:\r\nDisoveryManager.getInstance().getLookupService.getApplication(\"applicationName\").getInstances();", "That's a very old client, have you tried updating? =||= "], ["1303", "Resolve spinlock issue in AcceptorExecutor thread", "Kevin Larose", "larosek", "06/10/20, 06:55:30 PM", "I ran into an issue where an AcceptorExecutor thread would not shutdown and was using 100% cpu. This thread shutdown will happen when a PeerEurekaNode is removed from the list of nodes.\r\n\r\nHere is a snippet of the thread dump: \r\n```\r\n\"TaskAcceptor-target_ec2-xx-xx-xx-xxx.compute-1.amazonaws.com\" - Thread t@47\r\n   java.lang.Thread.State: RUNNABLE\r\n\tat com.netflix.eureka.util.batcher.AcceptorExecutor$AcceptorRunner.drainInputQueues(AcceptorExecutor.java:234)\r\n\tat com.netflix.eureka.util.batcher.AcceptorExecutor$AcceptorRunner.run(AcceptorExecutor.java:189)\r\n\tat java.base@11.0.7/java.lang.Thread.run(Thread.java:834)\r\n   Locked ownable synchronizers:\r\n\t- None\r\n```\r\n\r\nYou can see in the heap dump screenshot below that shutdown was properly called and received by the thread. Also, you will notice that all 3 queues (reprocessQueue, acceptorQueue and  pendingTasks) are empty, causing the drainInputQueues while loop to get stuck.\r\n\r\n![heapdump](https://user-images.githubusercontent.com/2784286/84155158-04943880-aa36-11ea-8287-c928caee3664.jpg)\r\n\r\nIf you were to be unlucky, when shutdown was called, you could fall into a condition where nothing was added to the pendingTasks queue and both reprocess and acceptor queue would stay empty since the executor was shutdown.\r\n\r\nI did a quick and dirty unit test locally to reproduce the issue, but since this is a timing issue, the test would sometime pass without the fix in position. Of course, when the fix was there I was not able to make the test fail. Because of that, I decided not to add the unit test since it was not very robust. Let me know if you have an idea on how to elegantly test this! Thanks!", "Yeah the way it is today is a `while(true)` loop which does not have an exit condition when the shutdown is set but pending is empty, so the outer loop never gets a chance to check and exit. Thanks for the PR! =||= "], ["1304", "Travis CI: Trusty is EOL", "Christian Clauss", "cclauss", "07/07/20, 07:05:01 PM", "NaN", "Seems to be failing, also unsure why use JDK9? =||= Used JDK9 because JDK8 is no longer available. =||= You should be able to switch to `openjdk8`, it is just the Oracle distribution that is no longer available. =||= Thanks! =||= "], ["1305", "Why eureka client register so quickly ?", "lvyunpeng", "lvyunpeng", "08/18/20, 07:36:51 PM", "when eureka client starting, I do not want it register right now, because some other work should to do, such as run test,  and i do not want it accept traffic once it start. So the InitialInstanceInfoReplicationIntervalSeconds is 40s default ,but it not works. For  statusChangeListener found that client transfer status starting to UP, and it register soon. what should i do", "why not ignore first status changes ? it make config  InitialInstanceInfoReplicationIntervalSeconds  meaningless. And i think once it start, it is not best state to handler external request, it need time to connect to downstream service =||= Setup your healthcheck handler in the way it won't report healthy until you're all ready, see https://github.com/Netflix/eureka/blob/cac06f4b431ef3c099719dd3ee9af7d8bb2d3bae/eureka-client/src/main/java/com/netflix/discovery/DiscoveryClient.java#L1426-L1427 =||= > Setup your healthcheck handler in the way it won't report healthy until you're all ready, see\r\n> \r\n> https://github.com/Netflix/eureka/blob/cac06f4b431ef3c099719dd3ee9af7d8bb2d3bae/eureka-client/src/main/java/com/netflix/discovery/DiscoveryClient.java#L1426-L1427\r\n\r\n\r\n\r\n> Setup your healthcheck handler in the way it won't report healthy until you're all ready, see\r\n> \r\n> https://github.com/Netflix/eureka/blob/cac06f4b431ef3c099719dd3ee9af7d8bb2d3bae/eureka-client/src/main/java/com/netflix/discovery/DiscoveryClient.java#L1426-L1427\r\n\r\nthanks  ! \r\n   you means that set eureka.client.healthcheck.enabled: true ?\r\n   I  do it. But It also confuse me , when eureka client starting , the Starting status transfer to UP status in several seconds. then it register to eureka service.  A large number of requests flooded into the eureka client\uff0c because it need to connect to downservice, create mysql connnection and so on.... so it fuse soon. So i need enough time to trigger some test to  connect to downservice before  it register =||= > you means that set eureka.client.healthcheck.enabled: true ?\r\n\r\nNot that, the code I pointed to allows to supply custom logic to determine whether your instance should be hearbeating as `UP`, what I suggested was you *do not* report `UP` until you're ready to take traffic. Basically this functionality is already supported and used. =||= "], ["1306", "InstanceInfoReplicator.onDemandUpdate() violate java semantics", "Yufeng", "Yufeng0918", "04/13/21, 05:58:23 PM", "Hi \r\n\r\nI try to understand the eureka client service registration process and go through InstaneInfoReplicator class.  [InstanceInfoReplicator.](https://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/InstanceInfoReplicator.java)onDemandUpdate method contains code \"**InstanceInfoReplicator.this.run()**\"\r\n\r\n```java\r\npublic void run() {\r\n       logger.debug(\"Executing on-demand update of local InstanceInfo\");\r\n       Future latestPeriodic = scheduledPeriodicRef.get();\r\n       if (latestPeriodic != null && !latestPeriodic.isDone()) {\r\n                            logger.debug(\"Canceling the latest scheduled update, it will be rescheduled at the end of on demand update\");\r\n                            latestPeriodic.cancel(false);\r\n       }\r\n    \r\n       InstanceInfoReplicator.this.run();\r\n}\r\n```\r\n\r\n\r\nI think this violate java semantics. run method should run in this way. Runnable should be either run in a new thread which is created on fly or submit Runnable as task into created ThreadPool. Basically, run method should be call asynchronous way.\r\n\r\nPlease review this session and advice accordingly, thanks.\r", "I think it is already running in a thread. `scheduler.submit(new Runnable() {}).` =||= "], ["1307", "Add shouldEnforceFetchRegistryAtInit config", "Bennett", "yobennett", "06/18/20, 05:27:30 PM", "We add a `shouldEnforceFetchRegistryAtInit` configuration to support users that want the Eureka client to fail fast during initialization. If `shouldEnforceFetchRegistryAtInit` is set to `true` then the client will throw an `IllegalStateException` during instance construction if its initial attempt to fetch of information from the remote Eureka servers is unsuccessful. This setting does not have an effect if `shouldFetchRegistry` is set to `false`.", "NaN"], ["1308", "fix typo", "hujie", "hujiecs", "06/22/20, 08:09:52 PM", "NaN", "NaN"], ["1309", "Does the framework stop maintenance", "pengzhengfa", "pengzhengfa", "06/22/20, 12:22:17 PM", "Does the framework stop maintenance", "NaN"], ["1310", "Eureka registration relies on serialization order of fields inside dataCenterInfo", "Joseph Lynch", "jolynch", "02/22/21, 03:59:53 PM", "While attempting to register into Eureka with a sidecar agent written in Python I came across a curious behavior where Eureka will fail to register if the JSON serialization places the `name` field of `dataCenterInfo` object after the `metadata` field but it will succeed if placed before. Concretely the following is considered valid:\r\n```json\r\n\"dataCenterInfo\": {\r\n  \"@class\": \"com.netflix.appinfo.AmazonInfo\",\r\n  \"name\": \"Amazon\",\r\n  \"metadata\": {\r\n    \"instance-type\": \"m5.xlarge\"\r\n  }\r\n}\r\n```\r\nand the following is rejected as invalid JSON \r\n```\r\n\"dataCenterInfo\": {\r\n  \"@class\": \"com.netflix.appinfo.AmazonInfo\",\r\n  \"metadata\": {\r\n    \"instance-type\": \"m5.xlarge\"\r\n  },\r\n  \"name\": \"Amazon\"\r\n}\r\n```\r\nIn response to a payload containing the second `dataCenterInfo` object the client receives a 400 code with `{\"error\": \"cannot parse request body\"}` even though both are valid json payloads.\r\n\r\nI have a minimal [reproducible test case](https://gist.github.com/jolynch/f862b2d673acaa484da1bf63910da1fd) as well as a unit test [on my fork](https://github.com/jolynch/eureka/commit/f99930d51f782de977cd47828431b8ad6326ecac) that demonstrates the issue.\r\n\r\nI imagine that the jackson parsers are somewhat ossified at this point, but I figured documenting the bug may be useful for future users to avoid the sharp edge.", "FWIW, there is an existing [test case](https://github.com/Netflix/eureka/blob/master/eureka-client/src/test/java/com/netflix/discovery/converters/jackson/builder/StringInterningAmazonInfoBuilderTest.java#L108) for having name after the metadata. See also #1224. =||= @brharrington are you saying this is already fixed? Also I'm totally cool with \"close won't fix\" I just figured it was good to get this into the tracker in case we do want to fix it ... (or so it can help someone else googling the problem).  =||= It should be fixed if you are using [1.9.13](https://github.com/Netflix/eureka/releases/tag/v1.9.13) or newer. =||= Ah nice, closing then, thanks @brharrington! =||= "], ["1311", "Update Jackson to 2.9.10.4", null, "troshko111", "06/26/20, 08:07:10 PM", "NaN", "NaN"], ["1312", "remove null check code", "HeemangHan", "Hanope", "06/30/20, 04:31:10 PM", "I think it is unnecessary to check the null of `instanceStatus`.\r\nBecause it doesn't matter if `instanceStatus` is null when calling `overrideStatus.equals`", "You're correct from the logical perspective and the change will be equivalent, but it looks to me the intent of the check was readability(?), it reads \"if no override or unequal override\", without the null check it makes you think harder what the intent is. =||= "], ["1313", "Replace valueOf to parseLong", "HeemangHan", "Hanope", "06/30/20, 05:13:06 PM", "Because the declared variable is primitive type, it is better to use `parseLong`.\r\nI think creating a Long instance using `valueOf` and unwrapping again it is an unnecessary process.", "NaN"], ["1314", "fix typos", "HeemangHan", "Hanope", "06/30/20, 04:20:35 PM", "NaN", "Maybe a new method that defaults to calling the misspelling? =||= > Maybe a new method that defaults to calling the misspelling?\r\n\r\nI normally see these corrected in the doc string / comment only, but either way works. =||= > LGTM, but please revert the public interface method rename.\r\n\r\nOkay, I revert files. =||= "], ["1315", "In the logic of registration, the timeliness of data is not very good. I feel that the time is a little long. Later versions can be optimized", "pengzhengfa", "pengzhengfa", "08/18/20, 07:39:36 PM", "In the logic of registration, the timeliness of data is not very good. I feel that the time is a little long. Later versions can be optimized", "Can you please elaborate (with some examples ideally)? =||= @troshko111 You can use the ideas of CopyOnWrite =||= The action required / problem statement is not clear to me, feel free to reopen if you could please clarify what the issue is, and what is the suggestions. =||= "], ["1316", "RetryableEurekaHttpClient - Request execution failed with message: java.net.UnknownHostException:", "\u675c\u8499", "CoderDuMeng", "06/30/20, 05:14:10 PM", "RetryableEurekaHttpClient - Request execution failed with message: java.net.UnknownHostException: \r", "Please include a concise but complete description and a minimal repro to reopen. =||= "], ["1317", "Unbreak EurekaClientConfig interface compat", null, "troshko111", "06/29/20, 11:28:28 PM", "EurekaClientConfig is treated as stable backward-compat API as of couple of years ago, update it to preserve backward-compat.", "This un-does breaking contract change introduced by https://github.com/Netflix/eureka/commit/6438fba6a42a6d2a1dd2e4cb48eab66c34bd0a21 =||= LGTM =||= thanks for the quick fix! =||= "], ["1318", "The JDK version of eureka 1.X supported", null, "junjie-tang99", "06/30/20, 06:03:18 AM", "Our core system's JDK version is 1.6. Recently we supposed to import the eureka to solve the service governance problem. And I want to know whether the eureka 1.X can support the JDK1.6? ", "Current versions require Java 8 =||= @spencergibb THX. =||= "], ["1319", "async anonymous class change to implements Runnable interface class.", "zhangzhiqiang", "qq1036916439", "07/12/20, 02:50:46 PM", "better read", "This looks like a readability and API regression to me:\r\n\r\n- Introduces a public type which is not a contract for no apparent reason\r\n- Requires to jump to a different file to read the logic =||= Can I use lambda or private inner classes? =||= Yes, don't see why not, it's a negligible change though, but legit. =||=  I think that inner class should not call outer class in this way.\r\n    `InstanceInfoReplicator.this.run(); `\r\n I have never seen such a way before.\r\nI am looking at the code of Eureka and hope to provide some help for Eureka. Although only trivial.\r\n =||= "], ["1320", "Missing useage of instance status in InstanceResource.renewLease()", "Kaze", "melochin", "04/13/21, 05:59:43 PM", "I'm confused about parameter ``status`` because i can not find any usage about ``status`` in this method.\r\nhttps://github.com/Netflix/eureka/blob/f84299eada39b422061399d6de5ea98bd9c1e503/eureka-core/src/main/java/com/netflix/eureka/resources/InstanceResource.java#L105-L110\r\n\r\n``renewLease`` calls the method ``AbstractInstanceRegistry.renew``. Then, in the method ``renew``, the ``instanceInfo`` is from the eureka server, of course the instance status is also from the eureka server. But i think the ``instanceInfo`` passed into ``getOverriddenInstanceStatus`` should take the ``status`` (the parameter in the renewLease) from the eureka client. \r\nhttps://github.com/Netflix/eureka/blob/f84299eada39b422061399d6de5ea98bd9c1e503/eureka-core/src/main/java/com/netflix/eureka/registry/AbstractInstanceRegistry.java#L363-L367\r\n\r\n\r\n\r\n\r", "Status is not modified during a lease renewal, it's simply a heartbeat, for any instance info changes, including the status, the client would call\r\n`eureka-core/src/main/java/com/netflix/eureka/resources/ApplicationResource.java:145` -> `eureka-core/src/main/java/com/netflix/eureka/registry/AbstractInstanceRegistry.java:193` which would update the info retaining the existing lease if present.\r\n\r\nI believe it could have been used to change the status in the past, but seems to be a super old thing. =||= "], ["1321", "Cleanup Issues Found by Muse", "Nes Cohen", "nescohen", "08/17/20, 05:54:21 PM", "This PR cleans up some issues found by a new static analysis platform we just released called Muse. We\u2019ve been using Eureka as a test case after being pointed to it by someone at Netflix and wanted to contribute fixes for some of the issues it found.\r\n\r\nThis PR addresses these bug types among others:\r\n\r\n-  https://errorprone.info/bugpattern/LockNotBeforeTry\r\n\r\n-  https://errorprone.info/bugpattern/ModifyCollectionInEnhancedForLoop\r\n\r\n-  https://fbinfer.com/docs/next/all-issue-types/#null_dereference", "You can see the rest of the findings [here](https://console.muse.dev/result/ayorra/eureka/01EEGMSZG13XNSZ09WKJG9TP1D?search=&tab=results). When Muse is enabled on a repo, it runs on every pull request and adds comments that flag any new issues introduced by the proposed code change. So it\u2019s a way to bring attention to issues like these \u201cin the moment\u201d when it\u2019s easier to fix them. It looks like [this](https://github.com/nescohen/eureka/pull/2). If you\u2019d like to enable it, you can install the GitHub App from [here](https://github.com/marketplace/muse-dev). It\u2019s free for open source. =||= > LGTM except the line removal in `eureka-client/src/main/java/com/netflix/discovery/endpoint/EndpointUtils.java`\r\n\r\nNever mind, I did not notice at first. =||= Thanks for sending this over! =||= @troshko111, No problem dude. Happy to help! =||= "], ["1322", "v1.7.x  --  this escape from constructor", "@\u5218\u98de", "lfzy", "08/18/20, 03:29:42 AM", "for example, this class AcceptorExecutor\r\n```java\r\nAcceptorExecutor(String id,\r\n                     int maxBufferSize,\r\n                     int maxBatchingSize,\r\n                     long maxBatchingDelay,\r\n                     long congestionRetryDelayMs,\r\n                     long networkFailureRetryMs) {\r\n        this.maxBufferSize = maxBufferSize;\r\n        this.maxBatchingSize = maxBatchingSize;\r\n        this.maxBatchingDelay = maxBatchingDelay;\r\n        this.trafficShaper = new TrafficShaper(congestionRetryDelayMs, networkFailureRetryMs);\r\n\r\n        ThreadGroup threadGroup = new ThreadGroup(\"eurekaTaskExecutors\");\r\n        this.acceptorThread = new Thread(threadGroup, new AcceptorRunner(), \"TaskAcceptor-\" + id);\r\n        this.acceptorThread.setDaemon(true);\r\n        this.acceptorThread.start();\r\n....\r\n```\r\nis it not thread safe?", "thread.start (happen-before)? =||= I can definitely see how the memory operations can get reordered (writes), the Java Memory Model sure does allow this. At the same time, code like this is so common in Java that I'd be surprised if this was actually happening in practice.\r\n\r\nBut yeah, unsafe and incorrect in general. =||= @troshko111  thanks! \r\nyou're right.\r\nis it better to use init method to start thread? =||= "], ["1323", "Eureka Client not registering with Eureka Server when deployed in tomcat 9.0.37", null, "Raghavanbn", "10/05/20, 02:58:04 PM", "I'd deployed both Eureka Server and Eureka Client in external tomcat 9.0.37. After running 2 multiple instances of tomcat servers, I can see Eureka Server and Eureka Client application is running properly. but, Eureka client not registered with Eureka Server\r\n    \r\n    Console Error :\r\n    com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n    \tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1081) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:995) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.DiscoveryClient.refreshRegistry(DiscoveryClient.java:1517) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.DiscoveryClient$CacheRefreshThread.run(DiscoveryClient.java:1484) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]\r\n    \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\r\n    \r\n    2020-08-11 11:20:16.036 ERROR 18732 --- [tbeatExecutor-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error. endpoint=DefaultEndpoint{ serviceUrl='http://admin:admin@localhost:8761/EurekaServer-0.0.1-SNAPSHOT/}\r\n    \r\n    javax.ws.rs.WebApplicationException: com.fasterxml.jackson.databind.exc.MismatchedInputException: Root name 'timestamp' does not match expected ('instance') for type [simple type, class com.netflix.appinfo.InstanceInfo]\r\n     at [Source: (com.sun.jersey.client.apache4.ApacheHttpClient4Handler$HttpClientResponseInputStream); line: 1, column: 2] (through reference chain: com.netflix.appinfo.InstanceInfo[\"timestamp\"])\r\n    \tat com.netflix.discovery.provider.DiscoveryJerseyProvider.readFrom(DiscoveryJerseyProvider.java:110) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:634) ~[jersey-client-1.19.1.jar:1.19.1]\r\n    \tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:586) ~[jersey-client-1.19.1.jar:1.19.1]\r\n    \tat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.sendHeartBeat(AbstractJerseyEurekaHttpClient.java:107) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:874) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1443) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]\r\n    \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\r\n    Caused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Root name 'timestamp' does not match expected ('instance') for type [simple type, class com.netflix.appinfo.InstanceInfo]\r\n     at [Source: (com.sun.jersey.client.apache4.ApacheHttpClient4Handler$HttpClientResponseInputStream); line: 1, column: 2] (through reference chain: com.netflix.appinfo.InstanceInfo[\"timestamp\"])\r\n    \tat com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:63) ~[jackson-databind-2.11.1.jar:2.11.1]\r\n    \tat com.fasterxml.jackson.databind.DeserializationContext.reportPropertyInputMismatch(DeserializationContext.java:1503) ~[jackson-databind-2.11.1.jar:2.11.1]\r\n    \tat com.fasterxml.jackson.databind.DeserializationContext.reportPropertyInputMismatch(DeserializationContext.java:1519) ~[jackson-databind-2.11.1.jar:2.11.1]\r\n    \tat com.fasterxml.jackson.databind.ObjectReader._unwrapAndDeserialize(ObjectReader.java:2188) ~[jackson-databind-2.11.1.jar:2.11.1]\r\n    \tat com.fasterxml.jackson.databind.ObjectReader._bindAndClose(ObjectReader.java:2054) ~[jackson-databind-2.11.1.jar:2.11.1]\r\n    \tat com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:1431) ~[jackson-databind-2.11.1.jar:2.11.1]\r\n    \tat com.netflix.discovery.converters.EurekaJacksonCodec.readValue(EurekaJacksonCodec.java:213) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.converters.wrappers.CodecWrappers$LegacyJacksonJson.decode(CodecWrappers.java:314) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \tat com.netflix.discovery.provider.DiscoveryJerseyProvider.readFrom(DiscoveryJerseyProvider.java:103) ~[eureka-client-1.9.21.jar:1.9.21]\r\n    \t... 23 common frames omitted\r\n    \r\n    2020-08-11 11:20:16.036  WARN 18732 --- [tbeatExecutor-0] c.n.d.s.t.d.RetryableEurekaHttpClient    : Request execution failed with message: com.fasterxml.jackson.databind.exc.MismatchedInputException: Root name 'timestamp' does not match expected ('instance') for type [simple type, class com.netflix.appinfo.InstanceInfo]\r\n     at [Source: (com.sun.jersey.client.apache4.ApacheHttpClient4Handler$HttpClientResponseInputStream); line: 1, column: 2] (through reference chain: com.netflix.appinfo.InstanceInfo[\"timestamp\"])\r\n    2020-08-11 11:20:16.036 ERROR 18732 --- [tbeatExecutor-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_EUREKACLIENT/DESKTOP:EurekaClient:8081 - was unable to send heartbeat!\r\n    \r\n    Any help would be much appreciated. \r\n    \r\n    Eureka Client:\r\n\r\n    application.properties\r\n\r\n     spring.application.name=EurekaClient\r\n     server.port=8081\r\n     eureka.client.serviceUrl.defaultZone=http://localhost:8761/EurekaServer-0.0.1-SNAPSHOT/\r\n\r\n    pom.xml\r\n\r\n    <?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n    <project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n    \txsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n    \t<modelVersion>4.0.0</modelVersion>\r\n    \t<parent>\r\n    \t\t<groupId>org.springframework.boot</groupId>\r\n    \t\t<artifactId>spring-boot-starter-parent</artifactId>\r\n    \t\t<version>2.3.2.RELEASE</version>\r\n    \t\t<relativePath/> <!-- lookup parent from repository -->\r\n    \t</parent>\r\n    \t<groupId>com.example</groupId>\r\n    \t<artifactId>EurekaClient</artifactId>\r\n    \t<version>0.0.1-SNAPSHOT</version>\r\n    \t<packaging>war</packaging>\r\n    \t<name>EurekaClient</name>\r\n    \t<description>Demo project for Spring Boot</description>\r\n    \r\n    \t<properties>\r\n    \t\t<java.version>11</java.version>\r\n    \t\t<spring-cloud.version>Hoxton.SR6</spring-cloud.version>\r\n    \t</properties>\r\n    \r\n    \t<dependencies>\r\n    \t\t<dependency>\r\n    \t        <groupId>org.springframework.boot</groupId>\r\n    \t        <artifactId>spring-boot-starter-actuator</artifactId>\r\n    \t\t</dependency>\r\n    \t\t<dependency>\r\n    \t\t\t<groupId>org.springframework.boot</groupId>\r\n    \t\t\t<artifactId>spring-boot-starter-web</artifactId>\r\n    \t\t</dependency>\r\n    \t\t<dependency>\r\n    \t\t\t<groupId>org.springframework.cloud</groupId>\r\n    \t\t\t<artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>\r\n    \t\t</dependency>\r\n    \t</dependencies>\r\n    \t<dependencyManagement>\r\n    \t\t<dependencies>\r\n    \t\t\t<dependency>\r\n    \t\t\t\t<groupId>org.springframework.cloud</groupId>\r\n    \t\t\t\t<artifactId>spring-cloud-dependencies</artifactId>\r\n    \t\t\t\t<version>${spring-cloud.version}</version>\r\n    \t\t\t\t<type>pom</type>\r\n    \t\t\t\t<scope>import</scope>\r\n    \t\t\t</dependency>\r\n    \t\t</dependencies>\r\n    \t</dependencyManagement>\r\n    </project>\r\n    \r\n    Main Class:\r\n    \r\n    @SpringBootApplication\r\n    @EnableDiscoveryClient\r\n    @RefreshScope\r\n    public class EurekaClientApplication extends SpringBootServletInitializer {\r\n    \r\n    \t@Override\r\n    \t protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n    \t  return application.sources(EurekaClientApplication.class);\r\n    \t }\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(EurekaClientApplication.class, args);\r\n    \t}\r\n    \t\r\n    \t\r\n    }\r\n    @RestController\r\n    class GreetingController {\r\n        \r\n        @RequestMapping(\"/hello\")\r\n        public String customerInformation() {\r\n    \t      return \"Hey, I am from external tomcat\";\r\n    \t }\r\n    }\r\n    \r\n    Eureka Server\r\n\r\n    application.properties\r\n\r\n     spring.application.name=EurekaServer\r\n     server.port = 8761\r\n     eureka.client.registerWithEureka = false\r\n     eureka.client.fetchRegistry = false\r\n     eureka.client.serviceUrl.defaultZone=http://localhost:8761/EurekaServer-0.0.1-SNAPSHOT/\r\n\r\n    pom.xml\r\n\r\n    <?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n    <project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n    \txsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n    \t<modelVersion>4.0.0</modelVersion>\r\n    \t<parent>\r\n    \t\t<groupId>org.springframework.boot</groupId>\r\n    \t\t<artifactId>spring-boot-starter-parent</artifactId>\r\n    \t\t<version>2.3.2.RELEASE</version>\r\n    \t\t<relativePath/> <!-- lookup parent from repository -->\r\n    \t</parent>\r\n    \t<groupId>com.example</groupId>\r\n    \t<artifactId>EurekaServer</artifactId>\r\n    \t<version>0.0.1-SNAPSHOT</version>\r\n    \t<packaging>war</packaging>\r\n    \t<name>EurekaServer</name>\r\n    \t<description>Demo project for Spring Boot</description>\r\n    \r\n    \t<properties>\r\n    \t\t<java.version>11</java.version>\r\n    \t\t<spring-cloud.version>Hoxton.SR6</spring-cloud.version>\r\n    \t</properties>\r\n    \r\n    \t<dependencies>\t\t\r\n    \t\t<dependency>\r\n    \t\t\t<groupId>org.springframework.cloud</groupId>\r\n    \t\t\t<artifactId>spring-cloud-starter-netflix-eureka-server</artifactId>\r\n    \t\t</dependency>\r\n    \t</dependencies>\r\n    \r\n    \t<dependencyManagement>\r\n    \t\t<dependencies>\r\n    \t\t\t<dependency>\r\n    \t\t\t\t<groupId>org.springframework.cloud</groupId>\r\n    \t\t\t\t<artifactId>spring-cloud-dependencies</artifactId>\r\n    \t\t\t\t<version>${spring-cloud.version}</version>\r\n    \t\t\t\t<type>pom</type>\r\n    \t\t\t\t<scope>import</scope>\r\n    \t\t\t</dependency>\r\n    \t\t</dependencies>\r\n    \t</dependencyManagement>\r\n    </project>\r\n\r\n    Main Class :\r\n\r\n    @SpringBootApplication\r\n    @EnableEurekaServer\r\n    public class EurekaServerApplication {\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(EurekaServerApplication.class, args);\r\n    \t}\r\n    \r\n    }\r", "Hard to say based on the log, looks like the client is sending something invalid? Can you attach a debugger and step through? Or at least drop the logging to `debug`? =||= issue resolved =||= @Raghavanbn let us know the solution =||= I had the same issue. Looking more carefully to the discovery service logs I saw authorization errors. Problem was that client had to connect properly with user/passsword, e.g.\r\n`eureka.client.serviceUrl.defaultZone=http://test:test@localhost:8010/eureka`\r\n\r\nHope it will be helpful for someone. =||= "], ["1325", "Add Muse configuration file", "Nes Cohen", "nescohen", "09/28/20, 05:06:08 PM", "This PR adds a configuration file for the Muse platform to run on Eureka. I was able to fix a few issues Muse found and my changes were recently accepted. I thought that the Eureka project would benefit from Muse analysis.\r\n\r\nIn addition to this configuration, a maintainer should install this app (free forever for open source): https://github.com/marketplace/muse-dev\r\n\r\nThis will enable Muse to scan incoming pull requests and report potentially introduced bugs into the diff. Please feel free to reach out if there is anything else I can help with \ud83d\ude04 ", "Talked offline, we won't be enabling Muse at this very point, but looking forward to experimenting with it more in the future. =||= "], ["1326", "High Severity Vulnerabilities due to use of jackson-databind-2.9.10.4.jar", null, "talvoish", "09/14/20, 05:26:23 PM", "The jar jackson-databind-2.9.10.4.jar is used by eureka_server. It's reported to have Vulnerabilities: CVE-2020-14060, CVE-2020-14061, CVE-2020-14062 and CVE-2020-14195.\r\n\r\nThe proposed solution is to upgrade jackson-databind to version 2.10.0 or higher.\r", "NaN"], ["1327", "Downgrade log level of noisy log messages", "James Mulcahy", "jamesmulcahy", "08/25/20, 05:25:28 PM", "NaN", "Care to explain why you think they should be info and not error? They're almost all in a catch block. =||= I'll go ahead and hide my comment in shame :grimacing:  =||= @spencergibb in the app refresh case the error is handled and hence is not an error any more by definition, it's simply noise. There's nothing the users can do or should do, it's non-actionable and frankly unimportant if this happens infrequently. If it's permanent, it will manifest in actual issues (stale/empty registry) which must be detected in other ways anyway.\r\n\r\nThe redirecting client is similar, I struggle to see what a developer may do when seeing this?\r\n\r\nWhat are your thoughts? =||= Sounds good to me. =||= @spencergibb curious if you have received / seen feedback on this from users as well, we can open a separate issue / PR if we need to. The logging game in this client can use some love imo. =||= @troshko111 Updated to address all comments, PTAL when convenient. =||= @troshko111 Ack - I wrapped the lines and re-pushed =||= "], ["1328", "Log status transitions to DOWN at error level, instead of warn", "James Mulcahy", "jamesmulcahy", "08/28/20, 05:24:39 PM", "I also dropped the transitions out of down to info, rather than warn, since\r\nthere isn't really anything to be concerned about on such a transition", "NaN"], ["1330", "Remove null condition check", "HeemangHan", "Hanope", "09/02/20, 02:46:22 AM", "Unnecessary null inspection conditions were deleted because performing \"equals\" without the condition of checking null would produce the same result.", "NaN"], ["1332", "begin fork", null, "xjfeng306602097", "09/07/20, 09:42:53 AM", "begin fork", "NaN"], ["1333", "bump jackson-databind do 2.9.10.6", "Ivan Porto Carrero", "casualjim", "09/14/20, 05:26:24 PM", "Fixes #1326", "NaN"], ["1334", "rename runtime scopes to runtimeOnly", "Ivan Porto Carrero", "casualjim", "09/11/20, 05:19:19 PM", "fixes 1329", "NaN"], ["1335", "Fix some incorrect logging in AbstractInstanceRegistry", "Mike Smith", "kerumai", "09/11/20, 05:21:14 PM", "The status being logged in `AbstractInstanceRegistry.renew()`  is not the correct one. This is resulting in confusing log statements saying that the overridden status was `UNKNOWN`.", "NaN"], ["1336", "Unreleased Resource: Streams", "\u5947\u5b89\u4fe1CodeSafe", "QiAnXinCodeSafe", "10/09/20, 10:42:01 PM", "https://github.com/Netflix/eureka/blob/21b4529acf4a4f18db3b2fada3a40e15be9792cf/eureka-client-jersey2/src/main/java/com/netflix/discovery/shared/transport/jersey2/Jersey2ApplicationClientFactory.java#L200\r\n\r\nThe program can potentially fail to release a system resource.", "I can submit a quick pr - is there a corporate CLA?\r\n\r\nI'll just wrap it in a `finally` similar to how it's done in other sections of the code like here: https://github.com/Netflix/eureka/blob/master/eureka-client-jersey2/src/main/java/com/netflix/discovery/shared/transport/jersey2/EurekaJersey2ClientImpl.java#L313 =||= Nope, no CLA, PRs welcomed! =||= "], ["1337", "Upgrade xstream to fix illegal reflection access reported by tomcat", "James Mulcahy", "jamesmulcahy", "09/23/20, 11:21:01 PM", "NaN", "While running locally, I noticed tomcat complain about an illegal reflective access.  Upgrading xstream led to that error going away. =||= "], ["1338", "Fix log line which was generating a compiler warning", "James Mulcahy", "jamesmulcahy", "09/23/20, 11:20:49 PM", "NaN", "NaN"], ["1339", "Add metrics for instances, tagged with VIP, Status and Expiry", "James Mulcahy", "jamesmulcahy", "09/24/20, 06:33:30 PM", "NaN", "Sharing for visibility. I haven't tested this thoroughly yet, but I think it should work (TM) =||= "], ["1340", "Log a version warning if not being run under Java 1.8", "James Mulcahy", "jamesmulcahy", "09/22/20, 09:04:16 PM", "NaN", "Shouldn't it be at **least** Java 8? =||= Is anyone running with Java > 8 today? All the docs mention 1.8, which is why I chose to be specific about 1.8 here.\r\n\r\nI wasted a bunch of time in the last couple of days tracking down what turned out to be an issue running Java >= 11, so I know that doesn't work.   =||= Spring Cloud supports Java 8+ with integration tests for 11 and 14. We have users running on 11+. What was the specific issue? =||= Interesting context, thanks @spencergibb.  Does Spring Cloud run the eureka-server under 11+14, or just the client?\r\n\r\nThe error Tomcat throws is:\r\n\r\n```\r\n21-Sep-2020 12:35:12.654 SEVERE [localhost-startStop-1] org.apache.catalina.core.StandardContext.filterStart Exception starting filter [jersey]\r\n\tjava.lang.TypeNotPresentException: Type javax.xml.bind.JAXBContext not present\r\n\t\tat java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117)\r\n\t\tat java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)\r\n\t\tat java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)\r\n\t\tat java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68)\r\n\t\tat java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138)\r\n\t\tat java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)\r\n\t\tat java.base/sun.reflect.generics.repository.ClassRepository.computeSuperInterfaces(ClassRepository.java:117)\r\n\t\tat java.base/sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:95)\r\n\t\tat java.base/java.lang.Class.getGenericInterfaces(Class.java:1156)\r\n\t\tat com.sun.jersey.core.reflection.ReflectionHelper.getClass(ReflectionHelper.java:629)\r\n\t\tat com.sun.jersey.core.reflection.ReflectionHelper.getClass(ReflectionHelper.java:625)\r\n\t\tat com.sun.jersey.core.spi.factory.ContextResolverFactory.getParameterizedType(ContextResolverFactory.java:202)\r\n\t\tat com.sun.jersey.core.spi.factory.ContextResolverFactory.init(ContextResolverFactory.java:89)\r\n\t\tat com.sun.jersey.server.impl.application.WebApplicationImpl._initiate(WebApplicationImpl.java:1332)\r\n\t\tat com.sun.jersey.server.impl.application.WebApplicationImpl.access$700(WebApplicationImpl.java:180)\r\n\t\tat com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:799)\r\n\t\tat com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:795)\r\n\t\tat com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:193)\r\n\t\tat com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:795)\r\n\t\tat com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:790)\r\n\t\tat com.sun.jersey.spi.container.servlet.ServletContainer.initiate(ServletContainer.java:509)\r\n\t\tat com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:339)\r\n\t\tat com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:605)\r\n\t\tat com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:207)\r\n\t\tat com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:394)\r\n\t\tat com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:744)\r\n\t\tat org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:281)\r\n\t\tat org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:262)\r\n\t\tat org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:106)\r\n\t\tat org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4538)\r\n\t\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5181)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:743)\r\n\t\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:719)\r\n\t\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:705)\r\n\t\tat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:970)\r\n\t\tat org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1840)\r\n\t\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n\t\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\t\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\r\n\t\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)\r\n\t\tat java.base/java.lang.Thread.run(Thread.java:832)\r\n\tCaused by: java.lang.ClassNotFoundException: javax.xml.bind.JAXBContext\r\n\t\tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1358)\r\n\t\tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1180)\r\n\t\tat java.base/java.lang.Class.forName0(Native Method)\r\n\t\tat java.base/java.lang.Class.forName(Class.java:427)\r\n\t\tat java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)\r\n\t\t... 41 more\r\n21-Sep-2020 12:35:12.910 INFO [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log ContextListener: contextInitialized()\r\n21-Sep-2020 12:35:12.910 INFO [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log SessionListener: contextInitialized()\r\n21-Sep-2020 12:35:12.911 INFO [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log ContextListener: attributeAdded('StockTicker', 'async.Stockticker@7d23879e')\r\n21-Sep-2020 12:35:16.989 INFO [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log SessionListener: contextDestroyed()\r\n21-Sep-2020 12:35:16.989 INFO [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log ContextListener: contextDestroyed()\r\n\r\n```\r\n\r\nThis works fine without the eureka-server loaded; so while the stack trace doesn't mention eureka, it certainly triggers the issue. =||= We run the server. See https://github.com/spring-cloud/spring-cloud-netflix/blob/0665640c9787a42a32624245bb0f2e23b411f358/spring-cloud-starter-netflix-eureka-server/pom.xml#L29-L33\r\n\r\nWe add the appropriate dependency that doesn't hurt in java 8 =||= I've replicated that in the build.gradle within eureka-server, in #1342, closing this in preference to that.  Doesn't seem like any other changes are required (and I'd previously been weary of going down this path for fear of finding a big list of issues).  Thanks for the input @spencergibb  =||= "], ["1341", "Will Eureka fix instance expired judgement code in 2.X", null, "kyangcmXF", "04/13/21, 06:16:36 PM", "Hi,\r\nI found eureka comment about expired judgement code in lease.java. The judgement uses double duration to judge whether it is expired. I'd like to know whether eureka will fix it in newest milestone version such as 2.0 ? ", "Hi, the `2.x` has been abandoned and will not be getting any investment in its current form. This does not mean the development can't continue by the community. =||= "], ["1342", "Add jaxb-runtime, which is required for Java >=11", "James Mulcahy", "jamesmulcahy", "09/23/20, 11:20:32 PM", "NaN", "NaN"], ["1343", "Remote fetch metrics", "James Mulcahy", "jamesmulcahy", "09/28/20, 10:38:59 PM", "NaN", "NaN"], ["1344", "Record fetch mismatches and success counts", "James Mulcahy", "jamesmulcahy", "09/29/20, 12:19:30 AM", "NaN", "Good suggestion, thanks.  =||= "], ["1345", "Register RemoteRegionRegistry with the servo monitors", "James Mulcahy", "jamesmulcahy", "09/29/20, 05:53:41 PM", "Without this, it won't collect the metrics.  The annotation alone isn't enough", "NaN"], ["1348", "Integrating Angular 8 with Paystack payment gateway", null, "Raghavanbn", "10/05/20, 04:36:35 PM", "I am new to payment gateway integration with Angular. In my project, I need to integrate angular 8 with Paystack API. I could not see any Paystack module available in angular8, but it is in Angular4. Could anyone suggest whether this has been deprecated or I can use the Angular4 module in Angular8?", "Wrong repo? =||= I didn't get you sorry! =||= Why are you asking about angular and paystack in eureka? They seem unrelated =||= it is not related to eureka, wrongly posted in this repo. that's my bad =||= "], ["1349", "it is not related to eureka, wrongly posted in this repo. that's my bad", null, "Raghavanbn", "10/05/20, 04:39:53 PM", "it is not related to eureka, wrongly posted in this repo. that's my bad\r\n\r\n_Originally posted by @Raghavanbn in https://github.com/Netflix/eureka/issues/1348#issuecomment-703718273_", "No worries. =||= "], ["1350", "fix #1336 resource needs to be closed", "Chase Diem", "abracadv8", "10/09/20, 10:42:01 PM", "Fix #1336 FileInputStream requires a call to close() to release resources.\r\n\r\nContribution on behalf of Comcast.", "Thanks! =||= "], ["1351", "There is a vulnerability in xerces 2.4.0 ,upgrade recommended", "\u5947\u5b89\u4fe1CodeSafe", "QiAnXinCodeSafe", "10/29/20, 01:59:22 AM", "https://github.com/Netflix/eureka/blob/821beb4b2e0204544c70017e1e883fcf4aa02c9e/eureka-server/build.gradle#L11\r\n\r\nCVE-2012-0881\r\nCVE-2013-4002\r\nCVE-2009-2625\r\n\r\nRecommended upgrade version\uff1a2.12.0.SP02", "Thanks, this has been bumped. =||= "], ["1352", "Add IPv6 address to the datacenter metadata keys", "Phil Rud", "philrud", "10/15/20, 06:34:39 PM", "* introduce a new datacenter metadata key for the primary IPv6 address\r\n* update existing tests to make sure the new key can be used while specifying default address resolution order", "NaN"], ["1353", "Add a metric to report selfPreservationMode", "James Mulcahy", "jamesmulcahy", "10/14/20, 09:52:05 PM", "NaN", "NaN"], ["1355", "Bump default polling interval", "Ling Yuan", "fiibbb", "10/16/20, 12:14:27 AM", "Bump default polling interval from 30 seconds to 45 seconds.", "This is a non passive change. Can you change it via config instead of changing the default? =||= Meant to do https://github.com/Netflix/eureka/pull/1356 instead. =||= "], ["1356", "Bump default connection idle timeout", "Ling Yuan", "fiibbb", "10/16/20, 07:52:05 PM", "Bump default connection idle timeout to 45 seconds.", "Again, why change the default when you can change it via configuration? =||= @spencergibb \r\n> Again, why change the default when you can change it via configuration?\r\n\r\nI think it makes sense to change the default in this particular case as the default was improperly chosen. The default polling interval is `30s` and the client configures to close its socket on `30s` of inactivity which basically creates a race and may cause it unnecessary bounce among Eureka servers making keep alive useless. WDYT? =||= Sounds good =||= > The default polling interval is `30s` and the client configures to close its socket on `30s` of inactivity which basically creates a race and may cause it unnecessary bounce among Eureka servers making keep alive useless. WDYT?\r\n\r\nShould eureka log a message if this configuration is detected? =||= "], ["1357", "High Severity Vulnerabilities due to use of upgrade jettison-1.3.7.jar", null, "aviramle", "10/29/20, 02:00:06 AM", "The jar jettison-1.3.7.jar is used by eureka-client. It's reported to have Vulnerabilities: CVE-2020-10663 and CVE-2020-7712.\r\n\r\nThe proposed solution is to upgrade jettison to version 1.4.x.\r\n\r\n\r", "Thanks, this has been bumped. =||= "], ["1358", "Update vulnerable deps #1357 #1351", null, "troshko111", "10/29/20, 01:58:15 AM", "NaN", "NaN"], ["1359", "Update Build Status Location", "Steve Hill", "sghill", "10/29/20, 08:29:45 PM", "This build has been migrated to travis-ci.com as per their [recommendation](https://mailchi.mp/3d439eeb1098/travis-ciorg-is-moving-to-travis-cicom).", "NaN"], ["1360", "High Severity Vulnerabilities due to use of upgrade xercesimpl-2.4.0.jar", null, "MochaiHalevi", "11/05/20, 05:27:46 PM", "The jar xercesImpl-2.4.0.jar is used by eureka-server and packed into the war file. It's reported to have Vulnerabilities: [CVE-2012-0881](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2012-0881) and [CVE-2013-4002](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-4002).\r\n\r\nLocation: ../eureka-server-1.10.7.war/WEB-INF/lib/xercesImpl-2.4.0.jar\r\n\r\nThe proposed solution is to upgrade xercesImpl to version 2.12.0", "This has already been reported and fixed https://github.com/Netflix/eureka/blob/f92ee228f9a7b2e1a76f8d75de0a4708353a79f8/eureka-server/build.gradle#L11 =||= "], ["1361", "Make instance config factory support custom amazon info provider", "Ling Yuan", "fiibbb", "11/06/20, 06:01:36 PM", "This diff adds `CustomAmazonInfoProviderInstanceConfigFactory`. This allow us to inject custom implementation of `<Provider>AmazonInfo`. The intention is to bind this new factory implementation to the `EurekaInstanceConfigFactory` interface, as documented [here](https://github.com/Netflix/eureka/blob/master/eureka-client-archaius2/src/main/java/com/netflix/discovery/guice/EurekaClientModule.java#L22), so that users can control how `AmazonInfo` is provided.\r", "NaN"], ["1362", "Eureka Server Down", null, "shijiyu", "11/09/20, 05:35:25 PM", "When Eureka Server Down,EurekaClient can't change locat cache.So when I call DiscoveryClient getInstace(),It still get application instance.", "Need more info. What's the behavior you're seeing, expected behavior, steps to reproduce? =||= The EurekaClient  gets Applications from Server,when it register to Server.But when Eureka Server is down,or  Network problems,The EurekaClient can't connect to The Eureka Server,The cache of the client can't be refeshed.So when I  use it method getInstance, It still get some instance which status still is up. =||= I also encountered a similar situation.\r\nThere are two machines A and B, with EurekaServer deployed on them.The EruekaClient on both machines are registered to these two EurekaServer.\r\nWhen I unplug the network cable of machine A, EurekaServer B can normally offline all EurekaClient on machine A, and EurekaClient on machine B can pull the correct registry information.After plugging the network cable of machine A back, all services returned to normal.\r\nHowever, when I unplugged the network cable of machine B, I found that although the EurekaServer on machine A can offline EurekaClient correctly, all the registration information obtained by EurekaClient on machine A has not been updated. =||= @shijiyu when Eureka client can't connect to Eureka servers, it will not invalidate / purge its local cache _by design_, it is done so that you don't lose critical discovery information in case of Eureka downtime. The information (may) get stale over time, but it's much better to have partially stale information than to have a 100% outage whenever Eureka is down.\r\n\r\n@Iyxh897 your issue seems different, I suggest opening a new issue. =||= @troshko111 OK,I know,Thanks. =||= "], ["1363", "Fix GzipEncodingEnforcingFilter getHeaders always with a const value", "Kebe", "kebe7jun", "12/01/20, 07:07:53 PM", "HttpHeaders.ACCEPT_ENCODING only need add to header names, not values.\r", "Thanks, this looks good to me, but can you please add a test demonstrating the issue and the fix? =||= hello @troshko111 , I have added tests for this case. =||= Thanks! =||= "], ["1364", "non-java server register to eureka", null, "DEVINccp", "11/11/20, 05:54:37 AM", "Can a non-java server register to eureka?\r\nMy server is  a go server, I want to register to eureka? Can I do this?", "Yes, it is possible.  =||= > Yes, it is possible.\r\n\r\nOk, I will hava a try. thank you. =||= You can implement a lightweight client / sidecar, only these APIs are necessary for registration:\r\n\r\nRegister, update (including state): `POST $ADDR/discovery/v2/apps/$APP`\r\nHeartbeat: `PUT \"$ADDR/discovery/v2/apps/$APP/$INSTANCE_ID?status=${current_status}&lastDirtyTimestamp=$last_reg\"`\r\nGracefully de-register (optional): `DELETE $ADDR/discovery/v2/apps/$APP/$INSTANCE_ID`\r\n\r\nStatus transitions are:\r\n`STARTING` -> `UP` (should not do `STARTING` -> `DOWN`, keep in `STARTING` until becomes healthy)\r\n`UP` <-> `DOWN`\r\n\r\nHope this helps. =||= ok, I completed the work through your hint, Thx =||= "], ["1365", "Fix DiscoveryManager", "Ling Yuan", "fiibbb", "11/11/20, 09:38:37 PM", "The legacy `DiscoveryManager` relies on explicitly setting its inner `EurekaInstanceConfig` to function properly. ", "NaN"], ["1366", "Revert log level of 'Saw local status' error", "James Mulcahy", "jamesmulcahy", "11/12/20, 06:42:17 PM", "NaN", "It has been surprising to a number of people that this changed, and we've decided to go back to the original behavior. =||= "], ["1367", "High Severity Vulnerability in xstream-1.4.13", "Hasan \u00c7elik", "hasancelik", "12/01/20, 07:26:03 PM", "https://github.com/Netflix/eureka/blob/master/eureka-client/build.gradle#L10\r\n\r\n[CVE-2020-26217](https://github.com/advisories/GHSA-mw36-7c6c-q4q2)\r\n\r\nThe proposed solution is to upgrade xstream to version **1.4.14**", "NaN"], ["1368", "what is the param app-group-name in Eureka use for?", null, "qushihaoji", "04/13/21, 05:57:12 PM", "now in same zone\uff0c we have same business but with different profile. like test and prod environment, and I want to use same eureka, how can I do that ?  \r\nI know I can give a different name for test and prod enviromnet, but besides this ,is any other ways to do that ?I see the source code, found param app-group-name ,what the param use for?\r\n\r\n[another disscuss can be saw here](https://github.com/spring-cloud/spring-cloud-netflix/issues/3512)\r\n[here](https://github.com/spring-cloud/spring-cloud-netflix/issues/3141)", "`appGroupName` does not seem to serve any specific purpose any more and looks to be largely unused. Looks like an artifact from the past to me.\r\n\r\nI did not fully get the first question though, can you elaborate? =||= "], ["1369", "deploy eureka cluster in kubernetes always cause unavailable-replicas xxx\u3002 Does this matter\uff1f ", "louis", "oldthreefeng", "11/26/20, 10:54:11 AM", "step to porduce:\r\n\r\n## 1. first to change eureka yml file to this.\r\n\r\n```\r\nspring:\r\n  application:\r\n    name: registry-center\r\n  profiles:\r\n    active: qa3\r\neureka:\r\n  environment: ${spring.profiles}\r\n  instance:\r\n    preferIpAddress: false\r\n    instance-id: ${spring.application.name}:${spring.cloud.client.ip-address}:${server.port}\r\n    enable-lease-expiration-duration: true\r\n    lease-renewal-interval-in-seconds: 10\r\n    lease-expiration-duration-in-seconds: 20\r\n  server:\r\n    enable-self-preservation: false\r\n    eviction-interval-timer-in-ms: 5000\r\n    renewal-threshold-update-interval-ms: 7000\r\n    renewal-percent-threshold: 0.9\r\n  client:\r\n    serviceUrl:\r\n      defaultZone: http://registry-center-new-0.registry-center-new:8101/eureka/,http://registry-center-new-1.registry-center-new:8101/eureka/,http://registry-center-new-2.registry-center-new:8101/eureka/\r\n```\r\n\r\n## 2. to deploy in kubernetes\r\n\r\n```\r\napiVersion: apps/v1\r\nkind: StatefulSet\r\nmetadata:\r\n  name: registry-center-new\r\n  namespace: qa3\r\nspec:\r\n  podManagementPolicy: OrderedReady\r\n  replicas: 3\r\n  revisionHistoryLimit: 10\r\n  selector:\r\n    matchLabels:\r\n      app: registry-center-new\r\n  serviceName: registry-center-new\r\n  template:\r\n    metadata:\r\n      creationTimestamp: null\r\n      labels:\r\n        app: registry-center-new\r\n    spec:\r\n      containers:\r\n      - env:\r\n        - name: PROFILE\r\n          value: qa3\r\n        image: myself-eureka:latest\r\n        imagePullPolicy: Always\r\n        name: be-registry-center-new-service-container\r\n        ports:\r\n        - containerPort: 8101\r\n          protocol: TCP\r\n        terminationMessagePath: /dev/termination-log\r\n        terminationMessagePolicy: File\r\n        volumeMounts:\r\n        - mountPath: /usr/local/bin/docker-entrypoint.sh\r\n          name: volume-registry-center-docker-entrypoint\r\n          subPath: docker-entrypoint.sh\r\n      dnsPolicy: ClusterFirst\r\n      imagePullSecrets:\r\n      - name: aliyunregistry\r\n      restartPolicy: Always\r\n      schedulerName: default-scheduler\r\n      terminationGracePeriodSeconds: 30\r\n      nodeSelector:\r\n        env: non_prod\r\n      tolerations:\r\n      - effect: NoSchedule\r\n        key: group\r\n        operator: Equal\r\n        value: non_prod\r\n      volumes:\r\n      - configMap:\r\n          defaultMode: 420\r\n          name: be-registry-center-docker-entrypoint.sh\r\n        name: volume-registry-center-docker-entrypoint\r\n  updateStrategy:\r\n    rollingUpdate:\r\n      partition: 0\r\n    type: RollingUpdate\r\n```\r\n\r\n## 3.  the registry wiil be show unavailable-replicas\r\n\r\n![image](https://user-images.githubusercontent.com/38313565/100313236-220e8c00-2fef-11eb-8cb4-de0722ca1eca.png)\r\n\r\nfor in the source file , i find this.\r\n\r\n```\r\npublic boolean isInstanceURL(String url, InstanceInfo instance) {\r\n\r\n    String hostName = hostFromUrl(url);\r\n\r\n    String myInfoComparator = instance.getHostName();\r\n\r\n    if (clientConfig.getTransportConfig().applicationsResolverUseIp()) {\r\n        myInfoComparator = instance.getIPAddr();\r\n   }\r\n\r\n    return hostName != null && hostName.equals(myInfoComparator);\r\n}\r\n```\r\n\r\nso. In kubernetes sts  . the pod hostname will be  never same as the serviceUrl. like my example : `registry-center-new-0` not be `registry-center-new-0.registry-center-new`. \r\n\r\nDoes this really matter to the cluster of eureka ? ", "fix by use full FQDN\r\n```\r\nserviceUrl:\r\n      defaultZone: http://registry-center-new-0.registry-center-new.qa3.svc.cluster.local:8101/eureka/,http://registry-center-new-1.registry-center-new.qa3.svc.cluster.local:8101/eureka/,http://registry-center-new-2.registry-center-new.qa3.svc.cluster.local:8101/eureka/\r\n``` =||= "], ["1370", "Fix #1367 (update xstream)", null, "troshko111", "12/01/20, 07:26:01 PM", "NaN", "NaN"], ["1371", "eureka.instance.prefer-ip-address javadoc has spelling error", null, "hrksingh", "12/06/20, 06:38:38 PM", "Flag to say that, when guessing a hostname, the IP address of the server should be used in prference to the hostname reported by the OS.\r\n\r\nhere  prference  should be preference", "this should be fixed by spring-cloud-netflix\r\n  =||= "], ["1372", "\u4f18\u5316\u5efa\u8bae", "Aliu(\u963f\u516d)", "cherishsince", "12/18/20, 03:00:32 AM", "\r\n\r\n```java\r\n\r\n  // AbstractInstanceRegistry#evict(long additionalLeaseMs)\r\n\r\n        if (toEvict > 0) {\r\n            logger.info(\"Evicting {} items (expired={}, evictionLimit={})\", toEvict, expiredLeases.size(), evictionLimit);\r\n\r\n            Random random = new Random(System.currentTimeMillis());\r\n            for (int i = 0; i < toEvict; i++) {\r\n                // Pick a random item (Knuth shuffle algorithm)\r\n\r\n                // \u8fd9\u4e2a\u5730\u65b9\uff0c\u5982\u679c expiredLeases.size() \u4e3a 1 \u7684\u65f6\u5019\uff0crandom.nextInt \u548c Collections.swap \u53ef\u4ee5\u4e0d\u8c03\u7528\uff0c\u4e00\u4e2a\u5c0f\u5c0f\u7684\u4f18\u5316\r\n                int next = i + random.nextInt(expiredLeases.size() - i);\r\n                Collections.swap(expiredLeases, i, next);\r\n                Lease<InstanceInfo> lease = expiredLeases.get(i);\r\n\r\n                String appName = lease.getHolder().getAppName();\r\n                String id = lease.getHolder().getId();\r\n                EXPIRED.increment();\r\n                logger.warn(\"DS: Registry: expired lease for {}/{}\", appName, id);\r\n                internalCancel(appName, id, false);\r\n            }\r\n        }\r\n```\r\n\r\n\u8bf4\u660e\uff1a\r\n\u8fd9\u662f\u4e00\u4e2a\u5c0f\u5c0f\u7684\u4f18\u5316\uff0c\u5728 `AbstractInstanceRegistry#evict(long additionalLeaseMs)` \uff0c\u5982\u679c expiredLeases.size() \u4e3a 1 \u7684\u65f6\u5019\uff0crandom.nextInt \u548c Collections.swap \u53ef\u4ee5\u4e0d\u8c03\u7528\uff0c\u4e00\u4e2a\u5c0f\u5c0f\u7684\u4f18\u5316\r", "Sorry, we can only review issues and submissions in English. I'll keep it open for a bit in case you decide to provide a description. =||= This is a small optimization. In AbstractInstanceRegistry#evict(long additionalLeaseMs), if expiredLeases.size() is 1, random.nextInt and Collections.swap can be omitted. A small optimization =||= Thanks for explaining, this is true, but it'd add a special case to the code and the optimization is probably too small to justify it. =||= "], ["1373", "Help me to see a problem\uff0cMultiple Eureka deployed on one server", null, "eighthw", "04/13/21, 06:28:37 PM", "I deployed multiple Eureka on a server, one 8761 and one 7001. I started a microservice and configured to register with 7001, but 8761 will also be registered by default. How can I make it not register port 8761 by default.\r\n\r\nserver.port: 7002      #Change the built-in server port#\r\nspring:\r\n  application:\r\n    name: configserver\r\n  profiles:\r\n    active: native     \r\n\r\neureka:\r\n  client:\r\n    service-url:\r\n      defaultZone: http://127.0.0.1:7001/eureka/\r\n  instance:\r\n    prefer-ip-address: true\r\n    instance-id: ${eureka.instance.ip-address:${spring.cloud.client.ip-address}}:${spring.application.instance_id:${server.port}}:${spring.application.name}\r", "Set the port/secure port on the client explicitly to the one you're registering. =||= "], ["1374", "Eureka connectionIdleTimeout assignment error!!!", "Haley", "UFO-Coder", "04/13/21, 06:17:05 PM", "In eureka-client version 1.9.3 or old version,I'm not sure if this problem still exists in the new version. com.net flix. Discovery. Shared. Transport. EurekaClientFactoryBuilder# connectionIdleTimeout field assignment to transform the default 30 s to ms.But in com.net flix. Discovery. Shared. Transport. Jersey# cleanIdle in use, it is to use as the seconds, cause connectionIdleTimeout values be enlarged 1000 times, long connection cannot receive timely detection of destruction.", "![image](https://user-images.githubusercontent.com/53501500/103216863-0d0c7c00-4952-11eb-9d01-ab5fd3e0091f.png)\r\n![image](https://user-images.githubusercontent.com/53501500/103216886-1bf32e80-4952-11eb-92ee-f60eb9a7855d.png)\r\n =||= Hi\r\nI checked the source code of version `1.9.25` . In the `Eurekaclientfactorybuilder` class, the code has been fixed, and the above problem does not appear. \r\n```\r\n    public B withClientConfig(EurekaClientConfig clientConfig) {\r\n        withClientAccept(EurekaAccept.fromString(clientConfig.getClientDataAccept()));\r\n        withAllowRedirect(clientConfig.allowRedirects());\r\n        withConnectionTimeout(clientConfig.getEurekaServerConnectTimeoutSeconds() * 1000);\r\n        withReadTimeout(clientConfig.getEurekaServerReadTimeoutSeconds() * 1000);\r\n        withMaxConnectionsPerHost(clientConfig.getEurekaServerTotalConnectionsPerHost());\r\n        withMaxTotalConnections(clientConfig.getEurekaServerTotalConnections());\r\n        withConnectionIdleTimeout(clientConfig.getEurekaConnectionIdleTimeoutSeconds());\r\n        withEncoder(clientConfig.getEncoderName());\r\n        return withDecoder(clientConfig.getDecoderName(), clientConfig.getClientDataAccept());\r\n    }\r\n```\r\n\r\nAny thoughts?\r\n =||= "], ["1375", "Unable to run demo application due to javadoc error", "${sleep,5}", "mrthankyou", "01/18/21, 01:57:08 AM", "Hi,\r\n\r\nI'm attempting to run a demo application on my local machine. I am currently following your instructions [here](https://github.com/Netflix/eureka/wiki/Running-the-Demo-Application). When I run the following command `./gradlew clean build` to build the project, I receive the following output in my terminal:\r\n\r\n```shell\r\n> Configure project :\r\nInferred project: eureka, version: 1.10.12-SNAPSHOT\r\n\r\n> Configure project :eureka-client\r\nThe testJar task is deprecated.  Please place common test harness code in its own project and publish separately.\r\n\r\n> Configure project :eureka-client-archaius2\r\nThe testJar task is deprecated.  Please place common test harness code in its own project and publish separately.\r\n\r\n> Configure project :eureka-client-jersey2\r\nThe testJar task is deprecated.  Please place common test harness code in its own project and publish separately.\r\n\r\n> Task :eureka-client:compileJava\r\nNote: Some input files use or override a deprecated API.\r\nNote: Recompile with -Xlint:deprecation for details.\r\nNote: Some input files use unchecked or unsafe operations.\r\nNote: Recompile with -Xlint:unchecked for details.\r\n\r\n> Task :eureka-client:javadoc\r\n/Users/thank_you/research/netflix/eureka/eureka-client/src/main/java/com/netflix/discovery/EurekaUpStatusResolver.java:3: error: cannot find symbol\r\nimport javax.annotation.PostConstruct;\r\n                       ^\r\n  symbol:   class PostConstruct\r\n  location: package javax.annotation\r\n/Users/thank_you/research/netflix/eureka/eureka-client/src/main/java/com/netflix/discovery/EurekaUpStatusResolver.java:4: error: cannot find symbol\r\nimport javax.annotation.PreDestroy;\r\n                       ^\r\n  symbol:   class PreDestroy\r\n  location: package javax.annotation\r\n/Users/thank_you/research/netflix/eureka/eureka-client/src/main/java/com/netflix/discovery/DiscoveryClient.java:46: error: cannot find symbol\r\nimport javax.annotation.PreDestroy;\r\n                       ^\r\n  symbol:   class PreDestroy\r\n  location: package javax.annotation\r\n/Users/thank_you/research/netflix/eureka/eureka-client/src/main/java/com/netflix/discovery/EurekaUpStatusResolver.java:49: error: cannot find symbol\r\n    @PostConstruct\r\n     ^\r\n  symbol:   class PostConstruct\r\n  location: class EurekaUpStatusResolver\r\n/Users/thank_you/research/netflix/eureka/eureka-client/src/main/java/com/netflix/discovery/EurekaUpStatusResolver.java:62: error: cannot find symbol\r\n    @PreDestroy\r\n     ^\r\n  symbol:   class PreDestroy\r\n  location: class EurekaUpStatusResolver\r\n/Users/thank_you/research/netflix/eureka/eureka-client/src/main/java/com/netflix/discovery/DiscoveryClient.java:931: error: cannot find symbol\r\n    @PreDestroy\r\n     ^\r\n  symbol:   class PreDestroy\r\n  location: class DiscoveryClient\r\n6 errors\r\n\r\n> Task :eureka-client:javadoc FAILED\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task ':eureka-client:javadoc'.\r\n> Javadoc generation failed. Generated Javadoc options file (useful for troubleshooting): '/Users/thank_you/research/netflix/eureka/eureka-client/build/tmp/javadoc/javadoc.options'\r\n\r\n* Try:\r\nRun with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n\r\n* Exception is:\r\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task ':eureka-client:javadoc'.\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.lambda$executeIfValid$1(ExecuteActionsTaskExecuter.java:205)\r\n        at org.gradle.internal.Try$Failure.ifSuccessfulOrElse(Try.java:263)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:203)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:184)\r\n        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:114)\r\n        at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\r\n        at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:62)\r\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\r\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\r\n        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:416)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:406)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor$1.execute(DefaultBuildOperationExecutor.java:165)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:250)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:158)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:102)\r\n        at org.gradle.internal.operations.DelegatingBuildOperationExecutor.call(DelegatingBuildOperationExecutor.java:36)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\r\n        at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:41)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:372)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:359)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:352)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:338)\r\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.lambda$run$0(DefaultPlanExecutor.java:127)\r\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:191)\r\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:182)\r\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:124)\r\n        at org.gradle.execution.plan.DefaultPlanExecutor.process(DefaultPlanExecutor.java:72)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph.executeWithServices(DefaultTaskExecutionGraph.java:189)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph.execute(DefaultTaskExecutionGraph.java:166)\r\n        at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:41)\r\n        at org.gradle.execution.DefaultBuildWorkExecutor.execute(DefaultBuildWorkExecutor.java:40)\r\n        at org.gradle.execution.DefaultBuildWorkExecutor.access$000(DefaultBuildWorkExecutor.java:24)\r\n        at org.gradle.execution.DefaultBuildWorkExecutor$1.proceed(DefaultBuildWorkExecutor.java:48)\r\n        at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:49)\r\n        at org.gradle.execution.DefaultBuildWorkExecutor.execute(DefaultBuildWorkExecutor.java:40)\r\n        at org.gradle.execution.DefaultBuildWorkExecutor.execute(DefaultBuildWorkExecutor.java:33)\r\n        at org.gradle.execution.IncludedBuildLifecycleBuildWorkExecutor.execute(IncludedBuildLifecycleBuildWorkExecutor.java:36)\r\n        at org.gradle.execution.DeprecateUndefinedBuildWorkExecutor.execute(DeprecateUndefinedBuildWorkExecutor.java:42)\r\n        at org.gradle.execution.BuildOperationFiringBuildWorkerExecutor$ExecuteTasks.run(BuildOperationFiringBuildWorkerExecutor.java:57)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:402)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:394)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor$1.execute(DefaultBuildOperationExecutor.java:165)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:250)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:158)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:92)\r\n        at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\r\n        at org.gradle.execution.BuildOperationFiringBuildWorkerExecutor.execute(BuildOperationFiringBuildWorkerExecutor.java:42)\r\n        at org.gradle.initialization.DefaultGradleLauncher.runWork(DefaultGradleLauncher.java:255)\r\n        at org.gradle.initialization.DefaultGradleLauncher.doClassicBuildStages(DefaultGradleLauncher.java:164)\r\n        at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:140)\r\n        at org.gradle.initialization.DefaultGradleLauncher.executeTasks(DefaultGradleLauncher.java:120)\r\n        at org.gradle.internal.invocation.GradleBuildController$1.create(GradleBuildController.java:74)\r\n        at org.gradle.internal.invocation.GradleBuildController$1.create(GradleBuildController.java:67)\r\n        at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:189)\r\n        at org.gradle.internal.work.StopShieldingWorkerLeaseService.withLocks(StopShieldingWorkerLeaseService.java:40)\r\n        at org.gradle.internal.invocation.GradleBuildController.doBuild(GradleBuildController.java:67)\r\n        at org.gradle.internal.invocation.GradleBuildController.run(GradleBuildController.java:56)\r\n        at org.gradle.tooling.internal.provider.ExecuteBuildActionRunner.run(ExecuteBuildActionRunner.java:31)\r\n        at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\r\n        at org.gradle.launcher.exec.BuildOutcomeReportingBuildActionRunner.run(BuildOutcomeReportingBuildActionRunner.java:63)\r\n        at org.gradle.tooling.internal.provider.ValidatingBuildActionRunner.run(ValidatingBuildActionRunner.java:32)\r\n        at org.gradle.launcher.exec.BuildCompletionNotifyingBuildActionRunner.run(BuildCompletionNotifyingBuildActionRunner.java:39)\r\n        at org.gradle.launcher.exec.RunAsBuildOperationBuildActionRunner$3.call(RunAsBuildOperationBuildActionRunner.java:51)\r\n        at org.gradle.launcher.exec.RunAsBuildOperationBuildActionRunner$3.call(RunAsBuildOperationBuildActionRunner.java:45)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:416)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:406)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor$1.execute(DefaultBuildOperationExecutor.java:165)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:250)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:158)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:102)\r\n        at org.gradle.internal.operations.DelegatingBuildOperationExecutor.call(DelegatingBuildOperationExecutor.java:36)\r\n        at org.gradle.launcher.exec.RunAsBuildOperationBuildActionRunner.run(RunAsBuildOperationBuildActionRunner.java:45)\r\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter$1.transform(InProcessBuildActionExecuter.java:50)\r\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter$1.transform(InProcessBuildActionExecuter.java:47)\r\n        at org.gradle.composite.internal.DefaultRootBuildState.run(DefaultRootBuildState.java:80)\r\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:47)\r\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:31)\r\n        at org.gradle.launcher.exec.BuildTreeScopeBuildActionExecuter.execute(BuildTreeScopeBuildActionExecuter.java:42)\r\n        at org.gradle.launcher.exec.BuildTreeScopeBuildActionExecuter.execute(BuildTreeScopeBuildActionExecuter.java:28)\r\n        at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:78)\r\n        at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:52)\r\n        at org.gradle.tooling.internal.provider.SubscribableBuildActionExecuter.execute(SubscribableBuildActionExecuter.java:60)\r\n        at org.gradle.tooling.internal.provider.SubscribableBuildActionExecuter.execute(SubscribableBuildActionExecuter.java:38)\r\n        at org.gradle.tooling.internal.provider.SessionScopeBuildActionExecuter.execute(SessionScopeBuildActionExecuter.java:68)\r\n        at org.gradle.tooling.internal.provider.SessionScopeBuildActionExecuter.execute(SessionScopeBuildActionExecuter.java:38)\r\n        at org.gradle.tooling.internal.provider.GradleThreadBuildActionExecuter.execute(GradleThreadBuildActionExecuter.java:37)\r\n        at org.gradle.tooling.internal.provider.GradleThreadBuildActionExecuter.execute(GradleThreadBuildActionExecuter.java:26)\r\n        at org.gradle.tooling.internal.provider.ParallelismConfigurationBuildActionExecuter.execute(ParallelismConfigurationBuildActionExecuter.java:43)\r\n        at org.gradle.tooling.internal.provider.ParallelismConfigurationBuildActionExecuter.execute(ParallelismConfigurationBuildActionExecuter.java:29)\r\n        at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:60)\r\n        at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:32)\r\n        at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:55)\r\n        at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:41)\r\n        at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:48)\r\n        at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:32)\r\n        at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:68)\r\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n        at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:39)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n        at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:29)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n        at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:35)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.create(ForwardClientInput.java:78)\r\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.create(ForwardClientInput.java:75)\r\n        at org.gradle.util.Swapper.swap(Swapper.java:38)\r\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:75)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n        at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:55)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n        at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:63)\r\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n        at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:82)\r\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n        at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:52)\r\n        at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:297)\r\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\r\n        at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\r\nCaused by: org.gradle.api.GradleException: Javadoc generation failed. Generated Javadoc options file (useful for troubleshooting): '/Users/thank_you/research/netflix/eureka/eureka-client/build/tmp/javadoc/javadoc.options'\r\n        at org.gradle.api.tasks.javadoc.internal.JavadocGenerator.execute(JavadocGenerator.java:58)\r\n        at org.gradle.api.tasks.javadoc.internal.JavadocGenerator.execute(JavadocGenerator.java:31)\r\n        at org.gradle.api.tasks.javadoc.Javadoc.executeExternalJavadoc(Javadoc.java:164)\r\n        at org.gradle.api.tasks.javadoc.Javadoc.generate(Javadoc.java:152)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:104)\r\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.doExecute(StandardTaskAction.java:49)\r\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:42)\r\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:28)\r\n        at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:727)\r\n        at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:694)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$3.run(ExecuteActionsTaskExecuter.java:568)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:402)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:394)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor$1.execute(DefaultBuildOperationExecutor.java:165)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:250)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:158)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:92)\r\n        at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:553)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:536)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.access$300(ExecuteActionsTaskExecuter.java:109)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution.executeWithPreviousOutputFiles(ExecuteActionsTaskExecuter.java:276)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution.execute(ExecuteActionsTaskExecuter.java:265)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.lambda$execute$1(ExecuteStep.java:33)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:33)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:26)\r\n        at org.gradle.internal.execution.steps.CleanupOutputsStep.execute(CleanupOutputsStep.java:67)\r\n        at org.gradle.internal.execution.steps.CleanupOutputsStep.execute(CleanupOutputsStep.java:36)\r\n        at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:49)\r\n        at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:34)\r\n        at org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:43)\r\n        at org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:73)\r\n        at org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:54)\r\n        at org.gradle.internal.execution.steps.CatchExceptionStep.execute(CatchExceptionStep.java:34)\r\n        at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:44)\r\n        at org.gradle.internal.execution.steps.SnapshotOutputsStep.execute(SnapshotOutputsStep.java:54)\r\n        at org.gradle.internal.execution.steps.SnapshotOutputsStep.execute(SnapshotOutputsStep.java:38)\r\n        at org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:49)\r\n        at org.gradle.internal.execution.steps.CacheStep.executeWithoutCache(CacheStep.java:159)\r\n        at org.gradle.internal.execution.steps.CacheStep.execute(CacheStep.java:72)\r\n        at org.gradle.internal.execution.steps.CacheStep.execute(CacheStep.java:43)\r\n        at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:44)\r\n        at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:33)\r\n        at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:38)\r\n        at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:24)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:92)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$0(SkipUpToDateStep.java:85)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:55)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:39)\r\n        at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:76)\r\n        at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:37)\r\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:36)\r\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:26)\r\n        at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:94)\r\n        at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:49)\r\n        at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:79)\r\n        at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:53)\r\n        at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:74)\r\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.lambda$execute$2(SkipEmptyWorkStep.java:78)\r\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:78)\r\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:34)\r\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:39)\r\n        at org.gradle.internal.execution.steps.LoadExecutionStateStep.execute(LoadExecutionStateStep.java:40)\r\n        at org.gradle.internal.execution.steps.LoadExecutionStateStep.execute(LoadExecutionStateStep.java:28)\r\n        at org.gradle.internal.execution.impl.DefaultWorkExecutor.execute(DefaultWorkExecutor.java:33)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:192)\r\n        ... 123 more\r\nCaused by: org.gradle.process.internal.ExecException: Process 'command '/Library/Java/JavaVirtualMachines/jdk-13.0.1.jdk/Contents/Home/bin/javadoc'' finished with non-zero exit value 1\r\n        at org.gradle.process.internal.DefaultExecHandle$ExecResultImpl.assertNormalExitValue(DefaultExecHandle.java:417)\r\n        at org.gradle.process.internal.DefaultExecAction.execute(DefaultExecAction.java:38)\r\n        at org.gradle.api.tasks.javadoc.internal.JavadocGenerator.execute(JavadocGenerator.java:53)\r\n        ... 191 more\r\n\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 7.0.\r\nUse '--warning-mode all' to show the individual deprecation warnings.\r\nSee https://docs.gradle.org/6.3/userguide/command_line_interface.html#sec:command_line_warnings\r\n\r\nBUILD FAILED in 12s\r\n17 actionable tasks: 16 executed, 1 up-to-date\r\n```\r\n\r\nAny help on how to fix this issue would be great. If you need any more info from me please let me know. I'm rather new to working with Java applications so I'm not sure what debugging info would be useful to you. Thanks!\r\n\r\nSincerely,\r\nthank_you", "Seems to be this https://stackoverflow.com/questions/52701459/i-cant-use-postconstruct-and-postdestroy-with-java-11. May require an explicit dep for the annotations post Java 11 (I see you're on 13). =||= @troshko111,\r\n\r\nI'll take a look further and see if I can come up with anything. Thanks for the help! =||= I am able to successfully pass this particular test after following the instructions in the Stackoverflow answer. However, I'm running into other issues such as flaky tests. For now I'm going to close this issue and if need be introduce a new issue. Thanks for the help. =||= "], ["1376", "Make eureka instance config namespace configurable", "Ling Yuan", "fiibbb", "01/14/21, 12:34:29 AM", "Make eureka instance config namespace configurable. This allow us to use `CustomAmazonInfoProviderInstanceConfigFactory` the same way as `CompositeInstanceConfigFactory`.\r\n\r\nSpecifically, when we use `CompositeInstanceConfigFactory`, we can override the config namespace for which `InstaceConfig` reads its data from, using DI. Within Netflix this is overridden from `eureka` to `netflix.appinfo`. In `CustomAmazonInfoProviderInstanceConfigFactory`, however, this config namespace was previously hardcoded, causing test failures.", "NaN"], ["1377", "Updates xstream to 1.4.15", "Spencer Gibb", "spencergibb", "01/20/21, 05:27:39 PM", "NaN", "NaN"], ["1378", "Time for next generation Eureka?", "saga", "holy12345", "04/13/21, 06:15:55 PM", "This is an open discuss. I am curious whether there are plans for the next generation of eureka recently. Or we can contribute to the next generation of eureka with the help of the community and during the process of contribution, we can get some help from Netflix experts.\r\n\r\nthanks for any reply : )", "We can have a conversation in #1272. =||= "], ["1379", "Registration status 204", "Jasper Ji", "jasper2007111", "02/08/21, 06:58:47 AM", "![image](https://user-images.githubusercontent.com/3945486/107169769-a4f19100-69f9-11eb-8aa3-ae219d1690c5.png)\r\nrun windows server 2012, ip address add underscore\uff0cso eureka client Registration status 204. run CentOS ok. why\uff1f", "eureka:\r\n  instance:\r\n    preferIpAddress: true =||= "], ["1380", "Upgrade nebula.netflixoss to replace bintray publication and update TravisCI Secrets", "Roberto Perez Alcolea", "rpalcolea", "03/03/21, 11:51:11 PM", "Hi folks,\r\n\r\nAs you might be aware, JFrog is sunsetting Bintray and JCenter: https://jfrog.com/blog/into-the-sunset-bintray-jcenter-gocenter-and-chartcenter/\r\n\r\nThis upgrades to Nebula NetflixOSS which will publish to Nebula's OSS repos and Maven Central.\r\n\r\nRepositories based on status:\r\n\r\n* https://netflixoss.jfrog.io/artifactory/maven-oss-snapshots\r\n* https://netflixoss.jfrog.io/artifactory/maven-oss-candidates\r\n* https://netflixoss.jfrog.io/artifactory/maven-oss-releases\r\n\r", "I can do a release (there are unreleased changes) to try this out, would appreciate if you could help verify. =||= yeah that makes sense, I can verify that everything goes as expected =||= @rpalcolea kicked off https://github.com/Netflix/eureka/releases/tag/v1.10.13 =||= Alright I see https://repo1.maven.org/maven2/com/netflix/eureka/eureka-core/1.10.13/  in maven central\r\n\r\nand also in our repo: https://repo1.maven.org/maven2/com/netflix/eureka/eureka-core/1.10.13/ \r\n\r\nSame for other modules such as:\r\n\r\nhttps://repo1.maven.org/maven2/com/netflix/eureka/eureka-server/1.10.13/\r\nhttps://repo1.maven.org/maven2/com/netflix/eureka/eureka-client/1.10.13/ =||= "], ["1381", "Replace jcenter with maven central", "Roberto Perez Alcolea", "rpalcolea", "03/18/21, 10:04:58 PM", "This replaces jcenter with maven central to avoid broken builds in the future\r\n\r", "NaN"], ["1382", "Ignore interfaces in eureka service", "Ricardo Legorreta", "Rex-Legor", "06/09/21, 06:13:40 PM", "**Is this a bug: No, just a question, possibly a new feature suggestion**\r\n\r\n**Problem:**\r\nis there a way to ignore or exclude clients in my eureka server based on their ip address? or something like this?\r\n\r\ncurrently we have 100+ services up and running connecting to different eureka servers,\r\nand we would like to avoid registering client services if they are running locally,\r\nsince we have a lot of services with a lot of people working with them removing their `@EnableEurekaClient` annotation every time we run it locally can be annoying, or any similar workaround.\r\n\r\n**So I'm looking for a way to prevent services from getting registered in the eureka server by modifying my eureka server, not my clients,**\r\n\r\nThanks.\r", "If the config can be flexed locally, the `eureka.registration.enabled` property can be used to skip client registration. =||= "], ["1383", "Update ResolverUtils::randomize", "Jacques-Etienne Beaudet", "jebeaudet", "04/13/21, 05:53:49 PM", "The method will now properly randomize a list with a different result on each invocation. Using a constant seed made the same list of `[\"a\",\"b\",\"c\"]` always \"randomized\" to the same result on each invocation.\r\n\r\nSince `SessionedEurekaHttpClient` is supposed to round robin through the different eureka endpoints at a configurable interval, having a randomize method that always returns the same value render this class useless.\r\n\r\nThanks", "Thanks! =||= "], ["1384", "eureka-client: JsonParseException while getAndStoreFullRegistry() triggered by contextRefresher", null, "jianbo-chen", "04/14/21, 02:21:37 AM", "env and dependence desc\r\n\r\n- eureka-client version: 1.4.5.RELEASE\r\n\r\n- JDK version: 1.8.202\r\n\r\n- spring-cloud-netflix-eureka-client version: 2.1.0.RELEASE\r\n\r\nOn eureka-server side  we have 2 servers and they belong to a same zone ;\r\n\r\nit happened about 5 times exception in this month, \r\nwe found some errors from logs ,  DiscoveryClient tried both 2 eureka-server but it both tuned out to print this error log.\r\n\r\nthis is the one of  exception messages :\r\n![image](https://user-images.githubusercontent.com/23950694/112313094-72b69d00-8ce2-11eb-8f78-36f962832f79.png)\r\n\r\naccording to this error log, it happens on this line of code :\r\neureka/eureka-client/com.netflix.discovery/DiscoveryClient.java\r\nLine 1050 \r\n\r\nthis error doesn't always get thrown , so we are unable to debug locally. \r\n\r\naccording to the error logs on prod envirement,\r\nwe found out that the error hadn't happened, however, while we push the apollo(https://github.com/ctripcorp/apollo) configs which we have written a refreshListener to refresh config bean, the error may happen. The codes of the Listener are shown below:\r\n![image](https://user-images.githubusercontent.com/23950694/112314097-94fcea80-8ce3-11eb-9c65-2d71e0f2f826.png)\r\n\r\nthis refresh event would refresh the DiscoveryClient bean and sometimes\r\nwould throw the JsonParseException while request the fullRegistry.\r\n\r\nCan you please advice me, are we doing something wrong or could this be a bug?\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r", "It gets aborted if loading the full Discovery state and parsing it takes over 30s (the default value I believe), so you need to hunt down whatever is causing this to be so slow (local CPU thrashing, slow network, etc.) =||= > It gets aborted if loading the full Discovery state and parsing it takes over 30s (the default value I believe), so you need to hunt down whatever is causing this to be so slow (local CPU thrashing, slow network, etc.)\r\n\r\nThanks for your answer,  we added an monitor to eureka server  and  upgraded my eureka server version to 2.1.0.RELEASE  which is the same as client eureka version, then this error has never showed again for now. =||= "], ["1385", "High Severity Vulnerability in xstream-1.4.15.jar", "\u5f20\u9038\u626c", "gdut-yy", "03/31/21, 05:52:58 PM", "https://github.com/Netflix/eureka/blob/master/eureka-client/build.gradle#L10\r\n\r\n- CVE-2021-21341: The processed stream at unmarshalling time contains type information to recreate the formerly written objects. XStream creates therefore new instances based on these type information. An attacker can manipulate the processed input stream and replace or inject a manipulated ByteArrayInputStream (or derived class), that can cause an endless loop resulting in a denial of service.\r\n- CVE-2021-21342: The processed stream at unmarshalling time contains type information to recreate the formerly written objects. XStream creates therefore new instances based on these type information. An attacker can manipulate the processed input stream and replace or inject objects, that result in a server-side forgery request.\r\n- CVE-2021-21343: The processed stream at unmarshalling time contains type information to recreate the formerly written objects. XStream creates therefore new instances based on these type information. An attacker can manipulate the processed input stream and replace or inject objects, that result in the deletion of a file on the local host.\r\n- CVE-2021-21344: The processed stream at unmarshalling time contains type information to recreate the formerly written objects. XStream creates therefore new instances based on these type information. An attacker can manipulate the processed input stream and replace or inject objects, that result in execution of arbitrary code loaded from a remote server.\r\n- CVE-2021-21345: The processed stream at unmarshalling time contains type information to recreate the formerly written objects. XStream creates therefore new instances based on these type information. An attacker can manipulate the processed input stream and replace or inject objects, that result in execution of a local command on the server.\r\n- CVE-2021-21346: The processed stream at unmarshalling time contains type information to recreate the formerly written objects. XStream creates therefore new instances based on these type information. An attacker can manipulate the processed input stream and replace or inject objects, that result in execution of arbitrary code loaded from a remote server.\r\n- CVE-2021-21347: The processed stream at unmarshalling time contains type information to recreate the formerly written objects. XStream creates therefore new instances based on these type information. An attacker can manipulate the processed input stream and replace or inject objects, that result in execution of arbitrary code loaded from a remote server.\r\n- CVE-2021-21348: The processed stream at unmarshalling time contains type information to recreate the formerly written objects. XStream creates therefore new instances based on these type information. An attacker can manipulate the processed input stream and replace or inject objects, that result in executed evaluation of a malicious regular expression causing a denial of service.\r\n- CVE-2021-21349: The processed stream at unmarshalling time contains type information to recreate the formerly written objects. XStream creates therefore new instances based on these type information. An attacker can manipulate the processed input stream and replace or inject objects, that result in a server-side forgery request.\r\n- CVE-2021-21350: The processed stream at unmarshalling time contains type information to recreate the formerly written objects. XStream creates therefore new instances based on these type information. An attacker can manipulate the processed input stream and replace or inject objects, that result in an arbitrary code execution.\r\n- CVE-2021-21351: The processed stream at unmarshalling time contains type information to recreate the formerly written objects. XStream creates therefore new instances based on these type information. An attacker can manipulate the processed input stream and replace or inject objects, that result in execution of arbitrary code loaded from a remote server.\r\n\r\nThe proposed solution is to upgrade xstream to version **1.4.16**", "http://x-stream.github.io/changes.html =||= CVSS ranges: 0-3.9 minor, 4.0-6.9 major and 7.0-10.0 critical =||= Thanks for doing this, merged, closing this now. =||= "], ["1386", "Upgrade xstream-1.4.15 to 1.4.16 for CVE-2021-213{41-51}.", "\u5f20\u9038\u626c", "gdut-yy", "03/31/21, 05:52:07 PM", "Upgrade xstream-1.4.15 to 1.4.16 for CVE-2021-213{41-51}.\r\n\r\nissue https://github.com/Netflix/eureka/issues/1385", "NaN"], ["1388", "Upgrade Jackson to the next open branch 2.10", null, "AmitAmar", "05/18/21, 09:04:33 PM", "NaN", "That's 3 branches up, which includes quite a few changes, it'd need to have some wider validation. Is staying on `2.9.x` viable for you? =||= Hi,\n\nThanks for your reply.\n\nUnfortunately,  I didn't understand your question.\n\nI had upgrade the jackson version from: 2.9.10 --> 2.12.3 because some\nvulnerability (according to WhiteSource)\n\n[image: image.png]\n\nCan you please explain yourself?\n\nThanks and have a nice day,\n\nAmit.\n\n\u202b\u05d1\u05ea\u05d0\u05e8\u05d9\u05da \u05d9\u05d5\u05dd \u05d1\u05f3, 17 \u05d1\u05de\u05d0\u05d9 2021 \u05d1-19:59 \u05de\u05d0\u05ea \u202atroshko111\u202c\u200f <\u202a\n***@***.***\u202c\u200f>:\u202c\n\n> That's 3 branches up, which includes quite a few changes, it'd need to\n> have some wider validation. Is staying on 2.9.x viable for you?\n>\n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/Netflix/eureka/pull/1388#issuecomment-842483883>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AJVF7DE6W6JX7VPZZ62HOY3TOFDOVANCNFSM425CHOIQ>\n> .\n>\n =||= Sure, so Jackson has a number of \"branches\" in development, which differ in behavior (mostly minor but noticeable), see https://github.com/FasterXML/jackson/wiki/Jackson-Releases\r\n\r\nWe're on `2.9` branch which is closed so won't get new vulnerability patches, meaning we need to move on, agreed. But in your PR you're skipping through https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.10#changes-compatibility and https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.11 completely - note the list of changes and incompatibilities.\r\n\r\nWhat I'm saying, the users or even Eureka may not work as expected and we need to double check those changes / compatibilities don't break anything.\r\n\r\nIt may be easier to do one step at a time, and move to `2.10` branch instead (it should have the patches for the current CVEs), and only verify that branch changes don't break anything, then in the future we can move to `2.11` and so on (until we're current).\r\n\r\nDoes it make sense? =||= Hi there,\n\nThank you for your explanation. Yes it makes sense to upgrade to 2.10\ninstead of 2.13. you're right.\n\nCan you please change it or I'll send a new PR?\n\nThank you and have a nice day,\n\nAmit.\n\n\u202b\u05d1\u05ea\u05d0\u05e8\u05d9\u05da \u05d9\u05d5\u05dd \u05d2\u05f3, 18 \u05d1\u05de\u05d0\u05d9 2021 \u05d1-0:45 \u05de\u05d0\u05ea \u202atroshko111\u202c\u200f <\u202a\n***@***.***\u202c\u200f>:\u202c\n\n> Sure, so Jackson has a number of \"branches\" in development, which differ\n> in behavior (mostly minor but noticeable), see\n> https://github.com/FasterXML/jackson/wiki/Jackson-Releases\n>\n> We're on 2.9 branch which is closed so won't get new vulnerability\n> patches, meaning we need to move on, agreed. But in your PR you're skipping\n> through\n> https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.10#changes-compatibility\n> and https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.11\n> completely - note the list of changes and incompatibilities.\n>\n> What I'm saying, the users or even Eureka may not work as expected and we\n> need to double check those changes / compatibilities don't break anything.\n>\n> It may be easier to do one step at a time, and move to 2.10 branch\n> instead (it should have the patches for the current CVEs), and only verify\n> that branch changes don't break anything, then in the future we can move to\n> 2.11 and so on (until we're current).\n>\n> Does it make sense?\n>\n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/Netflix/eureka/pull/1388#issuecomment-842662882>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AJVF7DHI6RO67T3UN7LGOLLTOGE7ZANCNFSM425CHOIQ>\n> .\n>\n =||= Keep the PR, feel free to push a new commit. =||= Superseded by #1393. =||= Done :)\n\nhttps://github.com/Netflix/eureka/pull/1395\n\nBR,\n\nAmit.\n\n\u202b\u05d1\u05ea\u05d0\u05e8\u05d9\u05da \u05d9\u05d5\u05dd \u05d2\u05f3, 18 \u05d1\u05de\u05d0\u05d9 2021 \u05d1-22:06 \u05de\u05d0\u05ea \u202atroshko111\u202c\u200f <\u202a\n***@***.***\u202c\u200f>:\u202c\n\n> Keep the PR, feel free to push a new commit.\n>\n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/Netflix/eureka/pull/1388#issuecomment-843458151>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AJVF7DDNTJ6YR4I6OLENM5TTOK3EBANCNFSM425CHOIQ>\n> .\n>\n =||= "], ["1390", " remove  Response's Status magic var", null, "Yangdaidai", "06/30/21, 04:20:56 PM", " remove  Response's Status magic var", "Seems reasonable, but can you please split into 2 PRs? The changes seems unrelated right now. =||= The `getReponse` refactoring is still in, can you submit a separate PR for the constants, and the refactoring please? =||= "], ["1393", "Update Jackson to 2.10 branch", null, "troshko111", "05/18/21, 09:24:40 PM", "NaN", "Addresses Jackson part of #1387. =||= "], ["1394", "Upgrade jackson version to:2.11.4 . (Previous was: 2.10.5)", null, "AmitAmar", "05/19/21, 11:03:59 AM", "NaN", "NaN"], ["1395", "Upgrade jackson version to: 2.10.5. (Previous was: 2.9.10)", null, "AmitAmar", "05/20/21, 08:45:02 PM", "NaN", "I already merged this yesterday, see https://github.com/Netflix/eureka/commit/4d1cc8077922bdeb9ef0762681be36ac22316028\r\n\r\nYou need to fetch origin and rebase, you have a stale tree. =||= "], ["1396", "High Severity Vulnerability in xstream-1.4.16.jar", "\u5f20\u9038\u626c", "gdut-yy", "05/21/21, 11:46:18 PM", "https://github.com/Netflix/eureka/blob/4d1cc8077922bdeb9ef0762681be36ac22316028/eureka-client/build.gradle#L10\r\n\r\nCVE-2021-29505: The processed stream at unmarshalling time contains type information to recreate the formerly written objects. XStream creates therefore new instances based on these type information. An attacker can manipulate the processed input stream and replace or inject objects, that result in execution of a local command on the server.\r\n\r\nThe proposed solution is to upgrade xstream to version 1.4.17", "CVE-2021-29505 POC: http://x-stream.github.io/CVE-2021-29505.html\r\n\r\nCredits: V3geB1rd, white hat hacker from Tencent Security Response Center found and reported the issue to XStream and provided the required information to reproduce it. =||= Thanks for the report and for the fix, appreciate it. =||= "], ["1397", "Upgrade xstream-1.4.16 to 1.4.17 for CVE-2021-29505.", "\u5f20\u9038\u626c", "gdut-yy", "05/21/21, 11:39:47 PM", "Upgrade xstream-1.4.16 to 1.4.17 for CVE-2021-29505.\r\n\r\nhttps://github.com/Netflix/eureka/issues/1396", "Please use \"Squash Merge\", I can only commit one file at a time to the GitHub Web page.  =||= "], ["1398", "After instance is registered with OUT_OF_SERVICE, following UP hartbeats are ignored", "Olga Maciaszek-Sharma", "OlgaMaciaszek", "05/25/21, 10:31:17 PM", "We've had [this issue](https://github.com/spring-cloud/spring-cloud-netflix/issues/3941) created in Spring Cloud Netflix. The root cause seems to be that after the service registers with `OUT_OF_SERVICE` any following `UP` heartbeats are being ignored (see [comment](https://github.com/spring-cloud/spring-cloud-netflix/issues/3941#issuecomment-747322635)). ", "This is not a bug, but an invalid transition performed by the Eureka client, the client may not report this status itself, it's a reserved server status, have the client report `STARTING -> UP` to signal readiness, see more detailed description in the linked issue. Closing. =||= "], ["1401", "Update AbstractJerseyEurekaHttpClient log info", "iZDT", "izdt", "06/09/21, 05:45:32 PM", "serviceUrl has been add \"/\" at the end by org.springframework.cloud.netflix.eureka.EurekaClientConfigBean#getEurekaServerServiceUrls.\r\n\r\n```\r\nif (!endsWithSlash(eurekaServiceUrl)) {\r\n\teurekaServiceUrl += \"/\";\r\n}\r\n```\r\n\r\nfix the log of  \"eureka//apps\"...", "Thanks. =||= "], ["1402", "allow null values for healthcheck", "Sergey Krutsko", "krutsko", "06/11/21, 04:46:58 PM", "This change is needed to allow override `getHealthCheckUrl()` in InstanceConfig class, so `healthCheckUrl` won't be added to instance info of eureka registry.\r\n\r\ni.e. \r\n```\r\n    @Override\r\n    public String getHealthCheckUrl() {\r\n        return null;\r\n    }\r\n```", "NaN"], ["1403", "Upgrade xstream version from: 1.4.16 to 1.4.17 and jackson", null, "AmitAmar", "06/15/21, 06:52:37 AM", "NaN", "We already had this discussion here https://github.com/Netflix/eureka/pull/1388\r\nunsure what you're trying to merge? We agreed to not to move multiple dev branches up? Please provide more context. =||= Hi @troshko111 ,\r\n\r\nI remember our conversation. I thought you don't want to move multiple dev branches up just one time before your last release. \r\nI'm sorry. I'll create a new merge request.\r\n\r\nBR,\r\n\r\nAmit. =||= "], ["1404", "Upgrade jacksonVersion and xstream.", null, "AmitAmar", "06/17/21, 08:55:41 AM", "NaN", "This is now a no-op after the rebase on top of the origin/master, do you want to close it now? =||= "], ["1405", "refactor: use diamond operator", "Gregor Riegler", "gregorriegler", "06/16/21, 11:07:13 PM", "Co-authored-by: Moderne <team@moderne.io>", "Ok, I went through the changes and reverted the ones where no type-info was left. =||= "], ["1406", "Upgrade xstream", null, "AmitAmar", "06/17/21, 04:45:33 PM", "NaN", "This is already at `1.4.17`, see https://github.com/Netflix/eureka/blob/master/eureka-client/build.gradle#L10\r\n\r\nPlease make sure to rebase on top of origin/master before submitting a PR. =||= Sorry for that. problems with git.\r\nThanks and have a nice day,\r\nBR,\r\nAmit. =||= "], ["1409", "fix jackson version - WS.", null, "AmitAmar", "06/23/21, 08:20:16 AM", "NaN", "Jackson is a big transitive dependency, I'm inclined to move slower here than 2 branches up. This also needs some validation to make sure nothing breaks. What's your motivation to move to this version? =||= Hi @troshko111 .\r\n\r\nI'm inclined to move faster in Jackson versions because there are a lot of vulnerabilities in Jackson.\r\n\r\nWe are using WhiteSource and it seems we need to upgrade to the latest version of Jackson.\r\n\r\nIn our system we already done this upgrade, we want to upgrade Jackson in Eureka as well.\r\n\r\nLet me know if you see any problem with that. you want to wait some time for testing?\r\n\r\nBR,\r\n\r\nAmit. =||= I'd expect a change like this to land in a new minor (1.11.x) =||= This is your decision of course,\r\nI think we should fix it soon as possible but if it risky from your side I'll close the PR.\r\n\r\nThanks,\r\n\r\nAmit. =||= > I'm inclined to move faster in Jackson versions because there are a lot of vulnerabilities in Jackson.\r\n\r\nJackson backports vuln fixes, is there anything in particular?\r\n\r\n> In our system we already done this upgrade, we want to upgrade Jackson in Eureka as well.\r\n\r\nYou can always force a different Jackson version in your built, irrespecutful of what Eureka version is, right?\r\n\r\n> I think we should fix it soon as possible but if it risky from your side I'll close the PR.\r\n\r\nAgain I agree we want vulns patches, but based on my understanding 2.10 is still being security patched:\r\n\r\n```\r\n2.10: nominally open branch but unlikely to get new full patches beyond 2.10.5\r\nMicro-patches possible for critical fixes like security patches\r\n```\r\n\r\nfrom https://github.com/FasterXML/jackson/wiki/Jackson-Releases\r\n\r\nWe can move up to `2.11` once security patches stop coming to `2.10`, that's what we did before, makes sure we're both patched and minimally depending.  =||= Hi,\r\n\r\nAfter checking it again you are right and it seems that 2.10 is safe to use.\r\nI'll upgrade it again in the future if it will be necessary.\r\n\r\nThanks again and have a nice day,\r\nAmit.  =||= "], ["1411", "Refactor: use diamond operator", "Aravindh Rajagopalan", "schrosolver", "06/26/21, 12:40:33 PM", "NaN", "NaN"], ["1412", "Refactor: use diamond operator", "Aravindh Rajagopalan", "schrosolver", "06/30/21, 06:17:58 AM", "NaN", "Just FYI that these sort of changes are best to do in one go, I'd like to avoid a large number of PRs with the same logical change as it negatively affects the history. Thanks! =||= > Just FYI that these sort of changes are best to do in one go, I'd like to avoid a large number of PRs with the same logical change as it negatively affects the history. Thanks!\r\n\r\nThanks! Will keep this in mind. Checked the last merged PR and saw there were few misses, so thought will add them too.  =||= "], ["1413", "Refactor: Replaced redundant String BlankorNull checks", "Aravindh Rajagopalan", "schrosolver", "06/26/21, 01:23:02 PM", "Replaced redundant null or blank checks by adding a method for check in StringUtils and calling it.", "NaN"], ["1415", "refactor: JUnit Jupiter migration from JUnit 4.x", "Jonathan Schneider", "jkschneider", "08/12/21, 06:12:29 PM", "\ud83d\udc4b This PR will get you most of the way there to JUnit 5 from JUnit 4. We'd just need to migrate `DiscoveryClientResource` and `SimpleEurekaHttpServerResource` which don't have direct analogs in JUnit 5. Shouldn't be very difficult to complete from here, but hopefully this takes away most of the grueling work.\r\n\r\nCo-authored-by: Moderne <team@moderne.io>", "This looks pretty harmless / low risk, but at the same time I wonder what the benefits are? =||= Hi @troshko111. Just trying to help so Eureka isn't built on a stale unsupported core testing framework? Feel free to close if you wish. =||= I went over the PR and it looks good to me, I don't really see any issue with using `JUnit 4` regardless of its support status as it's not part of the running service, so there's no risk of CVEs and such, basically it does not matter how (un)supported it is, it works just fine. \r\n\r\nGiven the number of new tests written, and potential benefit of using the new `JUnit` version there, such effort is unlikely to ever pay off, but it's already done so why not. Re-running and merging if all passes.  =||= Oh I see what you meant in the original PR message, this _does require changes before it can land_ (it does not compile as-is due to those two types not being migrated). In this case I can keep it open in case you / anyone else wants to drive it past the finish line, but I don't remember anyone expressing interest before, so if you won't be getting it into a mergeable state, I will probably close. =||= Feel free to close. It's a disappointing attitude toward the codebase, to be honest, and adds to the feeling that Eureka may be barely maintained. I thought having done most of the heavy lifting, it would be an easy win. =||= It's unfortunate you feel this way, but in general we prefer _compiling PRs_ (all checks must pass), if this was a high value change I could see us taking it from here, but per my earlier response the value is debatable plus this does not compile, so closing. In the future, one easy way to avoid this situation is to open an issue first, have a discussion and alignment, and only then proceed with heavy lifting, once it's clear the change/scope is agreed upon. =||= "], ["1416", "\u8bbf\u95eeeureka\u4e3b\u9875\u51fa\u73b0Whitelabel Error Page", null, "Radioactive821", "08/03/21, 05:43:06 PM", "NaN", "NaN"], ["1417", "Enable setting a EurekaClient instance in DiscoveryManager", "Asi Bross", "asibross", "08/05/21, 09:17:27 PM", "NaN", "NaN"], ["1418", "Remove TravisCI and use Github Actions", "Roberto Perez Alcolea", "rpalcolea", "08/17/21, 06:47:55 PM", "NaN", "NaN"], ["1420", "Fix xstream security issue CVE-2021-39139", "chi-chi weng", "wcc526", "08/23/21, 04:51:19 PM", "Fix xstream security issue CVE-2021-39139\r\n\r\nhttps://x-stream.github.io/security.html", "Thanks, merged. =||= "], ["1421", "Xstream deserialization vulnerability exists", null, "LvK8", "08/23/21, 04:51:45 PM", "XStream all versions until and including version 1.4.17 are affected, if using the version out of the box. The latest version of Eureka-client uses XStream 1.4.17. This version has CVE-2021-39141 vulnerability. Please fix it immediately!\r\nhttps://x-stream.github.io/CVE-2021-39141.html\r\nhttps://github.com/Netflix/eureka/blob/master/eureka-client/src/main/java/com/netflix/discovery/converters/EntityBodyConverter.java\r\nhttps://github.com/Netflix/eureka/blob/master/eureka-client/build.gradle", "Can I submit this vulnerability to Bugcrowd and apply for CVE? =||= Do you mean apply for a CVE in Eureka due to its dependency on a library which is known to have the actual CVE itself? I have not seen this commonly done tbh, otherwise pretty much all software will transitively be vulnerable at some version via some direct/indirect dependency.  =||= Thank you very much for your advice, but eureka does have this security vulnerability, can I submit this vulnerability on Bugcrowd? =||= There are two things here, one is Bugcrowd usage in general:\r\n\r\n1. Typically we do accept issues for our OSS projects in Bugcrowd. Specifically for this issue it was reported prior to you sending it to us here, and we only reward the first reporter. In the future, we encourage you to send issues directly to Bugcrowd and we'll evaluate them against our program's criteria.\r\n\r\nSecond is regarding CVEs for outdated libs being used:\r\n\r\n2. As for CVEs we don't typically create them for out of date libraries we use like this, but depending on the vulnerability, we do create them for issues in our own code.\r\n\r\nThanks again and we hope to see your future submissions on Bugcrowd. =||= "], ["1423", "Action execution failed Parameters:", "usman naeem", "usmanbinnaeem", "08/30/21, 03:31:34 PM", "Hey!  I created a pipeline for my cdk-backend in which i am using APIGateway, lambda functions and dynamodb.\r\nI am getting this error in my deploying stage:\r\n\r\nAction execution failed\r\nParameters: [AssetParameters74e1c940fa063c9ea88baaaa5bc6287dd4ee1ff6bb7cd9c66f2afb92067be00dS3Bucket3DC33554, AssetParameters74e1c940fa063c9ea88baaaa5bc6287dd4ee1ff6bb7cd9c66f2afb92067be00dS3VersionKey27AA43A8, AssetParameters74e1c940fa063c9ea88baaaa5bc6287dd4ee1ff6bb7cd9c66f2afb92067be00dArtifactHash4EED51D1] must have values (Service: AmazonCloudFormation; Status Code: 400; Error Code: ValidationError; Request ID: 8733cfcc-6c3f-4260-a968-9ecb546c972a; Proxy: null)\r\n\r\n\r\n![Screenshot from 2021-08-30 14-27-42](https://user-images.githubusercontent.com/61014982/131318253-5b06a01d-5cc8-40a1-924a-5eb8d2c03efd.png)\r\n![Screenshot from 2021-08-30 14-28-03](https://user-images.githubusercontent.com/61014982/131318261-1ae5f5ee-cc6d-4626-9673-04fcabc28c4a.png)\r\n\r", "I don't see how this is related to Eureka, and even if this were, given 0 details it won't be possible to help. =||= "]]